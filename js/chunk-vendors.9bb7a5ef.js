"use strict";(self["webpackChunkshutter"]=self["webpackChunkshutter"]||[]).push([[998],{7164:function(e,t,n){n.d(t,{$:function(){return Gt},A:function(){return l},D:function(){return d},I:function(){return Ge},J:function(){return et},L:function(){return mt},N:function(){return de},P:function(){return Yi},Q:function(){return Tt},R:function(){return zi},U:function(){return At},V:function(){return Nt},W:function(){return Ot},X:function(){return xt},Y:function(){return Lt},Z:function(){return $t},_:function(){return Bt},a:function(){return ei},a0:function(){return Qt},a1:function(){return Yt},a2:function(){return Jt},a3:function(){return rn},a4:function(){return on},a5:function(){return an},a6:function(){return cn},a7:function(){return ln},a8:function(){return un},a9:function(){return hn},aA:function(){return C},aB:function(){return xs},aC:function(){return ue},aD:function(){return pe},aE:function(){return Ts},aF:function(){return ms},aG:function(){return fs},aH:function(){return He},aL:function(){return ii},aO:function(){return Pt},aa:function(){return dn},ab:function(){return pn},ac:function(){return fn},ad:function(){return gn},ae:function(){return vn},af:function(){return yn},ai:function(){return wn},aj:function(){return bn},ak:function(){return In},an:function(){return qt},ao:function(){return On},aq:function(){return Mn},ar:function(){return Hn},as:function(){return T},at:function(){return Ce},au:function(){return we},av:function(){return y},aw:function(){return or},ax:function(){return Ds},ay:function(){return Se},az:function(){return _},b:function(){return Xn},c:function(){return rs},d:function(){return as},e:function(){return os},f:function(){return ys},g:function(){return Is},h:function(){return ws},i:function(){return Ti},j:function(){return Ss},k:function(){return ur},l:function(){return Zi},m:function(){return pr},o:function(){return kr},p:function(){return c},r:function(){return Ki},s:function(){return Wi},u:function(){return Qi},x:function(){return Rn}});var i=n(4444),s=n(5816);function r(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(e);s<i.length;s++)t.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(e,i[s])&&(n[i[s]]=e[i[s]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var o=n(3333),a=n(8463);
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const c={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},l={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function u(){return{["admin-restricted-operation"]:"This operation is restricted to administrators only.",["argument-error"]:"",["app-not-authorized"]:"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.",["app-not-installed"]:"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.",["captcha-check-failed"]:"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.",["code-expired"]:"The SMS code has expired. Please re-send the verification code to try again.",["cordova-not-ready"]:"Cordova framework is not ready.",["cors-unsupported"]:"This browser is not supported.",["credential-already-in-use"]:"This credential is already associated with a different user account.",["custom-token-mismatch"]:"The custom token corresponds to a different audience.",["requires-recent-login"]:"This operation is sensitive and requires recent authentication. Log in again before retrying this request.",["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.",["dynamic-link-not-activated"]:"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.",["email-change-needs-verification"]:"Multi-factor users must always have a verified email.",["email-already-in-use"]:"The email address is already in use by another account.",["emulator-config-failed"]:'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',["expired-action-code"]:"The action code has expired.",["cancelled-popup-request"]:"This operation has been cancelled due to another conflicting popup being opened.",["internal-error"]:"An internal AuthError has occurred.",["invalid-app-credential"]:"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.",["invalid-app-id"]:"The mobile app identifier is not registed for the current project.",["invalid-user-token"]:"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.",["invalid-auth-event"]:"An internal AuthError has occurred.",["invalid-verification-code"]:"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.",["invalid-continue-uri"]:"The continue URL provided in the request is invalid.",["invalid-cordova-configuration"]:"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.",["invalid-custom-token"]:"The custom token format is incorrect. Please check the documentation.",["invalid-dynamic-link-domain"]:"The provided dynamic link domain is not configured or authorized for the current project.",["invalid-email"]:"The email address is badly formatted.",["invalid-emulator-scheme"]:"Emulator URL must start with a valid scheme (http:// or https://).",["invalid-api-key"]:"Your API key is invalid, please check you have copied it correctly.",["invalid-cert-hash"]:"The SHA-1 certificate hash provided is invalid.",["invalid-credential"]:"The supplied auth credential is malformed or has expired.",["invalid-message-payload"]:"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-multi-factor-session"]:"The request does not contain a valid proof of first factor successful sign-in.",["invalid-oauth-provider"]:"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.",["invalid-oauth-client-id"]:"The OAuth client ID provided is either invalid or does not match the specified API key.",["unauthorized-domain"]:"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.",["invalid-action-code"]:"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.",["wrong-password"]:"The password is invalid or the user does not have a password.",["invalid-persistence-type"]:"The specified persistence type is invalid. It can only be local, session or none.",["invalid-phone-number"]:"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].",["invalid-provider-id"]:"The specified provider ID is invalid.",["invalid-recipient-email"]:"The email corresponding to this action failed to send as the provided recipient email address is invalid.",["invalid-sender"]:"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-verification-id"]:"The verification ID used to create the phone auth credential is invalid.",["invalid-tenant-id"]:"The Auth instance's tenant ID is invalid.",["login-blocked"]:"Login blocked by user-provided method: {$originalMessage}",["missing-android-pkg-name"]:"An Android Package Name must be provided if the Android App is required to be installed.",["auth-domain-config-required"]:"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.",["missing-app-credential"]:"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.",["missing-verification-code"]:"The phone auth credential was created with an empty SMS verification code.",["missing-continue-uri"]:"A continue URL must be provided in the request.",["missing-iframe-start"]:"An internal AuthError has occurred.",["missing-ios-bundle-id"]:"An iOS Bundle ID must be provided if an App Store ID is provided.",["missing-or-invalid-nonce"]:"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.",["missing-password"]:"A non-empty password must be provided",["missing-multi-factor-info"]:"No second factor identifier is provided.",["missing-multi-factor-session"]:"The request is missing proof of first factor successful sign-in.",["missing-phone-number"]:"To send verification codes, provide a phone number for the recipient.",["missing-verification-id"]:"The phone auth credential was created with an empty verification ID.",["app-deleted"]:"This instance of FirebaseApp has been deleted.",["multi-factor-info-not-found"]:"The user does not have a second factor matching the identifier provided.",["multi-factor-auth-required"]:"Proof of ownership of a second factor is required to complete sign-in.",["account-exists-with-different-credential"]:"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.",["network-request-failed"]:"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.",["no-auth-event"]:"An internal AuthError has occurred.",["no-such-provider"]:"User was not linked to an account with the given provider.",["null-user"]:"A null user object was provided as the argument for an operation which requires a non-null user object.",["operation-not-allowed"]:"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.",["operation-not-supported-in-this-environment"]:'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',["popup-blocked"]:"Unable to establish a connection with the popup. It may have been blocked by the browser.",["popup-closed-by-user"]:"The popup has been closed by the user before finalizing the operation.",["provider-already-linked"]:"User can only be linked to one identity for the given provider.",["quota-exceeded"]:"The project's quota for this operation has been exceeded.",["redirect-cancelled-by-user"]:"The redirect operation has been cancelled by the user before finalizing.",["redirect-operation-pending"]:"A redirect sign-in operation is already pending.",["rejected-credential"]:"The request contains malformed or mismatching credentials.",["second-factor-already-in-use"]:"The second factor is already enrolled on this account.",["maximum-second-factor-count-exceeded"]:"The maximum allowed number of second factors on a user has been exceeded.",["tenant-id-mismatch"]:"The provided tenant ID does not match the Auth instance's tenant ID",["timeout"]:"The operation has timed out.",["user-token-expired"]:"The user's credential is no longer valid. The user must sign in again.",["too-many-requests"]:"We have blocked all requests from this device due to unusual activity. Try again later.",["unauthorized-continue-uri"]:"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.",["unsupported-first-factor"]:"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.",["unsupported-persistence-type"]:"The current environment does not support the specified persistence type.",["unsupported-tenant-operation"]:"This operation is not supported in a multi-tenant context.",["unverified-email"]:"The operation requires a verified email.",["user-cancelled"]:"The user did not grant your application the permissions it requested.",["user-not-found"]:"There is no user record corresponding to this identifier. The user may have been deleted.",["user-disabled"]:"The user account has been disabled by an administrator.",["user-mismatch"]:"The supplied credentials do not correspond to the previously signed in user.",["user-signed-out"]:"",["weak-password"]:"The password must be 6 characters long or more.",["web-storage-unsupported"]:"This browser is not supported or 3rd party cookies and data may be disabled.",["already-initialized"]:"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.",["missing-recaptcha-token"]:"The reCAPTCHA token is missing when sending request to the backend.",["invalid-recaptcha-token"]:"The reCAPTCHA token is invalid when sending request to the backend.",["invalid-recaptcha-action"]:"The reCAPTCHA action is invalid when sending request to the backend.",["recaptcha-not-enabled"]:"reCAPTCHA Enterprise integration is not enabled for this project.",["missing-client-type"]:"The reCAPTCHA client type is missing when sending request to the backend.",["missing-recaptcha-version"]:"The reCAPTCHA version is missing when sending request to the backend.",["invalid-req-type"]:"Invalid request parameters.",["invalid-recaptcha-version"]:"The reCAPTCHA version is invalid when sending request to the backend."}}function h(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const d=u,p=h,f=new i.LL("auth","Firebase",h()),m=new o.Yd("@firebase/auth");function g(e,...t){m.logLevel<=o["in"].WARN&&m.warn(`Auth (${s.SDK_VERSION}): ${e}`,...t)}function v(e,...t){m.logLevel<=o["in"].ERROR&&m.error(`Auth (${s.SDK_VERSION}): ${e}`,...t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y(e,...t){throw I(e,...t)}function _(e,...t){return I(e,...t)}function w(e,t,n){const s=Object.assign(Object.assign({},p()),{[t]:n}),r=new i.LL("auth","Firebase",s);return r.create(t,{appName:e.name})}function b(e,t,n){const i=n;if(!(t instanceof i))throw i.name!==t.constructor.name&&y(e,"argument-error"),w(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function I(e,...t){if("string"!==typeof e){const n=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(n,...i)}return f.create(e,...t)}function C(e,t,...n){if(!e)throw I(t,...n)}function S(e){const t="INTERNAL ASSERTION FAILED: "+e;throw v(t),new Error(t)}function T(e,t){e||S(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function k(){return"http:"===x()||"https:"===x()}function x(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(k()||(0,i.ru)()||"connection"in navigator))||navigator.onLine}function N(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e,t){this.shortDelay=e,this.longDelay=t,T(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,i.uI)()||(0,i.b$)()}get(){return A()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D(e,t){T(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void S("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void S("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void S("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R={["CREDENTIAL_MISMATCH"]:"custom-token-mismatch",["MISSING_CUSTOM_TOKEN"]:"internal-error",["INVALID_IDENTIFIER"]:"invalid-email",["MISSING_CONTINUE_URI"]:"internal-error",["INVALID_PASSWORD"]:"wrong-password",["MISSING_PASSWORD"]:"missing-password",["EMAIL_EXISTS"]:"email-already-in-use",["PASSWORD_LOGIN_DISABLED"]:"operation-not-allowed",["INVALID_IDP_RESPONSE"]:"invalid-credential",["INVALID_PENDING_TOKEN"]:"invalid-credential",["FEDERATED_USER_ID_ALREADY_LINKED"]:"credential-already-in-use",["MISSING_REQ_TYPE"]:"internal-error",["EMAIL_NOT_FOUND"]:"user-not-found",["RESET_PASSWORD_EXCEED_LIMIT"]:"too-many-requests",["EXPIRED_OOB_CODE"]:"expired-action-code",["INVALID_OOB_CODE"]:"invalid-action-code",["MISSING_OOB_CODE"]:"internal-error",["CREDENTIAL_TOO_OLD_LOGIN_AGAIN"]:"requires-recent-login",["INVALID_ID_TOKEN"]:"invalid-user-token",["TOKEN_EXPIRED"]:"user-token-expired",["USER_NOT_FOUND"]:"user-token-expired",["TOO_MANY_ATTEMPTS_TRY_LATER"]:"too-many-requests",["INVALID_CODE"]:"invalid-verification-code",["INVALID_SESSION_INFO"]:"invalid-verification-id",["INVALID_TEMPORARY_PROOF"]:"invalid-credential",["MISSING_SESSION_INFO"]:"missing-verification-id",["SESSION_EXPIRED"]:"code-expired",["MISSING_ANDROID_PACKAGE_NAME"]:"missing-android-pkg-name",["UNAUTHORIZED_DOMAIN"]:"unauthorized-continue-uri",["INVALID_OAUTH_CLIENT_ID"]:"invalid-oauth-client-id",["ADMIN_ONLY_OPERATION"]:"admin-restricted-operation",["INVALID_MFA_PENDING_CREDENTIAL"]:"invalid-multi-factor-session",["MFA_ENROLLMENT_NOT_FOUND"]:"multi-factor-info-not-found",["MISSING_MFA_ENROLLMENT_ID"]:"missing-multi-factor-info",["MISSING_MFA_PENDING_CREDENTIAL"]:"missing-multi-factor-session",["SECOND_FACTOR_EXISTS"]:"second-factor-already-in-use",["SECOND_FACTOR_LIMIT_EXCEEDED"]:"maximum-second-factor-count-exceeded",["BLOCKING_FUNCTION_ERROR_RESPONSE"]:"internal-error",["RECAPTCHA_NOT_ENABLED"]:"recaptcha-not-enabled",["MISSING_RECAPTCHA_TOKEN"]:"missing-recaptcha-token",["INVALID_RECAPTCHA_TOKEN"]:"invalid-recaptcha-token",["INVALID_RECAPTCHA_ACTION"]:"invalid-recaptcha-action",["MISSING_CLIENT_TYPE"]:"missing-client-type",["MISSING_RECAPTCHA_VERSION"]:"missing-recaptcha-version",["INVALID_RECAPTCHA_VERSION"]:"invalid-recaptcha-version",["INVALID_REQ_TYPE"]:"invalid-req-type"},L=new O(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function M(e,t,n,s,r={}){return F(e,r,(async()=>{let r={},o={};s&&("GET"===t?o=s:r={body:JSON.stringify(s)});const a=(0,i.xO)(Object.assign({key:e.config.apiKey},o)).slice(1),c=await e._getAdditionalHeaders();return c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode),P.fetch()(B(e,e.config.apiHost,n,a),Object.assign({method:t,headers:c,referrerPolicy:"no-referrer"},r))}))}async function F(e,t,n){e._canInitEmulator=!1;const s=Object.assign(Object.assign({},R),t);try{const t=new U(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const r=await i.json();if("needConfirmation"in r)throw j(e,"account-exists-with-different-credential",r);if(i.ok&&!("errorMessage"in r))return r;{const t=i.ok?r.errorMessage:r.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw j(e,"credential-already-in-use",r);if("EMAIL_EXISTS"===n)throw j(e,"email-already-in-use",r);if("USER_DISABLED"===n)throw j(e,"user-disabled",r);const a=s[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw w(e,a,o);y(e,a)}}catch(r){if(r instanceof i.ZR)throw r;y(e,"network-request-failed",{message:String(r)})}}async function V(e,t,n,i,s={}){const r=await M(e,t,n,i,s);return"mfaPendingCredential"in r&&y(e,"multi-factor-auth-required",{_serverResponse:r}),r}function B(e,t,n,i){const s=`${t}${n}?${i}`;return e.config.emulator?D(e.config,s):`${e.config.apiScheme}://${s}`}class U{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(_(this.auth,"network-request-failed"))),L.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function j(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=_(e,t,i);return s.customData._tokenResponse=n,s}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z(e,t){return M(e,"POST","/v1/accounts:delete",t)}async function q(e,t){return M(e,"POST","/v1/accounts:update",t)}async function H(e,t){return M(e,"POST","/v1/accounts:lookup",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z(e,t=!1){const n=(0,i.m9)(e),s=await n.getIdToken(t),r=G(s);C(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o="object"===typeof r.firebase?r.firebase:void 0,a=null===o||void 0===o?void 0:o["sign_in_provider"];return{claims:r,token:s,authTime:W(K(r.auth_time)),issuedAtTime:W(K(r.iat)),expirationTime:W(K(r.exp)),signInProvider:a||null,signInSecondFactor:(null===o||void 0===o?void 0:o["sign_in_second_factor"])||null}}function K(e){return 1e3*Number(e)}function G(e){const[t,n,s]=e.split(".");if(void 0===t||void 0===n||void 0===s)return v("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,i.tV)(n);return e?JSON.parse(e):(v("Failed to decode base64 JWT payload"),null)}catch(r){return v("Caught error parsing JWT payload as JSON",null===r||void 0===r?void 0:r.toString()),null}}function Q(e){const t=G(e);return C(t,"internal-error"),C("undefined"!==typeof t.exp,"internal-error"),C("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y(e,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof i.ZR&&X(s)&&e.auth.currentUser===e&&await e.auth.signOut(),s}}function X({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0,n=e-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null===e||void 0===e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=W(this.lastLoginAt),this.creationTime=W(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function te(e){var t;const n=e.auth,i=await e.getIdToken(),s=await Y(e,H(n,{idToken:i}));C(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const r=s.users[0];e._notifyReloadListener(r);const o=(null===(t=r.providerUserInfo)||void 0===t?void 0:t.length)?se(r.providerUserInfo):[],a=ie(e.providerData,o),c=e.isAnonymous,l=!(e.email&&r.passwordHash)&&!(null===a||void 0===a?void 0:a.length),u=!!c&&l,h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new ee(r.createdAt,r.lastLoginAt),isAnonymous:u};Object.assign(e,h)}async function ne(e){const t=(0,i.m9)(e);await te(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function ie(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}function se(e){return e.map((e=>{var{providerId:t}=e,n=r(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function re(e,t){const n=await F(e,{},(async()=>{const n=(0,i.xO)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:s,apiKey:r}=e.config,o=B(e,s,"/v1/token",`key=${r}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",P.fetch()(o,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){C(e.idToken,"internal-error"),C("undefined"!==typeof e.idToken,"internal-error"),C("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Q(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return C(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:s}=await re(e,t);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:s}=t,r=new oe;return n&&(C("string"===typeof n,"internal-error",{appName:e}),r.refreshToken=n),i&&(C("string"===typeof i,"internal-error",{appName:e}),r.accessToken=i),s&&(C("number"===typeof s,"internal-error",{appName:e}),r.expirationTime=s),r}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new oe,this.toJSON())}_performRefresh(){return S("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(e,t){C("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class ce{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,s=r(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new J(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ee(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Y(this,this.stsTokenManager.getToken(this.auth,e));return C(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Z(this,e)}reload(){return ne(this)}_assign(e){this!==e&&(C(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ce(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){C(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await te(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Y(this,z(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,s,r,o,a,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(i=t.email)&&void 0!==i?i:void 0,d=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,p=null!==(r=t.photoURL)&&void 0!==r?r:void 0,f=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:y,emailVerified:_,isAnonymous:w,providerData:b,stsTokenManager:I}=t;C(y&&I,e,"internal-error");const S=oe.fromJSON(this.name,I);C("string"===typeof y,e,"internal-error"),ae(u,e.name),ae(h,e.name),C("boolean"===typeof _,e,"internal-error"),C("boolean"===typeof w,e,"internal-error"),ae(d,e.name),ae(p,e.name),ae(f,e.name),ae(m,e.name),ae(g,e.name),ae(v,e.name);const T=new ce({uid:y,auth:e,email:h,emailVerified:_,displayName:u,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:f,stsTokenManager:S,createdAt:g,lastLoginAt:v});return b&&Array.isArray(b)&&(T.providerData=b.map((e=>Object.assign({},e)))),m&&(T._redirectEventId=m),T}static async _fromIdTokenResponse(e,t,n=!1){const i=new oe;i.updateFromServerResponse(t);const s=new ce({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await te(s),s}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le=new Map;function ue(e){T(e instanceof Function,"Expected a class definition");let t=le.get(e);return t?(T(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,le.set(e,t),t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}he.type="NONE";const de=he;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pe(e,t,n){return`firebase:${e}:${t}:${n}`}class fe{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=pe(this.userKey,i.apiKey,s),this.fullPersistenceKey=pe("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ce._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new fe(ue(de),e,n);const i=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let s=i[0]||ue(de);const r=pe(n,e.config.apiKey,e.name);let o=null;for(const l of t)try{const t=await l._get(r);if(t){const n=ce._fromJSON(e,t);l!==s&&(o=n),s=l;break}}catch(c){}const a=i.filter((e=>e._shouldAllowMigration));return s._shouldAllowMigration&&a.length?(s=a[0],o&&await s._set(r,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==s)try{await e._remove(r)}catch(c){}}))),new fe(s,e,n)):new fe(s,e,n)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(_e(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ge(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(be(t))return"Blackberry";if(Ie(t))return"Webos";if(ve(t))return"Safari";if((t.includes("chrome/")||ye(t))&&!t.includes("edge/"))return"Chrome";if(we(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function ge(e=(0,i.z$)()){return/firefox\//i.test(e)}function ve(e=(0,i.z$)()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ye(e=(0,i.z$)()){return/crios\//i.test(e)}function _e(e=(0,i.z$)()){return/iemobile/i.test(e)}function we(e=(0,i.z$)()){return/android/i.test(e)}function be(e=(0,i.z$)()){return/blackberry/i.test(e)}function Ie(e=(0,i.z$)()){return/webos/i.test(e)}function Ce(e=(0,i.z$)()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Se(e=(0,i.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}function Te(e=(0,i.z$)()){var t;return Ce(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}function Ee(){return(0,i.w1)()&&10===document.documentMode}function ke(e=(0,i.z$)()){return Ce(e)||we(e)||Ie(e)||be(e)||/windows phone/i.test(e)||_e(e)}function xe(){try{return!(!window||window===window.top)}catch(e){return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(e,t=[]){let n;switch(e){case"Browser":n=me((0,i.z$)());break;case"Worker":n=`${me((0,i.z$)())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${s.SDK_VERSION}/${r}`}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ne(e){return(await M(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function Oe(e,t){return M(e,"GET","/v2/recaptchaConfig",$(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function De(e){return void 0!==e&&void 0!==e.getResponse}function Pe(e){return void 0!==e&&void 0!==e.enterprise}class Re{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some((e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}function $e(e){return new Promise(((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=e=>{const t=_("internal-error");t.customData=e,n(t)},i.type="text/javascript",i.charset="UTF-8",Le().appendChild(i)}))}function Me(e){return`__${e}${Math.floor(1e6*Math.random())}`}const Fe="https://www.google.com/recaptcha/enterprise.js?render=",Ve="recaptcha-enterprise",Be="NO_RECAPTCHA";class Ue{constructor(e){this.type=Ve,this.auth=He(e)}async verify(e="verify",t=!1){async function n(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Oe(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((i=>{if(void 0!==i.recaptchaKey){const n=new Re(i);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))}function i(t,n,i){const s=window.grecaptcha;Pe(s)?s.enterprise.ready((()=>{s.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n(Be)}))})):i(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,s)=>{n(this.auth).then((n=>{if(!t&&Pe(window.grecaptcha))i(n,e,s);else{if("undefined"===typeof window)return void s(new Error("RecaptchaVerifier is only supported in browser"));$e(Fe+n).then((()=>{i(n,e,s)})).catch((e=>{s(e)}))}})).catch((e=>{s(e)}))}))}}async function je(e,t,n,i=!1){const s=new Ue(e);let r;try{r=await s.verify(n)}catch(a){r=await s.verify(n,!0)}const o=Object.assign({},t);return i?Object.assign(o,{captchaResp:r}):Object.assign(o,{captchaResponse:r}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,i)=>{try{const i=e(t);n(i)}catch(s){i(s)}}));n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(i){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new We(this),this.idTokenSubscription=new We(this),this.beforeStateQueue=new ze(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=f,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ue(t)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await fe.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(s){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,r=null===i||void 0===i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==r||!(null===o||void 0===o?void 0:o.user)||(i=o.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(r){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(r)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return C(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await te(e)}catch(t){if("auth/network-request-failed"!==(null===t||void 0===t?void 0:t.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=N()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?(0,i.m9)(e):null;return t&&C(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&C(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(ue(e))}))}async initializeRecaptchaConfig(){const e=await Oe(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new Re(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){const e=new Ue(this);e.verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new i.LL("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ue(e)||this._popupRedirectResolver;C(t,this,"argument-error"),this.redirectPersistenceManager=await fe.create(this,[ue(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t),r=this._isInitialized?Promise.resolve():this._initializationPromise;return C(r,this,"internal-error"),r.then((()=>s(this.currentUser))),"function"===typeof t?e.addObserver(t,n,i):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return C(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ae(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&g(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function He(e){return(0,i.m9)(e)}class We{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,i.ne)((e=>this.observer=e))}get next(){return C(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ze(e,t){const n=(0,s._getProvider)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),s=n.getOptions();if((0,i.vZ)(s,null!==t&&void 0!==t?t:{}))return e;y(e,"already-initialized")}const r=n.initialize({options:t});return r}function Ke(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(ue);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null===t||void 0===t?void 0:t.popupRedirectResolver)}function Ge(e,t,n){const i=He(e);C(i._canInitEmulator,i,"emulator-config-failed"),C(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const s=!!(null===n||void 0===n?void 0:n.disableWarnings),r=Qe(t),{host:o,port:a}=Ye(t),c=null===a?"":`:${a}`;i.config.emulator={url:`${r}//${o}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||Je()}function Qe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ye(e){const t=Qe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const e=s[1];return{host:e,port:Xe(i.substr(e.length+1))}}{const[e,t]=i.split(":");return{host:e,port:Xe(t)}}}function Xe(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Je(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return S("not implemented")}_getIdTokenResponse(e){return S("not implemented")}_linkToIdToken(e,t){return S("not implemented")}_getReauthenticationResolver(e){return S("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tt(e,t){return M(e,"POST","/v1/accounts:resetPassword",$(e,t))}async function nt(e,t){return M(e,"POST","/v1/accounts:update",t)}async function it(e,t){return M(e,"POST","/v1/accounts:update",$(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function st(e,t){return V(e,"POST","/v1/accounts:signInWithPassword",$(e,t))}async function rt(e,t){return M(e,"POST","/v1/accounts:sendOobCode",$(e,t))}async function ot(e,t){return rt(e,t)}async function at(e,t){return rt(e,t)}async function ct(e,t){return rt(e,t)}async function lt(e,t){return rt(e,t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ut(e,t){return V(e,"POST","/v1/accounts:signInWithEmailLink",$(e,t))}async function ht(e,t){return V(e,"POST","/v1/accounts:signInWithEmailLink",$(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt extends et{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new dt(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new dt(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await je(e,n,"signInWithPassword");return st(e,t)}return st(e,n).catch((async t=>{if("auth/missing-recaptcha-token"===t.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await je(e,n,"signInWithPassword");return st(e,t)}return Promise.reject(t)}));case"emailLink":return ut(e,{email:this._email,oobCode:this._password});default:y(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return nt(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return ht(e,{idToken:t,email:this._email,oobCode:this._password});default:y(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pt(e,t){return V(e,"POST","/v1/accounts:signInWithIdp",$(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ft="http://localhost";class mt extends et{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new mt(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):y("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,s=r(t,["providerId","signInMethod"]);if(!n||!i)return null;const o=new mt(n,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return pt(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,pt(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,pt(e,t)}buildRequest(){const e={requestUri:ft,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t["id_token"]=this.idToken),this.accessToken&&(t["access_token"]=this.accessToken),this.secret&&(t["oauth_token_secret"]=this.secret),t["providerId"]=this.providerId,this.nonce&&!this.pendingToken&&(t["nonce"]=this.nonce),e.postBody=(0,i.xO)(t)}return e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gt(e,t){return M(e,"POST","/v1/accounts:sendVerificationCode",$(e,t))}async function vt(e,t){return V(e,"POST","/v1/accounts:signInWithPhoneNumber",$(e,t))}async function yt(e,t){const n=await V(e,"POST","/v1/accounts:signInWithPhoneNumber",$(e,t));if(n.temporaryProof)throw j(e,"account-exists-with-different-credential",n);return n}const _t={["USER_NOT_FOUND"]:"user-not-found"};async function wt(e,t){const n=Object.assign(Object.assign({},t),{operation:"REAUTH"});return V(e,"POST","/v1/accounts:signInWithPhoneNumber",$(e,n),_t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt extends et{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new bt({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new bt({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return vt(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return yt(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return wt(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:s}=e;return n||t||i||s?new bt({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:s}):null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Ct(e){const t=(0,i.zd)((0,i.pd)(e))["link"],n=t?(0,i.zd)((0,i.pd)(t))["deep_link_id"]:null,s=(0,i.zd)((0,i.pd)(e))["deep_link_id"],r=s?(0,i.zd)((0,i.pd)(s))["link"]:null;return r||s||n||t||e}class St{constructor(e){var t,n,s,r,o,a;const c=(0,i.zd)((0,i.pd)(e)),l=null!==(t=c["apiKey"])&&void 0!==t?t:null,u=null!==(n=c["oobCode"])&&void 0!==n?n:null,h=It(null!==(s=c["mode"])&&void 0!==s?s:null);C(l&&u&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=u,this.continueUrl=null!==(r=c["continueUrl"])&&void 0!==r?r:null,this.languageCode=null!==(o=c["languageCode"])&&void 0!==o?o:null,this.tenantId=null!==(a=c["tenantId"])&&void 0!==a?a:null}static parseLink(e){const t=Ct(e);try{return new St(t)}catch(n){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Tt{constructor(){this.providerId=Tt.PROVIDER_ID}static credential(e,t){return dt._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=St.parseLink(t);return C(n,"argument-error"),dt._fromEmailAndCode(e,n.code,n.tenantId)}}Tt.PROVIDER_ID="password",Tt.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Tt.EMAIL_LINK_SIGN_IN_METHOD="emailLink";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Et{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt extends Et{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class xt extends kt{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return C("providerId"in t&&"signInMethod"in t,"argument-error"),mt._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return C(e.idToken||e.accessToken,"argument-error"),mt._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return xt.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return xt.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:i,pendingToken:s,nonce:r,providerId:o}=e;if(!n&&!i&&!t&&!s)return null;if(!o)return null;try{return new xt(o)._credential({idToken:t,accessToken:n,nonce:r,pendingToken:s})}catch(a){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At extends kt{constructor(){super("facebook.com")}static credential(e){return mt._fromParams({providerId:At.PROVIDER_ID,signInMethod:At.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return At.credentialFromTaggedObject(e)}static credentialFromError(e){return At.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return At.credential(e.oauthAccessToken)}catch(t){return null}}}At.FACEBOOK_SIGN_IN_METHOD="facebook.com",At.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Nt extends kt{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return mt._fromParams({providerId:Nt.PROVIDER_ID,signInMethod:Nt.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Nt.credentialFromTaggedObject(e)}static credentialFromError(e){return Nt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Nt.credential(t,n)}catch(i){return null}}}Nt.GOOGLE_SIGN_IN_METHOD="google.com",Nt.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ot extends kt{constructor(){super("github.com")}static credential(e){return mt._fromParams({providerId:Ot.PROVIDER_ID,signInMethod:Ot.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ot.credentialFromTaggedObject(e)}static credentialFromError(e){return Ot.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Ot.credential(e.oauthAccessToken)}catch(t){return null}}}Ot.GITHUB_SIGN_IN_METHOD="github.com",Ot.PROVIDER_ID="github.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Dt="http://localhost";class Pt extends et{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return pt(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,pt(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,pt(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i,pendingToken:s}=t;return n&&i&&s&&n===i?new Pt(n,s):null}static _create(e,t){return new Pt(e,t)}buildRequest(){return{requestUri:Dt,returnSecureToken:!0,pendingToken:this.pendingToken}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rt="saml.";class Lt extends Et{constructor(e){C(e.startsWith(Rt),"argument-error"),super(e)}static credentialFromResult(e){return Lt.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Lt.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Pt.fromJSON(e);return C(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return Pt._create(n,t)}catch(i){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t extends kt{constructor(){super("twitter.com")}static credential(e,t){return mt._fromParams({providerId:$t.PROVIDER_ID,signInMethod:$t.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return $t.credentialFromTaggedObject(e)}static credentialFromError(e){return $t.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return $t.credential(t,n)}catch(i){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function Mt(e,t){return V(e,"POST","/v1/accounts:signUp",$(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$t.TWITTER_SIGN_IN_METHOD="twitter.com",$t.PROVIDER_ID="twitter.com";class Ft{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const s=await ce._fromIdTokenResponse(e,n,i),r=Vt(n),o=new Ft({user:s,providerId:r,_tokenResponse:n,operationType:t});return o}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=Vt(n);return new Ft({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function Vt(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bt(e){var t;const n=He(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Ft({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await Mt(n,{returnSecureToken:!0}),s=await Ft._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(s.user),s}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut extends i.ZR{constructor(e,t,n,i){var s;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Ut.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new Ut(e,t,n,i)}}function jt(e,t,n,i){const s="reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e);return s.catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw Ut._fromErrorAndOperation(e,n,t,i);throw n}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(e){return new Set(e.map((({providerId:e})=>e)).filter((e=>!!e)))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qt(e,t){const n=(0,i.m9)(e);await Wt(!0,n,t);const{providerUserInfo:s}=await q(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),r=zt(s||[]);return n.providerData=n.providerData.filter((e=>r.has(e.providerId))),r.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function Ht(e,t,n=!1){const i=await Y(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ft._forOperation(e,"link",i)}async function Wt(e,t,n){await te(t);const i=zt(t.providerData),s=!1===e?"provider-already-linked":"no-such-provider";C(i.has(n)===e,t.auth,s)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zt(e,t,n=!1){const{auth:i}=e,s="reauthenticate";try{const r=await Y(e,jt(i,s,t,e),n);C(r.idToken,i,"internal-error");const o=G(r.idToken);C(o,i,"internal-error");const{sub:a}=o;return C(e.uid===a,i,"user-mismatch"),Ft._forOperation(e,s,r)}catch(r){throw"auth/user-not-found"===(null===r||void 0===r?void 0:r.code)&&y(i,"user-mismatch"),r}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kt(e,t,n=!1){const i="signIn",s=await jt(e,i,t),r=await Ft._fromIdTokenResponse(e,i,s);return n||await e._updateCurrentUser(r.user),r}async function Gt(e,t){return Kt(He(e),t)}async function Qt(e,t){const n=(0,i.m9)(e);return await Wt(!1,n,t.providerId),Ht(n,t)}async function Yt(e,t){return Zt((0,i.m9)(e),t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xt(e,t){return V(e,"POST","/v1/accounts:signInWithCustomToken",$(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jt(e,t){const n=He(e),i=await Xt(n,{token:t,returnSecureToken:!0}),s=await Ft._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(s.user),s}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?tn._fromServerResponse(e,t):"totpInfo"in t?nn._fromServerResponse(e,t):y(e,"internal-error")}}class tn extends en{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new tn(t)}}class nn extends en{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new nn(t)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(e,t,n){var i;C((null===(i=n.url)||void 0===i?void 0:i.length)>0,e,"invalid-continue-uri"),C("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(C(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(C(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rn(e,t,n){var i;const s=He(e),r={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};if(null===(i=s._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled){const e=await je(s,r,"getOobCode",!0);n&&sn(s,e,n),await at(s,e)}else n&&sn(s,r,n),await at(s,r).catch((async e=>{if("auth/missing-recaptcha-token"!==e.code)return Promise.reject(e);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const e=await je(s,r,"getOobCode",!0);n&&sn(s,e,n),await at(s,e)}}))}async function on(e,t,n){await tt((0,i.m9)(e),{oobCode:t,newPassword:n})}async function an(e,t){await it((0,i.m9)(e),{oobCode:t})}async function cn(e,t){const n=(0,i.m9)(e),s=await tt(n,{oobCode:t}),r=s.requestType;switch(C(r,n,"internal-error"),r){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":C(s.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":C(s.mfaInfo,n,"internal-error");default:C(s.email,n,"internal-error")}let o=null;return s.mfaInfo&&(o=en._fromServerResponse(He(n),s.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===s.requestType?s.newEmail:s.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===s.requestType?s.email:s.newEmail)||null,multiFactorInfo:o},operation:r}}async function ln(e,t){const{data:n}=await cn((0,i.m9)(e),t);return n.email}async function un(e,t,n){var i;const s=He(e),r={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(null===(i=s._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled){const e=await je(s,r,"signUpPassword");o=Mt(s,e)}else o=Mt(s,r).catch((async e=>{if("auth/missing-recaptcha-token"===e.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const e=await je(s,r,"signUpPassword");return Mt(s,e)}return Promise.reject(e)}));const a=await o.catch((e=>Promise.reject(e))),c=await Ft._fromIdTokenResponse(s,"signIn",a);return await s._updateCurrentUser(c.user),c}function hn(e,t,n){return Gt((0,i.m9)(e),Tt.credential(t,n))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dn(e,t,n){var i;const s=He(e),r={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};function o(e,t){C(t.handleCodeInApp,s,"argument-error"),t&&sn(s,e,t)}if(null===(i=s._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled){const e=await je(s,r,"getOobCode",!0);o(e,n),await ct(s,e)}else o(r,n),await ct(s,r).catch((async e=>{if("auth/missing-recaptcha-token"!==e.code)return Promise.reject(e);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const e=await je(s,r,"getOobCode",!0);o(e,n),await ct(s,e)}}))}function pn(e,t){const n=St.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}async function fn(e,t,n){const s=(0,i.m9)(e),r=Tt.credentialWithLink(t,n||E());return C(r._tenantId===(s.tenantId||null),s,"tenant-id-mismatch"),Gt(s,r)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mn(e,t){return M(e,"POST","/v1/accounts:createAuthUri",$(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gn(e,t){const n=k()?E():"http://localhost",s={identifier:t,continueUri:n},{signinMethods:r}=await mn((0,i.m9)(e),s);return r||[]}async function vn(e,t){const n=(0,i.m9)(e),s=await e.getIdToken(),r={requestType:"VERIFY_EMAIL",idToken:s};t&&sn(n.auth,r,t);const{email:o}=await ot(n.auth,r);o!==e.email&&await e.reload()}async function yn(e,t,n){const s=(0,i.m9)(e),r=await e.getIdToken(),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:r,newEmail:t};n&&sn(s.auth,o,n);const{email:a}=await lt(s.auth,o);a!==e.email&&await e.reload()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _n(e,t){return M(e,"POST","/v1/accounts:update",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wn(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const s=(0,i.m9)(e),r=await s.getIdToken(),o={idToken:r,displayName:t,photoUrl:n,returnSecureToken:!0},a=await Y(s,_n(s.auth,o));s.displayName=a.displayName||null,s.photoURL=a.photoUrl||null;const c=s.providerData.find((({providerId:e})=>"password"===e));c&&(c.displayName=s.displayName,c.photoURL=s.photoURL),await s._updateTokensIfNecessary(a)}function bn(e,t){return Cn((0,i.m9)(e),t,null)}function In(e,t){return Cn((0,i.m9)(e),null,t)}async function Cn(e,t,n){const{auth:i}=e,s=await e.getIdToken(),r={idToken:s,returnSecureToken:!0};t&&(r.email=t),n&&(r.password=n);const o=await Y(e,nt(i,r));await e._updateTokensIfNecessary(o,!0)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(e){var t,n;if(!e)return null;const{providerId:i}=e,s=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},r=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!i&&(null===e||void 0===e?void 0:e.idToken)){const i=null===(n=null===(t=G(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n["sign_in_provider"];if(i){const e="anonymous"!==i&&"custom"!==i?i:null;return new Tn(r,e)}}if(!i)return null;switch(i){case"facebook.com":return new kn(r,s);case"github.com":return new xn(r,s);case"google.com":return new An(r,s);case"twitter.com":return new Nn(r,s,e.screenName||null);case"custom":case"anonymous":return new Tn(r,null);default:return new Tn(r,i,s)}}class Tn{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class En extends Tn{constructor(e,t,n,i){super(e,t,n),this.username=i}}class kn extends Tn{constructor(e,t){super(e,"facebook.com",t)}}class xn extends En{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class An extends Tn{constructor(e,t){super(e,"google.com",t)}}class Nn extends En{constructor(e,t,n){super(e,"twitter.com",t,n)}}function On(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:Sn(n)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dn(e,t,n,s){return(0,i.m9)(e).onIdTokenChanged(t,n,s)}function Pn(e,t,n){return(0,i.m9)(e).beforeAuthStateChanged(t,n)}function Rn(e,t,n,s){return(0,i.m9)(e).onAuthStateChanged(t,n,s)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ln{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new Ln("enroll",e,t)}static _fromMfaPendingCredential(e){return new Ln("signin",e)}toJSON(){const e="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[e]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return Ln._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return Ln._fromIdtoken(e.multiFactorSession.idToken)}return null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=He(e),i=t.customData._serverResponse,s=(i.mfaInfo||[]).map((e=>en._fromServerResponse(n,e)));C(i.mfaPendingCredential,n,"internal-error");const r=Ln._fromMfaPendingCredential(i.mfaPendingCredential);return new $n(r,s,(async e=>{const s=await e._process(n,r);delete i.mfaInfo,delete i.mfaPendingCredential;const o=Object.assign(Object.assign({},i),{idToken:s.idToken,refreshToken:s.refreshToken});switch(t.operationType){case"signIn":const e=await Ft._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return C(t.user,n,"internal-error"),Ft._forOperation(t.user,t.operationType,o);default:y(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function Mn(e,t){var n;const s=(0,i.m9)(e),r=t;return C(t.customData.operationType,s,"argument-error"),C(null===(n=r.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,s,"argument-error"),$n._fromError(s,r)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(e,t){return M(e,"POST","/v2/accounts/mfaEnrollment:start",$(e,t))}function Vn(e,t){return M(e,"POST","/v2/accounts/mfaEnrollment:finalize",$(e,t))}function Bn(e,t){return M(e,"POST","/v2/accounts/mfaEnrollment:start",$(e,t))}function Un(e,t){return M(e,"POST","/v2/accounts/mfaEnrollment:finalize",$(e,t))}function jn(e,t){return M(e,"POST","/v2/accounts/mfaEnrollment:withdraw",$(e,t))}class zn{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>en._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new zn(e)}async getSession(){return Ln._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,i=await this.getSession(),s=await Y(this.user,n._process(this.user.auth,i,t));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await Y(this.user,jn(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((({uid:e})=>e!==t)),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(i){throw i}}}const qn=new WeakMap;function Hn(e){const t=(0,i.m9)(e);return qn.has(t)||qn.set(t,zn._fromUser(t)),qn.get(t)}const Wn="__sak";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Wn,"1"),this.storage.removeItem(Wn),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(){const e=(0,i.z$)();return ve(e)||Ce(e)}const Gn=1e3,Qn=10;class Yn extends Zn{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Kn()&&xe(),this.fallbackToPolling=ke(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);Ee()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Qn):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),Gn)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Yn.type="LOCAL";const Xn=Yn;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn extends Zn{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Jn.type="SESSION";const ei=Jn;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ti(e){return Promise.all(e.map((async e=>{try{const t=await e;return{fulfilled:!0,value:t}}catch(t){return{fulfilled:!1,reason:t}}})))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new ni(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:s}=t.data,r=this.handlersMap[i];if(!(null===r||void 0===r?void 0:r.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(r).map((async e=>e(t.origin,s))),a=await ti(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ii(e="",t=10){let n="";for(let i=0;i<t;i++)n+=Math.floor(10*Math.random());return e+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ni.receivers=[];class si{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,r;return new Promise(((o,a)=>{const c=ii("",20);i.port1.start();const l=setTimeout((()=>{a(new Error("unsupported_event"))}),n);r={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),s=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(s),o(t.data.response);break;default:clearTimeout(l),clearTimeout(s),a(new Error("invalid_response"));break}}},this.handlers.add(r),i.port1.addEventListener("message",r.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[i.port2])})).finally((()=>{r&&this.removeMessageHandler(r)}))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(){return window}function oi(e){ri().location.href=e}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ai(){return"undefined"!==typeof ri()["WorkerGlobalScope"]&&"function"===typeof ri()["importScripts"]}async function ci(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{const e=await navigator.serviceWorker.ready;return e.active}catch(e){return null}}function li(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}function ui(){return ai()?self:null}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi="firebaseLocalStorageDb",di=1,pi="firebaseLocalStorage",fi="fbase_key";class mi{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function gi(e,t){return e.transaction([pi],t?"readwrite":"readonly").objectStore(pi)}function vi(){const e=indexedDB.deleteDatabase(hi);return new mi(e).toPromise()}function yi(){const e=indexedDB.open(hi,di);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(pi,{keyPath:fi})}catch(i){n(i)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(pi)?t(n):(n.close(),await vi(),t(await yi()))}))}))}async function _i(e,t,n){const i=gi(e,!0).put({[fi]:t,value:n});return new mi(i).toPromise()}async function wi(e,t){const n=gi(e,!1).get(t),i=await new mi(n).toPromise();return void 0===i?null:i.value}function bi(e,t){const n=gi(e,!0).delete(t);return new mi(n).toPromise()}const Ii=800,Ci=3;class Si{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await yi()),this.db}async _withRetries(e){let t=0;while(1)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>Ci)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ai()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ni._getInstance(ui()),this.receiver._subscribe("keyChanged",(async(e,t)=>{const n=await this._poll();return{keyProcessed:n.includes(t.key)}})),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await ci(),!this.activeServiceWorker)return;this.sender=new si(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&li()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await yi();return await _i(e,Wn,"1"),await bi(e,Wn),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>_i(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>wi(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>bi(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=gi(e,!1).getAll();return new mi(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:i,value:s}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),Ii)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Si.type="LOCAL";const Ti=Si;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ei(e,t){return M(e,"POST","/v2/accounts/mfaSignIn:start",$(e,t))}function ki(e,t){return M(e,"POST","/v2/accounts/mfaSignIn:finalize",$(e,t))}function xi(e,t){return M(e,"POST","/v2/accounts/mfaSignIn:finalize",$(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai=500,Ni=6e4,Oi=1e12;class Di{constructor(e){this.auth=e,this.counter=Oi,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Pi(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Oi;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||Oi;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||Oi;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class Pi{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i="string"===typeof e?document.getElementById(e):e;C(i,"argument-error",{appName:t}),this.container=i,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=Ri(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()}),Ni)}),Ai))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function Ri(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<e;i++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Li=Me("rcb"),$i=new O(3e4,6e4),Mi="https://www.google.com/recaptcha/api.js?";class Fi{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=ri().grecaptcha)||void 0===e?void 0:e.render)}load(e,t=""){return C(Vi(t),e,"argument-error"),this.shouldResolveImmediately(t)&&De(ri().grecaptcha)?Promise.resolve(ri().grecaptcha):new Promise(((n,s)=>{const r=ri().setTimeout((()=>{s(_(e,"network-request-failed"))}),$i.get());ri()[Li]=()=>{ri().clearTimeout(r),delete ri()[Li];const i=ri().grecaptcha;if(!i||!De(i))return void s(_(e,"internal-error"));const o=i.render;i.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(i)};const o=`${Mi}?${(0,i.xO)({onload:Li,render:"explicit",hl:t})}`;$e(o).catch((()=>{clearTimeout(r),s(_(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=ri().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function Vi(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}class Bi{async load(e){return new Di(e)}clearedOneInstance(){}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui="recaptcha",ji={theme:"light",type:"image"};class zi{constructor(e,t,n=Object.assign({},ji)){this.parameters=n,this.type=Ui,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=He(e),this.isInvisible="invisible"===this.parameters.size,C("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const i="string"===typeof t?document.getElementById(t):t;C(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Bi:new Fi,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const i=e=>{e&&(this.tokenChangeListeners.delete(i),n(e))};this.tokenChangeListeners.add(i),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){C(!this.parameters.sitekey,this.auth,"argument-error"),C(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),C("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=ri()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){C(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){C(k()&&!ai(),this.auth,"internal-error"),await qi(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await Ne(this.auth);C(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return C(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function qi(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=bt._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function Wi(e,t,n){const s=He(e),r=await Gi(s,t,(0,i.m9)(n));return new Hi(r,(e=>Gt(s,e)))}async function Zi(e,t,n){const s=(0,i.m9)(e);await Wt(!1,s,"phone");const r=await Gi(s.auth,t,(0,i.m9)(n));return new Hi(r,(e=>Qt(s,e)))}async function Ki(e,t,n){const s=(0,i.m9)(e),r=await Gi(s.auth,t,(0,i.m9)(n));return new Hi(r,(e=>Yt(s,e)))}async function Gi(e,t,n){var i;const s=await n.verify();try{let r;if(C("string"===typeof s,e,"argument-error"),C(n.type===Ui,e,"argument-error"),r="string"===typeof t?{phoneNumber:t}:t,"session"in r){const t=r.session;if("phoneNumber"in r){C("enroll"===t.type,e,"internal-error");const n=await Fn(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,recaptchaToken:s}});return n.phoneSessionInfo.sessionInfo}{C("signin"===t.type,e,"internal-error");const n=(null===(i=r.multiFactorHint)||void 0===i?void 0:i.uid)||r.multiFactorUid;C(n,e,"missing-multi-factor-info");const o=await Ei(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:s}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await gt(e,{phoneNumber:r.phoneNumber,recaptchaToken:s});return t}}finally{n._reset()}}async function Qi(e,t){await Ht((0,i.m9)(e),t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e){this.providerId=Yi.PROVIDER_ID,this.auth=He(e)}verifyPhoneNumber(e,t){return Gi(this.auth,e,(0,i.m9)(t))}static credential(e,t){return bt._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Yi.credentialFromTaggedObject(t)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?bt._fromTokenResponse(t,n):null}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Xi(e,t){return t?ue(t):(C(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yi.PROVIDER_ID="phone",Yi.PHONE_SIGN_IN_METHOD="phone";class Ji extends et{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return pt(e,this._buildIdpRequest())}_linkToIdToken(e,t){return pt(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return pt(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function es(e){return Kt(e.auth,new Ji(e),e.bypassAuthState)}function ts(e){const{auth:t,user:n}=e;return C(n,t,"internal-error"),Zt(n,new Ji(e),e.bypassAuthState)}async function ns(e){const{auth:t,user:n}=e;return C(n,t,"internal-error"),Ht(n,new Ji(e),e.bypassAuthState)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,t,n,i,s=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:s,error:r,type:o}=e;if(r)return void this.reject(r);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return es;case"linkViaPopup":case"linkViaRedirect":return ns;case"reauthViaPopup":case"reauthViaRedirect":return ts;default:y(this.auth,"internal-error")}}resolve(e){T(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){T(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss=new O(2e3,1e4);async function rs(e,t,n){const i=He(e);b(e,t,Et);const s=Xi(i,n),r=new cs(i,"signInViaPopup",t,s);return r.executeNotNull()}async function os(e,t,n){const s=(0,i.m9)(e);b(s.auth,t,Et);const r=Xi(s.auth,n),o=new cs(s.auth,"reauthViaPopup",t,r,s);return o.executeNotNull()}async function as(e,t,n){const s=(0,i.m9)(e);b(s.auth,t,Et);const r=Xi(s.auth,n),o=new cs(s.auth,"linkViaPopup",t,r,s);return o.executeNotNull()}class cs extends is{constructor(e,t,n,i,s){super(e,t,i,s),this.provider=n,this.authWindow=null,this.pollId=null,cs.currentPopupAction&&cs.currentPopupAction.cancel(),cs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return C(e,this.auth,"internal-error"),e}async onExecution(){T(1===this.filter.length,"Popup operations only handle one event");const e=ii();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(_(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(_(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,cs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(_(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,ss.get())};e()}}cs.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const ls="pendingRedirect",us=new Map;class hs extends is{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=us.get(this.auth._key());if(!e){try{const t=await ds(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}us.set(this.auth._key(),e)}return this.bypassAuthState||us.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function ds(e,t){const n=vs(t),i=gs(e);if(!await i._isAvailable())return!1;const s="true"===await i._get(n);return await i._remove(n),s}async function ps(e,t){return gs(e)._set(vs(t),"true")}function fs(){us.clear()}function ms(e,t){us.set(e._key(),t)}function gs(e){return ue(e._redirectPersistence)}function vs(e){return pe(ls,e.config.apiKey,e.name)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ys(e,t,n){return _s(e,t,n)}async function _s(e,t,n){const i=He(e);b(e,t,Et),await i._initializationPromise;const s=Xi(i,n);return await ps(s,i),s._openRedirect(i,t,"signInViaRedirect")}function ws(e,t,n){return bs(e,t,n)}async function bs(e,t,n){const s=(0,i.m9)(e);b(s.auth,t,Et),await s.auth._initializationPromise;const r=Xi(s.auth,n);await ps(r,s.auth);const o=await Es(s);return r._openRedirect(s.auth,t,"reauthViaRedirect",o)}function Is(e,t,n){return Cs(e,t,n)}async function Cs(e,t,n){const s=(0,i.m9)(e);b(s.auth,t,Et),await s.auth._initializationPromise;const r=Xi(s.auth,n);await Wt(!1,s,t.providerId),await ps(r,s.auth);const o=await Es(s);return r._openRedirect(s.auth,t,"linkViaRedirect",o)}async function Ss(e,t){return await He(e)._initializationPromise,Ts(e,t,!1)}async function Ts(e,t,n=!1){const i=He(e),s=Xi(i,t),r=new hs(i,s,n),o=await r.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}async function Es(e){const t=ii(`${e.uid}:::`);return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=6e5;class xs{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!Os(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Ns(e)){const i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(_(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ks&&this.cachedEventUids.clear(),this.cachedEventUids.has(As(e))}saveEventToCache(e){this.cachedEventUids.add(As(e)),this.lastProcessedEventTime=Date.now()}}function As(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Ns({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null===t||void 0===t?void 0:t.code)}function Os(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ns(e);default:return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ds(e,t={}){return M(e,"GET","/v1/projects",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Rs=/^https?/;async function Ls(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Ds(e);for(const i of t)try{if($s(i))return}catch(n){}y(e,"unauthorized-domain")}function $s(e){const t=E(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===i}if(!Rs.test(n))return!1;if(Ps.test(e))return i===e;const s=e.replace(/\./g,"\\."),r=new RegExp("^(.+\\."+s+"|"+s+")$","i");return r.test(i)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=new O(3e4,6e4);function Fs(){const e=ri().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Vs(e){return new Promise(((t,n)=>{var i,s,r;function o(){Fs(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Fs(),n(_(e,"network-request-failed"))},timeout:Ms.get()})}if(null===(s=null===(i=ri().gapi)||void 0===i?void 0:i.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(r=ri().gapi)||void 0===r?void 0:r.load)){const t=Me("iframefcb");return ri()[t]=()=>{gapi.load?o():n(_(e,"network-request-failed"))},$e(`https://apis.google.com/js/api.js?onload=${t}`).catch((e=>n(e)))}o()}})).catch((e=>{throw Bs=null,e}))}let Bs=null;function Us(e){return Bs=Bs||Vs(e),Bs}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=new O(5e3,15e3),zs="__/auth/iframe",qs="emulator/auth/iframe",Hs={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ws=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Zs(e){const t=e.config;C(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?D(t,qs):`https://${e.config.authDomain}/${zs}`,r={apiKey:t.apiKey,appName:e.name,v:s.SDK_VERSION},o=Ws.get(e.config.apiHost);o&&(r.eid=o);const a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${(0,i.xO)(r).slice(1)}`}async function Ks(e){const t=await Us(e),n=ri().gapi;return C(n,e,"internal-error"),t.open({where:document.body,url:Zs(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Hs,dontclear:!0},(t=>new Promise((async(n,i)=>{await t.restyle({setHideOnLeave:!1});const s=_(e,"network-request-failed"),r=ri().setTimeout((()=>{i(s)}),js.get());function o(){ri().clearTimeout(r),n(t)}t.ping(o).then(o,(()=>{i(s)}))}))))}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gs={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Qs=500,Ys=600,Xs="_blank",Js="http://localhost";class er{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function tr(e,t,n,s=Qs,r=Ys){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-s)/2,0).toString();let c="";const l=Object.assign(Object.assign({},Gs),{width:s.toString(),height:r.toString(),top:o,left:a}),u=(0,i.z$)().toLowerCase();n&&(c=ye(u)?Xs:n),ge(u)&&(t=t||Js,l.scrollbars="yes");const h=Object.entries(l).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(Te(u)&&"_self"!==c)return nr(t||"",c),new er(null);const d=window.open(t||"",c,h);C(d,e,"popup-blocked");try{d.focus()}catch(p){}return new er(d)}function nr(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir="__/auth/handler",sr="emulator/auth/handler",rr=encodeURIComponent("fac");async function or(e,t,n,r,o,a){C(e.config.authDomain,e,"auth-domain-config-required"),C(e.config.apiKey,e,"invalid-api-key");const c={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:s.SDK_VERSION,eventId:o};if(t instanceof Et){t.setDefaultLanguage(e.languageCode),c.providerId=t.providerId||"",(0,i.xb)(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))c[e]=t}if(t instanceof kt){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(c.scopes=e.join(","))}e.tenantId&&(c.tid=e.tenantId);const l=c;for(const i of Object.keys(l))void 0===l[i]&&delete l[i];const u=await e._getAppCheckToken(),h=u?`#${rr}=${encodeURIComponent(u)}`:"";return`${ar(e)}?${(0,i.xO)(l).slice(1)}${h}`}function ar({config:e}){return e.emulator?D(e,sr):`https://${e.authDomain}/${ir}`}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr="webStorageSupport";class lr{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ei,this._completeRedirectFn=Ts,this._overrideRedirectResult=ms}async _openPopup(e,t,n,i){var s;T(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");const r=await or(e,t,n,E(),i);return tr(e,r,ii())}async _openRedirect(e,t,n,i){await this._originValidation(e);const s=await or(e,t,n,E(),i);return oi(s),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(T(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await Ks(e),n=new xs(e);return t.register("authEvent",(t=>{C(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");const i=n.onEvent(t.authEvent);return{status:i?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){const n=this.iframes[e._key()];n.send(cr,{type:cr},(n=>{var i;const s=null===(i=null===n||void 0===n?void 0:n[0])||void 0===i?void 0:i[cr];void 0!==s&&t(!!s),y(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ls(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ke()||ve()||Ce()}}const ur=lr;class hr{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return S("unexpected MultiFactorSessionType")}}}class dr extends hr{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new dr(e)}_finalizeEnroll(e,t,n){return Vn(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return ki(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class pr{constructor(){}static assertion(e){return dr._fromCredential(e)}}pr.FACTOR_ID="phone";class fr{static assertionForEnrollment(e,t){return mr._fromSecret(e,t)}static assertionForSignIn(e,t){return mr._fromEnrollmentId(e,t)}static async generateSecret(e){var t;const n=e;C("undefined"!==typeof(null===(t=n.user)||void 0===t?void 0:t.auth),"internal-error");const i=await Bn(n.user.auth,{idToken:n.credential,totpEnrollmentInfo:{}});return gr._fromStartTotpMfaEnrollmentResponse(i,n.user.auth)}}fr.FACTOR_ID="totp";class mr extends hr{constructor(e,t,n){super("totp"),this.otp=e,this.enrollmentId=t,this.secret=n}static _fromSecret(e,t){return new mr(t,void 0,e)}static _fromEnrollmentId(e,t){return new mr(t,e)}async _finalizeEnroll(e,t,n){return C("undefined"!==typeof this.secret,e,"argument-error"),Un(e,{idToken:t,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(e,t){C(void 0!==this.enrollmentId&&void 0!==this.otp,e,"argument-error");const n={verificationCode:this.otp};return xi(e,{mfaPendingCredential:t,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n})}}class gr{constructor(e,t,n,i,s,r,o){this.sessionInfo=r,this.auth=o,this.secretKey=e,this.hashingAlgorithm=t,this.codeLength=n,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=s}static _fromStartTotpMfaEnrollmentResponse(e,t){return new gr(e.totpSessionInfo.sharedSecretKey,e.totpSessionInfo.hashingAlgorithm,e.totpSessionInfo.verificationCodeLength,e.totpSessionInfo.periodSec,new Date(e.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),e.totpSessionInfo.sessionInfo,t)}_makeTotpVerificationInfo(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}generateQrCodeUrl(e,t){var n;let i=!1;return(vr(e)||vr(t))&&(i=!0),i&&(vr(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),vr(t)&&(t=this.auth.name)),`otpauth://totp/${t}:${e}?secret=${this.secretKey}&issuer=${t}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function vr(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var yr="@firebase/auth",_r="1.0.0";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class wr{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;const t=await this.auth.currentUser.getIdToken(e);return{accessToken:t}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){C(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Ir(e){(0,s._registerComponent)(new a.wA("auth",((t,{options:n})=>{const i=t.getProvider("app").getImmediate(),s=t.getProvider("heartbeat"),r=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;C(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const c={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ae(e)},l=new qe(i,s,r,c);return Ke(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{const i=e.getProvider("auth-internal");i.initialize()}))),(0,s._registerComponent)(new a.wA("auth-internal",(e=>{const t=He(e.getProvider("auth").getImmediate());return(e=>new wr(e))(t)}),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,s.registerVersion)(yr,_r,br(e)),(0,s.registerVersion)(yr,_r,"esm2017")}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr=300,Sr=(0,i.Pz)("authIdTokenMaxAge")||Cr;let Tr=null;const Er=e=>async t=>{const n=t&&await t.getIdTokenResult(),i=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>Sr)return;const s=null===n||void 0===n?void 0:n.token;Tr!==s&&(Tr=s,await fetch(e,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function kr(e=(0,s.getApp)()){const t=(0,s._getProvider)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=Ze(e,{popupRedirectResolver:ur,persistence:[Ti,Xn,ei]}),r=(0,i.Pz)("authTokenSyncURL");if(r){const e=Er(r);Pn(n,e,(()=>e(n.currentUser))),Dn(n,(t=>e(t)))}const o=(0,i.q4)("auth");return o&&Ge(n,`http://${o}`),n}Ir("Browser")},4444:function(e,t,n){n.d(t,{BH:function(){return T},DV:function(){return G},G6:function(){return L},GJ:function(){return Z},L:function(){return h},LL:function(){return B},P0:function(){return I},Pz:function(){return S},Sg:function(){return E},UG:function(){return A},UI:function(){return Y},US:function(){return c},Wl:function(){return q},Yr:function(){return R},ZB:function(){return f},ZR:function(){return V},aH:function(){return C},b$:function(){return D},cI:function(){return z},dS:function(){return le},eu:function(){return M},g5:function(){return r},gK:function(){return ce},gQ:function(){return ie},h$:function(){return u},hl:function(){return $},hu:function(){return s},jU:function(){return N},m9:function(){return he},ne:function(){return se},p$:function(){return p},pd:function(){return ne},q4:function(){return b},r3:function(){return K},ru:function(){return O},tV:function(){return d},uI:function(){return x},ug:function(){return ue},vZ:function(){return X},w1:function(){return P},w9:function(){return W},xO:function(){return ee},xb:function(){return Q},z$:function(){return k},zd:function(){return te}});
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},s=function(e,t){if(!e)throw r(t)},r=function(e){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},o=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&i+1<e.length&&56320===(64512&e.charCodeAt(i+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++i)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},a=function(e){const t=[];let n=0,i=0;while(n<e.length){const s=e[n++];if(s<128)t[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=e[n++];t[i++]=String.fromCharCode((31&s)<<6|63&r)}else if(s>239&&s<365){const r=e[n++],o=e[n++],a=e[n++],c=((7&s)<<18|(63&r)<<12|(63&o)<<6|63&a)-65536;t[i++]=String.fromCharCode(55296+(c>>10)),t[i++]=String.fromCharCode(56320+(1023&c))}else{const r=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&s)<<12|(63&r)<<6|63&o)}}return t.join("")},c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<e.length;s+=3){const t=e[s],r=s+1<e.length,o=r?e[s+1]:0,a=s+2<e.length,c=a?e[s+2]:0,l=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,r||(h=64)),i.push(n[l],n[u],n[h],n[d])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(o(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):a(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],r=s<e.length,o=r?n[e.charAt(s)]:0;++s;const a=s<e.length,c=a?n[e.charAt(s)]:64;++s;const u=s<e.length,h=u?n[e.charAt(s)]:64;if(++s,null==t||null==o||null==c||null==h)throw new l;const d=t<<2|o>>4;if(i.push(d),64!==c){const e=o<<4&240|c>>2;if(i.push(e),64!==h){const e=c<<6&192|h;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const u=function(e){const t=o(e);return c.encodeByteArray(t,!0)},h=function(e){return u(e).replace(/\./g,"")},d=function(e){try{return c.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function p(e){return f(void 0,e)}function f(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:const n=t;return new Date(n.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&m(n)&&(e[n]=f(e[n],t[n]));return e}function m(e){return"__proto__"!==e}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v=()=>g().__FIREBASE_DEFAULTS__,y=()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",BASE_URL:"/"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0},_=()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&d(e[1]);return t&&JSON.parse(t)},w=()=>{try{return v()||y()||_()}catch(e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`)}},b=e=>{var t,n;return null===(n=null===(t=w())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},I=e=>{const t=b(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),i]:[t.substring(0,n),i]},C=()=>{var e;return null===(e=w())||void 0===e?void 0:e.config},S=e=>{var t;return null===(t=w())||void 0===t?void 0:t[`_${e}`]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class T{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",s=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e),a="";return[h(JSON.stringify(n)),h(JSON.stringify(o)),a].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k(){return"undefined"!==typeof navigator&&"string"===typeof navigator["userAgent"]?navigator["userAgent"]:""}function x(){return"undefined"!==typeof window&&!!(window["cordova"]||window["phonegap"]||window["PhoneGap"])&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(k())}function A(){var e;const t=null===(e=w())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(i){return!1}}function N(){return"object"===typeof self&&self.self===self}function O(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function D(){return"object"===typeof navigator&&"ReactNative"===navigator["product"]}function P(){const e=k();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function R(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN}function L(){return!A()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $(){try{return"object"===typeof indexedDB}catch(e){return!1}}function M(){return new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const F="FirebaseError";class V extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=F,Object.setPrototypeOf(this,V.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,B.prototype.create)}}class B{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],r=s?U(s,n):"Error",o=`${this.serviceName}: ${r} (${i}).`,a=new V(i,o,n);return a}}function U(e,t){return e.replace(j,((e,n)=>{const i=t[n];return null!=i?String(i):`<${n}?>`}))}const j=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z(e){return JSON.parse(e)}function q(e){return JSON.stringify(e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H=function(e){let t={},n={},i={},s="";try{const r=e.split(".");t=z(d(r[0])||""),n=z(d(r[1])||""),s=r[2],i=n["d"]||{},delete n["d"]}catch(r){}return{header:t,claims:n,data:i,signature:s}},W=function(e){const t=H(e),n=t.claims;return!!n&&"object"===typeof n&&n.hasOwnProperty("iat")},Z=function(e){const t=H(e).claims;return"object"===typeof t&&!0===t["admin"]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function K(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function G(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Q(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Y(e,t,n){const i={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(i[s]=t.call(n,e[s],s,e));return i}function X(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const s of n){if(!i.includes(s))return!1;const n=e[s],r=t[s];if(J(n)&&J(r)){if(!X(n,r))return!1}else if(n!==r)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function J(e){return null!==e&&"object"===typeof e}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ee(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function te(e){const t={},n=e.replace(/^\?/,"").split("&");return n.forEach((e=>{if(e){const[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}})),t}function ne(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let i,s,r=this.chain_[0],o=this.chain_[1],a=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(i=c^o&(a^c),s=1518500249):(i=o^a^c,s=1859775393):u<60?(i=o&a|c&(o|a),s=2400959708):(i=o^a^c,s=3395469782);const e=(r<<5|r>>>27)+i+l+s+n[u]&4294967295;l=c,c=a,a=4294967295&(o<<30|o>>>2),o=r,r=e}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let i=0;const s=this.buf_;let r=this.inbuf_;while(i<t){if(0===r)while(i<=n)this.compress_(e,i),i+=this.blockSize;if("string"===typeof e){while(i<t)if(s[r]=e.charCodeAt(i),++r,++i,r===this.blockSize){this.compress_(s),r=0;break}}else while(i<t)if(s[r]=e[i],++r,++i,r===this.blockSize){this.compress_(s),r=0;break}}this.inbuf_=r,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let i=0;i<5;i++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[i]>>t&255,++n;return e}}function se(e,t){const n=new re(e,t);return n.subscribe.bind(n)}class re{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");i=oe(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===i.next&&(i.next=ae),void 0===i.error&&(i.error=ae),void 0===i.complete&&(i.complete=ae);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(e){}})),this.observers.push(i),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function oe(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}function ae(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ce(e,t){return`${e} failed: ${t} argument `}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const le=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);if(r>=55296&&r<=56319){const t=r-55296;i++,s(i<e.length,"Surrogate pair missing trail surrogate.");const n=e.charCodeAt(i)-56320;r=65536+(t<<10)+n}r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):r<65536?(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},ue=function(e){let t=0;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);i<128?t++:i<2048?t+=2:i>=55296&&i<=56319?(t+=4,n++):t+=3}return t};
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function he(e){return e&&e._delegate?e._delegate:e}},1001:function(e,t,n){function i(e,t,n,i,s,r,o,a){var c,l="function"===typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=n,l._compiled=!0),i&&(l.functional=!0),r&&(l._scopeId="data-v-"+r),o?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),s&&s.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},l._ssrRegister=c):s&&(c=a?function(){s.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:s),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(e,t){return c.call(t),u(e,t)}}else{var h=l.beforeCreate;l.beforeCreate=h?[].concat(h,c):[c]}return{exports:e,options:l}}n.d(t,{Z:function(){return i}})},1884:function(){},9027:function(){},2838:function(){},5205:function(e,t,n){n.d(t,{z:function(){return r}});var i,s=function(){return Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))};function r(e,t){void 0===t&&(t={});var n=t.registrationOptions;void 0===n&&(n={}),delete t.registrationOptions;var r=function(e){var n=[],i=arguments.length-1;while(i-- >0)n[i]=arguments[i+1];t&&t[e]&&t[e].apply(t,n)};"serviceWorker"in navigator&&i.then((function(){s()?(c(e,r,n),navigator.serviceWorker.ready.then((function(e){r("ready",e)})).catch((function(e){return o(r,e)}))):(a(e,r,n),navigator.serviceWorker.ready.then((function(e){r("ready",e)})).catch((function(e){return o(r,e)})))}))}function o(e,t){navigator.onLine||e("offline"),e("error",t)}function a(e,t,n){navigator.serviceWorker.register(e,n).then((function(e){t("registered",e),e.waiting?t("updated",e):e.onupdatefound=function(){t("updatefound",e);var n=e.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?t("updated",e):t("cached",e))}}})).catch((function(e){return o(t,e)}))}function c(e,t,n){fetch(e).then((function(i){404===i.status?(t("error",new Error("Service worker not found at "+e)),l()):-1===i.headers.get("content-type").indexOf("javascript")?(t("error",new Error("Expected "+e+" to have javascript content-type, but received "+i.headers.get("content-type"))),l()):a(e,t,n)})).catch((function(e){return o(t,e)}))}function l(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){return o(emit,e)}))}"undefined"!==typeof window&&(i="undefined"!==typeof Promise?new Promise((function(e){return window.addEventListener("load",e)})):{then:function(e){return window.addEventListener("load",e)}})},4903:function(e,t,n){function i(e,t){for(var n in t)e[n]=t[n];return e}n.d(t,{ZP:function(){return It}});var s=/[!'()*]/g,r=function(e){return"%"+e.charCodeAt(0).toString(16)},o=/%2C/g,a=function(e){return encodeURIComponent(e).replace(s,r).replace(o,",")};function c(e){try{return decodeURIComponent(e)}catch(t){0}return e}function l(e,t,n){void 0===t&&(t={});var i,s=n||h;try{i=s(e||"")}catch(a){i={}}for(var r in t){var o=t[r];i[r]=Array.isArray(o)?o.map(u):u(o)}return i}var u=function(e){return null==e||"object"===typeof e?e:String(e)};function h(e){var t={};return e=e.trim().replace(/^(\?|#|&)/,""),e?(e.split("&").forEach((function(e){var n=e.replace(/\+/g," ").split("="),i=c(n.shift()),s=n.length>0?c(n.join("=")):null;void 0===t[i]?t[i]=s:Array.isArray(t[i])?t[i].push(s):t[i]=[t[i],s]})),t):t}function d(e){var t=e?Object.keys(e).map((function(t){var n=e[t];if(void 0===n)return"";if(null===n)return a(t);if(Array.isArray(n)){var i=[];return n.forEach((function(e){void 0!==e&&(null===e?i.push(a(t)):i.push(a(t)+"="+a(e)))})),i.join("&")}return a(t)+"="+a(n)})).filter((function(e){return e.length>0})).join("&"):null;return t?"?"+t:""}var p=/\/?$/;function f(e,t,n,i){var s=i&&i.options.stringifyQuery,r=t.query||{};try{r=m(r)}catch(a){}var o={name:t.name||e&&e.name,meta:e&&e.meta||{},path:t.path||"/",hash:t.hash||"",query:r,params:t.params||{},fullPath:y(t,s),matched:e?v(e):[]};return n&&(o.redirectedFrom=y(n,s)),Object.freeze(o)}function m(e){if(Array.isArray(e))return e.map(m);if(e&&"object"===typeof e){var t={};for(var n in e)t[n]=m(e[n]);return t}return e}var g=f(null,{path:"/"});function v(e){var t=[];while(e)t.unshift(e),e=e.parent;return t}function y(e,t){var n=e.path,i=e.query;void 0===i&&(i={});var s=e.hash;void 0===s&&(s="");var r=t||d;return(n||"/")+r(i)+s}function _(e,t,n){return t===g?e===t:!!t&&(e.path&&t.path?e.path.replace(p,"")===t.path.replace(p,"")&&(n||e.hash===t.hash&&w(e.query,t.query)):!(!e.name||!t.name)&&(e.name===t.name&&(n||e.hash===t.hash&&w(e.query,t.query)&&w(e.params,t.params))))}function w(e,t){if(void 0===e&&(e={}),void 0===t&&(t={}),!e||!t)return e===t;var n=Object.keys(e).sort(),i=Object.keys(t).sort();return n.length===i.length&&n.every((function(n,s){var r=e[n],o=i[s];if(o!==n)return!1;var a=t[n];return null==r||null==a?r===a:"object"===typeof r&&"object"===typeof a?w(r,a):String(r)===String(a)}))}function b(e,t){return 0===e.path.replace(p,"/").indexOf(t.path.replace(p,"/"))&&(!t.hash||e.hash===t.hash)&&I(e.query,t.query)}function I(e,t){for(var n in t)if(!(n in e))return!1;return!0}function C(e){for(var t=0;t<e.matched.length;t++){var n=e.matched[t];for(var i in n.instances){var s=n.instances[i],r=n.enteredCbs[i];if(s&&r){delete n.enteredCbs[i];for(var o=0;o<r.length;o++)s._isBeingDestroyed||r[o](s)}}}}var S={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(e,t){var n=t.props,s=t.children,r=t.parent,o=t.data;o.routerView=!0;var a=r.$createElement,c=n.name,l=r.$route,u=r._routerViewCache||(r._routerViewCache={}),h=0,d=!1;while(r&&r._routerRoot!==r){var p=r.$vnode?r.$vnode.data:{};p.routerView&&h++,p.keepAlive&&r._directInactive&&r._inactive&&(d=!0),r=r.$parent}if(o.routerViewDepth=h,d){var f=u[c],m=f&&f.component;return m?(f.configProps&&T(m,o,f.route,f.configProps),a(m,o,s)):a()}var g=l.matched[h],v=g&&g.components[c];if(!g||!v)return u[c]=null,a();u[c]={component:v},o.registerRouteInstance=function(e,t){var n=g.instances[c];(t&&n!==e||!t&&n===e)&&(g.instances[c]=t)},(o.hook||(o.hook={})).prepatch=function(e,t){g.instances[c]=t.componentInstance},o.hook.init=function(e){e.data.keepAlive&&e.componentInstance&&e.componentInstance!==g.instances[c]&&(g.instances[c]=e.componentInstance),C(l)};var y=g.props&&g.props[c];return y&&(i(u[c],{route:l,configProps:y}),T(v,o,l,y)),a(v,o,s)}};function T(e,t,n,s){var r=t.props=E(n,s);if(r){r=t.props=i({},r);var o=t.attrs=t.attrs||{};for(var a in r)e.props&&a in e.props||(o[a]=r[a],delete r[a])}}function E(e,t){switch(typeof t){case"undefined":return;case"object":return t;case"function":return t(e);case"boolean":return t?e.params:void 0;default:0}}function k(e,t,n){var i=e.charAt(0);if("/"===i)return e;if("?"===i||"#"===i)return t+e;var s=t.split("/");n&&s[s.length-1]||s.pop();for(var r=e.replace(/^\//,"").split("/"),o=0;o<r.length;o++){var a=r[o];".."===a?s.pop():"."!==a&&s.push(a)}return""!==s[0]&&s.unshift(""),s.join("/")}function x(e){var t="",n="",i=e.indexOf("#");i>=0&&(t=e.slice(i),e=e.slice(0,i));var s=e.indexOf("?");return s>=0&&(n=e.slice(s+1),e=e.slice(0,s)),{path:e,query:n,hash:t}}function A(e){return e.replace(/\/(?:\s*\/)+/g,"/")}var N=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},O=Q,D=M,P=F,R=U,L=G,$=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function M(e,t){var n,i=[],s=0,r=0,o="",a=t&&t.delimiter||"/";while(null!=(n=$.exec(e))){var c=n[0],l=n[1],u=n.index;if(o+=e.slice(r,u),r=u+c.length,l)o+=l[1];else{var h=e[r],d=n[2],p=n[3],f=n[4],m=n[5],g=n[6],v=n[7];o&&(i.push(o),o="");var y=null!=d&&null!=h&&h!==d,_="+"===g||"*"===g,w="?"===g||"*"===g,b=n[2]||a,I=f||m;i.push({name:p||s++,prefix:d||"",delimiter:b,optional:w,repeat:_,partial:y,asterisk:!!v,pattern:I?z(I):v?".*":"[^"+j(b)+"]+?"})}}return r<e.length&&(o+=e.substr(r)),o&&i.push(o),i}function F(e,t){return U(M(e,t),t)}function V(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function B(e){return encodeURI(e).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function U(e,t){for(var n=new Array(e.length),i=0;i<e.length;i++)"object"===typeof e[i]&&(n[i]=new RegExp("^(?:"+e[i].pattern+")$",H(t)));return function(t,i){for(var s="",r=t||{},o=i||{},a=o.pretty?V:encodeURIComponent,c=0;c<e.length;c++){var l=e[c];if("string"!==typeof l){var u,h=r[l.name];if(null==h){if(l.optional){l.partial&&(s+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(N(h)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(u=a(h[d]),!n[c].test(u))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(u)+"`");s+=(0===d?l.prefix:l.delimiter)+u}}else{if(u=l.asterisk?B(h):a(h),!n[c].test(u))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+u+'"');s+=l.prefix+u}}else s+=l}return s}}function j(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function z(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function q(e,t){return e.keys=t,e}function H(e){return e&&e.sensitive?"":"i"}function W(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var i=0;i<n.length;i++)t.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return q(e,t)}function Z(e,t,n){for(var i=[],s=0;s<e.length;s++)i.push(Q(e[s],t,n).source);var r=new RegExp("(?:"+i.join("|")+")",H(n));return q(r,t)}function K(e,t,n){return G(M(e,n),t,n)}function G(e,t,n){N(t)||(n=t||n,t=[]),n=n||{};for(var i=n.strict,s=!1!==n.end,r="",o=0;o<e.length;o++){var a=e[o];if("string"===typeof a)r+=j(a);else{var c=j(a.prefix),l="(?:"+a.pattern+")";t.push(a),a.repeat&&(l+="(?:"+c+l+")*"),l=a.optional?a.partial?c+"("+l+")?":"(?:"+c+"("+l+"))?":c+"("+l+")",r+=l}}var u=j(n.delimiter||"/"),h=r.slice(-u.length)===u;return i||(r=(h?r.slice(0,-u.length):r)+"(?:"+u+"(?=$))?"),r+=s?"$":i&&h?"":"(?="+u+"|$)",q(new RegExp("^"+r,H(n)),t)}function Q(e,t,n){return N(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?W(e,t):N(e)?Z(e,t,n):K(e,t,n)}O.parse=D,O.compile=P,O.tokensToFunction=R,O.tokensToRegExp=L;var Y=Object.create(null);function X(e,t,n){t=t||{};try{var i=Y[e]||(Y[e]=O.compile(e));return"string"===typeof t.pathMatch&&(t[0]=t.pathMatch),i(t,{pretty:!0})}catch(s){return""}finally{delete t[0]}}function J(e,t,n,s){var r="string"===typeof e?{path:e}:e;if(r._normalized)return r;if(r.name){r=i({},e);var o=r.params;return o&&"object"===typeof o&&(r.params=i({},o)),r}if(!r.path&&r.params&&t){r=i({},r),r._normalized=!0;var a=i(i({},t.params),r.params);if(t.name)r.name=t.name,r.params=a;else if(t.matched.length){var c=t.matched[t.matched.length-1].path;r.path=X(c,a,"path "+t.path)}else 0;return r}var u=x(r.path||""),h=t&&t.path||"/",d=u.path?k(u.path,h,n||r.append):h,p=l(u.query,r.query,s&&s.options.parseQuery),f=r.hash||u.hash;return f&&"#"!==f.charAt(0)&&(f="#"+f),{_normalized:!0,path:d,query:p,hash:f}}var ee,te=[String,Object],ne=[String,Array],ie=function(){},se={name:"RouterLink",props:{to:{type:te,required:!0},tag:{type:String,default:"a"},custom:Boolean,exact:Boolean,exactPath:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:{type:String,default:"page"},event:{type:ne,default:"click"}},render:function(e){var t=this,n=this.$router,s=this.$route,r=n.resolve(this.to,s,this.append),o=r.location,a=r.route,c=r.href,l={},u=n.options.linkActiveClass,h=n.options.linkExactActiveClass,d=null==u?"router-link-active":u,p=null==h?"router-link-exact-active":h,m=null==this.activeClass?d:this.activeClass,g=null==this.exactActiveClass?p:this.exactActiveClass,v=a.redirectedFrom?f(null,J(a.redirectedFrom),null,n):a;l[g]=_(s,v,this.exactPath),l[m]=this.exact||this.exactPath?l[g]:b(s,v);var y=l[g]?this.ariaCurrentValue:null,w=function(e){re(e)&&(t.replace?n.replace(o,ie):n.push(o,ie))},I={click:re};Array.isArray(this.event)?this.event.forEach((function(e){I[e]=w})):I[this.event]=w;var C={class:l},S=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:c,route:a,navigate:w,isActive:l[m],isExactActive:l[g]});if(S){if(1===S.length)return S[0];if(S.length>1||!S.length)return 0===S.length?e():e("span",{},S)}if("a"===this.tag)C.on=I,C.attrs={href:c,"aria-current":y};else{var T=oe(this.$slots.default);if(T){T.isStatic=!1;var E=T.data=i({},T.data);for(var k in E.on=E.on||{},E.on){var x=E.on[k];k in I&&(E.on[k]=Array.isArray(x)?x:[x])}for(var A in I)A in E.on?E.on[A].push(I[A]):E.on[A]=w;var N=T.data.attrs=i({},T.data.attrs);N.href=c,N["aria-current"]=y}else C.on=I}return e(this.tag,C,this.$slots.default)}};function re(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&(void 0===e.button||0===e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){var t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function oe(e){if(e)for(var t,n=0;n<e.length;n++){if(t=e[n],"a"===t.tag)return t;if(t.children&&(t=oe(t.children)))return t}}function ae(e){if(!ae.installed||ee!==e){ae.installed=!0,ee=e;var t=function(e){return void 0!==e},n=function(e,n){var i=e.$options._parentVnode;t(i)&&t(i=i.data)&&t(i=i.registerRouteInstance)&&i(e,n)};e.mixin({beforeCreate:function(){t(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),e.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,n(this,this)},destroyed:function(){n(this)}}),Object.defineProperty(e.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(e.prototype,"$route",{get:function(){return this._routerRoot._route}}),e.component("RouterView",S),e.component("RouterLink",se);var i=e.config.optionMergeStrategies;i.beforeRouteEnter=i.beforeRouteLeave=i.beforeRouteUpdate=i.created}}var ce="undefined"!==typeof window;function le(e,t,n,i,s){var r=t||[],o=n||Object.create(null),a=i||Object.create(null);e.forEach((function(e){ue(r,o,a,e,s)}));for(var c=0,l=r.length;c<l;c++)"*"===r[c]&&(r.push(r.splice(c,1)[0]),l--,c--);return{pathList:r,pathMap:o,nameMap:a}}function ue(e,t,n,i,s,r){var o=i.path,a=i.name;var c=i.pathToRegexpOptions||{},l=de(o,s,c.strict);"boolean"===typeof i.caseSensitive&&(c.sensitive=i.caseSensitive);var u={path:l,regex:he(l,c),components:i.components||{default:i.component},alias:i.alias?"string"===typeof i.alias?[i.alias]:i.alias:[],instances:{},enteredCbs:{},name:a,parent:s,matchAs:r,redirect:i.redirect,beforeEnter:i.beforeEnter,meta:i.meta||{},props:null==i.props?{}:i.components?i.props:{default:i.props}};if(i.children&&i.children.forEach((function(i){var s=r?A(r+"/"+i.path):void 0;ue(e,t,n,i,u,s)})),t[u.path]||(e.push(u.path),t[u.path]=u),void 0!==i.alias)for(var h=Array.isArray(i.alias)?i.alias:[i.alias],d=0;d<h.length;++d){var p=h[d];0;var f={path:p,children:i.children};ue(e,t,n,f,s,u.path||"/")}a&&(n[a]||(n[a]=u))}function he(e,t){var n=O(e,[],t);return n}function de(e,t,n){return n||(e=e.replace(/\/$/,"")),"/"===e[0]||null==t?e:A(t.path+"/"+e)}function pe(e,t){var n=le(e),i=n.pathList,s=n.pathMap,r=n.nameMap;function o(e){le(e,i,s,r)}function a(e,t){var n="object"!==typeof e?r[e]:void 0;le([t||e],i,s,r,n),n&&n.alias.length&&le(n.alias.map((function(e){return{path:e,children:[t]}})),i,s,r,n)}function c(){return i.map((function(e){return s[e]}))}function l(e,n,o){var a=J(e,n,!1,t),c=a.name;if(c){var l=r[c];if(!l)return d(null,a);var u=l.regex.keys.filter((function(e){return!e.optional})).map((function(e){return e.name}));if("object"!==typeof a.params&&(a.params={}),n&&"object"===typeof n.params)for(var h in n.params)!(h in a.params)&&u.indexOf(h)>-1&&(a.params[h]=n.params[h]);return a.path=X(l.path,a.params,'named route "'+c+'"'),d(l,a,o)}if(a.path){a.params={};for(var p=0;p<i.length;p++){var f=i[p],m=s[f];if(fe(m.regex,a.path,a.params))return d(m,a,o)}}return d(null,a)}function u(e,n){var i=e.redirect,s="function"===typeof i?i(f(e,n,null,t)):i;if("string"===typeof s&&(s={path:s}),!s||"object"!==typeof s)return d(null,n);var o=s,a=o.name,c=o.path,u=n.query,h=n.hash,p=n.params;if(u=o.hasOwnProperty("query")?o.query:u,h=o.hasOwnProperty("hash")?o.hash:h,p=o.hasOwnProperty("params")?o.params:p,a){r[a];return l({_normalized:!0,name:a,query:u,hash:h,params:p},void 0,n)}if(c){var m=me(c,e),g=X(m,p,'redirect route with path "'+m+'"');return l({_normalized:!0,path:g,query:u,hash:h},void 0,n)}return d(null,n)}function h(e,t,n){var i=X(n,t.params,'aliased route with path "'+n+'"'),s=l({_normalized:!0,path:i});if(s){var r=s.matched,o=r[r.length-1];return t.params=s.params,d(o,t)}return d(null,t)}function d(e,n,i){return e&&e.redirect?u(e,i||n):e&&e.matchAs?h(e,n,e.matchAs):f(e,n,i,t)}return{match:l,addRoute:a,getRoutes:c,addRoutes:o}}function fe(e,t,n){var i=t.match(e);if(!i)return!1;if(!n)return!0;for(var s=1,r=i.length;s<r;++s){var o=e.keys[s-1];o&&(n[o.name||"pathMatch"]="string"===typeof i[s]?c(i[s]):i[s])}return!0}function me(e,t){return k(e,t.parent?t.parent.path:"/",!0)}var ge=ce&&window.performance&&window.performance.now?window.performance:Date;function ve(){return ge.now().toFixed(3)}var ye=ve();function _e(){return ye}function we(e){return ye=e}var be=Object.create(null);function Ie(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");var e=window.location.protocol+"//"+window.location.host,t=window.location.href.replace(e,""),n=i({},window.history.state);return n.key=_e(),window.history.replaceState(n,"",t),window.addEventListener("popstate",Te),function(){window.removeEventListener("popstate",Te)}}function Ce(e,t,n,i){if(e.app){var s=e.options.scrollBehavior;s&&e.app.$nextTick((function(){var r=Ee(),o=s.call(e,t,n,i?r:null);o&&("function"===typeof o.then?o.then((function(e){Pe(e,r)})).catch((function(e){0})):Pe(o,r))}))}}function Se(){var e=_e();e&&(be[e]={x:window.pageXOffset,y:window.pageYOffset})}function Te(e){Se(),e.state&&e.state.key&&we(e.state.key)}function Ee(){var e=_e();if(e)return be[e]}function ke(e,t){var n=document.documentElement,i=n.getBoundingClientRect(),s=e.getBoundingClientRect();return{x:s.left-i.left-t.x,y:s.top-i.top-t.y}}function xe(e){return Oe(e.x)||Oe(e.y)}function Ae(e){return{x:Oe(e.x)?e.x:window.pageXOffset,y:Oe(e.y)?e.y:window.pageYOffset}}function Ne(e){return{x:Oe(e.x)?e.x:0,y:Oe(e.y)?e.y:0}}function Oe(e){return"number"===typeof e}var De=/^#\d/;function Pe(e,t){var n="object"===typeof e;if(n&&"string"===typeof e.selector){var i=De.test(e.selector)?document.getElementById(e.selector.slice(1)):document.querySelector(e.selector);if(i){var s=e.offset&&"object"===typeof e.offset?e.offset:{};s=Ne(s),t=ke(i,s)}else xe(e)&&(t=Ae(e))}else n&&xe(e)&&(t=Ae(e));t&&("scrollBehavior"in document.documentElement.style?window.scrollTo({left:t.x,top:t.y,behavior:e.behavior}):window.scrollTo(t.x,t.y))}var Re=ce&&function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"function"===typeof window.history.pushState)}();function Le(e,t){Se();var n=window.history;try{if(t){var s=i({},n.state);s.key=_e(),n.replaceState(s,"",e)}else n.pushState({key:we(ve())},"",e)}catch(r){window.location[t?"replace":"assign"](e)}}function $e(e){Le(e,!0)}var Me={redirected:2,aborted:4,cancelled:8,duplicated:16};function Fe(e,t){return je(e,t,Me.redirected,'Redirected when going from "'+e.fullPath+'" to "'+qe(t)+'" via a navigation guard.')}function Ve(e,t){var n=je(e,t,Me.duplicated,'Avoided redundant navigation to current location: "'+e.fullPath+'".');return n.name="NavigationDuplicated",n}function Be(e,t){return je(e,t,Me.cancelled,'Navigation cancelled from "'+e.fullPath+'" to "'+t.fullPath+'" with a new navigation.')}function Ue(e,t){return je(e,t,Me.aborted,'Navigation aborted from "'+e.fullPath+'" to "'+t.fullPath+'" via a navigation guard.')}function je(e,t,n,i){var s=new Error(i);return s._isRouter=!0,s.from=e,s.to=t,s.type=n,s}var ze=["params","query","hash"];function qe(e){if("string"===typeof e)return e;if("path"in e)return e.path;var t={};return ze.forEach((function(n){n in e&&(t[n]=e[n])})),JSON.stringify(t,null,2)}function He(e){return Object.prototype.toString.call(e).indexOf("Error")>-1}function We(e,t){return He(e)&&e._isRouter&&(null==t||e.type===t)}function Ze(e,t,n){var i=function(s){s>=e.length?n():e[s]?t(e[s],(function(){i(s+1)})):i(s+1)};i(0)}function Ke(e){return function(t,n,i){var s=!1,r=0,o=null;Ge(e,(function(e,t,n,a){if("function"===typeof e&&void 0===e.cid){s=!0,r++;var c,l=Je((function(t){Xe(t)&&(t=t.default),e.resolved="function"===typeof t?t:ee.extend(t),n.components[a]=t,r--,r<=0&&i()})),u=Je((function(e){var t="Failed to resolve async component "+a+": "+e;o||(o=He(e)?e:new Error(t),i(o))}));try{c=e(l,u)}catch(d){u(d)}if(c)if("function"===typeof c.then)c.then(l,u);else{var h=c.component;h&&"function"===typeof h.then&&h.then(l,u)}}})),s||i()}}function Ge(e,t){return Qe(e.map((function(e){return Object.keys(e.components).map((function(n){return t(e.components[n],e.instances[n],e,n)}))})))}function Qe(e){return Array.prototype.concat.apply([],e)}var Ye="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag;function Xe(e){return e.__esModule||Ye&&"Module"===e[Symbol.toStringTag]}function Je(e){var t=!1;return function(){var n=[],i=arguments.length;while(i--)n[i]=arguments[i];if(!t)return t=!0,e.apply(this,n)}}var et=function(e,t){this.router=e,this.base=tt(t),this.current=g,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[],this.listeners=[]};function tt(e){if(!e)if(ce){var t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^https?:\/\/[^\/]+/,"")}else e="/";return"/"!==e.charAt(0)&&(e="/"+e),e.replace(/\/$/,"")}function nt(e,t){var n,i=Math.max(e.length,t.length);for(n=0;n<i;n++)if(e[n]!==t[n])break;return{updated:t.slice(0,n),activated:t.slice(n),deactivated:e.slice(n)}}function it(e,t,n,i){var s=Ge(e,(function(e,i,s,r){var o=st(e,t);if(o)return Array.isArray(o)?o.map((function(e){return n(e,i,s,r)})):n(o,i,s,r)}));return Qe(i?s.reverse():s)}function st(e,t){return"function"!==typeof e&&(e=ee.extend(e)),e.options[t]}function rt(e){return it(e,"beforeRouteLeave",at,!0)}function ot(e){return it(e,"beforeRouteUpdate",at)}function at(e,t){if(t)return function(){return e.apply(t,arguments)}}function ct(e){return it(e,"beforeRouteEnter",(function(e,t,n,i){return lt(e,n,i)}))}function lt(e,t,n){return function(i,s,r){return e(i,s,(function(e){"function"===typeof e&&(t.enteredCbs[n]||(t.enteredCbs[n]=[]),t.enteredCbs[n].push(e)),r(e)}))}}et.prototype.listen=function(e){this.cb=e},et.prototype.onReady=function(e,t){this.ready?e():(this.readyCbs.push(e),t&&this.readyErrorCbs.push(t))},et.prototype.onError=function(e){this.errorCbs.push(e)},et.prototype.transitionTo=function(e,t,n){var i,s=this;try{i=this.router.match(e,this.current)}catch(o){throw this.errorCbs.forEach((function(e){e(o)})),o}var r=this.current;this.confirmTransition(i,(function(){s.updateRoute(i),t&&t(i),s.ensureURL(),s.router.afterHooks.forEach((function(e){e&&e(i,r)})),s.ready||(s.ready=!0,s.readyCbs.forEach((function(e){e(i)})))}),(function(e){n&&n(e),e&&!s.ready&&(We(e,Me.redirected)&&r===g||(s.ready=!0,s.readyErrorCbs.forEach((function(t){t(e)}))))}))},et.prototype.confirmTransition=function(e,t,n){var i=this,s=this.current;this.pending=e;var r=function(e){!We(e)&&He(e)&&(i.errorCbs.length?i.errorCbs.forEach((function(t){t(e)})):console.error(e)),n&&n(e)},o=e.matched.length-1,a=s.matched.length-1;if(_(e,s)&&o===a&&e.matched[o]===s.matched[a])return this.ensureURL(),e.hash&&Ce(this.router,s,e,!1),r(Ve(s,e));var c=nt(this.current.matched,e.matched),l=c.updated,u=c.deactivated,h=c.activated,d=[].concat(rt(u),this.router.beforeHooks,ot(l),h.map((function(e){return e.beforeEnter})),Ke(h)),p=function(t,n){if(i.pending!==e)return r(Be(s,e));try{t(e,s,(function(t){!1===t?(i.ensureURL(!0),r(Ue(s,e))):He(t)?(i.ensureURL(!0),r(t)):"string"===typeof t||"object"===typeof t&&("string"===typeof t.path||"string"===typeof t.name)?(r(Fe(s,e)),"object"===typeof t&&t.replace?i.replace(t):i.push(t)):n(t)}))}catch(o){r(o)}};Ze(d,p,(function(){var n=ct(h),o=n.concat(i.router.resolveHooks);Ze(o,p,(function(){if(i.pending!==e)return r(Be(s,e));i.pending=null,t(e),i.router.app&&i.router.app.$nextTick((function(){C(e)}))}))}))},et.prototype.updateRoute=function(e){this.current=e,this.cb&&this.cb(e)},et.prototype.setupListeners=function(){},et.prototype.teardown=function(){this.listeners.forEach((function(e){e()})),this.listeners=[],this.current=g,this.pending=null};var ut=function(e){function t(t,n){e.call(this,t,n),this._startLocation=ht(this.base)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setupListeners=function(){var e=this;if(!(this.listeners.length>0)){var t=this.router,n=t.options.scrollBehavior,i=Re&&n;i&&this.listeners.push(Ie());var s=function(){var n=e.current,s=ht(e.base);e.current===g&&s===e._startLocation||e.transitionTo(s,(function(e){i&&Ce(t,e,n,!0)}))};window.addEventListener("popstate",s),this.listeners.push((function(){window.removeEventListener("popstate",s)}))}},t.prototype.go=function(e){window.history.go(e)},t.prototype.push=function(e,t,n){var i=this,s=this,r=s.current;this.transitionTo(e,(function(e){Le(A(i.base+e.fullPath)),Ce(i.router,e,r,!1),t&&t(e)}),n)},t.prototype.replace=function(e,t,n){var i=this,s=this,r=s.current;this.transitionTo(e,(function(e){$e(A(i.base+e.fullPath)),Ce(i.router,e,r,!1),t&&t(e)}),n)},t.prototype.ensureURL=function(e){if(ht(this.base)!==this.current.fullPath){var t=A(this.base+this.current.fullPath);e?Le(t):$e(t)}},t.prototype.getCurrentLocation=function(){return ht(this.base)},t}(et);function ht(e){var t=window.location.pathname,n=t.toLowerCase(),i=e.toLowerCase();return!e||n!==i&&0!==n.indexOf(A(i+"/"))||(t=t.slice(e.length)),(t||"/")+window.location.search+window.location.hash}var dt=function(e){function t(t,n,i){e.call(this,t,n),i&&pt(this.base)||ft()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.setupListeners=function(){var e=this;if(!(this.listeners.length>0)){var t=this.router,n=t.options.scrollBehavior,i=Re&&n;i&&this.listeners.push(Ie());var s=function(){var t=e.current;ft()&&e.transitionTo(mt(),(function(n){i&&Ce(e.router,n,t,!0),Re||yt(n.fullPath)}))},r=Re?"popstate":"hashchange";window.addEventListener(r,s),this.listeners.push((function(){window.removeEventListener(r,s)}))}},t.prototype.push=function(e,t,n){var i=this,s=this,r=s.current;this.transitionTo(e,(function(e){vt(e.fullPath),Ce(i.router,e,r,!1),t&&t(e)}),n)},t.prototype.replace=function(e,t,n){var i=this,s=this,r=s.current;this.transitionTo(e,(function(e){yt(e.fullPath),Ce(i.router,e,r,!1),t&&t(e)}),n)},t.prototype.go=function(e){window.history.go(e)},t.prototype.ensureURL=function(e){var t=this.current.fullPath;mt()!==t&&(e?vt(t):yt(t))},t.prototype.getCurrentLocation=function(){return mt()},t}(et);function pt(e){var t=ht(e);if(!/^\/#/.test(t))return window.location.replace(A(e+"/#"+t)),!0}function ft(){var e=mt();return"/"===e.charAt(0)||(yt("/"+e),!1)}function mt(){var e=window.location.href,t=e.indexOf("#");return t<0?"":(e=e.slice(t+1),e)}function gt(e){var t=window.location.href,n=t.indexOf("#"),i=n>=0?t.slice(0,n):t;return i+"#"+e}function vt(e){Re?Le(gt(e)):window.location.hash=e}function yt(e){Re?$e(gt(e)):window.location.replace(gt(e))}var _t=function(e){function t(t,n){e.call(this,t,n),this.stack=[],this.index=-1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.push=function(e,t,n){var i=this;this.transitionTo(e,(function(e){i.stack=i.stack.slice(0,i.index+1).concat(e),i.index++,t&&t(e)}),n)},t.prototype.replace=function(e,t,n){var i=this;this.transitionTo(e,(function(e){i.stack=i.stack.slice(0,i.index).concat(e),t&&t(e)}),n)},t.prototype.go=function(e){var t=this,n=this.index+e;if(!(n<0||n>=this.stack.length)){var i=this.stack[n];this.confirmTransition(i,(function(){var e=t.current;t.index=n,t.updateRoute(i),t.router.afterHooks.forEach((function(t){t&&t(i,e)}))}),(function(e){We(e,Me.duplicated)&&(t.index=n)}))}},t.prototype.getCurrentLocation=function(){var e=this.stack[this.stack.length-1];return e?e.fullPath:"/"},t.prototype.ensureURL=function(){},t}(et),wt=function(e){void 0===e&&(e={}),this.app=null,this.apps=[],this.options=e,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=pe(e.routes||[],this);var t=e.mode||"hash";switch(this.fallback="history"===t&&!Re&&!1!==e.fallback,this.fallback&&(t="hash"),ce||(t="abstract"),this.mode=t,t){case"history":this.history=new ut(this,e.base);break;case"hash":this.history=new dt(this,e.base,this.fallback);break;case"abstract":this.history=new _t(this,e.base);break;default:0}},bt={currentRoute:{configurable:!0}};wt.prototype.match=function(e,t,n){return this.matcher.match(e,t,n)},bt.currentRoute.get=function(){return this.history&&this.history.current},wt.prototype.init=function(e){var t=this;if(this.apps.push(e),e.$once("hook:destroyed",(function(){var n=t.apps.indexOf(e);n>-1&&t.apps.splice(n,1),t.app===e&&(t.app=t.apps[0]||null),t.app||t.history.teardown()})),!this.app){this.app=e;var n=this.history;if(n instanceof ut||n instanceof dt){var i=function(e){var i=n.current,s=t.options.scrollBehavior,r=Re&&s;r&&"fullPath"in e&&Ce(t,e,i,!1)},s=function(e){n.setupListeners(),i(e)};n.transitionTo(n.getCurrentLocation(),s,s)}n.listen((function(e){t.apps.forEach((function(t){t._route=e}))}))}},wt.prototype.beforeEach=function(e){return Ct(this.beforeHooks,e)},wt.prototype.beforeResolve=function(e){return Ct(this.resolveHooks,e)},wt.prototype.afterEach=function(e){return Ct(this.afterHooks,e)},wt.prototype.onReady=function(e,t){this.history.onReady(e,t)},wt.prototype.onError=function(e){this.history.onError(e)},wt.prototype.push=function(e,t,n){var i=this;if(!t&&!n&&"undefined"!==typeof Promise)return new Promise((function(t,n){i.history.push(e,t,n)}));this.history.push(e,t,n)},wt.prototype.replace=function(e,t,n){var i=this;if(!t&&!n&&"undefined"!==typeof Promise)return new Promise((function(t,n){i.history.replace(e,t,n)}));this.history.replace(e,t,n)},wt.prototype.go=function(e){this.history.go(e)},wt.prototype.back=function(){this.go(-1)},wt.prototype.forward=function(){this.go(1)},wt.prototype.getMatchedComponents=function(e){var t=e?e.matched?e:this.resolve(e).route:this.currentRoute;return t?[].concat.apply([],t.matched.map((function(e){return Object.keys(e.components).map((function(t){return e.components[t]}))}))):[]},wt.prototype.resolve=function(e,t,n){t=t||this.history.current;var i=J(e,t,n,this),s=this.match(i,t),r=s.redirectedFrom||s.fullPath,o=this.history.base,a=St(o,r,this.mode);return{location:i,route:s,href:a,normalizedTo:i,resolved:s}},wt.prototype.getRoutes=function(){return this.matcher.getRoutes()},wt.prototype.addRoute=function(e,t){this.matcher.addRoute(e,t),this.history.current!==g&&this.history.transitionTo(this.history.getCurrentLocation())},wt.prototype.addRoutes=function(e){this.matcher.addRoutes(e),this.history.current!==g&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(wt.prototype,bt);var It=wt;function Ct(e,t){return e.push(t),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function St(e,t,n){var i="hash"===n?"#"+t:t;return e?A(e+"/"+i):i}wt.install=ae,wt.version="3.6.5",wt.isNavigationFailure=We,wt.NavigationFailureType=Me,wt.START_LOCATION=g,ce&&window.Vue&&window.Vue.use(wt)},144:function(e,t,n){n.d(t,{ZP:function(){return Qi}});
/*!
 * Vue.js v2.7.14
 * (c) 2014-2022 Evan You
 * Released under the MIT License.
 */
var i=Object.freeze({}),s=Array.isArray;function r(e){return void 0===e||null===e}function o(e){return void 0!==e&&null!==e}function a(e){return!0===e}function c(e){return!1===e}function l(e){return"string"===typeof e||"number"===typeof e||"symbol"===typeof e||"boolean"===typeof e}function u(e){return"function"===typeof e}function h(e){return null!==e&&"object"===typeof e}var d=Object.prototype.toString;function p(e){return"[object Object]"===d.call(e)}function f(e){return"[object RegExp]"===d.call(e)}function m(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function g(e){return o(e)&&"function"===typeof e.then&&"function"===typeof e.catch}function v(e){return null==e?"":Array.isArray(e)||p(e)&&e.toString===d?JSON.stringify(e,null,2):String(e)}function y(e){var t=parseFloat(e);return isNaN(t)?e:t}function _(e,t){for(var n=Object.create(null),i=e.split(","),s=0;s<i.length;s++)n[i[s]]=!0;return t?function(e){return n[e.toLowerCase()]}:function(e){return n[e]}}_("slot,component",!0);var w=_("key,ref,slot,slot-scope,is");function b(e,t){var n=e.length;if(n){if(t===e[n-1])return void(e.length=n-1);var i=e.indexOf(t);if(i>-1)return e.splice(i,1)}}var I=Object.prototype.hasOwnProperty;function C(e,t){return I.call(e,t)}function S(e){var t=Object.create(null);return function(n){var i=t[n];return i||(t[n]=e(n))}}var T=/-(\w)/g,E=S((function(e){return e.replace(T,(function(e,t){return t?t.toUpperCase():""}))})),k=S((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),x=/\B([A-Z])/g,A=S((function(e){return e.replace(x,"-$1").toLowerCase()}));function N(e,t){function n(n){var i=arguments.length;return i?i>1?e.apply(t,arguments):e.call(t,n):e.call(t)}return n._length=e.length,n}function O(e,t){return e.bind(t)}var D=Function.prototype.bind?O:N;function P(e,t){t=t||0;var n=e.length-t,i=new Array(n);while(n--)i[n]=e[n+t];return i}function R(e,t){for(var n in t)e[n]=t[n];return e}function L(e){for(var t={},n=0;n<e.length;n++)e[n]&&R(t,e[n]);return t}function $(e,t,n){}var M=function(e,t,n){return!1},F=function(e){return e};function V(e,t){if(e===t)return!0;var n=h(e),i=h(t);if(!n||!i)return!n&&!i&&String(e)===String(t);try{var s=Array.isArray(e),r=Array.isArray(t);if(s&&r)return e.length===t.length&&e.every((function(e,n){return V(e,t[n])}));if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(s||r)return!1;var o=Object.keys(e),a=Object.keys(t);return o.length===a.length&&o.every((function(n){return V(e[n],t[n])}))}catch(c){return!1}}function B(e,t){for(var n=0;n<e.length;n++)if(V(e[n],t))return n;return-1}function U(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}function j(e,t){return e===t?0===e&&1/e!==1/t:e===e||t===t}var z="data-server-rendered",q=["component","directive","filter"],H=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch","renderTracked","renderTriggered"],W={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:M,isReservedAttr:M,isUnknownElement:M,getTagNamespace:$,parsePlatformTagName:F,mustUseProp:M,async:!0,_lifecycleHooks:H},Z=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function K(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function G(e,t,n,i){Object.defineProperty(e,t,{value:n,enumerable:!!i,writable:!0,configurable:!0})}var Q=new RegExp("[^".concat(Z.source,".$_\\d]"));function Y(e){if(!Q.test(e)){var t=e.split(".");return function(e){for(var n=0;n<t.length;n++){if(!e)return;e=e[t[n]]}return e}}}var X="__proto__"in{},J="undefined"!==typeof window,ee=J&&window.navigator.userAgent.toLowerCase(),te=ee&&/msie|trident/.test(ee),ne=ee&&ee.indexOf("msie 9.0")>0,ie=ee&&ee.indexOf("edge/")>0;ee&&ee.indexOf("android");var se=ee&&/iphone|ipad|ipod|ios/.test(ee);ee&&/chrome\/\d+/.test(ee),ee&&/phantomjs/.test(ee);var re,oe=ee&&ee.match(/firefox\/(\d+)/),ae={}.watch,ce=!1;if(J)try{var le={};Object.defineProperty(le,"passive",{get:function(){ce=!0}}),window.addEventListener("test-passive",null,le)}catch(Yo){}var ue=function(){return void 0===re&&(re=!J&&"undefined"!==typeof n.g&&(n.g["process"]&&"server"===n.g["process"].env.VUE_ENV)),re},he=J&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function de(e){return"function"===typeof e&&/native code/.test(e.toString())}var pe,fe="undefined"!==typeof Symbol&&de(Symbol)&&"undefined"!==typeof Reflect&&de(Reflect.ownKeys);pe="undefined"!==typeof Set&&de(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var me=null;function ge(e){void 0===e&&(e=null),e||me&&me._scope.off(),me=e,e&&e._scope.on()}var ve=function(){function e(e,t,n,i,s,r,o,a){this.tag=e,this.data=t,this.children=n,this.text=i,this.elm=s,this.ns=void 0,this.context=r,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=o,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=a,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1}return Object.defineProperty(e.prototype,"child",{get:function(){return this.componentInstance},enumerable:!1,configurable:!0}),e}(),ye=function(e){void 0===e&&(e="");var t=new ve;return t.text=e,t.isComment=!0,t};function _e(e){return new ve(void 0,void 0,void 0,String(e))}function we(e){var t=new ve(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}var be=0,Ie=[],Ce=function(){for(var e=0;e<Ie.length;e++){var t=Ie[e];t.subs=t.subs.filter((function(e){return e})),t._pending=!1}Ie.length=0},Se=function(){function e(){this._pending=!1,this.id=be++,this.subs=[]}return e.prototype.addSub=function(e){this.subs.push(e)},e.prototype.removeSub=function(e){this.subs[this.subs.indexOf(e)]=null,this._pending||(this._pending=!0,Ie.push(this))},e.prototype.depend=function(t){e.target&&e.target.addDep(this)},e.prototype.notify=function(e){var t=this.subs.filter((function(e){return e}));for(var n=0,i=t.length;n<i;n++){var s=t[n];0,s.update()}},e}();Se.target=null;var Te=[];function Ee(e){Te.push(e),Se.target=e}function ke(){Te.pop(),Se.target=Te[Te.length-1]}var xe=Array.prototype,Ae=Object.create(xe),Ne=["push","pop","shift","unshift","splice","sort","reverse"];Ne.forEach((function(e){var t=xe[e];G(Ae,e,(function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var s,r=t.apply(this,n),o=this.__ob__;switch(e){case"push":case"unshift":s=n;break;case"splice":s=n.slice(2);break}return s&&o.observeArray(s),o.dep.notify(),r}))}));var Oe=Object.getOwnPropertyNames(Ae),De={},Pe=!0;function Re(e){Pe=e}var Le={notify:$,depend:$,addSub:$,removeSub:$},$e=function(){function e(e,t,n){if(void 0===t&&(t=!1),void 0===n&&(n=!1),this.value=e,this.shallow=t,this.mock=n,this.dep=n?Le:new Se,this.vmCount=0,G(e,"__ob__",this),s(e)){if(!n)if(X)e.__proto__=Ae;else for(var i=0,r=Oe.length;i<r;i++){var o=Oe[i];G(e,o,Ae[o])}t||this.observeArray(e)}else{var a=Object.keys(e);for(i=0;i<a.length;i++){o=a[i];Fe(e,o,De,void 0,t,n)}}}return e.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)Me(e[t],!1,this.mock)},e}();function Me(e,t,n){return e&&C(e,"__ob__")&&e.__ob__ instanceof $e?e.__ob__:!Pe||!n&&ue()||!s(e)&&!p(e)||!Object.isExtensible(e)||e.__v_skip||He(e)||e instanceof ve?void 0:new $e(e,t,n)}function Fe(e,t,n,i,r,o){var a=new Se,c=Object.getOwnPropertyDescriptor(e,t);if(!c||!1!==c.configurable){var l=c&&c.get,u=c&&c.set;l&&!u||n!==De&&2!==arguments.length||(n=e[t]);var h=!r&&Me(n,!1,o);return Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=l?l.call(e):n;return Se.target&&(a.depend(),h&&(h.dep.depend(),s(t)&&Ue(t))),He(t)&&!r?t.value:t},set:function(t){var i=l?l.call(e):n;if(j(i,t)){if(u)u.call(e,t);else{if(l)return;if(!r&&He(i)&&!He(t))return void(i.value=t);n=t}h=!r&&Me(t,!1,o),a.notify()}}}),a}}function Ve(e,t,n){if(!qe(e)){var i=e.__ob__;return s(e)&&m(t)?(e.length=Math.max(e.length,t),e.splice(t,1,n),i&&!i.shallow&&i.mock&&Me(n,!1,!0),n):t in e&&!(t in Object.prototype)?(e[t]=n,n):e._isVue||i&&i.vmCount?n:i?(Fe(i.value,t,n,void 0,i.shallow,i.mock),i.dep.notify(),n):(e[t]=n,n)}}function Be(e,t){if(s(e)&&m(t))e.splice(t,1);else{var n=e.__ob__;e._isVue||n&&n.vmCount||qe(e)||C(e,t)&&(delete e[t],n&&n.dep.notify())}}function Ue(e){for(var t=void 0,n=0,i=e.length;n<i;n++)t=e[n],t&&t.__ob__&&t.__ob__.dep.depend(),s(t)&&Ue(t)}function je(e){return ze(e,!0),G(e,"__v_isShallow",!0),e}function ze(e,t){if(!qe(e)){Me(e,t,ue());0}}function qe(e){return!(!e||!e.__v_isReadonly)}function He(e){return!(!e||!0!==e.__v_isRef)}function We(e,t,n){Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:function(){var e=t[n];if(He(e))return e.value;var i=e&&e.__ob__;return i&&i.dep.depend(),e},set:function(e){var i=t[n];He(i)&&!He(e)?i.value=e:t[n]=e}})}var Ze="watcher";"".concat(Ze," callback"),"".concat(Ze," getter"),"".concat(Ze," cleanup");var Ke;var Ge=function(){function e(e){void 0===e&&(e=!1),this.detached=e,this.active=!0,this.effects=[],this.cleanups=[],this.parent=Ke,!e&&Ke&&(this.index=(Ke.scopes||(Ke.scopes=[])).push(this)-1)}return e.prototype.run=function(e){if(this.active){var t=Ke;try{return Ke=this,e()}finally{Ke=t}}else 0},e.prototype.on=function(){Ke=this},e.prototype.off=function(){Ke=this.parent},e.prototype.stop=function(e){if(this.active){var t=void 0,n=void 0;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].teardown();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){var i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this.active=!1}},e}();function Qe(e,t){void 0===t&&(t=Ke),t&&t.active&&t.effects.push(e)}function Ye(e){var t=e._provided,n=e.$parent&&e.$parent._provided;return n===t?e._provided=Object.create(n):t}var Xe=S((function(e){var t="&"===e.charAt(0);e=t?e.slice(1):e;var n="~"===e.charAt(0);e=n?e.slice(1):e;var i="!"===e.charAt(0);return e=i?e.slice(1):e,{name:e,once:n,capture:i,passive:t}}));function Je(e,t){function n(){var e=n.fns;if(!s(e))return Gt(e,null,arguments,t,"v-on handler");for(var i=e.slice(),r=0;r<i.length;r++)Gt(i[r],null,arguments,t,"v-on handler")}return n.fns=e,n}function et(e,t,n,i,s,o){var c,l,u,h;for(c in e)l=e[c],u=t[c],h=Xe(c),r(l)||(r(u)?(r(l.fns)&&(l=e[c]=Je(l,o)),a(h.once)&&(l=e[c]=s(h.name,l,h.capture)),n(h.name,l,h.capture,h.passive,h.params)):l!==u&&(u.fns=l,e[c]=u));for(c in t)r(e[c])&&(h=Xe(c),i(h.name,t[c],h.capture))}function tt(e,t,n){var i;e instanceof ve&&(e=e.data.hook||(e.data.hook={}));var s=e[t];function c(){n.apply(this,arguments),b(i.fns,c)}r(s)?i=Je([c]):o(s.fns)&&a(s.merged)?(i=s,i.fns.push(c)):i=Je([s,c]),i.merged=!0,e[t]=i}function nt(e,t,n){var i=t.options.props;if(!r(i)){var s={},a=e.attrs,c=e.props;if(o(a)||o(c))for(var l in i){var u=A(l);it(s,c,l,u,!0)||it(s,a,l,u,!1)}return s}}function it(e,t,n,i,s){if(o(t)){if(C(t,n))return e[n]=t[n],s||delete t[n],!0;if(C(t,i))return e[n]=t[i],s||delete t[i],!0}return!1}function st(e){for(var t=0;t<e.length;t++)if(s(e[t]))return Array.prototype.concat.apply([],e);return e}function rt(e){return l(e)?[_e(e)]:s(e)?at(e):void 0}function ot(e){return o(e)&&o(e.text)&&c(e.isComment)}function at(e,t){var n,i,c,u,h=[];for(n=0;n<e.length;n++)i=e[n],r(i)||"boolean"===typeof i||(c=h.length-1,u=h[c],s(i)?i.length>0&&(i=at(i,"".concat(t||"","_").concat(n)),ot(i[0])&&ot(u)&&(h[c]=_e(u.text+i[0].text),i.shift()),h.push.apply(h,i)):l(i)?ot(u)?h[c]=_e(u.text+i):""!==i&&h.push(_e(i)):ot(i)&&ot(u)?h[c]=_e(u.text+i.text):(a(e._isVList)&&o(i.tag)&&r(i.key)&&o(t)&&(i.key="__vlist".concat(t,"_").concat(n,"__")),h.push(i)));return h}function ct(e,t){var n,i,r,a,c=null;if(s(e)||"string"===typeof e)for(c=new Array(e.length),n=0,i=e.length;n<i;n++)c[n]=t(e[n],n);else if("number"===typeof e)for(c=new Array(e),n=0;n<e;n++)c[n]=t(n+1,n);else if(h(e))if(fe&&e[Symbol.iterator]){c=[];var l=e[Symbol.iterator](),u=l.next();while(!u.done)c.push(t(u.value,c.length)),u=l.next()}else for(r=Object.keys(e),c=new Array(r.length),n=0,i=r.length;n<i;n++)a=r[n],c[n]=t(e[a],a,n);return o(c)||(c=[]),c._isVList=!0,c}function lt(e,t,n,i){var s,r=this.$scopedSlots[e];r?(n=n||{},i&&(n=R(R({},i),n)),s=r(n)||(u(t)?t():t)):s=this.$slots[e]||(u(t)?t():t);var o=n&&n.slot;return o?this.$createElement("template",{slot:o},s):s}function ut(e){return Ci(this.$options,"filters",e,!0)||F}function ht(e,t){return s(e)?-1===e.indexOf(t):e!==t}function dt(e,t,n,i,s){var r=W.keyCodes[t]||n;return s&&i&&!W.keyCodes[t]?ht(s,i):r?ht(r,e):i?A(i)!==t:void 0===e}function pt(e,t,n,i,r){if(n)if(h(n)){s(n)&&(n=L(n));var o=void 0,a=function(s){if("class"===s||"style"===s||w(s))o=e;else{var a=e.attrs&&e.attrs.type;o=i||W.mustUseProp(t,a,s)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var c=E(s),l=A(s);if(!(c in o)&&!(l in o)&&(o[s]=n[s],r)){var u=e.on||(e.on={});u["update:".concat(s)]=function(e){n[s]=e}}};for(var c in n)a(c)}else;return e}function ft(e,t){var n=this._staticTrees||(this._staticTrees=[]),i=n[e];return i&&!t||(i=n[e]=this.$options.staticRenderFns[e].call(this._renderProxy,this._c,this),gt(i,"__static__".concat(e),!1)),i}function mt(e,t,n){return gt(e,"__once__".concat(t).concat(n?"_".concat(n):""),!0),e}function gt(e,t,n){if(s(e))for(var i=0;i<e.length;i++)e[i]&&"string"!==typeof e[i]&&vt(e[i],"".concat(t,"_").concat(i),n);else vt(e,t,n)}function vt(e,t,n){e.isStatic=!0,e.key=t,e.isOnce=n}function yt(e,t){if(t)if(p(t)){var n=e.on=e.on?R({},e.on):{};for(var i in t){var s=n[i],r=t[i];n[i]=s?[].concat(s,r):r}}else;return e}function _t(e,t,n,i){t=t||{$stable:!n};for(var r=0;r<e.length;r++){var o=e[r];s(o)?_t(o,t,n):o&&(o.proxy&&(o.fn.proxy=!0),t[o.key]=o.fn)}return i&&(t.$key=i),t}function wt(e,t){for(var n=0;n<t.length;n+=2){var i=t[n];"string"===typeof i&&i&&(e[t[n]]=t[n+1])}return e}function bt(e,t){return"string"===typeof e?t+e:e}function It(e){e._o=mt,e._n=y,e._s=v,e._l=ct,e._t=lt,e._q=V,e._i=B,e._m=ft,e._f=ut,e._k=dt,e._b=pt,e._v=_e,e._e=ye,e._u=_t,e._g=yt,e._d=wt,e._p=bt}function Ct(e,t){if(!e||!e.length)return{};for(var n={},i=0,s=e.length;i<s;i++){var r=e[i],o=r.data;if(o&&o.attrs&&o.attrs.slot&&delete o.attrs.slot,r.context!==t&&r.fnContext!==t||!o||null==o.slot)(n.default||(n.default=[])).push(r);else{var a=o.slot,c=n[a]||(n[a]=[]);"template"===r.tag?c.push.apply(c,r.children||[]):c.push(r)}}for(var l in n)n[l].every(St)&&delete n[l];return n}function St(e){return e.isComment&&!e.asyncFactory||" "===e.text}function Tt(e){return e.isComment&&e.asyncFactory}function Et(e,t,n,s){var r,o=Object.keys(n).length>0,a=t?!!t.$stable:!o,c=t&&t.$key;if(t){if(t._normalized)return t._normalized;if(a&&s&&s!==i&&c===s.$key&&!o&&!s.$hasNormal)return s;for(var l in r={},t)t[l]&&"$"!==l[0]&&(r[l]=kt(e,n,l,t[l]))}else r={};for(var u in n)u in r||(r[u]=xt(n,u));return t&&Object.isExtensible(t)&&(t._normalized=r),G(r,"$stable",a),G(r,"$key",c),G(r,"$hasNormal",o),r}function kt(e,t,n,i){var r=function(){var t=me;ge(e);var n=arguments.length?i.apply(null,arguments):i({});n=n&&"object"===typeof n&&!s(n)?[n]:rt(n);var r=n&&n[0];return ge(t),n&&(!r||1===n.length&&r.isComment&&!Tt(r))?void 0:n};return i.proxy&&Object.defineProperty(t,n,{get:r,enumerable:!0,configurable:!0}),r}function xt(e,t){return function(){return e[t]}}function At(e){var t=e.$options,n=t.setup;if(n){var i=e._setupContext=Nt(e);ge(e),Ee();var s=Gt(n,null,[e._props||je({}),i],e,"setup");if(ke(),ge(),u(s))t.render=s;else if(h(s))if(e._setupState=s,s.__sfc){var r=e._setupProxy={};for(var o in s)"__sfc"!==o&&We(r,s,o)}else for(var o in s)K(o)||We(e,s,o);else 0}}function Nt(e){return{get attrs(){if(!e._attrsProxy){var t=e._attrsProxy={};G(t,"_v_attr_proxy",!0),Ot(t,e.$attrs,i,e,"$attrs")}return e._attrsProxy},get listeners(){if(!e._listenersProxy){var t=e._listenersProxy={};Ot(t,e.$listeners,i,e,"$listeners")}return e._listenersProxy},get slots(){return Pt(e)},emit:D(e.$emit,e),expose:function(t){t&&Object.keys(t).forEach((function(n){return We(e,t,n)}))}}}function Ot(e,t,n,i,s){var r=!1;for(var o in t)o in e?t[o]!==n[o]&&(r=!0):(r=!0,Dt(e,o,i,s));for(var o in e)o in t||(r=!0,delete e[o]);return r}function Dt(e,t,n,i){Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){return n[i][t]}})}function Pt(e){return e._slotsProxy||Rt(e._slotsProxy={},e.$scopedSlots),e._slotsProxy}function Rt(e,t){for(var n in t)e[n]=t[n];for(var n in e)n in t||delete e[n]}function Lt(e){e._vnode=null,e._staticTrees=null;var t=e.$options,n=e.$vnode=t._parentVnode,s=n&&n.context;e.$slots=Ct(t._renderChildren,s),e.$scopedSlots=n?Et(e.$parent,n.data.scopedSlots,e.$slots):i,e._c=function(t,n,i,s){return qt(e,t,n,i,s,!1)},e.$createElement=function(t,n,i,s){return qt(e,t,n,i,s,!0)};var r=n&&n.data;Fe(e,"$attrs",r&&r.attrs||i,null,!0),Fe(e,"$listeners",t._parentListeners||i,null,!0)}var $t=null;function Mt(e){It(e.prototype),e.prototype.$nextTick=function(e){return cn(e,this)},e.prototype._render=function(){var e,t=this,n=t.$options,i=n.render,r=n._parentVnode;r&&t._isMounted&&(t.$scopedSlots=Et(t.$parent,r.data.scopedSlots,t.$slots,t.$scopedSlots),t._slotsProxy&&Rt(t._slotsProxy,t.$scopedSlots)),t.$vnode=r;try{ge(t),$t=t,e=i.call(t._renderProxy,t.$createElement)}catch(Yo){Kt(Yo,t,"render"),e=t._vnode}finally{$t=null,ge()}return s(e)&&1===e.length&&(e=e[0]),e instanceof ve||(e=ye()),e.parent=r,e}}function Ft(e,t){return(e.__esModule||fe&&"Module"===e[Symbol.toStringTag])&&(e=e.default),h(e)?t.extend(e):e}function Vt(e,t,n,i,s){var r=ye();return r.asyncFactory=e,r.asyncMeta={data:t,context:n,children:i,tag:s},r}function Bt(e,t){if(a(e.error)&&o(e.errorComp))return e.errorComp;if(o(e.resolved))return e.resolved;var n=$t;if(n&&o(e.owners)&&-1===e.owners.indexOf(n)&&e.owners.push(n),a(e.loading)&&o(e.loadingComp))return e.loadingComp;if(n&&!o(e.owners)){var i=e.owners=[n],s=!0,c=null,l=null;n.$on("hook:destroyed",(function(){return b(i,n)}));var u=function(e){for(var t=0,n=i.length;t<n;t++)i[t].$forceUpdate();e&&(i.length=0,null!==c&&(clearTimeout(c),c=null),null!==l&&(clearTimeout(l),l=null))},d=U((function(n){e.resolved=Ft(n,t),s?i.length=0:u(!0)})),p=U((function(t){o(e.errorComp)&&(e.error=!0,u(!0))})),f=e(d,p);return h(f)&&(g(f)?r(e.resolved)&&f.then(d,p):g(f.component)&&(f.component.then(d,p),o(f.error)&&(e.errorComp=Ft(f.error,t)),o(f.loading)&&(e.loadingComp=Ft(f.loading,t),0===f.delay?e.loading=!0:c=setTimeout((function(){c=null,r(e.resolved)&&r(e.error)&&(e.loading=!0,u(!1))}),f.delay||200)),o(f.timeout)&&(l=setTimeout((function(){l=null,r(e.resolved)&&p(null)}),f.timeout)))),s=!1,e.loading?e.loadingComp:e.resolved}}function Ut(e){if(s(e))for(var t=0;t<e.length;t++){var n=e[t];if(o(n)&&(o(n.componentOptions)||Tt(n)))return n}}var jt=1,zt=2;function qt(e,t,n,i,r,o){return(s(n)||l(n))&&(r=i,i=n,n=void 0),a(o)&&(r=zt),Ht(e,t,n,i,r)}function Ht(e,t,n,i,r){if(o(n)&&o(n.__ob__))return ye();if(o(n)&&o(n.is)&&(t=n.is),!t)return ye();var a,c;if(s(i)&&u(i[0])&&(n=n||{},n.scopedSlots={default:i[0]},i.length=0),r===zt?i=rt(i):r===jt&&(i=st(i)),"string"===typeof t){var l=void 0;c=e.$vnode&&e.$vnode.ns||W.getTagNamespace(t),a=W.isReservedTag(t)?new ve(W.parsePlatformTagName(t),n,i,void 0,void 0,e):n&&n.pre||!o(l=Ci(e.$options,"components",t))?new ve(t,n,i,void 0,void 0,e):oi(l,n,e,i,t)}else a=oi(t,n,e,i);return s(a)?a:o(a)?(o(c)&&Wt(a,c),o(n)&&Zt(n),a):ye()}function Wt(e,t,n){if(e.ns=t,"foreignObject"===e.tag&&(t=void 0,n=!0),o(e.children))for(var i=0,s=e.children.length;i<s;i++){var c=e.children[i];o(c.tag)&&(r(c.ns)||a(n)&&"svg"!==c.tag)&&Wt(c,t,n)}}function Zt(e){h(e.style)&&pn(e.style),h(e.class)&&pn(e.class)}function Kt(e,t,n){Ee();try{if(t){var i=t;while(i=i.$parent){var s=i.$options.errorCaptured;if(s)for(var r=0;r<s.length;r++)try{var o=!1===s[r].call(i,e,t,n);if(o)return}catch(Yo){Qt(Yo,i,"errorCaptured hook")}}}Qt(e,t,n)}finally{ke()}}function Gt(e,t,n,i,s){var r;try{r=n?e.apply(t,n):e.call(t),r&&!r._isVue&&g(r)&&!r._handled&&(r.catch((function(e){return Kt(e,i,s+" (Promise/async)")})),r._handled=!0)}catch(Yo){Kt(Yo,i,s)}return r}function Qt(e,t,n){if(W.errorHandler)try{return W.errorHandler.call(null,e,t,n)}catch(Yo){Yo!==e&&Yt(Yo,null,"config.errorHandler")}Yt(e,t,n)}function Yt(e,t,n){if(!J||"undefined"===typeof console)throw e;console.error(e)}var Xt,Jt=!1,en=[],tn=!1;function nn(){tn=!1;var e=en.slice(0);en.length=0;for(var t=0;t<e.length;t++)e[t]()}if("undefined"!==typeof Promise&&de(Promise)){var sn=Promise.resolve();Xt=function(){sn.then(nn),se&&setTimeout($)},Jt=!0}else if(te||"undefined"===typeof MutationObserver||!de(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Xt="undefined"!==typeof setImmediate&&de(setImmediate)?function(){setImmediate(nn)}:function(){setTimeout(nn,0)};else{var rn=1,on=new MutationObserver(nn),an=document.createTextNode(String(rn));on.observe(an,{characterData:!0}),Xt=function(){rn=(rn+1)%2,an.data=String(rn)},Jt=!0}function cn(e,t){var n;if(en.push((function(){if(e)try{e.call(t)}catch(Yo){Kt(Yo,t,"nextTick")}else n&&n(t)})),tn||(tn=!0,Xt()),!e&&"undefined"!==typeof Promise)return new Promise((function(e){n=e}))}function ln(e){return function(t,n){if(void 0===n&&(n=me),n)return un(n,e,t)}}function un(e,t,n){var i=e.$options;i[t]=mi(i[t],n)}ln("beforeMount"),ln("mounted"),ln("beforeUpdate"),ln("updated"),ln("beforeDestroy"),ln("destroyed"),ln("activated"),ln("deactivated"),ln("serverPrefetch"),ln("renderTracked"),ln("renderTriggered"),ln("errorCaptured");var hn="2.7.14";var dn=new pe;function pn(e){return fn(e,dn),dn.clear(),e}function fn(e,t){var n,i,r=s(e);if(!(!r&&!h(e)||e.__v_skip||Object.isFrozen(e)||e instanceof ve)){if(e.__ob__){var o=e.__ob__.dep.id;if(t.has(o))return;t.add(o)}if(r){n=e.length;while(n--)fn(e[n],t)}else if(He(e))fn(e.value,t);else{i=Object.keys(e),n=i.length;while(n--)fn(e[i[n]],t)}}}var mn,gn=0,vn=function(){function e(e,t,n,i,s){Qe(this,Ke&&!Ke._vm?Ke:e?e._scope:void 0),(this.vm=e)&&s&&(e._watcher=this),i?(this.deep=!!i.deep,this.user=!!i.user,this.lazy=!!i.lazy,this.sync=!!i.sync,this.before=i.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++gn,this.active=!0,this.post=!1,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new pe,this.newDepIds=new pe,this.expression="",u(t)?this.getter=t:(this.getter=Y(t),this.getter||(this.getter=$)),this.value=this.lazy?void 0:this.get()}return e.prototype.get=function(){var e;Ee(this);var t=this.vm;try{e=this.getter.call(t,t)}catch(Yo){if(!this.user)throw Yo;Kt(Yo,t,'getter for watcher "'.concat(this.expression,'"'))}finally{this.deep&&pn(e),ke(),this.cleanupDeps()}return e},e.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},e.prototype.cleanupDeps=function(){var e=this.deps.length;while(e--){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},e.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():Gn(this)},e.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||h(e)||this.deep){var t=this.value;if(this.value=e,this.user){var n='callback for watcher "'.concat(this.expression,'"');Gt(this.cb,this.vm,[e,t],this.vm,n)}else this.cb.call(this.vm,e,t)}}},e.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},e.prototype.depend=function(){var e=this.deps.length;while(e--)this.deps[e].depend()},e.prototype.teardown=function(){if(this.vm&&!this.vm._isBeingDestroyed&&b(this.vm._scope.effects,this),this.active){var e=this.deps.length;while(e--)this.deps[e].removeSub(this);this.active=!1,this.onStop&&this.onStop()}},e}();function yn(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&In(e,t)}function _n(e,t){mn.$on(e,t)}function wn(e,t){mn.$off(e,t)}function bn(e,t){var n=mn;return function i(){var s=t.apply(null,arguments);null!==s&&n.$off(e,i)}}function In(e,t,n){mn=e,et(t,n||{},_n,wn,bn,e),mn=void 0}function Cn(e){var t=/^hook:/;e.prototype.$on=function(e,n){var i=this;if(s(e))for(var r=0,o=e.length;r<o;r++)i.$on(e[r],n);else(i._events[e]||(i._events[e]=[])).push(n),t.test(e)&&(i._hasHookEvent=!0);return i},e.prototype.$once=function(e,t){var n=this;function i(){n.$off(e,i),t.apply(n,arguments)}return i.fn=t,n.$on(e,i),n},e.prototype.$off=function(e,t){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(s(e)){for(var i=0,r=e.length;i<r;i++)n.$off(e[i],t);return n}var o,a=n._events[e];if(!a)return n;if(!t)return n._events[e]=null,n;var c=a.length;while(c--)if(o=a[c],o===t||o.fn===t){a.splice(c,1);break}return n},e.prototype.$emit=function(e){var t=this,n=t._events[e];if(n){n=n.length>1?P(n):n;for(var i=P(arguments,1),s='event handler for "'.concat(e,'"'),r=0,o=n.length;r<o;r++)Gt(n[r],t,i,t,s)}return t}}var Sn=null;function Tn(e){var t=Sn;return Sn=e,function(){Sn=t}}function En(e){var t=e.$options,n=t.parent;if(n&&!t.abstract){while(n.$options.abstract&&n.$parent)n=n.$parent;n.$children.push(e)}e.$parent=n,e.$root=n?n.$root:e,e.$children=[],e.$refs={},e._provided=n?n._provided:Object.create(null),e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}function kn(e){e.prototype._update=function(e,t){var n=this,i=n.$el,s=n._vnode,r=Tn(n);n._vnode=e,n.$el=s?n.__patch__(s,e):n.__patch__(n.$el,e,t,!1),r(),i&&(i.__vue__=null),n.$el&&(n.$el.__vue__=n);var o=n;while(o&&o.$vnode&&o.$parent&&o.$vnode===o.$parent._vnode)o.$parent.$el=o.$el,o=o.$parent},e.prototype.$forceUpdate=function(){var e=this;e._watcher&&e._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){Pn(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||b(t.$children,e),e._scope.stop(),e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),Pn(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}function xn(e,t,n){var i;e.$el=t,e.$options.render||(e.$options.render=ye),Pn(e,"beforeMount"),i=function(){e._update(e._render(),n)};var s={before:function(){e._isMounted&&!e._isDestroyed&&Pn(e,"beforeUpdate")}};new vn(e,i,$,s,!0),n=!1;var r=e._preWatchers;if(r)for(var o=0;o<r.length;o++)r[o].run();return null==e.$vnode&&(e._isMounted=!0,Pn(e,"mounted")),e}function An(e,t,n,s,r){var o=s.data.scopedSlots,a=e.$scopedSlots,c=!!(o&&!o.$stable||a!==i&&!a.$stable||o&&e.$scopedSlots.$key!==o.$key||!o&&e.$scopedSlots.$key),l=!!(r||e.$options._renderChildren||c),u=e.$vnode;e.$options._parentVnode=s,e.$vnode=s,e._vnode&&(e._vnode.parent=s),e.$options._renderChildren=r;var h=s.data.attrs||i;e._attrsProxy&&Ot(e._attrsProxy,h,u.data&&u.data.attrs||i,e,"$attrs")&&(l=!0),e.$attrs=h,n=n||i;var d=e.$options._parentListeners;if(e._listenersProxy&&Ot(e._listenersProxy,n,d||i,e,"$listeners"),e.$listeners=e.$options._parentListeners=n,In(e,n,d),t&&e.$options.props){Re(!1);for(var p=e._props,f=e.$options._propKeys||[],m=0;m<f.length;m++){var g=f[m],v=e.$options.props;p[g]=Si(g,v,t,e)}Re(!0),e.$options.propsData=t}l&&(e.$slots=Ct(r,s.context),e.$forceUpdate())}function Nn(e){while(e&&(e=e.$parent))if(e._inactive)return!0;return!1}function On(e,t){if(t){if(e._directInactive=!1,Nn(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var n=0;n<e.$children.length;n++)On(e.$children[n]);Pn(e,"activated")}}function Dn(e,t){if((!t||(e._directInactive=!0,!Nn(e)))&&!e._inactive){e._inactive=!0;for(var n=0;n<e.$children.length;n++)Dn(e.$children[n]);Pn(e,"deactivated")}}function Pn(e,t,n,i){void 0===i&&(i=!0),Ee();var s=me;i&&ge(e);var r=e.$options[t],o="".concat(t," hook");if(r)for(var a=0,c=r.length;a<c;a++)Gt(r[a],e,n||null,e,o);e._hasHookEvent&&e.$emit("hook:"+t),i&&ge(s),ke()}var Rn=[],Ln=[],$n={},Mn=!1,Fn=!1,Vn=0;function Bn(){Vn=Rn.length=Ln.length=0,$n={},Mn=Fn=!1}var Un=0,jn=Date.now;if(J&&!te){var zn=window.performance;zn&&"function"===typeof zn.now&&jn()>document.createEvent("Event").timeStamp&&(jn=function(){return zn.now()})}var qn=function(e,t){if(e.post){if(!t.post)return 1}else if(t.post)return-1;return e.id-t.id};function Hn(){var e,t;for(Un=jn(),Fn=!0,Rn.sort(qn),Vn=0;Vn<Rn.length;Vn++)e=Rn[Vn],e.before&&e.before(),t=e.id,$n[t]=null,e.run();var n=Ln.slice(),i=Rn.slice();Bn(),Kn(n),Wn(i),Ce(),he&&W.devtools&&he.emit("flush")}function Wn(e){var t=e.length;while(t--){var n=e[t],i=n.vm;i&&i._watcher===n&&i._isMounted&&!i._isDestroyed&&Pn(i,"updated")}}function Zn(e){e._inactive=!1,Ln.push(e)}function Kn(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,On(e[t],!0)}function Gn(e){var t=e.id;if(null==$n[t]&&(e!==Se.target||!e.noRecurse)){if($n[t]=!0,Fn){var n=Rn.length-1;while(n>Vn&&Rn[n].id>e.id)n--;Rn.splice(n+1,0,e)}else Rn.push(e);Mn||(Mn=!0,cn(Hn))}}function Qn(e){var t=e.$options.provide;if(t){var n=u(t)?t.call(e):t;if(!h(n))return;for(var i=Ye(e),s=fe?Reflect.ownKeys(n):Object.keys(n),r=0;r<s.length;r++){var o=s[r];Object.defineProperty(i,o,Object.getOwnPropertyDescriptor(n,o))}}}function Yn(e){var t=Xn(e.$options.inject,e);t&&(Re(!1),Object.keys(t).forEach((function(n){Fe(e,n,t[n])})),Re(!0))}function Xn(e,t){if(e){for(var n=Object.create(null),i=fe?Reflect.ownKeys(e):Object.keys(e),s=0;s<i.length;s++){var r=i[s];if("__ob__"!==r){var o=e[r].from;if(o in t._provided)n[r]=t._provided[o];else if("default"in e[r]){var a=e[r].default;n[r]=u(a)?a.call(t):a}else 0}}return n}}function Jn(e,t,n,r,o){var c,l=this,u=o.options;C(r,"_uid")?(c=Object.create(r),c._original=r):(c=r,r=r._original);var h=a(u._compiled),d=!h;this.data=e,this.props=t,this.children=n,this.parent=r,this.listeners=e.on||i,this.injections=Xn(u.inject,r),this.slots=function(){return l.$slots||Et(r,e.scopedSlots,l.$slots=Ct(n,r)),l.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return Et(r,e.scopedSlots,this.slots())}}),h&&(this.$options=u,this.$slots=this.slots(),this.$scopedSlots=Et(r,e.scopedSlots,this.$slots)),u._scopeId?this._c=function(e,t,n,i){var o=qt(c,e,t,n,i,d);return o&&!s(o)&&(o.fnScopeId=u._scopeId,o.fnContext=r),o}:this._c=function(e,t,n,i){return qt(c,e,t,n,i,d)}}function ei(e,t,n,r,a){var c=e.options,l={},u=c.props;if(o(u))for(var h in u)l[h]=Si(h,u,t||i);else o(n.attrs)&&ni(l,n.attrs),o(n.props)&&ni(l,n.props);var d=new Jn(n,l,a,r,e),p=c.render.call(null,d._c,d);if(p instanceof ve)return ti(p,n,d.parent,c,d);if(s(p)){for(var f=rt(p)||[],m=new Array(f.length),g=0;g<f.length;g++)m[g]=ti(f[g],n,d.parent,c,d);return m}}function ti(e,t,n,i,s){var r=we(e);return r.fnContext=n,r.fnOptions=i,t.slot&&((r.data||(r.data={})).slot=t.slot),r}function ni(e,t){for(var n in t)e[E(n)]=t[n]}function ii(e){return e.name||e.__name||e._componentTag}It(Jn.prototype);var si={init:function(e,t){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var n=e;si.prepatch(n,n)}else{var i=e.componentInstance=ai(e,Sn);i.$mount(t?e.elm:void 0,t)}},prepatch:function(e,t){var n=t.componentOptions,i=t.componentInstance=e.componentInstance;An(i,n.propsData,n.listeners,t,n.children)},insert:function(e){var t=e.context,n=e.componentInstance;n._isMounted||(n._isMounted=!0,Pn(n,"mounted")),e.data.keepAlive&&(t._isMounted?Zn(n):On(n,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?Dn(t,!0):t.$destroy())}},ri=Object.keys(si);function oi(e,t,n,i,s){if(!r(e)){var c=n.$options._base;if(h(e)&&(e=c.extend(e)),"function"===typeof e){var l;if(r(e.cid)&&(l=e,e=Bt(l,c),void 0===e))return Vt(l,t,n,i,s);t=t||{},Ki(e),o(t.model)&&ui(e.options,t);var u=nt(t,e,s);if(a(e.options.functional))return ei(e,u,t,n,i);var d=t.on;if(t.on=t.nativeOn,a(e.options.abstract)){var p=t.slot;t={},p&&(t.slot=p)}ci(t);var f=ii(e.options)||s,m=new ve("vue-component-".concat(e.cid).concat(f?"-".concat(f):""),t,void 0,void 0,void 0,n,{Ctor:e,propsData:u,listeners:d,tag:s,children:i},l);return m}}}function ai(e,t){var n={_isComponent:!0,_parentVnode:e,parent:t},i=e.data.inlineTemplate;return o(i)&&(n.render=i.render,n.staticRenderFns=i.staticRenderFns),new e.componentOptions.Ctor(n)}function ci(e){for(var t=e.hook||(e.hook={}),n=0;n<ri.length;n++){var i=ri[n],s=t[i],r=si[i];s===r||s&&s._merged||(t[i]=s?li(r,s):r)}}function li(e,t){var n=function(n,i){e(n,i),t(n,i)};return n._merged=!0,n}function ui(e,t){var n=e.model&&e.model.prop||"value",i=e.model&&e.model.event||"input";(t.attrs||(t.attrs={}))[n]=t.model.value;var r=t.on||(t.on={}),a=r[i],c=t.model.callback;o(a)?(s(a)?-1===a.indexOf(c):a!==c)&&(r[i]=[c].concat(a)):r[i]=c}var hi=$,di=W.optionMergeStrategies;function pi(e,t,n){if(void 0===n&&(n=!0),!t)return e;for(var i,s,r,o=fe?Reflect.ownKeys(t):Object.keys(t),a=0;a<o.length;a++)i=o[a],"__ob__"!==i&&(s=e[i],r=t[i],n&&C(e,i)?s!==r&&p(s)&&p(r)&&pi(s,r):Ve(e,i,r));return e}function fi(e,t,n){return n?function(){var i=u(t)?t.call(n,n):t,s=u(e)?e.call(n,n):e;return i?pi(i,s):s}:t?e?function(){return pi(u(t)?t.call(this,this):t,u(e)?e.call(this,this):e)}:t:e}function mi(e,t){var n=t?e?e.concat(t):s(t)?t:[t]:e;return n?gi(n):n}function gi(e){for(var t=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&t.push(e[n]);return t}function vi(e,t,n,i){var s=Object.create(e||null);return t?R(s,t):s}di.data=function(e,t,n){return n?fi(e,t,n):t&&"function"!==typeof t?e:fi(e,t)},H.forEach((function(e){di[e]=mi})),q.forEach((function(e){di[e+"s"]=vi})),di.watch=function(e,t,n,i){if(e===ae&&(e=void 0),t===ae&&(t=void 0),!t)return Object.create(e||null);if(!e)return t;var r={};for(var o in R(r,e),t){var a=r[o],c=t[o];a&&!s(a)&&(a=[a]),r[o]=a?a.concat(c):s(c)?c:[c]}return r},di.props=di.methods=di.inject=di.computed=function(e,t,n,i){if(!e)return t;var s=Object.create(null);return R(s,e),t&&R(s,t),s},di.provide=function(e,t){return e?function(){var n=Object.create(null);return pi(n,u(e)?e.call(this):e),t&&pi(n,u(t)?t.call(this):t,!1),n}:t};var yi=function(e,t){return void 0===t?e:t};function _i(e,t){var n=e.props;if(n){var i,r,o,a={};if(s(n)){i=n.length;while(i--)r=n[i],"string"===typeof r&&(o=E(r),a[o]={type:null})}else if(p(n))for(var c in n)r=n[c],o=E(c),a[o]=p(r)?r:{type:r};else 0;e.props=a}}function wi(e,t){var n=e.inject;if(n){var i=e.inject={};if(s(n))for(var r=0;r<n.length;r++)i[n[r]]={from:n[r]};else if(p(n))for(var o in n){var a=n[o];i[o]=p(a)?R({from:o},a):{from:a}}else 0}}function bi(e){var t=e.directives;if(t)for(var n in t){var i=t[n];u(i)&&(t[n]={bind:i,update:i})}}function Ii(e,t,n){if(u(t)&&(t=t.options),_i(t,n),wi(t,n),bi(t),!t._base&&(t.extends&&(e=Ii(e,t.extends,n)),t.mixins))for(var i=0,s=t.mixins.length;i<s;i++)e=Ii(e,t.mixins[i],n);var r,o={};for(r in e)a(r);for(r in t)C(e,r)||a(r);function a(i){var s=di[i]||yi;o[i]=s(e[i],t[i],n,i)}return o}function Ci(e,t,n,i){if("string"===typeof n){var s=e[t];if(C(s,n))return s[n];var r=E(n);if(C(s,r))return s[r];var o=k(r);if(C(s,o))return s[o];var a=s[n]||s[r]||s[o];return a}}function Si(e,t,n,i){var s=t[e],r=!C(n,e),o=n[e],a=Ai(Boolean,s.type);if(a>-1)if(r&&!C(s,"default"))o=!1;else if(""===o||o===A(e)){var c=Ai(String,s.type);(c<0||a<c)&&(o=!0)}if(void 0===o){o=Ti(i,s,e);var l=Pe;Re(!0),Me(o),Re(l)}return o}function Ti(e,t,n){if(C(t,"default")){var i=t.default;return e&&e.$options.propsData&&void 0===e.$options.propsData[n]&&void 0!==e._props[n]?e._props[n]:u(i)&&"Function"!==ki(t.type)?i.call(e):i}}var Ei=/^\s*function (\w+)/;function ki(e){var t=e&&e.toString().match(Ei);return t?t[1]:""}function xi(e,t){return ki(e)===ki(t)}function Ai(e,t){if(!s(t))return xi(t,e)?0:-1;for(var n=0,i=t.length;n<i;n++)if(xi(t[n],e))return n;return-1}var Ni={enumerable:!0,configurable:!0,get:$,set:$};function Oi(e,t,n){Ni.get=function(){return this[t][n]},Ni.set=function(e){this[t][n]=e},Object.defineProperty(e,n,Ni)}function Di(e){var t=e.$options;if(t.props&&Pi(e,t.props),At(e),t.methods&&Ui(e,t.methods),t.data)Ri(e);else{var n=Me(e._data={});n&&n.vmCount++}t.computed&&Mi(e,t.computed),t.watch&&t.watch!==ae&&ji(e,t.watch)}function Pi(e,t){var n=e.$options.propsData||{},i=e._props=je({}),s=e.$options._propKeys=[],r=!e.$parent;r||Re(!1);var o=function(r){s.push(r);var o=Si(r,t,n,e);Fe(i,r,o),r in e||Oi(e,"_props",r)};for(var a in t)o(a);Re(!0)}function Ri(e){var t=e.$options.data;t=e._data=u(t)?Li(t,e):t||{},p(t)||(t={});var n=Object.keys(t),i=e.$options.props,s=(e.$options.methods,n.length);while(s--){var r=n[s];0,i&&C(i,r)||K(r)||Oi(e,"_data",r)}var o=Me(t);o&&o.vmCount++}function Li(e,t){Ee();try{return e.call(t,t)}catch(Yo){return Kt(Yo,t,"data()"),{}}finally{ke()}}var $i={lazy:!0};function Mi(e,t){var n=e._computedWatchers=Object.create(null),i=ue();for(var s in t){var r=t[s],o=u(r)?r:r.get;0,i||(n[s]=new vn(e,o||$,$,$i)),s in e||Fi(e,s,r)}}function Fi(e,t,n){var i=!ue();u(n)?(Ni.get=i?Vi(t):Bi(n),Ni.set=$):(Ni.get=n.get?i&&!1!==n.cache?Vi(t):Bi(n.get):$,Ni.set=n.set||$),Object.defineProperty(e,t,Ni)}function Vi(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),Se.target&&t.depend(),t.value}}function Bi(e){return function(){return e.call(this,this)}}function Ui(e,t){e.$options.props;for(var n in t)e[n]="function"!==typeof t[n]?$:D(t[n],e)}function ji(e,t){for(var n in t){var i=t[n];if(s(i))for(var r=0;r<i.length;r++)zi(e,n,i[r]);else zi(e,n,i)}}function zi(e,t,n,i){return p(n)&&(i=n,n=n.handler),"string"===typeof n&&(n=e[n]),e.$watch(t,n,i)}function qi(e){var t={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(e.prototype,"$data",t),Object.defineProperty(e.prototype,"$props",n),e.prototype.$set=Ve,e.prototype.$delete=Be,e.prototype.$watch=function(e,t,n){var i=this;if(p(t))return zi(i,e,t,n);n=n||{},n.user=!0;var s=new vn(i,e,t,n);if(n.immediate){var r='callback for immediate watcher "'.concat(s.expression,'"');Ee(),Gt(t,i,[s.value],i,r),ke()}return function(){s.teardown()}}}var Hi=0;function Wi(e){e.prototype._init=function(e){var t=this;t._uid=Hi++,t._isVue=!0,t.__v_skip=!0,t._scope=new Ge(!0),t._scope._vm=!0,e&&e._isComponent?Zi(t,e):t.$options=Ii(Ki(t.constructor),e||{},t),t._renderProxy=t,t._self=t,En(t),yn(t),Lt(t),Pn(t,"beforeCreate",void 0,!1),Yn(t),Di(t),Qn(t),Pn(t,"created"),t.$options.el&&t.$mount(t.$options.el)}}function Zi(e,t){var n=e.$options=Object.create(e.constructor.options),i=t._parentVnode;n.parent=t.parent,n._parentVnode=i;var s=i.componentOptions;n.propsData=s.propsData,n._parentListeners=s.listeners,n._renderChildren=s.children,n._componentTag=s.tag,t.render&&(n.render=t.render,n.staticRenderFns=t.staticRenderFns)}function Ki(e){var t=e.options;if(e.super){var n=Ki(e.super),i=e.superOptions;if(n!==i){e.superOptions=n;var s=Gi(e);s&&R(e.extendOptions,s),t=e.options=Ii(n,e.extendOptions),t.name&&(t.components[t.name]=e)}}return t}function Gi(e){var t,n=e.options,i=e.sealedOptions;for(var s in n)n[s]!==i[s]&&(t||(t={}),t[s]=n[s]);return t}function Qi(e){this._init(e)}function Yi(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var n=P(arguments,1);return n.unshift(this),u(e.install)?e.install.apply(e,n):u(e)&&e.apply(null,n),t.push(e),this}}function Xi(e){e.mixin=function(e){return this.options=Ii(this.options,e),this}}function Ji(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var n=this,i=n.cid,s=e._Ctor||(e._Ctor={});if(s[i])return s[i];var r=ii(e)||ii(n.options);var o=function(e){this._init(e)};return o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.cid=t++,o.options=Ii(n.options,e),o["super"]=n,o.options.props&&es(o),o.options.computed&&ts(o),o.extend=n.extend,o.mixin=n.mixin,o.use=n.use,q.forEach((function(e){o[e]=n[e]})),r&&(o.options.components[r]=o),o.superOptions=n.options,o.extendOptions=e,o.sealedOptions=R({},o.options),s[i]=o,o}}function es(e){var t=e.options.props;for(var n in t)Oi(e.prototype,"_props",n)}function ts(e){var t=e.options.computed;for(var n in t)Fi(e.prototype,n,t[n])}function ns(e){q.forEach((function(t){e[t]=function(e,n){return n?("component"===t&&p(n)&&(n.name=n.name||e,n=this.options._base.extend(n)),"directive"===t&&u(n)&&(n={bind:n,update:n}),this.options[t+"s"][e]=n,n):this.options[t+"s"][e]}}))}function is(e){return e&&(ii(e.Ctor.options)||e.tag)}function ss(e,t){return s(e)?e.indexOf(t)>-1:"string"===typeof e?e.split(",").indexOf(t)>-1:!!f(e)&&e.test(t)}function rs(e,t){var n=e.cache,i=e.keys,s=e._vnode;for(var r in n){var o=n[r];if(o){var a=o.name;a&&!t(a)&&os(n,r,i,s)}}}function os(e,t,n,i){var s=e[t];!s||i&&s.tag===i.tag||s.componentInstance.$destroy(),e[t]=null,b(n,t)}Wi(Qi),qi(Qi),Cn(Qi),kn(Qi),Mt(Qi);var as=[String,RegExp,Array],cs={name:"keep-alive",abstract:!0,props:{include:as,exclude:as,max:[String,Number]},methods:{cacheVNode:function(){var e=this,t=e.cache,n=e.keys,i=e.vnodeToCache,s=e.keyToCache;if(i){var r=i.tag,o=i.componentInstance,a=i.componentOptions;t[s]={name:is(a),tag:r,componentInstance:o},n.push(s),this.max&&n.length>parseInt(this.max)&&os(t,n[0],n,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)os(this.cache,e,this.keys)},mounted:function(){var e=this;this.cacheVNode(),this.$watch("include",(function(t){rs(e,(function(e){return ss(t,e)}))})),this.$watch("exclude",(function(t){rs(e,(function(e){return!ss(t,e)}))}))},updated:function(){this.cacheVNode()},render:function(){var e=this.$slots.default,t=Ut(e),n=t&&t.componentOptions;if(n){var i=is(n),s=this,r=s.include,o=s.exclude;if(r&&(!i||!ss(r,i))||o&&i&&ss(o,i))return t;var a=this,c=a.cache,l=a.keys,u=null==t.key?n.Ctor.cid+(n.tag?"::".concat(n.tag):""):t.key;c[u]?(t.componentInstance=c[u].componentInstance,b(l,u),l.push(u)):(this.vnodeToCache=t,this.keyToCache=u),t.data.keepAlive=!0}return t||e&&e[0]}},ls={KeepAlive:cs};function us(e){var t={get:function(){return W}};Object.defineProperty(e,"config",t),e.util={warn:hi,extend:R,mergeOptions:Ii,defineReactive:Fe},e.set=Ve,e.delete=Be,e.nextTick=cn,e.observable=function(e){return Me(e),e},e.options=Object.create(null),q.forEach((function(t){e.options[t+"s"]=Object.create(null)})),e.options._base=e,R(e.options.components,ls),Yi(e),Xi(e),Ji(e),ns(e)}us(Qi),Object.defineProperty(Qi.prototype,"$isServer",{get:ue}),Object.defineProperty(Qi.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Qi,"FunctionalRenderContext",{value:Jn}),Qi.version=hn;var hs=_("style,class"),ds=_("input,textarea,option,select,progress"),ps=function(e,t,n){return"value"===n&&ds(e)&&"button"!==t||"selected"===n&&"option"===e||"checked"===n&&"input"===e||"muted"===n&&"video"===e},fs=_("contenteditable,draggable,spellcheck"),ms=_("events,caret,typing,plaintext-only"),gs=function(e,t){return bs(t)||"false"===t?"false":"contenteditable"===e&&ms(t)?t:"true"},vs=_("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),ys="http://www.w3.org/1999/xlink",_s=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},ws=function(e){return _s(e)?e.slice(6,e.length):""},bs=function(e){return null==e||!1===e};function Is(e){var t=e.data,n=e,i=e;while(o(i.componentInstance))i=i.componentInstance._vnode,i&&i.data&&(t=Cs(i.data,t));while(o(n=n.parent))n&&n.data&&(t=Cs(t,n.data));return Ss(t.staticClass,t.class)}function Cs(e,t){return{staticClass:Ts(e.staticClass,t.staticClass),class:o(e.class)?[e.class,t.class]:t.class}}function Ss(e,t){return o(e)||o(t)?Ts(e,Es(t)):""}function Ts(e,t){return e?t?e+" "+t:e:t||""}function Es(e){return Array.isArray(e)?ks(e):h(e)?xs(e):"string"===typeof e?e:""}function ks(e){for(var t,n="",i=0,s=e.length;i<s;i++)o(t=Es(e[i]))&&""!==t&&(n&&(n+=" "),n+=t);return n}function xs(e){var t="";for(var n in e)e[n]&&(t&&(t+=" "),t+=n);return t}var As={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Ns=_("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Os=_("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Ds=function(e){return Ns(e)||Os(e)};function Ps(e){return Os(e)?"svg":"math"===e?"math":void 0}var Rs=Object.create(null);function Ls(e){if(!J)return!0;if(Ds(e))return!1;if(e=e.toLowerCase(),null!=Rs[e])return Rs[e];var t=document.createElement(e);return e.indexOf("-")>-1?Rs[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:Rs[e]=/HTMLUnknownElement/.test(t.toString())}var $s=_("text,number,password,search,email,tel,url");function Ms(e){if("string"===typeof e){var t=document.querySelector(e);return t||document.createElement("div")}return e}function Fs(e,t){var n=document.createElement(e);return"select"!==e||t.data&&t.data.attrs&&void 0!==t.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n}function Vs(e,t){return document.createElementNS(As[e],t)}function Bs(e){return document.createTextNode(e)}function Us(e){return document.createComment(e)}function js(e,t,n){e.insertBefore(t,n)}function zs(e,t){e.removeChild(t)}function qs(e,t){e.appendChild(t)}function Hs(e){return e.parentNode}function Ws(e){return e.nextSibling}function Zs(e){return e.tagName}function Ks(e,t){e.textContent=t}function Gs(e,t){e.setAttribute(t,"")}var Qs=Object.freeze({__proto__:null,createElement:Fs,createElementNS:Vs,createTextNode:Bs,createComment:Us,insertBefore:js,removeChild:zs,appendChild:qs,parentNode:Hs,nextSibling:Ws,tagName:Zs,setTextContent:Ks,setStyleScope:Gs}),Ys={create:function(e,t){Xs(t)},update:function(e,t){e.data.ref!==t.data.ref&&(Xs(e,!0),Xs(t))},destroy:function(e){Xs(e,!0)}};function Xs(e,t){var n=e.data.ref;if(o(n)){var i=e.context,r=e.componentInstance||e.elm,a=t?null:r,c=t?void 0:r;if(u(n))Gt(n,i,[a],i,"template ref function");else{var l=e.data.refInFor,h="string"===typeof n||"number"===typeof n,d=He(n),p=i.$refs;if(h||d)if(l){var f=h?p[n]:n.value;t?s(f)&&b(f,r):s(f)?f.includes(r)||f.push(r):h?(p[n]=[r],Js(i,n,p[n])):n.value=[r]}else if(h){if(t&&p[n]!==r)return;p[n]=c,Js(i,n,a)}else if(d){if(t&&n.value!==r)return;n.value=a}else 0}}}function Js(e,t,n){var i=e._setupState;i&&C(i,t)&&(He(i[t])?i[t].value=n:i[t]=n)}var er=new ve("",{},[]),tr=["create","activate","update","remove","destroy"];function nr(e,t){return e.key===t.key&&e.asyncFactory===t.asyncFactory&&(e.tag===t.tag&&e.isComment===t.isComment&&o(e.data)===o(t.data)&&ir(e,t)||a(e.isAsyncPlaceholder)&&r(t.asyncFactory.error))}function ir(e,t){if("input"!==e.tag)return!0;var n,i=o(n=e.data)&&o(n=n.attrs)&&n.type,s=o(n=t.data)&&o(n=n.attrs)&&n.type;return i===s||$s(i)&&$s(s)}function sr(e,t,n){var i,s,r={};for(i=t;i<=n;++i)s=e[i].key,o(s)&&(r[s]=i);return r}function rr(e){var t,n,i={},c=e.modules,u=e.nodeOps;for(t=0;t<tr.length;++t)for(i[tr[t]]=[],n=0;n<c.length;++n)o(c[n][tr[t]])&&i[tr[t]].push(c[n][tr[t]]);function h(e){return new ve(u.tagName(e).toLowerCase(),{},[],void 0,e)}function d(e,t){function n(){0===--n.listeners&&p(e)}return n.listeners=t,n}function p(e){var t=u.parentNode(e);o(t)&&u.removeChild(t,e)}function f(e,t,n,i,s,r,c){if(o(e.elm)&&o(r)&&(e=r[c]=we(e)),e.isRootInsert=!s,!m(e,t,n,i)){var l=e.data,h=e.children,d=e.tag;o(d)?(e.elm=e.ns?u.createElementNS(e.ns,d):u.createElement(d,e),C(e),w(e,h,t),o(l)&&I(e,t),y(n,e.elm,i)):a(e.isComment)?(e.elm=u.createComment(e.text),y(n,e.elm,i)):(e.elm=u.createTextNode(e.text),y(n,e.elm,i))}}function m(e,t,n,i){var s=e.data;if(o(s)){var r=o(e.componentInstance)&&s.keepAlive;if(o(s=s.hook)&&o(s=s.init)&&s(e,!1),o(e.componentInstance))return g(e,t),y(n,e.elm,i),a(r)&&v(e,t,n,i),!0}}function g(e,t){o(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,b(e)?(I(e,t),C(e)):(Xs(e),t.push(e))}function v(e,t,n,s){var r,a=e;while(a.componentInstance)if(a=a.componentInstance._vnode,o(r=a.data)&&o(r=r.transition)){for(r=0;r<i.activate.length;++r)i.activate[r](er,a);t.push(a);break}y(n,e.elm,s)}function y(e,t,n){o(e)&&(o(n)?u.parentNode(n)===e&&u.insertBefore(e,t,n):u.appendChild(e,t))}function w(e,t,n){if(s(t)){0;for(var i=0;i<t.length;++i)f(t[i],n,e.elm,null,!0,t,i)}else l(e.text)&&u.appendChild(e.elm,u.createTextNode(String(e.text)))}function b(e){while(e.componentInstance)e=e.componentInstance._vnode;return o(e.tag)}function I(e,n){for(var s=0;s<i.create.length;++s)i.create[s](er,e);t=e.data.hook,o(t)&&(o(t.create)&&t.create(er,e),o(t.insert)&&n.push(e))}function C(e){var t;if(o(t=e.fnScopeId))u.setStyleScope(e.elm,t);else{var n=e;while(n)o(t=n.context)&&o(t=t.$options._scopeId)&&u.setStyleScope(e.elm,t),n=n.parent}o(t=Sn)&&t!==e.context&&t!==e.fnContext&&o(t=t.$options._scopeId)&&u.setStyleScope(e.elm,t)}function S(e,t,n,i,s,r){for(;i<=s;++i)f(n[i],r,e,t,!1,n,i)}function T(e){var t,n,s=e.data;if(o(s))for(o(t=s.hook)&&o(t=t.destroy)&&t(e),t=0;t<i.destroy.length;++t)i.destroy[t](e);if(o(t=e.children))for(n=0;n<e.children.length;++n)T(e.children[n])}function E(e,t,n){for(;t<=n;++t){var i=e[t];o(i)&&(o(i.tag)?(k(i),T(i)):p(i.elm))}}function k(e,t){if(o(t)||o(e.data)){var n,s=i.remove.length+1;for(o(t)?t.listeners+=s:t=d(e.elm,s),o(n=e.componentInstance)&&o(n=n._vnode)&&o(n.data)&&k(n,t),n=0;n<i.remove.length;++n)i.remove[n](e,t);o(n=e.data.hook)&&o(n=n.remove)?n(e,t):t()}else p(e.elm)}function x(e,t,n,i,s){var a,c,l,h,d=0,p=0,m=t.length-1,g=t[0],v=t[m],y=n.length-1,_=n[0],w=n[y],b=!s;while(d<=m&&p<=y)r(g)?g=t[++d]:r(v)?v=t[--m]:nr(g,_)?(N(g,_,i,n,p),g=t[++d],_=n[++p]):nr(v,w)?(N(v,w,i,n,y),v=t[--m],w=n[--y]):nr(g,w)?(N(g,w,i,n,y),b&&u.insertBefore(e,g.elm,u.nextSibling(v.elm)),g=t[++d],w=n[--y]):nr(v,_)?(N(v,_,i,n,p),b&&u.insertBefore(e,v.elm,g.elm),v=t[--m],_=n[++p]):(r(a)&&(a=sr(t,d,m)),c=o(_.key)?a[_.key]:A(_,t,d,m),r(c)?f(_,i,e,g.elm,!1,n,p):(l=t[c],nr(l,_)?(N(l,_,i,n,p),t[c]=void 0,b&&u.insertBefore(e,l.elm,g.elm)):f(_,i,e,g.elm,!1,n,p)),_=n[++p]);d>m?(h=r(n[y+1])?null:n[y+1].elm,S(e,h,n,p,y,i)):p>y&&E(t,d,m)}function A(e,t,n,i){for(var s=n;s<i;s++){var r=t[s];if(o(r)&&nr(e,r))return s}}function N(e,t,n,s,c,l){if(e!==t){o(t.elm)&&o(s)&&(t=s[c]=we(t));var h=t.elm=e.elm;if(a(e.isAsyncPlaceholder))o(t.asyncFactory.resolved)?P(e.elm,t,n):t.isAsyncPlaceholder=!0;else if(a(t.isStatic)&&a(e.isStatic)&&t.key===e.key&&(a(t.isCloned)||a(t.isOnce)))t.componentInstance=e.componentInstance;else{var d,p=t.data;o(p)&&o(d=p.hook)&&o(d=d.prepatch)&&d(e,t);var f=e.children,m=t.children;if(o(p)&&b(t)){for(d=0;d<i.update.length;++d)i.update[d](e,t);o(d=p.hook)&&o(d=d.update)&&d(e,t)}r(t.text)?o(f)&&o(m)?f!==m&&x(h,f,m,n,l):o(m)?(o(e.text)&&u.setTextContent(h,""),S(h,null,m,0,m.length-1,n)):o(f)?E(f,0,f.length-1):o(e.text)&&u.setTextContent(h,""):e.text!==t.text&&u.setTextContent(h,t.text),o(p)&&o(d=p.hook)&&o(d=d.postpatch)&&d(e,t)}}}function O(e,t,n){if(a(n)&&o(e.parent))e.parent.data.pendingInsert=t;else for(var i=0;i<t.length;++i)t[i].data.hook.insert(t[i])}var D=_("attrs,class,staticClass,staticStyle,key");function P(e,t,n,i){var s,r=t.tag,c=t.data,l=t.children;if(i=i||c&&c.pre,t.elm=e,a(t.isComment)&&o(t.asyncFactory))return t.isAsyncPlaceholder=!0,!0;if(o(c)&&(o(s=c.hook)&&o(s=s.init)&&s(t,!0),o(s=t.componentInstance)))return g(t,n),!0;if(o(r)){if(o(l))if(e.hasChildNodes())if(o(s=c)&&o(s=s.domProps)&&o(s=s.innerHTML)){if(s!==e.innerHTML)return!1}else{for(var u=!0,h=e.firstChild,d=0;d<l.length;d++){if(!h||!P(h,l[d],n,i)){u=!1;break}h=h.nextSibling}if(!u||h)return!1}else w(t,l,n);if(o(c)){var p=!1;for(var f in c)if(!D(f)){p=!0,I(t,n);break}!p&&c["class"]&&pn(c["class"])}}else e.data!==t.text&&(e.data=t.text);return!0}return function(e,t,n,s){if(!r(t)){var c=!1,l=[];if(r(e))c=!0,f(t,l);else{var d=o(e.nodeType);if(!d&&nr(e,t))N(e,t,l,null,null,s);else{if(d){if(1===e.nodeType&&e.hasAttribute(z)&&(e.removeAttribute(z),n=!0),a(n)&&P(e,t,l))return O(t,l,!0),e;e=h(e)}var p=e.elm,m=u.parentNode(p);if(f(t,l,p._leaveCb?null:m,u.nextSibling(p)),o(t.parent)){var g=t.parent,v=b(t);while(g){for(var y=0;y<i.destroy.length;++y)i.destroy[y](g);if(g.elm=t.elm,v){for(var _=0;_<i.create.length;++_)i.create[_](er,g);var w=g.data.hook.insert;if(w.merged)for(var I=1;I<w.fns.length;I++)w.fns[I]()}else Xs(g);g=g.parent}}o(m)?E([e],0,0):o(e.tag)&&T(e)}}return O(t,l,c),t.elm}o(e)&&T(e)}}var or={create:ar,update:ar,destroy:function(e){ar(e,er)}};function ar(e,t){(e.data.directives||t.data.directives)&&cr(e,t)}function cr(e,t){var n,i,s,r=e===er,o=t===er,a=ur(e.data.directives,e.context),c=ur(t.data.directives,t.context),l=[],u=[];for(n in c)i=a[n],s=c[n],i?(s.oldValue=i.value,s.oldArg=i.arg,dr(s,"update",t,e),s.def&&s.def.componentUpdated&&u.push(s)):(dr(s,"bind",t,e),s.def&&s.def.inserted&&l.push(s));if(l.length){var h=function(){for(var n=0;n<l.length;n++)dr(l[n],"inserted",t,e)};r?tt(t,"insert",h):h()}if(u.length&&tt(t,"postpatch",(function(){for(var n=0;n<u.length;n++)dr(u[n],"componentUpdated",t,e)})),!r)for(n in a)c[n]||dr(a[n],"unbind",e,e,o)}var lr=Object.create(null);function ur(e,t){var n,i,s=Object.create(null);if(!e)return s;for(n=0;n<e.length;n++){if(i=e[n],i.modifiers||(i.modifiers=lr),s[hr(i)]=i,t._setupState&&t._setupState.__sfc){var r=i.def||Ci(t,"_setupState","v-"+i.name);i.def="function"===typeof r?{bind:r,update:r}:r}i.def=i.def||Ci(t.$options,"directives",i.name,!0)}return s}function hr(e){return e.rawName||"".concat(e.name,".").concat(Object.keys(e.modifiers||{}).join("."))}function dr(e,t,n,i,s){var r=e.def&&e.def[t];if(r)try{r(n.elm,e,n,i,s)}catch(Yo){Kt(Yo,n.context,"directive ".concat(e.name," ").concat(t," hook"))}}var pr=[Ys,or];function fr(e,t){var n=t.componentOptions;if((!o(n)||!1!==n.Ctor.options.inheritAttrs)&&(!r(e.data.attrs)||!r(t.data.attrs))){var i,s,c,l=t.elm,u=e.data.attrs||{},h=t.data.attrs||{};for(i in(o(h.__ob__)||a(h._v_attr_proxy))&&(h=t.data.attrs=R({},h)),h)s=h[i],c=u[i],c!==s&&mr(l,i,s,t.data.pre);for(i in(te||ie)&&h.value!==u.value&&mr(l,"value",h.value),u)r(h[i])&&(_s(i)?l.removeAttributeNS(ys,ws(i)):fs(i)||l.removeAttribute(i))}}function mr(e,t,n,i){i||e.tagName.indexOf("-")>-1?gr(e,t,n):vs(t)?bs(n)?e.removeAttribute(t):(n="allowfullscreen"===t&&"EMBED"===e.tagName?"true":t,e.setAttribute(t,n)):fs(t)?e.setAttribute(t,gs(t,n)):_s(t)?bs(n)?e.removeAttributeNS(ys,ws(t)):e.setAttributeNS(ys,t,n):gr(e,t,n)}function gr(e,t,n){if(bs(n))e.removeAttribute(t);else{if(te&&!ne&&"TEXTAREA"===e.tagName&&"placeholder"===t&&""!==n&&!e.__ieph){var i=function(t){t.stopImmediatePropagation(),e.removeEventListener("input",i)};e.addEventListener("input",i),e.__ieph=!0}e.setAttribute(t,n)}}var vr={create:fr,update:fr};function yr(e,t){var n=t.elm,i=t.data,s=e.data;if(!(r(i.staticClass)&&r(i.class)&&(r(s)||r(s.staticClass)&&r(s.class)))){var a=Is(t),c=n._transitionClasses;o(c)&&(a=Ts(a,Es(c))),a!==n._prevClass&&(n.setAttribute("class",a),n._prevClass=a)}}var _r,wr={create:yr,update:yr},br="__r",Ir="__c";function Cr(e){if(o(e[br])){var t=te?"change":"input";e[t]=[].concat(e[br],e[t]||[]),delete e[br]}o(e[Ir])&&(e.change=[].concat(e[Ir],e.change||[]),delete e[Ir])}function Sr(e,t,n){var i=_r;return function s(){var r=t.apply(null,arguments);null!==r&&kr(e,s,n,i)}}var Tr=Jt&&!(oe&&Number(oe[1])<=53);function Er(e,t,n,i){if(Tr){var s=Un,r=t;t=r._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=s||e.timeStamp<=0||e.target.ownerDocument!==document)return r.apply(this,arguments)}}_r.addEventListener(e,t,ce?{capture:n,passive:i}:n)}function kr(e,t,n,i){(i||_r).removeEventListener(e,t._wrapper||t,n)}function xr(e,t){if(!r(e.data.on)||!r(t.data.on)){var n=t.data.on||{},i=e.data.on||{};_r=t.elm||e.elm,Cr(n),et(n,i,Er,kr,Sr,t.context),_r=void 0}}var Ar,Nr={create:xr,update:xr,destroy:function(e){return xr(e,er)}};function Or(e,t){if(!r(e.data.domProps)||!r(t.data.domProps)){var n,i,s=t.elm,c=e.data.domProps||{},l=t.data.domProps||{};for(n in(o(l.__ob__)||a(l._v_attr_proxy))&&(l=t.data.domProps=R({},l)),c)n in l||(s[n]="");for(n in l){if(i=l[n],"textContent"===n||"innerHTML"===n){if(t.children&&(t.children.length=0),i===c[n])continue;1===s.childNodes.length&&s.removeChild(s.childNodes[0])}if("value"===n&&"PROGRESS"!==s.tagName){s._value=i;var u=r(i)?"":String(i);Dr(s,u)&&(s.value=u)}else if("innerHTML"===n&&Os(s.tagName)&&r(s.innerHTML)){Ar=Ar||document.createElement("div"),Ar.innerHTML="<svg>".concat(i,"</svg>");var h=Ar.firstChild;while(s.firstChild)s.removeChild(s.firstChild);while(h.firstChild)s.appendChild(h.firstChild)}else if(i!==c[n])try{s[n]=i}catch(Yo){}}}}function Dr(e,t){return!e.composing&&("OPTION"===e.tagName||Pr(e,t)||Rr(e,t))}function Pr(e,t){var n=!0;try{n=document.activeElement!==e}catch(Yo){}return n&&e.value!==t}function Rr(e,t){var n=e.value,i=e._vModifiers;if(o(i)){if(i.number)return y(n)!==y(t);if(i.trim)return n.trim()!==t.trim()}return n!==t}var Lr={create:Or,update:Or},$r=S((function(e){var t={},n=/;(?![^(]*\))/g,i=/:(.+)/;return e.split(n).forEach((function(e){if(e){var n=e.split(i);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}));function Mr(e){var t=Fr(e.style);return e.staticStyle?R(e.staticStyle,t):t}function Fr(e){return Array.isArray(e)?L(e):"string"===typeof e?$r(e):e}function Vr(e,t){var n,i={};if(t){var s=e;while(s.componentInstance)s=s.componentInstance._vnode,s&&s.data&&(n=Mr(s.data))&&R(i,n)}(n=Mr(e.data))&&R(i,n);var r=e;while(r=r.parent)r.data&&(n=Mr(r.data))&&R(i,n);return i}var Br,Ur=/^--/,jr=/\s*!important$/,zr=function(e,t,n){if(Ur.test(t))e.style.setProperty(t,n);else if(jr.test(n))e.style.setProperty(A(t),n.replace(jr,""),"important");else{var i=Hr(t);if(Array.isArray(n))for(var s=0,r=n.length;s<r;s++)e.style[i]=n[s];else e.style[i]=n}},qr=["Webkit","Moz","ms"],Hr=S((function(e){if(Br=Br||document.createElement("div").style,e=E(e),"filter"!==e&&e in Br)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<qr.length;n++){var i=qr[n]+t;if(i in Br)return i}}));function Wr(e,t){var n=t.data,i=e.data;if(!(r(n.staticStyle)&&r(n.style)&&r(i.staticStyle)&&r(i.style))){var s,a,c=t.elm,l=i.staticStyle,u=i.normalizedStyle||i.style||{},h=l||u,d=Fr(t.data.style)||{};t.data.normalizedStyle=o(d.__ob__)?R({},d):d;var p=Vr(t,!0);for(a in h)r(p[a])&&zr(c,a,"");for(a in p)s=p[a],s!==h[a]&&zr(c,a,null==s?"":s)}}var Zr={create:Wr,update:Wr},Kr=/\s+/;function Gr(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(Kr).forEach((function(t){return e.classList.add(t)})):e.classList.add(t);else{var n=" ".concat(e.getAttribute("class")||""," ");n.indexOf(" "+t+" ")<0&&e.setAttribute("class",(n+t).trim())}}function Qr(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(Kr).forEach((function(t){return e.classList.remove(t)})):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{var n=" ".concat(e.getAttribute("class")||""," "),i=" "+t+" ";while(n.indexOf(i)>=0)n=n.replace(i," ");n=n.trim(),n?e.setAttribute("class",n):e.removeAttribute("class")}}function Yr(e){if(e){if("object"===typeof e){var t={};return!1!==e.css&&R(t,Xr(e.name||"v")),R(t,e),t}return"string"===typeof e?Xr(e):void 0}}var Xr=S((function(e){return{enterClass:"".concat(e,"-enter"),enterToClass:"".concat(e,"-enter-to"),enterActiveClass:"".concat(e,"-enter-active"),leaveClass:"".concat(e,"-leave"),leaveToClass:"".concat(e,"-leave-to"),leaveActiveClass:"".concat(e,"-leave-active")}})),Jr=J&&!ne,eo="transition",to="animation",no="transition",io="transitionend",so="animation",ro="animationend";Jr&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(no="WebkitTransition",io="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(so="WebkitAnimation",ro="webkitAnimationEnd"));var oo=J?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function ao(e){oo((function(){oo(e)}))}function co(e,t){var n=e._transitionClasses||(e._transitionClasses=[]);n.indexOf(t)<0&&(n.push(t),Gr(e,t))}function lo(e,t){e._transitionClasses&&b(e._transitionClasses,t),Qr(e,t)}function uo(e,t,n){var i=po(e,t),s=i.type,r=i.timeout,o=i.propCount;if(!s)return n();var a=s===eo?io:ro,c=0,l=function(){e.removeEventListener(a,u),n()},u=function(t){t.target===e&&++c>=o&&l()};setTimeout((function(){c<o&&l()}),r+1),e.addEventListener(a,u)}var ho=/\b(transform|all)(,|$)/;function po(e,t){var n,i=window.getComputedStyle(e),s=(i[no+"Delay"]||"").split(", "),r=(i[no+"Duration"]||"").split(", "),o=fo(s,r),a=(i[so+"Delay"]||"").split(", "),c=(i[so+"Duration"]||"").split(", "),l=fo(a,c),u=0,h=0;t===eo?o>0&&(n=eo,u=o,h=r.length):t===to?l>0&&(n=to,u=l,h=c.length):(u=Math.max(o,l),n=u>0?o>l?eo:to:null,h=n?n===eo?r.length:c.length:0);var d=n===eo&&ho.test(i[no+"Property"]);return{type:n,timeout:u,propCount:h,hasTransform:d}}function fo(e,t){while(e.length<t.length)e=e.concat(e);return Math.max.apply(null,t.map((function(t,n){return mo(t)+mo(e[n])})))}function mo(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function go(e,t){var n=e.elm;o(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var i=Yr(e.data.transition);if(!r(i)&&!o(n._enterCb)&&1===n.nodeType){var s=i.css,a=i.type,c=i.enterClass,l=i.enterToClass,d=i.enterActiveClass,p=i.appearClass,f=i.appearToClass,m=i.appearActiveClass,g=i.beforeEnter,v=i.enter,_=i.afterEnter,w=i.enterCancelled,b=i.beforeAppear,I=i.appear,C=i.afterAppear,S=i.appearCancelled,T=i.duration,E=Sn,k=Sn.$vnode;while(k&&k.parent)E=k.context,k=k.parent;var x=!E._isMounted||!e.isRootInsert;if(!x||I||""===I){var A=x&&p?p:c,N=x&&m?m:d,O=x&&f?f:l,D=x&&b||g,P=x&&u(I)?I:v,R=x&&C||_,L=x&&S||w,$=y(h(T)?T.enter:T);0;var M=!1!==s&&!ne,F=_o(P),V=n._enterCb=U((function(){M&&(lo(n,O),lo(n,N)),V.cancelled?(M&&lo(n,A),L&&L(n)):R&&R(n),n._enterCb=null}));e.data.show||tt(e,"insert",(function(){var t=n.parentNode,i=t&&t._pending&&t._pending[e.key];i&&i.tag===e.tag&&i.elm._leaveCb&&i.elm._leaveCb(),P&&P(n,V)})),D&&D(n),M&&(co(n,A),co(n,N),ao((function(){lo(n,A),V.cancelled||(co(n,O),F||(yo($)?setTimeout(V,$):uo(n,a,V)))}))),e.data.show&&(t&&t(),P&&P(n,V)),M||F||V()}}}function vo(e,t){var n=e.elm;o(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var i=Yr(e.data.transition);if(r(i)||1!==n.nodeType)return t();if(!o(n._leaveCb)){var s=i.css,a=i.type,c=i.leaveClass,l=i.leaveToClass,u=i.leaveActiveClass,d=i.beforeLeave,p=i.leave,f=i.afterLeave,m=i.leaveCancelled,g=i.delayLeave,v=i.duration,_=!1!==s&&!ne,w=_o(p),b=y(h(v)?v.leave:v);0;var I=n._leaveCb=U((function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[e.key]=null),_&&(lo(n,l),lo(n,u)),I.cancelled?(_&&lo(n,c),m&&m(n)):(t(),f&&f(n)),n._leaveCb=null}));g?g(C):C()}function C(){I.cancelled||(!e.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[e.key]=e),d&&d(n),_&&(co(n,c),co(n,u),ao((function(){lo(n,c),I.cancelled||(co(n,l),w||(yo(b)?setTimeout(I,b):uo(n,a,I)))}))),p&&p(n,I),_||w||I())}}function yo(e){return"number"===typeof e&&!isNaN(e)}function _o(e){if(r(e))return!1;var t=e.fns;return o(t)?_o(Array.isArray(t)?t[0]:t):(e._length||e.length)>1}function wo(e,t){!0!==t.data.show&&go(t)}var bo=J?{create:wo,activate:wo,remove:function(e,t){!0!==e.data.show?vo(e,t):t()}}:{},Io=[vr,wr,Nr,Lr,Zr,bo],Co=Io.concat(pr),So=rr({nodeOps:Qs,modules:Co});ne&&document.addEventListener("selectionchange",(function(){var e=document.activeElement;e&&e.vmodel&&Do(e,"input")}));var To={inserted:function(e,t,n,i){"select"===n.tag?(i.elm&&!i.elm._vOptions?tt(n,"postpatch",(function(){To.componentUpdated(e,t,n)})):Eo(e,t,n.context),e._vOptions=[].map.call(e.options,Ao)):("textarea"===n.tag||$s(e.type))&&(e._vModifiers=t.modifiers,t.modifiers.lazy||(e.addEventListener("compositionstart",No),e.addEventListener("compositionend",Oo),e.addEventListener("change",Oo),ne&&(e.vmodel=!0)))},componentUpdated:function(e,t,n){if("select"===n.tag){Eo(e,t,n.context);var i=e._vOptions,s=e._vOptions=[].map.call(e.options,Ao);if(s.some((function(e,t){return!V(e,i[t])}))){var r=e.multiple?t.value.some((function(e){return xo(e,s)})):t.value!==t.oldValue&&xo(t.value,s);r&&Do(e,"change")}}}};function Eo(e,t,n){ko(e,t,n),(te||ie)&&setTimeout((function(){ko(e,t,n)}),0)}function ko(e,t,n){var i=t.value,s=e.multiple;if(!s||Array.isArray(i)){for(var r,o,a=0,c=e.options.length;a<c;a++)if(o=e.options[a],s)r=B(i,Ao(o))>-1,o.selected!==r&&(o.selected=r);else if(V(Ao(o),i))return void(e.selectedIndex!==a&&(e.selectedIndex=a));s||(e.selectedIndex=-1)}}function xo(e,t){return t.every((function(t){return!V(t,e)}))}function Ao(e){return"_value"in e?e._value:e.value}function No(e){e.target.composing=!0}function Oo(e){e.target.composing&&(e.target.composing=!1,Do(e.target,"input"))}function Do(e,t){var n=document.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}function Po(e){return!e.componentInstance||e.data&&e.data.transition?e:Po(e.componentInstance._vnode)}var Ro={bind:function(e,t,n){var i=t.value;n=Po(n);var s=n.data&&n.data.transition,r=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;i&&s?(n.data.show=!0,go(n,(function(){e.style.display=r}))):e.style.display=i?r:"none"},update:function(e,t,n){var i=t.value,s=t.oldValue;if(!i!==!s){n=Po(n);var r=n.data&&n.data.transition;r?(n.data.show=!0,i?go(n,(function(){e.style.display=e.__vOriginalDisplay})):vo(n,(function(){e.style.display="none"}))):e.style.display=i?e.__vOriginalDisplay:"none"}},unbind:function(e,t,n,i,s){s||(e.style.display=e.__vOriginalDisplay)}},Lo={model:To,show:Ro},$o={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function Mo(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?Mo(Ut(t.children)):e}function Fo(e){var t={},n=e.$options;for(var i in n.propsData)t[i]=e[i];var s=n._parentListeners;for(var i in s)t[E(i)]=s[i];return t}function Vo(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}function Bo(e){while(e=e.parent)if(e.data.transition)return!0}function Uo(e,t){return t.key===e.key&&t.tag===e.tag}var jo=function(e){return e.tag||Tt(e)},zo=function(e){return"show"===e.name},qo={name:"transition",props:$o,abstract:!0,render:function(e){var t=this,n=this.$slots.default;if(n&&(n=n.filter(jo),n.length)){0;var i=this.mode;0;var s=n[0];if(Bo(this.$vnode))return s;var r=Mo(s);if(!r)return s;if(this._leaving)return Vo(e,s);var o="__transition-".concat(this._uid,"-");r.key=null==r.key?r.isComment?o+"comment":o+r.tag:l(r.key)?0===String(r.key).indexOf(o)?r.key:o+r.key:r.key;var a=(r.data||(r.data={})).transition=Fo(this),c=this._vnode,u=Mo(c);if(r.data.directives&&r.data.directives.some(zo)&&(r.data.show=!0),u&&u.data&&!Uo(r,u)&&!Tt(u)&&(!u.componentInstance||!u.componentInstance._vnode.isComment)){var h=u.data.transition=R({},a);if("out-in"===i)return this._leaving=!0,tt(h,"afterLeave",(function(){t._leaving=!1,t.$forceUpdate()})),Vo(e,s);if("in-out"===i){if(Tt(r))return c;var d,p=function(){d()};tt(a,"afterEnter",p),tt(a,"enterCancelled",p),tt(h,"delayLeave",(function(e){d=e}))}}return s}}},Ho=R({tag:String,moveClass:String},$o);delete Ho.mode;var Wo={props:Ho,beforeMount:function(){var e=this,t=this._update;this._update=function(n,i){var s=Tn(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,s(),t.call(e,n,i)}},render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),i=this.prevChildren=this.children,s=this.$slots.default||[],r=this.children=[],o=Fo(this),a=0;a<s.length;a++){var c=s[a];if(c.tag)if(null!=c.key&&0!==String(c.key).indexOf("__vlist"))r.push(c),n[c.key]=c,(c.data||(c.data={})).transition=o;else;}if(i){var l=[],u=[];for(a=0;a<i.length;a++){c=i[a];c.data.transition=o,c.data.pos=c.elm.getBoundingClientRect(),n[c.key]?l.push(c):u.push(c)}this.kept=e(t,null,l),this.removed=u}return e(t,null,r)},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,t)&&(e.forEach(Zo),e.forEach(Ko),e.forEach(Go),this._reflow=document.body.offsetHeight,e.forEach((function(e){if(e.data.moved){var n=e.elm,i=n.style;co(n,t),i.transform=i.WebkitTransform=i.transitionDuration="",n.addEventListener(io,n._moveCb=function e(i){i&&i.target!==n||i&&!/transform$/.test(i.propertyName)||(n.removeEventListener(io,e),n._moveCb=null,lo(n,t))})}})))},methods:{hasMove:function(e,t){if(!Jr)return!1;if(this._hasMove)return this._hasMove;var n=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach((function(e){Qr(n,e)})),Gr(n,t),n.style.display="none",this.$el.appendChild(n);var i=po(n);return this.$el.removeChild(n),this._hasMove=i.hasTransform}}};function Zo(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function Ko(e){e.data.newPos=e.elm.getBoundingClientRect()}function Go(e){var t=e.data.pos,n=e.data.newPos,i=t.left-n.left,s=t.top-n.top;if(i||s){e.data.moved=!0;var r=e.elm.style;r.transform=r.WebkitTransform="translate(".concat(i,"px,").concat(s,"px)"),r.transitionDuration="0s"}}var Qo={Transition:qo,TransitionGroup:Wo};Qi.config.mustUseProp=ps,Qi.config.isReservedTag=Ds,Qi.config.isReservedAttr=hs,Qi.config.getTagNamespace=Ps,Qi.config.isUnknownElement=Ls,R(Qi.options.directives,Lo),R(Qi.options.components,Qo),Qi.prototype.__patch__=J?So:$,Qi.prototype.$mount=function(e,t){return e=e&&J?Ms(e):void 0,xn(this,e,t)},J&&setTimeout((function(){W.devtools&&he&&he.emit("init",Qi)}),0)},3726:function(e,t,n){n.d(t,{Z:function(){return r}});var i=n(2066),s=n(5530),r=(0,s.Z)(i.Z).extend({name:"v-app",props:{dark:{type:Boolean,default:void 0},id:{type:String,default:"app"},light:{type:Boolean,default:void 0}},computed:{isDark(){return this.$vuetify.theme.dark}},beforeCreate(){if(!this.$vuetify||this.$vuetify===this.$root)throw new Error("Vuetify is not properly initialized, see https://v2.vuetifyjs.com/getting-started/quick-start#bootstrapping-the-vuetify-object")},render(e){const t=e("div",{staticClass:"v-application--wrap"},this.$slots.default);return e("div",{staticClass:"v-application",class:{"v-application--is-rtl":this.$vuetify.rtl,"v-application--is-ltr":!this.$vuetify.rtl,...this.themeClasses},attrs:{"data-app":!0},domProps:{id:this.id}},[t])}})},3625:function(e,t,n){n.d(t,{Z:function(){return v}});var i=n(2732);function s(e,t,n){const{self:i=!1}=t.modifiers||{},s=t.value,r="object"===typeof s&&s.options||{passive:!0},o="function"===typeof s||"handleEvent"in s?s:s.handler,a=i?e:t.arg?document.querySelector(t.arg):window;a&&(a.addEventListener("scroll",o,r),e._onScroll=Object(e._onScroll),e._onScroll[n.context._uid]={handler:o,options:r,target:i?void 0:a})}function r(e,t,n){var i;if(!(null===(i=e._onScroll)||void 0===i?void 0:i[n.context._uid]))return;const{handler:s,options:r,target:o=e}=e._onScroll[n.context._uid];o.removeEventListener("scroll",s,r),delete e._onScroll[n.context._uid]}const o={inserted:s,unbind:r};var a=o,c=n(2404),l=n(8219),u=n(144),h=u.ZP.extend({name:"scrollable",directives:{Scroll:o},props:{scrollTarget:String,scrollThreshold:[String,Number]},data:()=>({currentScroll:0,currentThreshold:0,isActive:!1,isScrollingUp:!1,previousScroll:0,savedScroll:0,target:null}),computed:{canScroll(){return"undefined"!==typeof window},computedScrollThreshold(){return this.scrollThreshold?Number(this.scrollThreshold):300}},watch:{isScrollingUp(){this.savedScroll=this.savedScroll||this.currentScroll},isActive(){this.savedScroll=0}},mounted(){this.scrollTarget&&(this.target=document.querySelector(this.scrollTarget),this.target||(0,l.Kd)(`Unable to locate element with identifier ${this.scrollTarget}`,this))},methods:{onScroll(){this.canScroll&&(this.previousScroll=this.currentScroll,this.currentScroll=this.target?this.target.scrollTop:window.pageYOffset,this.isScrollingUp=this.currentScroll<this.previousScroll,this.currentThreshold=Math.abs(this.currentScroll-this.computedScrollThreshold),this.$nextTick((()=>{Math.abs(this.currentScroll-this.savedScroll)>this.computedScrollThreshold&&this.thresholdMet()})))},thresholdMet(){}}}),d=n(8191),p=n(4552),f=n(8131),m=n(5530);const g=(0,m.Z)(i.Z,h,d.Z,p.Z,(0,c.Z)("top",["clippedLeft","clippedRight","computedHeight","invertedScroll","isExtended","isProminent","value"]));var v=g.extend({name:"v-app-bar",directives:{Scroll:a},provide(){return{VAppBar:this}},props:{clippedLeft:Boolean,clippedRight:Boolean,collapseOnScroll:Boolean,elevateOnScroll:Boolean,fadeImgOnScroll:Boolean,hideOnScroll:Boolean,invertedScroll:Boolean,scrollOffScreen:Boolean,shrinkOnScroll:Boolean,value:{type:Boolean,default:!0}},data(){return{isActive:this.value}},computed:{applicationProperty(){return this.bottom?"bottom":"top"},canScroll(){return h.options.computed.canScroll.call(this)&&(this.invertedScroll||this.elevateOnScroll||this.hideOnScroll||this.collapseOnScroll||this.isBooted||!this.value)},classes(){return{...i.Z.options.computed.classes.call(this),"v-toolbar--collapse":this.collapse||this.collapseOnScroll,"v-app-bar":!0,"v-app-bar--clipped":this.clippedLeft||this.clippedRight,"v-app-bar--fade-img-on-scroll":this.fadeImgOnScroll,"v-app-bar--elevate-on-scroll":this.elevateOnScroll,"v-app-bar--fixed":!this.absolute&&(this.app||this.fixed),"v-app-bar--hide-shadow":this.hideShadow,"v-app-bar--is-scrolled":this.currentScroll>0,"v-app-bar--shrink-on-scroll":this.shrinkOnScroll}},scrollRatio(){const e=this.computedScrollThreshold;return Math.max((e-this.currentScroll)/e,0)},computedContentHeight(){if(!this.shrinkOnScroll)return i.Z.options.computed.computedContentHeight.call(this);const e=this.dense?48:56,t=this.computedOriginalHeight;return e+(t-e)*this.scrollRatio},computedFontSize(){if(!this.isProminent)return;const e=1.25,t=1.5;return e+(t-e)*this.scrollRatio},computedLeft(){return!this.app||this.clippedLeft?0:this.$vuetify.application.left},computedMarginTop(){return this.app?this.$vuetify.application.bar:0},computedOpacity(){if(this.fadeImgOnScroll)return this.scrollRatio},computedOriginalHeight(){let e=i.Z.options.computed.computedContentHeight.call(this);return this.isExtended&&(e+=parseInt(this.extensionHeight)),e},computedRight(){return!this.app||this.clippedRight?0:this.$vuetify.application.right},computedScrollThreshold(){return this.scrollThreshold?Number(this.scrollThreshold):this.computedOriginalHeight-(this.dense?48:56)},computedTransform(){if(!this.canScroll||this.elevateOnScroll&&0===this.currentScroll&&this.isActive)return 0;if(this.isActive)return 0;const e=this.scrollOffScreen?this.computedHeight:this.computedContentHeight;return this.bottom?e:-e},hideShadow(){return this.elevateOnScroll&&this.isExtended?this.currentScroll<this.computedScrollThreshold:this.elevateOnScroll?0===this.currentScroll||this.computedTransform<0:(!this.isExtended||this.scrollOffScreen)&&0!==this.computedTransform},isCollapsed(){return this.collapseOnScroll?this.currentScroll>0:i.Z.options.computed.isCollapsed.call(this)},isProminent(){return i.Z.options.computed.isProminent.call(this)||this.shrinkOnScroll},styles(){return{...i.Z.options.computed.styles.call(this),fontSize:(0,f.kb)(this.computedFontSize,"rem"),marginTop:(0,f.kb)(this.computedMarginTop),transform:`translateY(${(0,f.kb)(this.computedTransform)})`,left:(0,f.kb)(this.computedLeft),right:(0,f.kb)(this.computedRight)}}},watch:{canScroll:"onScroll",computedTransform(){this.canScroll&&(this.clippedLeft||this.clippedRight)&&this.callUpdate()},invertedScroll(e){this.isActive=!e||0!==this.currentScroll},hideOnScroll(e){this.isActive=!e||this.currentScroll<this.computedScrollThreshold}},created(){this.invertedScroll&&(this.isActive=!1)},methods:{genBackground(){const e=i.Z.options.methods.genBackground.call(this);return e.data=this._b(e.data||{},e.tag,{style:{opacity:this.computedOpacity}}),e},updateApplication(){return this.invertedScroll?0:this.computedHeight+this.computedTransform},thresholdMet(){this.invertedScroll?this.isActive=this.currentScroll>this.computedScrollThreshold:(this.hideOnScroll&&(this.isActive=this.isScrollingUp||this.currentScroll<this.computedScrollThreshold),this.currentThreshold<this.computedScrollThreshold||(this.savedScroll=this.currentScroll))}},render(e){const t=i.Z.options.render.call(this,e);return t.data=t.data||{},this.canScroll&&(t.data.directives=t.data.directives||[],t.data.directives.push({arg:this.scrollTarget,name:"scroll",value:this.onScroll})),t}})},5078:function(e,t,n){var i=n(9524),s=n(3381),r=n(144);t.Z=r.ZP.extend({name:"v-app-bar-nav-icon",functional:!0,render(e,{slots:t,listeners:n,props:r,data:o}){const a=Object.assign(o,{staticClass:`v-app-bar__nav-icon ${o.staticClass||""}`.trim(),props:{...r,icon:!0},on:n}),c=t().default;return e(s.Z,a,c||[e(i.Z,"$menu")])}})},3381:function(e,t,n){n.d(t,{Z:function(){return y}});var i=n(9744),s=n(7006),r=n(5836),o=n(8131),a=r.Z.extend({name:"v-progress-circular",directives:{intersect:s.Z},props:{button:Boolean,indeterminate:Boolean,rotate:{type:[Number,String],default:0},size:{type:[Number,String],default:32},width:{type:[Number,String],default:4},value:{type:[Number,String],default:0}},data:()=>({radius:20,isVisible:!0}),computed:{calculatedSize(){return Number(this.size)+(this.button?8:0)},circumference(){return 2*Math.PI*this.radius},classes(){return{"v-progress-circular--visible":this.isVisible,"v-progress-circular--indeterminate":this.indeterminate,"v-progress-circular--button":this.button}},normalizedValue(){return this.value<0?0:this.value>100?100:parseFloat(this.value)},strokeDashArray(){return Math.round(1e3*this.circumference)/1e3},strokeDashOffset(){return(100-this.normalizedValue)/100*this.circumference+"px"},strokeWidth(){return Number(this.width)/+this.size*this.viewBoxSize*2},styles(){return{height:(0,o.kb)(this.calculatedSize),width:(0,o.kb)(this.calculatedSize)}},svgStyles(){return{transform:`rotate(${Number(this.rotate)}deg)`}},viewBoxSize(){return this.radius/(1-Number(this.width)/+this.size)}},methods:{genCircle(e,t){return this.$createElement("circle",{class:`v-progress-circular__${e}`,attrs:{fill:"transparent",cx:2*this.viewBoxSize,cy:2*this.viewBoxSize,r:this.radius,"stroke-width":this.strokeWidth,"stroke-dasharray":this.strokeDashArray,"stroke-dashoffset":t}})},genSvg(){const e=[this.indeterminate||this.genCircle("underlay",0),this.genCircle("overlay",this.strokeDashOffset)];return this.$createElement("svg",{style:this.svgStyles,attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:`${this.viewBoxSize} ${this.viewBoxSize} ${2*this.viewBoxSize} ${2*this.viewBoxSize}`}},e)},genInfo(){return this.$createElement("div",{staticClass:"v-progress-circular__info"},this.$slots.default)},onObserve(e,t,n){this.isVisible=n}},render(e){return e("div",this.setTextColor(this.color,{staticClass:"v-progress-circular",attrs:{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":this.indeterminate?void 0:this.normalizedValue},class:this.classes,directives:[{name:"intersect",value:this.onObserve}],style:this.styles,on:this.$listeners}),[this.genSvg(),this.genInfo()])}}),c=a,l=n(1302),u=n(4552),h=n(8427),d=n(8747),p=n(9367),f=n(2412),m=n(5530),g=n(8219);const v=(0,m.Z)(i.Z,p.Z,d.Z,f.Z,(0,l.d)("btnToggle"),(0,u.d)("inputValue"));var y=v.extend().extend({name:"v-btn",props:{activeClass:{type:String,default(){return this.btnToggle?this.btnToggle.activeClass:""}},block:Boolean,depressed:Boolean,fab:Boolean,icon:Boolean,loading:Boolean,outlined:Boolean,plain:Boolean,retainFocusOnClick:Boolean,rounded:Boolean,tag:{type:String,default:"button"},text:Boolean,tile:Boolean,type:{type:String,default:"button"},value:null},data:()=>({proxyClass:"v-btn--active"}),computed:{classes(){return{"v-btn":!0,...p.Z.options.computed.classes.call(this),"v-btn--absolute":this.absolute,"v-btn--block":this.block,"v-btn--bottom":this.bottom,"v-btn--disabled":this.disabled,"v-btn--is-elevated":this.isElevated,"v-btn--fab":this.fab,"v-btn--fixed":this.fixed,"v-btn--has-bg":this.hasBg,"v-btn--icon":this.icon,"v-btn--left":this.left,"v-btn--loading":this.loading,"v-btn--outlined":this.outlined,"v-btn--plain":this.plain,"v-btn--right":this.right,"v-btn--round":this.isRound,"v-btn--rounded":this.rounded,"v-btn--router":this.to,"v-btn--text":this.text,"v-btn--tile":this.tile,"v-btn--top":this.top,...this.themeClasses,...this.groupClasses,...this.elevationClasses,...this.sizeableClasses}},computedElevation(){if(!this.disabled)return h.Z.options.computed.computedElevation.call(this)},computedRipple(){var e;const t=!this.icon&&!this.fab||{circle:!0};return!this.disabled&&(null!==(e=this.ripple)&&void 0!==e?e:t)},hasBg(){return!this.text&&!this.plain&&!this.outlined&&!this.icon},isElevated(){return Boolean(!this.icon&&!this.text&&!this.outlined&&!this.depressed&&!this.disabled&&!this.plain&&(null==this.elevation||Number(this.elevation)>0))},isRound(){return Boolean(this.icon||this.fab)},styles(){return{...this.measurableStyles}}},created(){const e=[["flat","text"],["outline","outlined"],["round","rounded"]];e.forEach((([e,t])=>{this.$attrs.hasOwnProperty(e)&&(0,g.fK)(e,t,this)}))},methods:{click(e){!this.retainFocusOnClick&&!this.fab&&e.detail&&this.$el.blur(),this.$emit("click",e),this.btnToggle&&this.toggle()},genContent(){return this.$createElement("span",{staticClass:"v-btn__content"},this.$slots.default)},genLoader(){return this.$createElement("span",{class:"v-btn__loader"},this.$slots.loader||[this.$createElement(c,{props:{indeterminate:!0,size:23,width:2}})])}},render(e){const t=[this.genContent(),this.loading&&this.genLoader()],{tag:n,data:i}=this.generateRouteLink(),s=this.hasBg?this.setBackgroundColor:this.setTextColor;return"button"===n&&(i.attrs.type=this.type,i.attrs.disabled=this.disabled),i.attrs.value=["string","number"].includes(typeof this.value)?this.value:JSON.stringify(this.value),e(n,this.disabled?i:s(this.color,i),t)}})},3816:function(e,t,n){n.d(t,{Z:function(){return a}});var i=n(9744),s=n(9799),r=n(9367),o=n(5530),a=(0,o.Z)(s.Z,r.Z,i.Z).extend({name:"v-card",props:{flat:Boolean,hover:Boolean,img:String,link:Boolean,loaderHeight:{type:[Number,String],default:4},raised:Boolean},computed:{classes(){return{"v-card":!0,...r.Z.options.computed.classes.call(this),"v-card--flat":this.flat,"v-card--hover":this.hover,"v-card--link":this.isClickable,"v-card--loading":this.loading,"v-card--disabled":this.disabled,"v-card--raised":this.raised,...i.Z.options.computed.classes.call(this)}},styles(){const e={...i.Z.options.computed.styles.call(this)};return this.img&&(e.background=`url("${this.img}") center center / cover no-repeat`),e}},methods:{genProgress(){const e=s.Z.options.methods.genProgress.call(this);return e?this.$createElement("div",{staticClass:"v-card__progress",key:"progress"},[e]):null}},render(e){const{tag:t,data:n}=this.generateRouteLink();return n.style=this.styles,this.isClickable&&(n.attrs=n.attrs||{},n.attrs.tabindex=0),e(t,this.setBackgroundColor(this.color,n),[this.genProgress(),this.$slots.default])}})},5255:function(e,t,n){n.d(t,{EB:function(){return c},ZB:function(){return a},h7:function(){return r}});var i=n(3816),s=n(8131);const r=(0,s.Ji)("v-card__actions"),o=(0,s.Ji)("v-card__subtitle"),a=(0,s.Ji)("v-card__text"),c=(0,s.Ji)("v-card__title");i.Z},1233:function(e,t,n){n.d(t,{Z:function(){return be}});var i=n(8131),s=n(144),r=s.ZP.extend({name:"v-data",inheritAttrs:!1,props:{items:{type:Array,default:()=>[]},options:{type:Object,default:()=>({})},sortBy:{type:[String,Array]},sortDesc:{type:[Boolean,Array]},customSort:{type:Function,default:i.xl},mustSort:Boolean,multiSort:Boolean,page:{type:Number,default:1},itemsPerPage:{type:Number,default:10},groupBy:{type:[String,Array],default:()=>[]},groupDesc:{type:[Boolean,Array],default:()=>[]},customGroup:{type:Function,default:i.sD},locale:{type:String,default:"en-US"},disableSort:Boolean,disablePagination:Boolean,disableFiltering:Boolean,search:String,customFilter:{type:Function,default:i.KT},serverItemsLength:{type:Number,default:-1}},data(){let e={page:this.page,itemsPerPage:this.itemsPerPage,sortBy:(0,i.TI)(this.sortBy),sortDesc:(0,i.TI)(this.sortDesc),groupBy:(0,i.TI)(this.groupBy),groupDesc:(0,i.TI)(this.groupDesc),mustSort:this.mustSort,multiSort:this.multiSort};this.options&&(e=Object.assign(e,this.options));const{sortBy:t,sortDesc:n,groupBy:s,groupDesc:r}=e,o=t.length-n.length,a=s.length-r.length;return o>0&&e.sortDesc.push(...(0,i.kg)(o,!1)),a>0&&e.groupDesc.push(...(0,i.kg)(a,!1)),{internalOptions:e}},computed:{itemsLength(){return this.serverItemsLength>=0?this.serverItemsLength:this.filteredItems.length},pageCount(){return this.internalOptions.itemsPerPage<=0?1:Math.ceil(this.itemsLength/this.internalOptions.itemsPerPage)},pageStart(){return-1!==this.internalOptions.itemsPerPage&&this.items.length?(this.internalOptions.page-1)*this.internalOptions.itemsPerPage:0},pageStop(){return-1===this.internalOptions.itemsPerPage?this.itemsLength:this.items.length?Math.min(this.itemsLength,this.internalOptions.page*this.internalOptions.itemsPerPage):0},isGrouped(){return!!this.internalOptions.groupBy.length},pagination(){return{page:this.internalOptions.page,itemsPerPage:this.internalOptions.itemsPerPage,pageStart:this.pageStart,pageStop:this.pageStop,pageCount:this.pageCount,itemsLength:this.itemsLength}},filteredItems(){let e=this.items.slice();return!this.disableFiltering&&this.serverItemsLength<=0&&(e=this.customFilter(e,this.search)),e},computedItems(){let e=this.filteredItems.slice();return(!this.disableSort||this.internalOptions.groupBy.length)&&this.serverItemsLength<=0&&(e=this.sortItems(e)),!this.disablePagination&&this.serverItemsLength<=0&&(e=this.paginateItems(e)),e},groupedItems(){return this.isGrouped?this.groupItems(this.computedItems):null},scopedProps(){return{sort:this.sort,sortArray:this.sortArray,group:this.group,items:this.computedItems,options:this.internalOptions,updateOptions:this.updateOptions,pagination:this.pagination,groupedItems:this.groupedItems,originalItemsLength:this.items.length}},computedOptions(){return{...this.options}}},watch:{computedOptions:{handler(e,t){(0,i.vZ)(e,t)||this.updateOptions(e)},deep:!0,immediate:!0},internalOptions:{handler(e,t){(0,i.vZ)(e,t)||this.$emit("update:options",e)},deep:!0,immediate:!0},page(e){this.updateOptions({page:e})},"internalOptions.page"(e){this.$emit("update:page",e)},itemsPerPage(e){this.updateOptions({itemsPerPage:e})},"internalOptions.itemsPerPage"(e){this.$emit("update:items-per-page",e)},sortBy(e){this.updateOptions({sortBy:(0,i.TI)(e)})},"internalOptions.sortBy"(e,t){!(0,i.vZ)(e,t)&&this.$emit("update:sort-by",Array.isArray(this.sortBy)?e:e[0])},sortDesc(e){this.updateOptions({sortDesc:(0,i.TI)(e)})},"internalOptions.sortDesc"(e,t){!(0,i.vZ)(e,t)&&this.$emit("update:sort-desc",Array.isArray(this.sortDesc)?e:e[0])},groupBy(e){this.updateOptions({groupBy:(0,i.TI)(e)})},"internalOptions.groupBy"(e,t){!(0,i.vZ)(e,t)&&this.$emit("update:group-by",Array.isArray(this.groupBy)?e:e[0])},groupDesc(e){this.updateOptions({groupDesc:(0,i.TI)(e)})},"internalOptions.groupDesc"(e,t){!(0,i.vZ)(e,t)&&this.$emit("update:group-desc",Array.isArray(this.groupDesc)?e:e[0])},multiSort(e){this.updateOptions({multiSort:e})},"internalOptions.multiSort"(e){this.$emit("update:multi-sort",e)},mustSort(e){this.updateOptions({mustSort:e})},"internalOptions.mustSort"(e){this.$emit("update:must-sort",e)},pageCount:{handler(e){this.$emit("page-count",e)},immediate:!0},computedItems:{handler(e){this.$emit("current-items",e)},immediate:!0},pagination:{handler(e,t){(0,i.vZ)(e,t)||this.$emit("pagination",this.pagination)},immediate:!0}},methods:{toggle(e,t,n,s,r,o){let a=t.slice(),c=n.slice();const l=a.findIndex((t=>t===e));return l<0?(o||(a=[],c=[]),a.push(e),c.push(!1)):l>=0&&!c[l]?c[l]=!0:r?c[l]=!1:(a.splice(l,1),c.splice(l,1)),(0,i.vZ)(a,t)&&(0,i.vZ)(c,n)||(s=1),{by:a,desc:c,page:s}},group(e){const{by:t,desc:n,page:i}=this.toggle(e,this.internalOptions.groupBy,this.internalOptions.groupDesc,this.internalOptions.page,!0,!1);this.updateOptions({groupBy:t,groupDesc:n,page:i})},sort(e){if(Array.isArray(e))return this.sortArray(e);const{by:t,desc:n,page:i}=this.toggle(e,this.internalOptions.sortBy,this.internalOptions.sortDesc,this.internalOptions.page,this.internalOptions.mustSort,this.internalOptions.multiSort);this.updateOptions({sortBy:t,sortDesc:n,page:i})},sortArray(e){const t=e.map((e=>{const t=this.internalOptions.sortBy.findIndex((t=>t===e));return t>-1&&this.internalOptions.sortDesc[t]}));this.updateOptions({sortBy:e,sortDesc:t})},updateOptions(e){this.internalOptions={...this.internalOptions,...e,page:this.serverItemsLength<0?Math.max(1,Math.min(e.page||this.internalOptions.page,this.pageCount)):e.page||this.internalOptions.page}},sortItems(e){let t=[],n=[];return this.disableSort||(t=this.internalOptions.sortBy,n=this.internalOptions.sortDesc),this.internalOptions.groupBy.length&&(t=[...this.internalOptions.groupBy,...t],n=[...this.internalOptions.groupDesc,...n]),this.customSort(e,t,n,this.locale)},groupItems(e){return this.customGroup(e,this.internalOptions.groupBy,this.internalOptions.groupDesc)},paginateItems(e){return-1===this.serverItemsLength&&e.length<=this.pageStart&&(this.internalOptions.page=Math.max(1,Math.ceil(e.length/this.internalOptions.itemsPerPage))||1),e.slice(this.pageStart,this.pageStop)}},render(){return this.$scopedSlots.default&&this.$scopedSlots.default(this.scopedProps)}}),o=(n(2838),n(5530)),a=n(6930),c=n(9524),l=n(5836),u=n(1302),h=n(2066),d=n(4552),p=n(9367),f=n(2412),m=n(8219),g=(0,o.Z)(l.Z,f.Z,p.Z,h.Z,(0,u.d)("chipGroup"),(0,d.d)("inputValue")).extend({name:"v-chip",props:{active:{type:Boolean,default:!0},activeClass:{type:String,default(){return this.chipGroup?this.chipGroup.activeClass:""}},close:Boolean,closeIcon:{type:String,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},disabled:Boolean,draggable:Boolean,filter:Boolean,filterIcon:{type:String,default:"$complete"},label:Boolean,link:Boolean,outlined:Boolean,pill:Boolean,tag:{type:String,default:"span"},textColor:String,value:null},data:()=>({proxyClass:"v-chip--active"}),computed:{classes(){return{"v-chip":!0,...p.Z.options.computed.classes.call(this),"v-chip--clickable":this.isClickable,"v-chip--disabled":this.disabled,"v-chip--draggable":this.draggable,"v-chip--label":this.label,"v-chip--link":this.isLink,"v-chip--no-color":!this.color,"v-chip--outlined":this.outlined,"v-chip--pill":this.pill,"v-chip--removable":this.hasClose,...this.themeClasses,...this.sizeableClasses,...this.groupClasses}},hasClose(){return Boolean(this.close)},isClickable(){return Boolean(p.Z.options.computed.isClickable.call(this)||this.chipGroup)}},created(){const e=[["outline","outlined"],["selected","input-value"],["value","active"],["@input","@active.sync"]];e.forEach((([e,t])=>{this.$attrs.hasOwnProperty(e)&&(0,m.fK)(e,t,this)}))},methods:{click(e){this.$emit("click",e),this.chipGroup&&this.toggle()},genFilter(){const e=[];return this.isActive&&e.push(this.$createElement(c.Z,{staticClass:"v-chip__filter",props:{left:!0}},this.filterIcon)),this.$createElement(a.Zq,e)},genClose(){return this.$createElement(c.Z,{staticClass:"v-chip__close",props:{right:!0,size:18},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:e=>{e.stopPropagation(),e.preventDefault(),this.$emit("click:close"),this.$emit("update:active",!1)}}},this.closeIcon)},genContent(){return this.$createElement("span",{staticClass:"v-chip__content"},[this.filter&&this.genFilter(),this.$slots.default,this.hasClose&&this.genClose()])}},render(e){const t=[this.genContent()];let{tag:n,data:i}=this.generateRouteLink();i.attrs={...i.attrs,draggable:this.draggable?"true":void 0,tabindex:this.chipGroup&&!this.disabled?0:i.attrs.tabindex},i.directives.push({name:"show",value:this.active}),i=this.setBackgroundColor(this.color,i);const s=this.textColor||this.outlined&&this.color;return e(n,this.setTextColor(s,i),t)}}),v=g,y=n(8345),_=n(7561),w=n(1811),b=n(4665),I=n(2389),C=n(8747),S=n(9556);const T=(0,o.Z)(I.Z,(0,C.d)(["top","right","bottom","left","absolute"]),_.Z,S.Z);var E=T.extend().extend({name:"menuable",props:{allowOverflow:Boolean,light:Boolean,dark:Boolean,maxWidth:{type:[Number,String],default:"auto"},minWidth:[Number,String],nudgeBottom:{type:[Number,String],default:0},nudgeLeft:{type:[Number,String],default:0},nudgeRight:{type:[Number,String],default:0},nudgeTop:{type:[Number,String],default:0},nudgeWidth:{type:[Number,String],default:0},offsetOverflow:Boolean,positionX:{type:Number,default:null},positionY:{type:Number,default:null},zIndex:{type:[Number,String],default:null}},data:()=>({activatorNode:[],absoluteX:0,absoluteY:0,activatedBy:null,activatorFixed:!1,dimensions:{activator:{top:0,left:0,bottom:0,right:0,width:0,height:0,offsetTop:0,scrollHeight:0,offsetLeft:0},content:{top:0,left:0,bottom:0,right:0,width:0,height:0,offsetTop:0,scrollHeight:0}},relativeYOffset:0,hasJustFocused:!1,hasWindow:!1,inputActivator:!1,isContentActive:!1,pageWidth:0,pageYOffset:0,stackClass:"v-menu__content--active",stackMinZIndex:6}),computed:{computedLeft(){const e=this.dimensions.activator,t=this.dimensions.content,n=(!1!==this.attach?e.offsetLeft:e.left)||0,i=Math.max(e.width,t.width);let s=0;if(s+=n,(this.left||this.$vuetify.rtl&&!this.right)&&(s-=i-e.width),this.offsetX){const t=isNaN(Number(this.maxWidth))?e.width:Math.min(e.width,Number(this.maxWidth));s+=this.left?-t:e.width}return this.nudgeLeft&&(s-=parseInt(this.nudgeLeft)),this.nudgeRight&&(s+=parseInt(this.nudgeRight)),s},computedTop(){const e=this.dimensions.activator,t=this.dimensions.content;let n=0;return this.top&&(n+=e.height-t.height),!1!==this.attach?n+=e.offsetTop:n+=e.top+this.pageYOffset,this.offsetY&&(n+=this.top?-e.height:e.height),this.nudgeTop&&(n-=parseInt(this.nudgeTop)),this.nudgeBottom&&(n+=parseInt(this.nudgeBottom)),n},hasActivator(){return!!this.$slots.activator||!!this.$scopedSlots.activator||!!this.activator||!!this.inputActivator},absoluteYOffset(){return this.pageYOffset-this.relativeYOffset}},watch:{disabled(e){e&&this.callDeactivate()},isActive(e){this.disabled||(e?this.callActivate():this.callDeactivate())},positionX:"updateDimensions",positionY:"updateDimensions"},beforeMount(){this.hasWindow="undefined"!==typeof window,this.hasWindow&&window.addEventListener("resize",this.updateDimensions,!1)},beforeDestroy(){this.hasWindow&&window.removeEventListener("resize",this.updateDimensions,!1)},methods:{absolutePosition(){return{offsetTop:this.positionY||this.absoluteY,offsetLeft:this.positionX||this.absoluteX,scrollHeight:0,top:this.positionY||this.absoluteY,bottom:this.positionY||this.absoluteY,left:this.positionX||this.absoluteX,right:this.positionX||this.absoluteX,height:0,width:0}},activate(){},calcLeft(e){return(0,i.kb)(!1!==this.attach?this.computedLeft:this.calcXOverflow(this.computedLeft,e))},calcTop(){return(0,i.kb)(!1!==this.attach?this.computedTop:this.calcYOverflow(this.computedTop))},calcXOverflow(e,t){const n=e+t-this.pageWidth+12;return e=(!this.left||this.right)&&n>0?Math.max(e-n,0):Math.max(e,12),e+this.getOffsetLeft()},calcYOverflow(e){const t=this.getInnerHeight(),n=this.absoluteYOffset+t,i=this.dimensions.activator,s=this.dimensions.content.height,r=e+s,o=n<r;return o&&this.offsetOverflow&&i.top>s?e=this.pageYOffset+(i.top-s):o&&!this.allowOverflow?e=n-s-12:e<this.absoluteYOffset&&!this.allowOverflow&&(e=this.absoluteYOffset+12),e<12?12:e},callActivate(){this.hasWindow&&this.activate()},callDeactivate(){this.isContentActive=!1,this.deactivate()},checkForPageYOffset(){this.hasWindow&&(this.pageYOffset=this.activatorFixed?0:this.getOffsetTop())},checkActivatorFixed(){if(!1!==this.attach)return void(this.activatorFixed=!1);let e=this.getActivator();while(e){if("fixed"===window.getComputedStyle(e).position)return void(this.activatorFixed=!0);e=e.offsetParent}this.activatorFixed=!1},deactivate(){},genActivatorListeners(){const e=_.Z.options.methods.genActivatorListeners.call(this),t=e.click;return t&&(e.click=e=>{this.openOnClick&&t&&t(e),this.absoluteX=e.clientX,this.absoluteY=e.clientY}),e},getInnerHeight(){return this.hasWindow?window.innerHeight||document.documentElement.clientHeight:0},getOffsetLeft(){return this.hasWindow?window.pageXOffset||document.documentElement.scrollLeft:0},getOffsetTop(){return this.hasWindow?window.pageYOffset||document.documentElement.scrollTop:0},getRoundedBoundedClientRect(e){const t=e.getBoundingClientRect();return{top:Math.round(t.top),left:Math.round(t.left),bottom:Math.round(t.bottom),right:Math.round(t.right),width:Math.round(t.width),height:Math.round(t.height)}},measure(e){if(!e||!this.hasWindow)return null;const t=this.getRoundedBoundedClientRect(e);if(!1!==this.attach){const n=window.getComputedStyle(e);t.left=parseInt(n.marginLeft),t.top=parseInt(n.marginTop)}return t},sneakPeek(e){requestAnimationFrame((()=>{const t=this.$refs.content;t&&"none"===t.style.display?(t.style.display="inline-block",e(),t.style.display="none"):e()}))},startTransition(){return new Promise((e=>requestAnimationFrame((()=>{this.isContentActive=this.hasJustFocused=this.isActive,e()}))))},updateDimensions(){this.hasWindow="undefined"!==typeof window,this.checkActivatorFixed(),this.checkForPageYOffset(),this.pageWidth=document.documentElement.clientWidth;const e={activator:{...this.dimensions.activator},content:{...this.dimensions.content}};if(!this.hasActivator||this.absolute)e.activator=this.absolutePosition();else{const t=this.getActivator();if(!t)return;e.activator=this.measure(t),e.activator.offsetLeft=t.offsetLeft,!1!==this.attach?e.activator.offsetTop=t.offsetTop:e.activator.offsetTop=0}this.sneakPeek((()=>{if(this.$refs.content){if(this.$refs.content.offsetParent){const t=this.getRoundedBoundedClientRect(this.$refs.content.offsetParent);this.relativeYOffset=window.pageYOffset+t.top,e.activator.top-=this.relativeYOffset,e.activator.left-=window.pageXOffset+t.left}e.content=this.measure(this.$refs.content)}this.dimensions=e}))}}}),k=n(2893),x=n(5357),A=n(3664),N=n(7293),O=n(1922);const D=(0,o.Z)(b.Z,w.Z,k.Z,x.Z,h.Z,E);var P=D.extend({name:"v-menu",directives:{ClickOutside:A.Z,Resize:N.Z},provide(){return{isInMenu:!0,theme:this.theme}},props:{auto:Boolean,closeOnClick:{type:Boolean,default:!0},closeOnContentClick:{type:Boolean,default:!0},disabled:Boolean,disableKeys:Boolean,maxHeight:{type:[Number,String],default:"auto"},offsetX:Boolean,offsetY:Boolean,openOnHover:Boolean,origin:{type:String,default:"top left"},transition:{type:[Boolean,String],default:"v-menu-transition"},contentProps:{type:Object,default:()=>({})}},data(){return{calculatedTopAuto:0,defaultOffset:8,hasJustFocused:!1,listIndex:-1,resizeTimeout:0,selectedIndex:null,tiles:[]}},computed:{activeTile(){return this.tiles[this.listIndex]},calculatedLeft(){const e=Math.max(this.dimensions.content.width,parseFloat(this.calculatedMinWidth));return this.auto?(0,i.kb)(this.calcXOverflow(this.calcLeftAuto(),e))||"0":this.calcLeft(e)||"0"},calculatedMaxHeight(){const e=this.auto?"200px":(0,i.kb)(this.maxHeight);return e||"0"},calculatedMaxWidth(){return(0,i.kb)(this.maxWidth)||"0"},calculatedMinWidth(){if(this.minWidth)return(0,i.kb)(this.minWidth)||"0";const e=Math.min(this.dimensions.activator.width+Number(this.nudgeWidth)+(this.auto?16:0),Math.max(this.pageWidth-24,0)),t=isNaN(parseInt(this.calculatedMaxWidth))?e:parseInt(this.calculatedMaxWidth);return(0,i.kb)(Math.min(t,e))||"0"},calculatedTop(){const e=this.auto?(0,i.kb)(this.calcYOverflow(this.calculatedTopAuto)):this.calcTop();return e||"0"},hasClickableTiles(){return Boolean(this.tiles.find((e=>e.tabIndex>-1)))},styles(){return{maxHeight:this.calculatedMaxHeight,minWidth:this.calculatedMinWidth,maxWidth:this.calculatedMaxWidth,top:this.calculatedTop,left:this.calculatedLeft,transformOrigin:this.origin,zIndex:this.zIndex||this.activeZIndex}}},watch:{isActive(e){e||(this.listIndex=-1)},isContentActive(e){this.hasJustFocused=e},listIndex(e,t){if(e in this.tiles){const t=this.tiles[e];t.classList.add("v-list-item--highlighted");const n=this.$refs.content.scrollTop,i=this.$refs.content.clientHeight;n>t.offsetTop-8?(0,O.Z)(t.offsetTop-t.clientHeight,{appOffset:!1,duration:300,container:this.$refs.content}):n+i<t.offsetTop+t.clientHeight+8&&(0,O.Z)(t.offsetTop-i+2*t.clientHeight,{appOffset:!1,duration:300,container:this.$refs.content})}t in this.tiles&&this.tiles[t].classList.remove("v-list-item--highlighted")}},created(){this.$attrs.hasOwnProperty("full-width")&&(0,m.Jk)("full-width",this)},mounted(){this.isActive&&this.callActivate()},methods:{activate(){this.updateDimensions(),requestAnimationFrame((()=>{this.startTransition().then((()=>{this.$refs.content&&(this.calculatedTopAuto=this.calcTopAuto(),this.auto&&(this.$refs.content.scrollTop=this.calcScrollPosition()))}))}))},calcScrollPosition(){const e=this.$refs.content,t=e.querySelector(".v-list-item--active"),n=e.scrollHeight-e.offsetHeight;return t?Math.min(n,Math.max(0,t.offsetTop-e.offsetHeight/2+t.offsetHeight/2)):e.scrollTop},calcLeftAuto(){return parseInt(this.dimensions.activator.left-2*this.defaultOffset)},calcTopAuto(){const e=this.$refs.content,t=e.querySelector(".v-list-item--active");if(t||(this.selectedIndex=null),this.offsetY||!t)return this.computedTop;this.selectedIndex=Array.from(this.tiles).indexOf(t);const n=t.offsetTop-this.calcScrollPosition(),i=e.querySelector(".v-list-item").offsetTop;return this.computedTop-n-i-1},changeListIndex(e){if(this.getTiles(),this.isActive&&this.hasClickableTiles)if(e.keyCode!==i.Do.tab){if(e.keyCode===i.Do.down)this.nextTile();else if(e.keyCode===i.Do.up)this.prevTile();else if(e.keyCode===i.Do.end)this.lastTile();else if(e.keyCode===i.Do.home)this.firstTile();else{if(e.keyCode!==i.Do.enter||-1===this.listIndex)return;this.tiles[this.listIndex].click()}e.preventDefault()}else this.isActive=!1},closeConditional(e){const t=e.target;return this.isActive&&!this._isDestroyed&&this.closeOnClick&&!this.$refs.content.contains(t)},genActivatorAttributes(){const e=_.Z.options.methods.genActivatorAttributes.call(this);return this.activeTile&&this.activeTile.id?{...e,"aria-activedescendant":this.activeTile.id}:e},genActivatorListeners(){const e=E.options.methods.genActivatorListeners.call(this);return this.disableKeys||(e.keydown=this.onKeyDown),e},genTransition(){const e=this.genContent();return this.transition?this.$createElement("transition",{props:{name:this.transition}},[e]):e},genDirectives(){const e=[{name:"show",value:this.isContentActive}];return!this.openOnHover&&this.closeOnClick&&e.push({name:"click-outside",value:{handler:()=>{this.isActive=!1},closeConditional:this.closeConditional,include:()=>[this.$el,...this.getOpenDependentElements()]}}),e},genContent(){const e={attrs:{...this.getScopeIdAttrs(),...this.contentProps,role:"role"in this.$attrs?this.$attrs.role:"menu"},staticClass:"v-menu__content",class:{...this.rootThemeClasses,...this.roundedClasses,"v-menu__content--auto":this.auto,"v-menu__content--fixed":this.activatorFixed,menuable__content__active:this.isActive,[this.contentClass.trim()]:!0},style:this.styles,directives:this.genDirectives(),ref:"content",on:{click:e=>{const t=e.target;t.getAttribute("disabled")||this.closeOnContentClick&&(this.isActive=!1)},keydown:this.onKeyDown}};return this.$listeners.scroll&&(e.on=e.on||{},e.on.scroll=this.$listeners.scroll),!this.disabled&&this.openOnHover&&(e.on=e.on||{},e.on.mouseenter=this.mouseEnterHandler),this.openOnHover&&(e.on=e.on||{},e.on.mouseleave=this.mouseLeaveHandler),this.$createElement("div",e,this.getContentSlot())},getTiles(){this.$refs.content&&(this.tiles=Array.from(this.$refs.content.querySelectorAll(".v-list-item, .v-divider, .v-subheader")))},mouseEnterHandler(){this.runDelay("open",(()=>{this.hasJustFocused||(this.hasJustFocused=!0)}))},mouseLeaveHandler(e){this.runDelay("close",(()=>{var t;(null===(t=this.$refs.content)||void 0===t?void 0:t.contains(e.relatedTarget))||requestAnimationFrame((()=>{this.isActive=!1,this.callDeactivate()}))}))},nextTile(){const e=this.tiles[this.listIndex+1];if(!e){if(!this.tiles.length)return;return this.listIndex=-1,void this.nextTile()}this.listIndex++,-1===e.tabIndex&&this.nextTile()},prevTile(){const e=this.tiles[this.listIndex-1];if(!e){if(!this.tiles.length)return;return this.listIndex=this.tiles.length,void this.prevTile()}this.listIndex--,-1===e.tabIndex&&this.prevTile()},lastTile(){const e=this.tiles[this.tiles.length-1];e&&(this.listIndex=this.tiles.length-1,-1===e.tabIndex&&this.prevTile())},firstTile(){const e=this.tiles[0];e&&(this.listIndex=0,-1===e.tabIndex&&this.nextTile())},onKeyDown(e){if(!this.disableKeys){if(e.keyCode===i.Do.esc){setTimeout((()=>{this.isActive=!1}));const e=this.getActivator();this.$nextTick((()=>e&&e.focus()))}else!this.isActive&&[i.Do.up,i.Do.down].includes(e.keyCode)&&(this.isActive=!0);this.$nextTick((()=>this.changeListIndex(e)))}},onResize(){this.isActive&&(this.$refs.content.offsetWidth,this.updateDimensions(),clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(this.updateDimensions,100))}},render(e){const t={staticClass:"v-menu",class:{"v-menu--attached":""===this.attach||!0===this.attach||"attach"===this.attach},directives:[{arg:"500",name:"resize",value:this.onResize}]};return e("div",t,[!this.activator&&this.genActivator(),this.showLazyContent((()=>[this.$createElement(y.Z,{props:{root:!0,light:this.light,dark:this.dark}},[this.genTransition()])]))])}}),R=P,L=n(293),$=n(9088),M=n(7559),F=s.ZP.extend({name:"v-simple-checkbox",functional:!0,directives:{Ripple:L.Z},props:{...l.Z.options.props,...h.Z.options.props,disabled:Boolean,ripple:{type:Boolean,default:!0},value:Boolean,indeterminate:Boolean,indeterminateIcon:{type:String,default:"$checkboxIndeterminate"},onIcon:{type:String,default:"$checkboxOn"},offIcon:{type:String,default:"$checkboxOff"}},render(e,{props:t,data:n,listeners:s}){const r=[];let o=t.offIcon;if(t.indeterminate?o=t.indeterminateIcon:t.value&&(o=t.onIcon),r.push(e($.Z,l.Z.options.methods.setTextColor(t.value&&t.color,{props:{disabled:t.disabled,dark:t.dark,light:t.light}}),o)),t.ripple&&!t.disabled){const n=e("div",l.Z.options.methods.setTextColor(t.color,{staticClass:"v-input--selection-controls__ripple",directives:[{def:L.Z,name:"ripple",value:{center:!0}}]}));r.push(n)}return e("div",(0,M.ZP)(n,{class:{"v-simple-checkbox":!0,"v-simple-checkbox--disabled":t.disabled},on:{click:e=>{e.stopPropagation(),n.on&&n.on.input&&!t.disabled&&(0,i.TI)(n.on.input).forEach((e=>e(!t.value)))}}}),[e("div",{staticClass:"v-input--selection-controls__input"},r)])}}),V=h.Z.extend({name:"v-divider",props:{inset:Boolean,vertical:Boolean},render(e){let t;return this.$attrs.role&&"separator"!==this.$attrs.role||(t=this.vertical?"vertical":"horizontal"),e("hr",{class:{"v-divider":!0,"v-divider--inset":this.inset,"v-divider--vertical":this.vertical,...this.themeClasses},attrs:{role:"separator","aria-orientation":t,...this.$attrs},on:this.$listeners})}}),B=V,U=(0,o.Z)(h.Z).extend({name:"v-subheader",props:{inset:Boolean},render(e){return e("div",{staticClass:"v-subheader",class:{"v-subheader--inset":this.inset,...this.themeClasses},attrs:this.$attrs,on:this.$listeners},this.$slots.default)}}),j=U,z=n(1667),q=n(3444),H=n(6322),W=n(7970),Z=(0,o.Z)(l.Z,h.Z).extend({name:"v-select-list",directives:{ripple:L.Z},props:{action:Boolean,dense:Boolean,hideSelected:Boolean,items:{type:Array,default:()=>[]},itemDisabled:{type:[String,Array,Function],default:"disabled"},itemText:{type:[String,Array,Function],default:"text"},itemValue:{type:[String,Array,Function],default:"value"},noDataText:String,noFilter:Boolean,searchInput:null,selectedItems:{type:Array,default:()=>[]}},computed:{parsedItems(){return this.selectedItems.map((e=>this.getValue(e)))},tileActiveClass(){return Object.keys(this.setTextColor(this.color).class||{}).join(" ")},staticNoDataTile(){const e={attrs:{role:void 0},on:{mousedown:e=>e.preventDefault()}};return this.$createElement(z.Z,e,[this.genTileContent(this.noDataText)])}},methods:{genAction(e,t){return this.$createElement(q.Z,[this.$createElement(F,{props:{color:this.color,value:t,ripple:!1},on:{input:()=>this.$emit("select",e)}})])},genDivider(e){return this.$createElement(B,{props:e})},genFilteredText(e){if(e=e||"",!this.searchInput||this.noFilter)return e;const{start:t,middle:n,end:i}=this.getMaskedCharacters(e);return[t,this.genHighlight(n),i]},genHeader(e){return this.$createElement(j,{props:e},e.header)},genHighlight(e){return this.$createElement("span",{staticClass:"v-list-item__mask"},e)},getMaskedCharacters(e){const t=(this.searchInput||"").toString().toLocaleLowerCase(),n=e.toLocaleLowerCase().indexOf(t);if(n<0)return{start:e,middle:"",end:""};const i=e.slice(0,n),s=e.slice(n,n+t.length),r=e.slice(n+t.length);return{start:i,middle:s,end:r}},genTile({item:e,index:t,disabled:n=null,value:i=!1}){i||(i=this.hasItem(e)),e===Object(e)&&(n=null!==n?n:this.getDisabled(e));const s={attrs:{"aria-selected":String(i),id:`list-item-${this._uid}-${t}`,role:"option"},on:{mousedown:e=>{e.preventDefault()},click:()=>n||this.$emit("select",e)},props:{activeClass:this.tileActiveClass,disabled:n,ripple:!0,inputValue:i}};if(!this.$scopedSlots.item)return this.$createElement(z.Z,s,[this.action&&!this.hideSelected&&this.items.length>0?this.genAction(e,i):null,this.genTileContent(e,t)]);const r=this,o=this.$scopedSlots.item({parent:r,item:e,attrs:{...s.attrs,...s.props},on:s.on});return this.needsTile(o)?this.$createElement(z.Z,s,o):o},genTileContent(e,t=0){return this.$createElement(H.km,[this.$createElement(H.V9,[this.genFilteredText(this.getText(e))])])},hasItem(e){return this.parsedItems.indexOf(this.getValue(e))>-1},needsTile(e){return 1!==e.length||null==e[0].componentOptions||"v-list-item"!==e[0].componentOptions.Ctor.options.name},getDisabled(e){return Boolean((0,i.qF)(e,this.itemDisabled,!1))},getText(e){return String((0,i.qF)(e,this.itemText,e))},getValue(e){return(0,i.qF)(e,this.itemValue,this.getText(e))}},render(){const e=[],t=this.items.length;for(let n=0;n<t;n++){const t=this.items[n];this.hideSelected&&this.hasItem(t)||(null==t?e.push(this.genTile({item:t,index:n})):t.header?e.push(this.genHeader(t)):t.divider?e.push(this.genDivider(t)):e.push(this.genTile({item:t,index:n})))}return e.length||e.push(this.$slots["no-data"]||this.staticNoDataTile),this.$slots["prepend-item"]&&e.unshift(this.$slots["prepend-item"]),this.$slots["append-item"]&&e.push(this.$slots["append-item"]),this.$createElement(W.Z,{staticClass:"v-select-list",class:this.themeClasses,attrs:{role:"listbox",tabindex:-1},props:{dense:this.dense}},e)}}),K=n(2926),G=n(9007),Q=n(8789),Y=s.ZP.extend({name:"filterable",props:{noDataText:{type:String,default:"$vuetify.noDataText"}}});const X={closeOnClick:!1,closeOnContentClick:!1,disableKeys:!0,openOnClick:!1,maxHeight:304},J=(0,o.Z)(G.Z,Q.Z,b.Z,Y);var ee=J.extend().extend({name:"v-select",directives:{ClickOutside:A.Z},props:{appendIcon:{type:String,default:"$dropdown"},attach:{type:null,default:!1},cacheItems:Boolean,chips:Boolean,clearable:Boolean,deletableChips:Boolean,disableLookup:Boolean,eager:Boolean,hideSelected:Boolean,items:{type:Array,default:()=>[]},itemColor:{type:String,default:"primary"},itemDisabled:{type:[String,Array,Function],default:"disabled"},itemText:{type:[String,Array,Function],default:"text"},itemValue:{type:[String,Array,Function],default:"value"},menuProps:{type:[String,Array,Object],default:()=>X},multiple:Boolean,openOnClear:Boolean,returnObject:Boolean,smallChips:Boolean},data(){return{cachedItems:this.cacheItems?this.items:[],menuIsBooted:!1,isMenuActive:!1,lastItem:20,lazyValue:void 0!==this.value?this.value:this.multiple?[]:void 0,selectedIndex:-1,selectedItems:[],keyboardLookupPrefix:"",keyboardLookupLastTime:0}},computed:{allItems(){return this.filterDuplicates(this.cachedItems.concat(this.items))},classes(){return{...G.Z.options.computed.classes.call(this),"v-select":!0,"v-select--chips":this.hasChips,"v-select--chips--small":this.smallChips,"v-select--is-menu-active":this.isMenuActive,"v-select--is-multi":this.multiple}},computedItems(){return this.allItems},computedOwns(){return`list-${this._uid}`},computedCounterValue(){var e;const t=this.multiple?this.selectedItems:(null!==(e=this.getText(this.selectedItems[0]))&&void 0!==e?e:"").toString();return"function"===typeof this.counterValue?this.counterValue(t):t.length},directives(){return this.isFocused?[{name:"click-outside",value:{handler:this.blur,closeConditional:this.closeConditional,include:()=>this.getOpenDependentElements()}}]:void 0},dynamicHeight(){return"auto"},hasChips(){return this.chips||this.smallChips},hasSlot(){return Boolean(this.hasChips||this.$scopedSlots.selection)},isDirty(){return this.selectedItems.length>0},listData(){const e=this.$vnode&&this.$vnode.context.$options._scopeId,t=e?{[e]:!0}:{};return{attrs:{...t,id:this.computedOwns},props:{action:this.multiple,color:this.itemColor,dense:this.dense,hideSelected:this.hideSelected,items:this.virtualizedItems,itemDisabled:this.itemDisabled,itemText:this.itemText,itemValue:this.itemValue,noDataText:this.$vuetify.lang.t(this.noDataText),selectedItems:this.selectedItems},on:{select:this.selectItem},scopedSlots:{item:this.$scopedSlots.item}}},staticList(){return(this.$slots["no-data"]||this.$slots["prepend-item"]||this.$slots["append-item"])&&(0,m.N6)("assert: staticList should not be called if slots are used"),this.$createElement(Z,this.listData)},virtualizedItems(){return this.$_menuProps.auto?this.computedItems:this.computedItems.slice(0,this.lastItem)},menuCanShow:()=>!0,$_menuProps(){let e="string"===typeof this.menuProps?this.menuProps.split(","):this.menuProps;return Array.isArray(e)&&(e=e.reduce(((e,t)=>(e[t.trim()]=!0,e)),{})),{...X,eager:this.eager,value:this.menuCanShow&&this.isMenuActive,nudgeBottom:e.offsetY?1:0,...e}}},watch:{internalValue(e){this.initialValue=e,this.setSelectedItems(),this.multiple&&this.$nextTick((()=>{var e;null===(e=this.$refs.menu)||void 0===e||e.updateDimensions()})),this.hideSelected&&this.$nextTick((()=>{this.onScroll()}))},isMenuActive(e){window.setTimeout((()=>this.onMenuActiveChange(e)))},items:{immediate:!0,handler(e){this.cacheItems&&this.$nextTick((()=>{this.cachedItems=this.filterDuplicates(this.cachedItems.concat(e))})),this.setSelectedItems()}}},methods:{blur(e){G.Z.options.methods.blur.call(this,e),this.isMenuActive=!1,this.isFocused=!1,this.selectedIndex=-1,this.setMenuIndex(-1)},activateMenu(){this.isInteractive&&!this.isMenuActive&&(this.isMenuActive=!0)},clearableCallback(){this.setValue(this.multiple?[]:null),this.setMenuIndex(-1),this.$nextTick((()=>this.$refs.input&&this.$refs.input.focus())),this.openOnClear&&(this.isMenuActive=!0)},closeConditional(e){return!this.isMenuActive||!this._isDestroyed&&(!this.getContent()||!this.getContent().contains(e.target))&&this.$el&&!this.$el.contains(e.target)&&e.target!==this.$el},filterDuplicates(e){const t=new Map;for(let n=0;n<e.length;++n){const i=e[n];if(null==i)continue;if(i.header||i.divider){t.set(i,i);continue}const s=this.getValue(i);!t.has(s)&&t.set(s,i)}return Array.from(t.values())},findExistingIndex(e){const t=this.getValue(e);return(this.internalValue||[]).findIndex((e=>this.valueComparator(this.getValue(e),t)))},getContent(){return this.$refs.menu&&this.$refs.menu.$refs.content},genChipSelection(e,t){const n=this.isDisabled||this.getDisabled(e),i=!n&&this.isInteractive;return this.$createElement(v,{staticClass:"v-chip--select",attrs:{tabindex:-1},props:{close:this.deletableChips&&i,disabled:n,inputValue:t===this.selectedIndex,small:this.smallChips},on:{click:e=>{i&&(e.stopPropagation(),this.selectedIndex=t)},"click:close":()=>this.onChipInput(e)},key:JSON.stringify(this.getValue(e))},this.getText(e))},genCommaSelection(e,t,n){const i=t===this.selectedIndex&&this.computedColor,s=this.isDisabled||this.getDisabled(e);return this.$createElement("div",this.setTextColor(i,{staticClass:"v-select__selection v-select__selection--comma",class:{"v-select__selection--disabled":s},key:JSON.stringify(this.getValue(e))}),`${this.getText(e)}${n?"":", "}`)},genDefaultSlot(){const e=this.genSelections(),t=this.genInput();return Array.isArray(e)?e.push(t):(e.children=e.children||[],e.children.push(t)),[this.genFieldset(),this.$createElement("div",{staticClass:"v-select__slot",directives:this.directives},[this.genLabel(),this.prefix?this.genAffix("prefix"):null,e,this.suffix?this.genAffix("suffix"):null,this.genClearIcon(),this.genIconSlot(),this.genHiddenInput()]),this.genMenu(),this.genProgress()]},genIcon(e,t,n){const i=K.Z.options.methods.genIcon.call(this,e,t,n);return"append"===e&&(i.children[0].data=(0,M.ZP)(i.children[0].data,{attrs:{tabindex:i.children[0].componentOptions.listeners&&"-1","aria-hidden":"true","aria-label":void 0}})),i},genInput(){const e=G.Z.options.methods.genInput.call(this);return delete e.data.attrs.name,e.data=(0,M.ZP)(e.data,{domProps:{value:null},attrs:{readonly:!0,type:"text","aria-readonly":String(this.isReadonly),"aria-activedescendant":(0,i.vO)(this.$refs.menu,"activeTile.id"),autocomplete:(0,i.vO)(e.data,"attrs.autocomplete","off"),placeholder:this.isDirty||!this.persistentPlaceholder&&!this.isFocused&&this.hasLabel?void 0:this.placeholder},on:{keypress:this.onKeyPress}}),e},genHiddenInput(){return this.$createElement("input",{domProps:{value:this.lazyValue},attrs:{type:"hidden",name:this.attrs$.name}})},genInputSlot(){const e=G.Z.options.methods.genInputSlot.call(this);return e.data.attrs={...e.data.attrs,role:"button","aria-haspopup":"listbox","aria-expanded":String(this.isMenuActive),"aria-owns":this.computedOwns},e},genList(){return this.$slots["no-data"]||this.$slots["prepend-item"]||this.$slots["append-item"]?this.genListWithSlot():this.staticList},genListWithSlot(){const e=["prepend-item","no-data","append-item"].filter((e=>this.$slots[e])).map((e=>this.$createElement("template",{slot:e},this.$slots[e])));return this.$createElement(Z,{...this.listData},e)},genMenu(){const e=this.$_menuProps;return e.activator=this.$refs["input-slot"],"attach"in e||(""===this.attach||!0===this.attach||"attach"===this.attach?e.attach=this.$el:e.attach=this.attach),this.$createElement(R,{attrs:{role:void 0},props:e,on:{input:e=>{this.isMenuActive=e,this.isFocused=e},scroll:this.onScroll},ref:"menu"},[this.genList()])},genSelections(){let e=this.selectedItems.length;const t=new Array(e);let n;n=this.$scopedSlots.selection?this.genSlotSelection:this.hasChips?this.genChipSelection:this.genCommaSelection;while(e--)t[e]=n(this.selectedItems[e],e,e===t.length-1);return this.$createElement("div",{staticClass:"v-select__selections"},t)},genSlotSelection(e,t){return this.$scopedSlots.selection({attrs:{class:"v-chip--select"},parent:this,item:e,index:t,select:e=>{e.stopPropagation(),this.selectedIndex=t},selected:t===this.selectedIndex,disabled:!this.isInteractive})},getMenuIndex(){return this.$refs.menu?this.$refs.menu.listIndex:-1},getDisabled(e){return(0,i.qF)(e,this.itemDisabled,!1)},getText(e){return(0,i.qF)(e,this.itemText,e)},getValue(e){return(0,i.qF)(e,this.itemValue,this.getText(e))},onBlur(e){e&&this.$emit("blur",e)},onChipInput(e){this.multiple?this.selectItem(e):this.setValue(null),0===this.selectedItems.length?this.isMenuActive=!0:this.isMenuActive=!1,this.selectedIndex=-1},onClick(e){this.isInteractive&&(this.isAppendInner(e.target)||(this.isMenuActive=!0),this.isFocused||(this.isFocused=!0,this.$emit("focus")),this.$emit("click",e))},onEscDown(e){e.preventDefault(),this.isMenuActive&&(e.stopPropagation(),this.isMenuActive=!1)},onKeyPress(e){if(this.multiple||!this.isInteractive||this.disableLookup||e.key.length>1||e.ctrlKey||e.metaKey||e.altKey)return;const t=1e3,n=performance.now();n-this.keyboardLookupLastTime>t&&(this.keyboardLookupPrefix=""),this.keyboardLookupPrefix+=e.key.toLowerCase(),this.keyboardLookupLastTime=n;const i=this.allItems.findIndex((e=>{var t;const n=(null!==(t=this.getText(e))&&void 0!==t?t:"").toString();return n.toLowerCase().startsWith(this.keyboardLookupPrefix)})),s=this.allItems[i];-1!==i&&(this.lastItem=Math.max(this.lastItem,i+5),this.setValue(this.returnObject?s:this.getValue(s)),this.$nextTick((()=>this.$refs.menu.getTiles())),setTimeout((()=>this.setMenuIndex(i))))},onKeyDown(e){if(this.isReadonly&&e.keyCode!==i.Do.tab)return;const t=e.keyCode,n=this.$refs.menu;return this.$emit("keydown",e),n?(this.isMenuActive&&[i.Do.up,i.Do.down,i.Do.home,i.Do.end,i.Do.enter].includes(t)&&this.$nextTick((()=>{n.changeListIndex(e),this.$emit("update:list-index",n.listIndex)})),[i.Do.enter,i.Do.space].includes(t)&&this.activateMenu(),!this.isMenuActive&&[i.Do.up,i.Do.down,i.Do.home,i.Do.end].includes(t)?this.onUpDown(e):t===i.Do.esc?this.onEscDown(e):t===i.Do.tab?this.onTabDown(e):t===i.Do.space?this.onSpaceDown(e):void 0):void 0},onMenuActiveChange(e){if(this.multiple&&!e||this.getMenuIndex()>-1)return;const t=this.$refs.menu;if(t&&this.isDirty){this.$refs.menu.getTiles();for(let e=0;e<t.tiles.length;e++)if("true"===t.tiles[e].getAttribute("aria-selected")){this.setMenuIndex(e);break}}},onMouseUp(e){this.hasMouseDown&&3!==e.which&&this.isInteractive&&this.isAppendInner(e.target)&&this.$nextTick((()=>this.isMenuActive=!this.isMenuActive)),G.Z.options.methods.onMouseUp.call(this,e)},onScroll(){if(this.isMenuActive){if(this.lastItem>this.computedItems.length)return;const e=this.getContent().scrollHeight-(this.getContent().scrollTop+this.getContent().clientHeight)<200;e&&(this.lastItem+=20)}else requestAnimationFrame((()=>this.getContent().scrollTop=0))},onSpaceDown(e){e.preventDefault()},onTabDown(e){const t=this.$refs.menu;if(!t)return;const n=t.activeTile;!this.multiple&&n&&this.isMenuActive?(e.preventDefault(),e.stopPropagation(),n.click()):this.blur(e)},onUpDown(e){const t=this.$refs.menu;if(!t)return;if(e.preventDefault(),this.multiple)return this.activateMenu();const n=e.keyCode;t.isBooted=!0,window.requestAnimationFrame((()=>{if(t.getTiles(),!t.hasClickableTiles)return this.activateMenu();switch(n){case i.Do.up:t.prevTile();break;case i.Do.down:t.nextTile();break;case i.Do.home:t.firstTile();break;case i.Do.end:t.lastTile();break}this.selectItem(this.allItems[this.getMenuIndex()])}))},selectItem(e){if(this.multiple){const t=(this.internalValue||[]).slice(),n=this.findExistingIndex(e);if(-1!==n?t.splice(n,1):t.push(e),this.setValue(t.map((e=>this.returnObject?e:this.getValue(e)))),this.hideSelected)this.setMenuIndex(-1);else{const t=this.allItems.indexOf(e);~t&&(this.$nextTick((()=>this.$refs.menu.getTiles())),setTimeout((()=>this.setMenuIndex(t))))}}else this.setValue(this.returnObject?e:this.getValue(e)),this.isMenuActive=!1},setMenuIndex(e){this.$refs.menu&&(this.$refs.menu.listIndex=e)},setSelectedItems(){const e=[],t=this.multiple&&Array.isArray(this.internalValue)?this.internalValue:[this.internalValue];for(const n of t){const t=this.allItems.findIndex((e=>this.valueComparator(this.getValue(e),this.getValue(n))));t>-1&&e.push(this.allItems[t])}this.selectedItems=e},setValue(e){this.valueComparator(e,this.internalValue)||(this.internalValue=e,this.$emit("change",e))},isAppendInner(e){const t=this.$refs["append-inner"];return t&&(t===e||t.contains(e))}}}),te=n(3381),ne=te.Z,ie=s.ZP.extend({name:"v-data-footer",props:{options:{type:Object,required:!0},pagination:{type:Object,required:!0},itemsPerPageOptions:{type:Array,default:()=>[5,10,15,-1]},prevIcon:{type:String,default:"$prev"},nextIcon:{type:String,default:"$next"},firstIcon:{type:String,default:"$first"},lastIcon:{type:String,default:"$last"},itemsPerPageText:{type:String,default:"$vuetify.dataFooter.itemsPerPageText"},itemsPerPageAllText:{type:String,default:"$vuetify.dataFooter.itemsPerPageAll"},showFirstLastPage:Boolean,showCurrentPage:Boolean,disablePagination:Boolean,disableItemsPerPage:Boolean,pageText:{type:String,default:"$vuetify.dataFooter.pageText"}},computed:{disableNextPageIcon(){return this.options.itemsPerPage<=0||this.options.page*this.options.itemsPerPage>=this.pagination.itemsLength||this.pagination.pageStop<0},computedDataItemsPerPageOptions(){return this.itemsPerPageOptions.map((e=>"object"===typeof e?e:this.genDataItemsPerPageOption(e)))}},methods:{updateOptions(e){this.$emit("update:options",Object.assign({},this.options,e))},onFirstPage(){this.updateOptions({page:1})},onPreviousPage(){this.updateOptions({page:this.options.page-1})},onNextPage(){this.updateOptions({page:this.options.page+1})},onLastPage(){this.updateOptions({page:this.pagination.pageCount})},onChangeItemsPerPage(e){this.updateOptions({itemsPerPage:e,page:1})},genDataItemsPerPageOption(e){return{text:-1===e?this.$vuetify.lang.t(this.itemsPerPageAllText):String(e),value:e}},genItemsPerPageSelect(){let e=this.options.itemsPerPage;const t=this.computedDataItemsPerPageOptions;return t.length<=1?null:(t.find((t=>t.value===e))||(e=t[0]),this.$createElement("div",{staticClass:"v-data-footer__select"},[this.$vuetify.lang.t(this.itemsPerPageText),this.$createElement(ee,{attrs:{"aria-label":this.$vuetify.lang.t(this.itemsPerPageText)},props:{disabled:this.disableItemsPerPage,items:t,value:e,hideDetails:!0,auto:!0,minWidth:"75px"},on:{input:this.onChangeItemsPerPage}})]))},genPaginationInfo(){let e=[""];const t=this.pagination.itemsLength;let n=this.pagination.pageStart,i=this.pagination.pageStop;return this.pagination.itemsLength&&this.pagination.itemsPerPage?(n=this.pagination.pageStart+1,i=t<this.pagination.pageStop||this.pagination.pageStop<0?t:this.pagination.pageStop,e=this.$scopedSlots["page-text"]?[this.$scopedSlots["page-text"]({pageStart:n,pageStop:i,itemsLength:t})]:[this.$vuetify.lang.t(this.pageText,n,i,t)]):this.$scopedSlots["page-text"]&&(e=[this.$scopedSlots["page-text"]({pageStart:n,pageStop:i,itemsLength:t})]),this.$createElement("div",{class:"v-data-footer__pagination"},e)},genIcon(e,t,n,i){return this.$createElement(ne,{props:{disabled:t||this.disablePagination,icon:!0,text:!0},on:{click:e},attrs:{"aria-label":n}},[this.$createElement(c.Z,i)])},genIcons(){const e=[],t=[];return e.push(this.genIcon(this.onPreviousPage,1===this.options.page,this.$vuetify.lang.t("$vuetify.dataFooter.prevPage"),this.$vuetify.rtl?this.nextIcon:this.prevIcon)),t.push(this.genIcon(this.onNextPage,this.disableNextPageIcon,this.$vuetify.lang.t("$vuetify.dataFooter.nextPage"),this.$vuetify.rtl?this.prevIcon:this.nextIcon)),this.showFirstLastPage&&(e.unshift(this.genIcon(this.onFirstPage,1===this.options.page,this.$vuetify.lang.t("$vuetify.dataFooter.firstPage"),this.$vuetify.rtl?this.lastIcon:this.firstIcon)),t.push(this.genIcon(this.onLastPage,this.options.page>=this.pagination.pageCount||-1===this.options.itemsPerPage,this.$vuetify.lang.t("$vuetify.dataFooter.lastPage"),this.$vuetify.rtl?this.firstIcon:this.lastIcon))),[this.$createElement("div",{staticClass:"v-data-footer__icons-before"},e),this.showCurrentPage&&this.$createElement("span",[this.options.page.toString()]),this.$createElement("div",{staticClass:"v-data-footer__icons-after"},t)]}},render(){return this.$createElement("div",{staticClass:"v-data-footer"},[(0,i.z9)(this,"prepend"),this.genItemsPerPageSelect(),this.genPaginationInfo(),this.genIcons()])}}),se=n(9989),re=(0,o.Z)(se.Z,h.Z).extend({name:"v-data-iterator",props:{...r.options.props,itemKey:{type:String,default:"id"},value:{type:Array,default:()=>[]},singleSelect:Boolean,expanded:{type:Array,default:()=>[]},mobileBreakpoint:{...se.Z.options.props.mobileBreakpoint,default:600},singleExpand:Boolean,loading:[Boolean,String],noResultsText:{type:String,default:"$vuetify.dataIterator.noResultsText"},noDataText:{type:String,default:"$vuetify.noDataText"},loadingText:{type:String,default:"$vuetify.dataIterator.loadingText"},hideDefaultFooter:Boolean,footerProps:Object,selectableKey:{type:String,default:"isSelectable"}},data:()=>({selection:{},expansion:{},internalCurrentItems:[],shiftKeyDown:!1,lastEntry:-1}),computed:{everyItem(){return!!this.selectableItems.length&&this.selectableItems.every((e=>this.isSelected(e)))},someItems(){return this.selectableItems.some((e=>this.isSelected(e)))},sanitizedFooterProps(){return(0,i.$x)(this.footerProps)},selectableItems(){return this.internalCurrentItems.filter((e=>this.isSelectable(e)))}},watch:{value:{handler(e){this.selection=e.reduce(((e,t)=>(e[(0,i.vO)(t,this.itemKey)]=t,e)),{})},immediate:!0},selection(e,t){(0,i.vZ)(Object.keys(e),Object.keys(t))||this.$emit("input",Object.values(e))},expanded:{handler(e){this.expansion=e.reduce(((e,t)=>(e[(0,i.vO)(t,this.itemKey)]=!0,e)),{})},immediate:!0},expansion(e,t){if((0,i.vZ)(e,t))return;const n=Object.keys(e).filter((t=>e[t])),s=n.length?this.items.filter((e=>n.includes(String((0,i.vO)(e,this.itemKey))))):[];this.$emit("update:expanded",s)}},created(){const e=[["disable-initial-sort","sort-by"],["filter","custom-filter"],["pagination","options"],["total-items","server-items-length"],["hide-actions","hide-default-footer"],["rows-per-page-items","footer-props.items-per-page-options"],["rows-per-page-text","footer-props.items-per-page-text"],["prev-icon","footer-props.prev-icon"],["next-icon","footer-props.next-icon"]];e.forEach((([e,t])=>{this.$attrs.hasOwnProperty(e)&&(0,m.fK)(e,t,this)}));const t=["expand","content-class","content-props","content-tag"];t.forEach((e=>{this.$attrs.hasOwnProperty(e)&&(0,m.Jk)(e)}))},mounted(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)},beforeDestroy(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)},methods:{onKeyDown(e){this.shiftKeyDown=e.keyCode===i.Do.shift||e.shiftKey},onKeyUp(e){e.keyCode!==i.Do.shift&&e.shiftKey||(this.shiftKeyDown=!1)},toggleSelectAll(e){const t=Object.assign({},this.selection);for(let n=0;n<this.selectableItems.length;n++){const s=this.selectableItems[n];if(!this.isSelectable(s))continue;const r=(0,i.vO)(s,this.itemKey);e?t[r]=s:delete t[r]}this.selection=t,this.$emit("toggle-select-all",{items:this.internalCurrentItems,value:e})},isSelectable(e){return!1!==(0,i.vO)(e,this.selectableKey)},isSelected(e){return!!this.selection[(0,i.vO)(e,this.itemKey)]||!1},select(e,t=!0,n=!0){if(!this.isSelectable(e))return;const s=this.singleSelect?{}:Object.assign({},this.selection),r=(0,i.vO)(e,this.itemKey);t?s[r]=e:delete s[r];const o=this.selectableItems.findIndex((e=>(0,i.vO)(e,this.itemKey)===r));if(-1===this.lastEntry)this.lastEntry=o;else if(this.shiftKeyDown&&!this.singleSelect&&n){const e=(0,i.vO)(this.selectableItems[this.lastEntry],this.itemKey),t=Object.keys(this.selection).includes(String(e));this.multipleSelect(t,n,s,o)}if(this.lastEntry=o,this.singleSelect&&n){const e=Object.keys(this.selection),t=e.length&&(0,i.vO)(this.selection[e[0]],this.itemKey);t&&t!==r&&this.$emit("item-selected",{item:this.selection[t],value:!1})}this.selection=s,n&&this.$emit("item-selected",{item:e,value:t})},multipleSelect(e=!0,t=!0,n,s){const r=s<this.lastEntry?s:this.lastEntry,o=s<this.lastEntry?this.lastEntry:s;for(let a=r;a<=o;a++){const s=this.selectableItems[a],r=(0,i.vO)(s,this.itemKey);e?n[r]=s:delete n[r],t&&this.$emit("item-selected",{currentItem:s,value:e})}},isExpanded(e){return this.expansion[(0,i.vO)(e,this.itemKey)]||!1},expand(e,t=!0){const n=this.singleExpand?{}:Object.assign({},this.expansion),s=(0,i.vO)(e,this.itemKey);t?n[s]=!0:delete n[s],this.expansion=n,this.$emit("item-expanded",{item:e,value:t})},createItemProps(e,t){return{item:e,index:t,select:t=>this.select(e,t),isSelected:this.isSelected(e),expand:t=>this.expand(e,t),isExpanded:this.isExpanded(e),isMobile:this.isMobile}},genEmptyWrapper(e){return this.$createElement("div",e)},genEmpty(e,t){if(0===e&&this.loading){const e=this.$slots.loading||this.$vuetify.lang.t(this.loadingText);return this.genEmptyWrapper(e)}if(0===e){const e=this.$slots["no-data"]||this.$vuetify.lang.t(this.noDataText);return this.genEmptyWrapper(e)}if(0===t){const e=this.$slots["no-results"]||this.$vuetify.lang.t(this.noResultsText);return this.genEmptyWrapper(e)}return null},genItems(e){const t=this.genEmpty(e.originalItemsLength,e.pagination.itemsLength);return t?[t]:this.$scopedSlots.default?this.$scopedSlots.default({...e,isSelected:this.isSelected,select:this.select,isExpanded:this.isExpanded,isMobile:this.isMobile,expand:this.expand}):this.$scopedSlots.item?e.items.map(((e,t)=>this.$scopedSlots.item(this.createItemProps(e,t)))):[]},genFooter(e){if(this.hideDefaultFooter)return null;const t={props:{...this.sanitizedFooterProps,options:e.options,pagination:e.pagination},on:{"update:options":t=>e.updateOptions(t)}},n=(0,i.FT)("footer.",this.$scopedSlots);return this.$createElement(ie,{scopedSlots:n,...t})},genDefaultScopedSlot(e){const t={...e,someItems:this.someItems,everyItem:this.everyItem,toggleSelectAll:this.toggleSelectAll};return this.$createElement("div",{staticClass:"v-data-iterator"},[(0,i.z9)(this,"header",t,!0),this.genItems(e),this.genFooter(e),(0,i.z9)(this,"footer",t,!0)])}},render(){return this.$createElement(r,{props:this.$props,on:{"update:options":(e,t)=>!(0,i.vZ)(e,t)&&this.$emit("update:options",e),"update:page":e=>this.$emit("update:page",e),"update:items-per-page":e=>this.$emit("update:items-per-page",e),"update:sort-by":e=>this.$emit("update:sort-by",e),"update:sort-desc":e=>this.$emit("update:sort-desc",e),"update:group-by":e=>this.$emit("update:group-by",e),"update:group-desc":e=>this.$emit("update:group-desc",e),pagination:(e,t)=>!(0,i.vZ)(e,t)&&this.$emit("pagination",e),"current-items":e=>{this.internalCurrentItems=e,this.$emit("current-items",e)},"page-count":e=>this.$emit("page-count",e)},scopedSlots:{default:this.genDefaultScopedSlot}})}}),oe=(0,o.Z)().extend({directives:{ripple:L.Z},props:{headers:{type:Array,default:()=>[]},options:{type:Object,default:()=>({page:1,itemsPerPage:10,sortBy:[],sortDesc:[],groupBy:[],groupDesc:[],multiSort:!1,mustSort:!1})},checkboxColor:String,sortIcon:{type:String,default:"$sort"},everyItem:Boolean,someItems:Boolean,showGroupBy:Boolean,singleSelect:Boolean,disableSort:Boolean},methods:{genSelectAll(){var e;const t={props:{value:this.everyItem,indeterminate:!this.everyItem&&this.someItems,color:null!==(e=this.checkboxColor)&&void 0!==e?e:""},on:{input:e=>this.$emit("toggle-select-all",e)}};return this.$scopedSlots["data-table-select"]?this.$scopedSlots["data-table-select"](t):this.$createElement(F,{staticClass:"v-data-table__checkbox",...t})},genSortIcon(){return this.$createElement(c.Z,{staticClass:"v-data-table-header__icon",props:{size:18}},[this.sortIcon])}}}),ae=(0,o.Z)(oe).extend({name:"v-data-table-header-mobile",props:{sortByText:{type:String,default:"$vuetify.dataTable.sortBy"}},methods:{genSortChip(e){const t=[e.item.text],n=this.options.sortBy.findIndex((t=>t===e.item.value)),i=n>=0,s=this.options.sortDesc[n];return t.push(this.$createElement("div",{staticClass:"v-chip__close",class:{sortable:!0,active:i,asc:i&&!s,desc:i&&s}},[this.genSortIcon()])),this.$createElement(v,{staticClass:"sortable",on:{click:t=>{t.stopPropagation(),this.$emit("sort",e.item.value)}}},t)},genSortSelect(e){return this.$createElement(ee,{props:{label:this.$vuetify.lang.t(this.sortByText),items:e,hideDetails:!0,multiple:this.options.multiSort,value:this.options.multiSort?this.options.sortBy:this.options.sortBy[0],menuProps:{closeOnContentClick:!0}},on:{change:e=>this.$emit("sort",e)},scopedSlots:{selection:e=>this.genSortChip(e)}})}},render(e){const t=[],n=this.headers.find((e=>"data-table-select"===e.value));n&&!this.singleSelect&&t.push(this.$createElement("div",{class:["v-data-table-header-mobile__select",...(0,i.TI)(n.class)],attrs:{width:n.width}},[this.genSelectAll()]));const s=this.headers.filter((e=>!1!==e.sortable&&"data-table-select"!==e.value)).map((e=>({text:e.text,value:e.value})));!this.disableSort&&s.length&&t.push(this.genSortSelect(s));const r=t.length?e("th",[e("div",{staticClass:"v-data-table-header-mobile__wrapper"},t)]):void 0,o=e("tr",[r]);return e("thead",{staticClass:"v-data-table-header v-data-table-header-mobile"},[o])}}),ce=(0,o.Z)(oe).extend({name:"v-data-table-header-desktop",methods:{genGroupByToggle(e){return this.$createElement("span",{on:{click:t=>{t.stopPropagation(),this.$emit("group",e.value)}}},["group"])},getAria(e,t){const n=e=>this.$vuetify.lang.t(`$vuetify.dataTable.ariaLabel.${e}`);let i="none",s=[n("sortNone"),n("activateAscending")];return e?(t?(i="descending",s=[n("sortDescending"),n(this.options.mustSort?"activateAscending":"activateNone")]):(i="ascending",s=[n("sortAscending"),n("activateDescending")]),{ariaSort:i,ariaLabel:s.join(" ")}):{ariaSort:i,ariaLabel:s.join(" ")}},genHeader(e){const t={attrs:{role:"columnheader",scope:"col","aria-label":e.text||""},style:{width:(0,i.kb)(e.width),minWidth:(0,i.kb)(e.width)},class:[`text-${e.align||"start"}`,...(0,i.TI)(e.class),e.divider&&"v-data-table__divider"],on:{}},n=[];if("data-table-select"===e.value&&!this.singleSelect)return this.$createElement("th",t,[this.genSelectAll()]);if(n.push(this.$scopedSlots.hasOwnProperty(e.value)?this.$scopedSlots[e.value]({header:e}):this.$createElement("span",[e.text])),!this.disableSort&&(e.sortable||!e.hasOwnProperty("sortable"))){t.on.click=()=>this.$emit("sort",e.value);const i=this.options.sortBy.findIndex((t=>t===e.value)),s=i>=0,r=this.options.sortDesc[i];t.class.push("sortable");const{ariaLabel:o,ariaSort:a}=this.getAria(s,r);t.attrs["aria-label"]+=`${e.text?": ":""}${o}`,t.attrs["aria-sort"]=a,s&&(t.class.push("active"),t.class.push(r?"desc":"asc")),"end"===e.align?n.unshift(this.genSortIcon()):n.push(this.genSortIcon()),this.options.multiSort&&s&&n.push(this.$createElement("span",{class:"v-data-table-header__sort-badge"},[String(i+1)]))}return this.showGroupBy&&!1!==e.groupable&&n.push(this.genGroupByToggle(e)),this.$createElement("th",t,n)}},render(){return this.$createElement("thead",{staticClass:"v-data-table-header"},[this.$createElement("tr",this.headers.map((e=>this.genHeader(e))))])}});function le(e){if(e.model&&e.on&&e.on.input)if(Array.isArray(e.on.input)){const t=e.on.input.indexOf(e.model.callback);t>-1&&e.on.input.splice(t,1)}else delete e.on.input}function ue(e,t){const n=[];for(const i in e)e.hasOwnProperty(i)&&n.push(t("template",{slot:i},e[i]));return n}var he=s.ZP.extend({name:"v-data-table-header",functional:!0,props:{...oe.options.props,mobile:Boolean},render(e,{props:t,data:n,slots:i}){le(n);const s=ue(i(),e);return n=(0,M.ZP)(n,{props:t}),t.mobile?e(ae,n,s):e(ce,n,s)}});function de(e){var t;return 1!==e.length||!["td","th"].includes(null===(t=e[0])||void 0===t?void 0:t.tag)}var pe=s.ZP.extend({name:"row",functional:!0,props:{headers:Array,index:Number,item:Object,rtl:Boolean},render(e,{props:t,slots:n,data:s}){const r=n(),o=t.headers.map((n=>{const o=[],a=(0,i.vO)(t.item,n.value),c=n.value,l=s.scopedSlots&&s.scopedSlots.hasOwnProperty(c)&&s.scopedSlots[c],u=r.hasOwnProperty(c)&&r[c];l?o.push(...(0,i.TI)(l({item:t.item,isMobile:!1,header:n,index:t.index,value:a}))):u?o.push(...(0,i.TI)(u)):o.push(null==a?a:String(a));const h=`text-${n.align||"start"}`;return de(o)?e("td",{class:[h,n.cellClass,{"v-data-table__divider":n.divider}]},o):o}));return e("tr",s,o)}}),fe=s.ZP.extend({name:"row-group",functional:!0,props:{value:{type:Boolean,default:!0},headerClass:{type:String,default:"v-row-group__header"},contentClass:String,summaryClass:{type:String,default:"v-row-group__summary"}},render(e,{slots:t,props:n}){const i=t(),s=[];return i["column.header"]?s.push(e("tr",{staticClass:n.headerClass},i["column.header"])):i["row.header"]&&s.push(...i["row.header"]),i["row.content"]&&n.value&&s.push(...i["row.content"]),i["column.summary"]?s.push(e("tr",{staticClass:n.summaryClass},i["column.summary"])):i["row.summary"]&&s.push(...i["row.summary"]),s}}),me=(0,o.Z)(h.Z).extend({name:"v-simple-table",props:{dense:Boolean,fixedHeader:Boolean,height:[Number,String]},computed:{classes(){return{"v-data-table--dense":this.dense,"v-data-table--fixed-height":!!this.height&&!this.fixedHeader,"v-data-table--fixed-header":this.fixedHeader,"v-data-table--has-top":!!this.$slots.top,"v-data-table--has-bottom":!!this.$slots.bottom,...this.themeClasses}}},methods:{genWrapper(){return this.$slots.wrapper||this.$createElement("div",{staticClass:"v-data-table__wrapper",style:{height:(0,i.kb)(this.height)}},[this.$createElement("table",this.$slots.default)])}},render(e){return e("div",{staticClass:"v-data-table",class:this.classes},[this.$slots.top,this.genWrapper(),this.$slots.bottom])}}),ge=s.ZP.extend({name:"row",functional:!0,props:{headers:Array,hideDefaultHeader:Boolean,index:Number,item:Object,rtl:Boolean},render(e,{props:t,slots:n,data:s}){const r=n(),o=t.headers.map((n=>{const o={"v-data-table__mobile-row":!0},a=[],c=(0,i.vO)(t.item,n.value),l=n.value,u=s.scopedSlots&&s.scopedSlots.hasOwnProperty(l)&&s.scopedSlots[l],h=r.hasOwnProperty(l)&&r[l];u?a.push(u({item:t.item,isMobile:!0,header:n,index:t.index,value:c})):h?a.push(h):a.push(null==c?c:String(c));const d=[e("div",{staticClass:"v-data-table__mobile-row__cell"},a)];return"dataTableSelect"===n.value||t.hideDefaultHeader||d.unshift(e("div",{staticClass:"v-data-table__mobile-row__header"},[n.text])),e("td",{class:o},d)}));return e("tr",{...s,staticClass:"v-data-table__mobile-table-row"},o)}}),ve=n(9799),ye=s.ZP.extend({name:"mouse",methods:{getDefaultMouseEventHandlers(e,t,n=!1){const i=Object.keys(this.$listeners).filter((t=>t.endsWith(e))).reduce(((t,n)=>(t[n]={event:n.slice(0,-e.length)},t)),{});return this.getMouseEventHandlers({...i,["contextmenu"+e]:{event:"contextmenu",prevent:!0,result:!1}},t,n)},getMouseEventHandlers(e,t,n=!1){const i={};for(const s in e){const r=e[s];if(!this.$listeners[s])continue;const o=r.passive?"&":(r.once?"~":"")+(r.capture?"!":""),a=o+r.event,c=e=>{var i,o;const a=e;if(void 0===r.button||a.buttons>0&&a.button===r.button){if(r.prevent&&e.preventDefault(),r.stop&&e.stopPropagation(),e&&"touches"in e){const t=" ",n=null===(i=e.currentTarget)||void 0===i?void 0:i.className.split(t),s=document.elementsFromPoint(e.changedTouches[0].clientX,e.changedTouches[0].clientY),r=s.find((e=>e.className.split(t).some((e=>n.includes(e)))));if(r&&!(null===(o=e.target)||void 0===o?void 0:o.isSameNode(r)))return void r.dispatchEvent(new TouchEvent(e.type,{changedTouches:e.changedTouches,targetTouches:e.targetTouches,touches:e.touches}))}n?this.$emit(s,e,t(e)):this.$emit(s,t(e),e)}return r.result};a in i?Array.isArray(i[a])?i[a].push(c):i[a]=[i[a],c]:i[a]=c}return i}}});function _e(e,t,n){return s=>{const r=(0,i.vO)(e,s.value);return s.filter?s.filter(r,t,e):n(r,t,e)}}function we(e,t,n,s,r,o){return t="string"===typeof t?t.trim():null,"union"===o?t&&s.length||n.length?e.filter((e=>!(!n.length||!n.every(_e(e,t,i.f9)))||t&&s.some(_e(e,t,r)))):e:"intersection"===o?e.filter((e=>{const o=n.every(_e(e,t,i.f9)),a=!t||s.some(_e(e,t,r));return o&&a})):e}var be=(0,o.Z)(re,ve.Z,ye).extend({name:"v-data-table",directives:{ripple:L.Z},props:{headers:{type:Array,default:()=>[]},showSelect:Boolean,checkboxColor:String,showExpand:Boolean,showGroupBy:Boolean,height:[Number,String],hideDefaultHeader:Boolean,caption:String,dense:Boolean,headerProps:Object,calculateWidths:Boolean,fixedHeader:Boolean,headersLength:Number,expandIcon:{type:String,default:"$expand"},customFilter:{type:Function,default:i.f9},filterMode:{type:String,default:"intersection"},itemClass:{type:[String,Function],default:()=>""},itemStyle:{type:[String,Function],default:()=>""},loaderHeight:{type:[Number,String],default:4}},data(){return{internalGroupBy:[],openCache:{},widths:[]}},computed:{computedHeaders(){if(!this.headers)return[];const e=this.headers.filter((e=>void 0===e.value||!this.internalGroupBy.find((t=>t===e.value)))),t={text:"",sortable:!1,width:"1px"};if(this.showSelect){const n=e.findIndex((e=>"data-table-select"===e.value));n<0?e.unshift({...t,value:"data-table-select"}):e.splice(n,1,{...t,...e[n]})}if(this.showExpand){const n=e.findIndex((e=>"data-table-expand"===e.value));n<0?e.unshift({...t,value:"data-table-expand"}):e.splice(n,1,{...t,...e[n]})}return e},colspanAttrs(){return this.isMobile?void 0:{colspan:this.headersLength||this.computedHeaders.length}},columnSorters(){return this.computedHeaders.reduce(((e,t)=>(t.sort&&(e[t.value]=t.sort),e)),{})},headersWithCustomFilters(){return this.headers.filter((e=>e.filter&&(!e.hasOwnProperty("filterable")||!0===e.filterable)))},headersWithoutCustomFilters(){return this.headers.filter((e=>!e.filter&&(!e.hasOwnProperty("filterable")||!0===e.filterable)))},sanitizedHeaderProps(){return(0,i.$x)(this.headerProps)},computedItemsPerPage(){const e=this.options&&this.options.itemsPerPage?this.options.itemsPerPage:this.itemsPerPage,t=this.sanitizedFooterProps.itemsPerPageOptions;if(t&&!t.find((t=>"number"===typeof t?t===e:t.value===e))){const e=t[0];return"object"===typeof e?e.value:e}return e},groupByText(){var e,t,n;return null!==(n=null===(t=null===(e=this.headers)||void 0===e?void 0:e.find((e=>{var t;return e.value===(null===(t=this.internalGroupBy)||void 0===t?void 0:t[0])})))||void 0===t?void 0:t.text)&&void 0!==n?n:""}},created(){const e=[["sort-icon","header-props.sort-icon"],["hide-headers","hide-default-header"],["select-all","show-select"]];e.forEach((([e,t])=>{this.$attrs.hasOwnProperty(e)&&(0,m.fK)(e,t,this)}))},mounted(){this.calculateWidths&&(window.addEventListener("resize",this.calcWidths),this.calcWidths())},beforeDestroy(){this.calculateWidths&&window.removeEventListener("resize",this.calcWidths)},methods:{calcWidths(){this.widths=Array.from(this.$el.querySelectorAll("th")).map((e=>e.clientWidth))},customFilterWithColumns(e,t){return we(e,t,this.headersWithCustomFilters,this.headersWithoutCustomFilters,this.customFilter,this.filterMode)},customSortWithHeaders(e,t,n,i){return this.customSort(e,t,n,i,this.columnSorters)},createItemProps(e,t){const n={...re.options.methods.createItemProps.call(this,e,t),headers:this.computedHeaders};return{...n,attrs:{class:{"v-data-table__selected":n.isSelected}},on:{...this.getDefaultMouseEventHandlers(":row",(()=>n),!0),click:t=>this.$emit("click:row",e,n,t)}}},genCaption(e){return this.caption?[this.$createElement("caption",[this.caption])]:(0,i.z9)(this,"caption",e,!0)},genColgroup(e){return this.$createElement("colgroup",this.computedHeaders.map((e=>this.$createElement("col",{class:{divider:e.divider}}))))},genLoading(){const e=this.$createElement("th",{staticClass:"column",attrs:this.colspanAttrs},[this.genProgress()]),t=this.$createElement("tr",{staticClass:"v-data-table__progress"},[e]);return this.$createElement("thead",[t])},genHeaders(e){const t={props:{...this.sanitizedHeaderProps,headers:this.computedHeaders,options:e.options,mobile:this.isMobile,showGroupBy:this.showGroupBy,checkboxColor:this.checkboxColor,someItems:this.someItems,everyItem:this.everyItem,singleSelect:this.singleSelect,disableSort:this.disableSort},on:{sort:e.sort,group:e.group,"toggle-select-all":this.toggleSelectAll}},n=[(0,i.z9)(this,"header",{...t,isMobile:this.isMobile})];if(!this.hideDefaultHeader){const e=(0,i.FT)("header.",this.$scopedSlots);n.push(this.$createElement(he,{...t,scopedSlots:e}))}return this.loading&&n.push(this.genLoading()),n},genEmptyWrapper(e){return this.$createElement("tr",{staticClass:"v-data-table__empty-wrapper"},[this.$createElement("td",{attrs:this.colspanAttrs},e)])},genItems(e,t){const n=this.genEmpty(t.originalItemsLength,t.pagination.itemsLength);return n?[n]:t.groupedItems?this.genGroupedRows(t.groupedItems,t):this.genRows(e,t)},genGroupedRows(e,t){return e.map((e=>(this.openCache.hasOwnProperty(e.name)||this.$set(this.openCache,e.name,!0),this.$scopedSlots.group?this.$scopedSlots.group({group:e.name,options:t.options,isMobile:this.isMobile,items:e.items,headers:this.computedHeaders}):this.genDefaultGroupedRow(e.name,e.items,t))))},genDefaultGroupedRow(e,t,n){const i=!!this.openCache[e],s=[this.$createElement("template",{slot:"row.content"},this.genRows(t,n))],r=()=>this.$set(this.openCache,e,!this.openCache[e]),o=()=>n.updateOptions({groupBy:[],groupDesc:[]});if(this.$scopedSlots["group.header"])s.unshift(this.$createElement("template",{slot:"column.header"},[this.$scopedSlots["group.header"]({group:e,groupBy:n.options.groupBy,isMobile:this.isMobile,items:t,headers:this.computedHeaders,isOpen:i,toggle:r,remove:o})]));else{const t=this.$createElement(ne,{staticClass:"ma-0",props:{icon:!0,small:!0},on:{click:r}},[this.$createElement(c.Z,[i?"$minus":"$plus"])]),n=this.$createElement(ne,{staticClass:"ma-0",props:{icon:!0,small:!0},on:{click:o}},[this.$createElement(c.Z,["$close"])]),a=this.$createElement("td",{staticClass:"text-start",attrs:this.colspanAttrs},[t,`${this.groupByText}: ${e}`,n]);s.unshift(this.$createElement("template",{slot:"column.header"},[a]))}return this.$scopedSlots["group.summary"]&&s.push(this.$createElement("template",{slot:"column.summary"},[this.$scopedSlots["group.summary"]({group:e,groupBy:n.options.groupBy,isMobile:this.isMobile,items:t,headers:this.computedHeaders,isOpen:i,toggle:r})])),this.$createElement(fe,{key:e,props:{value:i}},s)},genRows(e,t){return this.$scopedSlots.item?this.genScopedRows(e,t):this.genDefaultRows(e,t)},genScopedRows(e,t){const n=[];for(let i=0;i<e.length;i++){const t=e[i];n.push(this.$scopedSlots.item({...this.createItemProps(t,i),isMobile:this.isMobile})),this.isExpanded(t)&&n.push(this.$scopedSlots["expanded-item"]({headers:this.computedHeaders,isMobile:this.isMobile,index:i,item:t}))}return n},genDefaultRows(e,t){return this.$scopedSlots["expanded-item"]?e.map(((e,t)=>this.genDefaultExpandedRow(e,t))):e.map(((e,t)=>this.genDefaultSimpleRow(e,t)))},genDefaultExpandedRow(e,t){const n=this.isExpanded(e),i={"v-data-table__expanded v-data-table__expanded__row":n},s=this.genDefaultSimpleRow(e,t,i),r=this.$createElement("tr",{staticClass:"v-data-table__expanded v-data-table__expanded__content"},[this.$scopedSlots["expanded-item"]({headers:this.computedHeaders,isMobile:this.isMobile,item:e})]);return this.$createElement(fe,{props:{value:n}},[this.$createElement("template",{slot:"row.header"},[s]),this.$createElement("template",{slot:"row.content"},[r])])},genDefaultSimpleRow(e,t,n={}){const s=(0,i.FT)("item.",this.$scopedSlots),r=this.createItemProps(e,t);if(this.showSelect){const t=s["data-table-select"];s["data-table-select"]=t?()=>t({...r,isMobile:this.isMobile}):()=>{var t;return this.$createElement(F,{staticClass:"v-data-table__checkbox",props:{value:r.isSelected,disabled:!this.isSelectable(e),color:null!==(t=this.checkboxColor)&&void 0!==t?t:""},on:{input:e=>r.select(e)}})}}if(this.showExpand){const e=s["data-table-expand"];s["data-table-expand"]=e?()=>e(r):()=>this.$createElement(c.Z,{staticClass:"v-data-table__expand-icon",class:{"v-data-table__expand-icon--active":r.isExpanded},on:{click:e=>{e.stopPropagation(),r.expand(!r.isExpanded)}}},[this.expandIcon])}return this.$createElement(this.isMobile?ge:pe,{key:(0,i.vO)(e,this.itemKey),class:(0,M.ze)({...n,"v-data-table__selected":r.isSelected},(0,i.qF)(e,this.itemClass)),style:(0,M.y0)({},(0,i.qF)(e,this.itemStyle)),props:{headers:this.computedHeaders,hideDefaultHeader:this.hideDefaultHeader,index:t,item:e,rtl:this.$vuetify.rtl},scopedSlots:s,on:r.on})},genBody(e){const t={...e,expand:this.expand,headers:this.computedHeaders,isExpanded:this.isExpanded,isMobile:this.isMobile,isSelected:this.isSelected,select:this.select};return this.$scopedSlots.body?this.$scopedSlots.body(t):this.$createElement("tbody",[(0,i.z9)(this,"body.prepend",t,!0),this.genItems(e.items,e),(0,i.z9)(this,"body.append",t,!0)])},genFoot(e){var t,n;return null===(n=(t=this.$scopedSlots).foot)||void 0===n?void 0:n.call(t,e)},genFooters(e){const t={props:{options:e.options,pagination:e.pagination,itemsPerPageText:"$vuetify.dataTable.itemsPerPageText",...this.sanitizedFooterProps},on:{"update:options":t=>e.updateOptions(t)},widths:this.widths,headers:this.computedHeaders},n=[(0,i.z9)(this,"footer",t,!0)];return this.hideDefaultFooter||n.push(this.$createElement(ie,{...t,scopedSlots:(0,i.FT)("footer.",this.$scopedSlots)})),n},genDefaultScopedSlot(e){const t={height:this.height,fixedHeader:this.fixedHeader,dense:this.dense};return this.$createElement(me,{props:t,class:{"v-data-table--mobile":this.isMobile,"v-data-table--selectable":this.showSelect}},[this.proxySlot("top",(0,i.z9)(this,"top",{...e,isMobile:this.isMobile},!0)),this.genCaption(e),this.genColgroup(e),this.genHeaders(e),this.genBody(e),this.genFoot(e),this.proxySlot("bottom",this.genFooters(e))])},proxySlot(e,t){return this.$createElement("template",{slot:e},t)}},render(){return this.$createElement(r,{props:{...this.$props,customFilter:this.customFilterWithColumns,customSort:this.customSortWithHeaders,itemsPerPage:this.computedItemsPerPage},on:{"update:options":(e,t)=>{this.internalGroupBy=e.groupBy||[],!(0,i.vZ)(e,t)&&this.$emit("update:options",e)},"update:page":e=>this.$emit("update:page",e),"update:items-per-page":e=>this.$emit("update:items-per-page",e),"update:sort-by":e=>this.$emit("update:sort-by",e),"update:sort-desc":e=>this.$emit("update:sort-desc",e),"update:group-by":e=>this.$emit("update:group-by",e),"update:group-desc":e=>this.$emit("update:group-desc",e),pagination:(e,t)=>!(0,i.vZ)(e,t)&&this.$emit("pagination",e),"current-items":e=>{this.internalCurrentItems=e,this.$emit("current-items",e)},"page-count":e=>this.$emit("page-count",e)},scopedSlots:{default:this.genDefaultScopedSlot}})}})},3749:function(e,t,n){n.d(t,{Z:function(){return m}});var i=n(8345),s=n(7561),r=n(4665),o=n(9556),a=n(8605),c=n(2893),l=n(2389),u=n(3664),h=n(5530),d=n(8219),p=n(8131);const f=(0,h.Z)(r.Z,o.Z,a.Z,c.Z,l.Z,s.Z);var m=f.extend({name:"v-dialog",directives:{ClickOutside:u.Z},props:{dark:Boolean,disabled:Boolean,fullscreen:Boolean,light:Boolean,maxWidth:[String,Number],noClickAnimation:Boolean,origin:{type:String,default:"center center"},persistent:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,transition:{type:[String,Boolean],default:"dialog-transition"},width:[String,Number]},data(){return{activatedBy:null,animate:!1,animateTimeout:-1,stackMinZIndex:200,previousActiveElement:null}},computed:{classes(){return{[`v-dialog ${this.contentClass}`.trim()]:!0,"v-dialog--active":this.isActive,"v-dialog--persistent":this.persistent,"v-dialog--fullscreen":this.fullscreen,"v-dialog--scrollable":this.scrollable,"v-dialog--animated":this.animate}},contentClasses(){return{"v-dialog__content":!0,"v-dialog__content--active":this.isActive}},hasActivator(){return Boolean(!!this.$slots.activator||!!this.$scopedSlots.activator)}},watch:{isActive(e){var t;e?(this.show(),this.hideScroll()):(this.removeOverlay(),this.unbind(),null===(t=this.previousActiveElement)||void 0===t||t.focus())},fullscreen(e){this.isActive&&(e?(this.hideScroll(),this.removeOverlay(!1)):(this.showScroll(),this.genOverlay()))}},created(){this.$attrs.hasOwnProperty("full-width")&&(0,d.Jk)("full-width",this)},beforeMount(){this.$nextTick((()=>{this.isBooted=this.isActive,this.isActive&&this.show()}))},beforeDestroy(){"undefined"!==typeof window&&this.unbind()},methods:{animateClick(){this.animate=!1,this.$nextTick((()=>{this.animate=!0,window.clearTimeout(this.animateTimeout),this.animateTimeout=window.setTimeout((()=>this.animate=!1),150)}))},closeConditional(e){const t=e.target;return!(this._isDestroyed||!this.isActive||this.$refs.content.contains(t)||this.overlay&&t&&!this.overlay.$el.contains(t))&&this.activeZIndex>=this.getMaxZIndex()},hideScroll(){this.fullscreen?document.documentElement.classList.add("overflow-y-hidden"):a.Z.options.methods.hideScroll.call(this)},show(){!this.fullscreen&&!this.hideOverlay&&this.genOverlay(),this.$nextTick((()=>{this.$nextTick((()=>{var e,t;(null===(e=this.$refs.dialog)||void 0===e?void 0:e.contains(document.activeElement))||(this.previousActiveElement=document.activeElement,null===(t=this.$refs.dialog)||void 0===t||t.focus()),this.bind()}))}))},bind(){window.addEventListener("focusin",this.onFocusin)},unbind(){window.removeEventListener("focusin",this.onFocusin)},onClickOutside(e){this.$emit("click:outside",e),this.persistent?this.noClickAnimation||this.animateClick():this.isActive=!1},onKeydown(e){if(e.keyCode===p.Do.esc&&!this.getOpenDependents().length)if(this.persistent)this.noClickAnimation||this.animateClick();else{this.isActive=!1;const e=this.getActivator();this.$nextTick((()=>e&&e.focus()))}this.$emit("keydown",e)},onFocusin(e){if(!e||!this.retainFocus)return;const t=e.target;if(t&&this.$refs.dialog&&![document,this.$refs.dialog].includes(t)&&!this.$refs.dialog.contains(t)&&this.activeZIndex>=this.getMaxZIndex()&&!this.getOpenDependentElements().some((e=>e.contains(t)))){const e=this.$refs.dialog.querySelectorAll('button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])'),t=[...e].find((e=>!e.hasAttribute("disabled")&&!e.matches('[tabindex="-1"]')));t&&t.focus()}},genContent(){return this.showLazyContent((()=>[this.$createElement(i.Z,{props:{root:!0,light:this.light,dark:this.dark}},[this.$createElement("div",{class:this.contentClasses,attrs:{role:"dialog","aria-modal":this.hideOverlay?void 0:"true",...this.getScopeIdAttrs()},on:{keydown:this.onKeydown},style:{zIndex:this.activeZIndex},ref:"content"},[this.genTransition()])])]))},genTransition(){const e=this.genInnerContent();return this.transition?this.$createElement("transition",{props:{name:this.transition,origin:this.origin,appear:!0}},[e]):e},genInnerContent(){const e={class:this.classes,attrs:{tabindex:this.isActive?0:void 0},ref:"dialog",directives:[{name:"click-outside",value:{handler:this.onClickOutside,closeConditional:this.closeConditional,include:this.getOpenDependentElements}},{name:"show",value:this.isActive}],style:{transformOrigin:this.origin}};return this.fullscreen||(e.style={...e.style,maxWidth:(0,p.kb)(this.maxWidth),width:(0,p.kb)(this.width)}),this.$createElement("div",e,this.getContentSlot())}},render(e){return e("div",{staticClass:"v-dialog__container",class:{"v-dialog__container--attached":""===this.attach||!0===this.attach||"attach"===this.attach}},[this.genActivator(),this.genContent()])}})},8984:function(e,t,n){n.d(t,{Z:function(){return c}});var i=n(5439),s=n(2404),r=n(8191),o=n(5530),a=n(8131),c=(0,o.Z)(i.Z,(0,s.Z)("footer",["height","inset"]),r.Z).extend({name:"v-footer",props:{height:{default:"auto",type:[Number,String]},inset:Boolean,padless:Boolean,tag:{type:String,default:"footer"}},computed:{applicationProperty(){return this.inset?"insetFooter":"footer"},classes(){return{...i.Z.options.computed.classes.call(this),"v-footer--absolute":this.absolute,"v-footer--fixed":!this.absolute&&(this.app||this.fixed),"v-footer--padless":this.padless,"v-footer--inset":this.inset}},computedBottom(){if(this.isPositioned)return this.app?this.$vuetify.application.bottom:0},computedLeft(){if(this.isPositioned)return this.app&&this.inset?this.$vuetify.application.left:0},computedRight(){if(this.isPositioned)return this.app&&this.inset?this.$vuetify.application.right:0},isPositioned(){return Boolean(this.absolute||this.fixed||this.app)},styles(){const e=parseInt(this.height);return{...i.Z.options.computed.styles.call(this),height:isNaN(e)?e:(0,a.kb)(e),left:(0,a.kb)(this.computedLeft),right:(0,a.kb)(this.computedRight),bottom:(0,a.kb)(this.computedBottom)}}},methods:{updateApplication(){const e=parseInt(this.height);return isNaN(e)?this.$el?this.$el.clientHeight:0:e}},render(e){const t=this.setBackgroundColor(this.color,{staticClass:"v-footer",class:this.classes,style:this.styles});return e(this.tag,t,this.$slots.default)}})},3240:function(e,t,n){var i=n(5530),s=n(6141),r=n(950);t.Z=(0,i.Z)(s.Z,(0,r.J)("form")).extend({name:"v-form",provide(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(e){const t=Object.values(e).includes(!0);this.$emit("input",!t)},deep:!0,immediate:!0}},methods:{watchInput(e){const t=e=>e.$watch("hasError",(t=>{this.$set(this.errorBag,e._uid,t)}),{immediate:!0}),n={_uid:e._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?n.shouldValidate=e.$watch("shouldValidate",(i=>{i&&(this.errorBag.hasOwnProperty(e._uid)||(n.valid=t(e)))})):n.valid=t(e),n},validate(){return 0===this.inputs.filter((e=>!e.validate(!0))).length},reset(){this.inputs.forEach((e=>e.reset())),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout((()=>{this.errorBag={}}),0)},resetValidation(){this.inputs.forEach((e=>e.resetValidation())),this.resetErrorBag()},register(e){this.inputs.push(e),this.watchers.push(this.watchInput(e))},unregister(e){const t=this.inputs.find((t=>t._uid===e._uid));if(!t)return;const n=this.watchers.find((e=>e._uid===t._uid));n&&(n.valid(),n.shouldValidate()),this.watchers=this.watchers.filter((e=>e._uid!==t._uid)),this.inputs=this.inputs.filter((e=>e._uid!==t._uid)),this.$delete(this.errorBag,t._uid)}},render(e){return e("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:e=>this.$emit("submit",e)}},this.$slots.default)}})},7024:function(e,t,n){n(1884);var i=n(144),s=n(7559),r=n(8131);const o=["sm","md","lg","xl"],a=(()=>o.reduce(((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e)),{}))(),c=(()=>o.reduce(((e,t)=>(e["offset"+(0,r.jC)(t)]={type:[String,Number],default:null},e)),{}))(),l=(()=>o.reduce(((e,t)=>(e["order"+(0,r.jC)(t)]={type:[String,Number],default:null},e)),{}))(),u={col:Object.keys(a),offset:Object.keys(c),order:Object.keys(l)};function h(e,t,n){let i=e;if(null!=n&&!1!==n){if(t){const n=t.replace(e,"");i+=`-${n}`}return"col"!==e||""!==n&&!0!==n?(i+=`-${n}`,i.toLowerCase()):i.toLowerCase()}}const d=new Map;t.Z=i.ZP.extend({name:"v-col",functional:!0,props:{cols:{type:[Boolean,String,Number],default:!1},...a,offset:{type:[String,Number],default:null},...c,order:{type:[String,Number],default:null},...l,alignSelf:{type:String,default:null,validator:e=>["auto","start","end","center","baseline","stretch"].includes(e)},tag:{type:String,default:"div"}},render(e,{props:t,data:n,children:i,parent:r}){let o="";for(const s in t)o+=String(t[s]);let a=d.get(o);if(!a){let e;for(e in a=[],u)u[e].forEach((n=>{const i=t[n],s=h(e,n,i);s&&a.push(s)}));const n=a.some((e=>e.startsWith("col-")));a.push({col:!n||!t.cols,[`col-${t.cols}`]:t.cols,[`offset-${t.offset}`]:t.offset,[`order-${t.order}`]:t.order,[`align-self-${t.alignSelf}`]:t.alignSelf}),d.set(o,a)}return e(t.tag,(0,s.ZP)(n,{class:a}),i)}})},6530:function(e,t,n){n(9027),n(1884);var i=n(7358),s=n(7559);t.Z=(0,i.Z)("container").extend({name:"v-container",functional:!0,props:{id:String,tag:{type:String,default:"div"},fluid:{type:Boolean,default:!1}},render(e,{props:t,data:n,children:i}){let r;const{attrs:o}=n;return o&&(n.attrs={},r=Object.keys(o).filter((e=>{if("slot"===e)return!1;const t=o[e];return e.startsWith("data-")?(n.attrs[e]=t,!1):t||"string"===typeof t}))),t.id&&(n.domProps=n.domProps||{},n.domProps.id=t.id),e(t.tag,(0,s.ZP)(n,{staticClass:"container",class:Array({"container--fluid":t.fluid}).concat(r||[])}),i)}})},683:function(e,t,n){n(9027);var i=n(7358);t.Z=(0,i.Z)("flex")},9456:function(e,t,n){n(9027);var i=n(7358);t.Z=(0,i.Z)("layout")},7894:function(e,t,n){n(1884);var i=n(144),s=n(7559),r=n(8131);const o=["sm","md","lg","xl"],a=["start","end","center"];function c(e,t){return o.reduce(((n,i)=>(n[e+(0,r.jC)(i)]=t(),n)),{})}const l=e=>[...a,"baseline","stretch"].includes(e),u=c("align",(()=>({type:String,default:null,validator:l}))),h=e=>[...a,"space-between","space-around"].includes(e),d=c("justify",(()=>({type:String,default:null,validator:h}))),p=e=>[...a,"space-between","space-around","stretch"].includes(e),f=c("alignContent",(()=>({type:String,default:null,validator:p}))),m={align:Object.keys(u),justify:Object.keys(d),alignContent:Object.keys(f)},g={align:"align",justify:"justify",alignContent:"align-content"};function v(e,t,n){let i=g[e];if(null!=n){if(t){const n=t.replace(e,"");i+=`-${n}`}return i+=`-${n}`,i.toLowerCase()}}const y=new Map;t.Z=i.ZP.extend({name:"v-row",functional:!0,props:{tag:{type:String,default:"div"},dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:l},...u,justify:{type:String,default:null,validator:h},...d,alignContent:{type:String,default:null,validator:p},...f},render(e,{props:t,data:n,children:i}){let r="";for(const s in t)r+=String(t[s]);let o=y.get(r);if(!o){let e;for(e in o=[],m)m[e].forEach((n=>{const i=t[n],s=v(e,n,i);s&&o.push(s)}));o.push({"no-gutters":t.noGutters,"row--dense":t.dense,[`align-${t.align}`]:t.align,[`justify-${t.justify}`]:t.justify,[`align-content-${t.alignContent}`]:t.alignContent}),y.set(r,o)}return e(t.tag,(0,s.ZP)(n,{staticClass:"row",class:o}),i)}})},2515:function(e,t,n){n(9027);var i=n(8131);t.Z=(0,i.Ji)("spacer","div","v-spacer")},7358:function(e,t,n){n.d(t,{Z:function(){return s}});var i=n(144);function s(e){return i.ZP.extend({name:`v-${e}`,functional:!0,props:{id:String,tag:{type:String,default:"div"}},render(t,{props:n,data:i,children:s}){i.staticClass=`${e} ${i.staticClass||""}`.trim();const{attrs:r}=i;if(r){i.attrs={};const e=Object.keys(r).filter((e=>{if("slot"===e)return!1;const t=r[e];return e.startsWith("data-")?(i.attrs[e]=t,!1):t||"string"===typeof t}));e.length&&(i.staticClass+=` ${e.join(" ")}`)}return n.id&&(i.domProps=i.domProps||{},i.domProps.id=n.id),t(n.tag,i,s)}})}},9088:function(e,t,n){n.d(t,{Z:function(){return f}});var i,s=n(6141),r=n(5836),o=n(2412),a=n(2066),c=n(8131),l=n(144),u=n(5530);function h(e){return["fas","far","fal","fab","fad","fak"].some((t=>e.includes(t)))}function d(e){return/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(e)&&/[\dz]$/i.test(e)&&e.length>4}(function(e){e["xSmall"]="12px",e["small"]="16px",e["default"]="24px",e["medium"]="28px",e["large"]="36px",e["xLarge"]="40px"})(i||(i={}));const p=(0,u.Z)(s.Z,r.Z,o.Z,a.Z).extend({name:"v-icon",props:{dense:Boolean,disabled:Boolean,left:Boolean,right:Boolean,size:[Number,String],tag:{type:String,required:!1,default:"i"}},computed:{medium(){return!1},hasClickListener(){return Boolean(this.listeners$.click||this.listeners$["!click"])}},methods:{getIcon(){let e="";return this.$slots.default&&(e=this.$slots.default[0].text.trim()),(0,c.RB)(this,e)},getSize(){const e={xSmall:this.xSmall,small:this.small,medium:this.medium,large:this.large,xLarge:this.xLarge},t=(0,c.XP)(e).find((t=>e[t]));return t&&i[t]||(0,c.kb)(this.size)},getDefaultData(){return{staticClass:"v-icon notranslate",class:{"v-icon--disabled":this.disabled,"v-icon--left":this.left,"v-icon--link":this.hasClickListener,"v-icon--right":this.right,"v-icon--dense":this.dense},attrs:{"aria-hidden":!this.hasClickListener,disabled:this.hasClickListener&&this.disabled,type:this.hasClickListener?"button":void 0,...this.attrs$},on:this.listeners$}},getSvgWrapperData(){const e=this.getSize(),t={...this.getDefaultData(),style:e?{fontSize:e,height:e,width:e}:void 0};return this.applyColors(t),t},applyColors(e){e.class={...e.class,...this.themeClasses},this.setTextColor(this.color,e)},renderFontIcon(e,t){const n=[],i=this.getDefaultData();let s="material-icons";const r=e.indexOf("-"),o=r<=-1;o?n.push(e):(s=e.slice(0,r),h(s)&&(s="")),i.class[s]=!0,i.class[e]=!o;const a=this.getSize();return a&&(i.style={fontSize:a}),this.applyColors(i),t(this.hasClickListener?"button":this.tag,i,n)},renderSvgIcon(e,t){const n={class:"v-icon__svg",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":!0}},i=this.getSize();return i&&(n.style={fontSize:i,height:i,width:i}),t(this.hasClickListener?"button":"span",this.getSvgWrapperData(),[t("svg",n,[t("path",{attrs:{d:e}})])])},renderSvgIconComponent(e,t){const n={class:{"v-icon__component":!0}},i=this.getSize();i&&(n.style={fontSize:i,height:i,width:i}),this.applyColors(n);const s=e.component;return n.props=e.props,n.nativeOn=n.on,t(this.hasClickListener?"button":"span",this.getSvgWrapperData(),[t(s,n)])}},render(e){const t=this.getIcon();return"string"===typeof t?d(t)?this.renderSvgIcon(t,e):this.renderFontIcon(t,e):this.renderSvgIconComponent(t,e)}});var f=l.ZP.extend({name:"v-icon",$_wrapperFor:p,functional:!0,render(e,{data:t,children:n}){let i="";return t.domProps&&(i=t.domProps.textContent||t.domProps.innerHTML||i,delete t.domProps.textContent,delete t.domProps.innerHTML),e(p,t,i?[i]:n)}})},9524:function(e,t,n){var i=n(9088);t.Z=i.Z},1584:function(e,t,n){n.d(t,{Z:function(){return p}});var i=n(7006),s=n(9548),r=n(5530),o=n(8131),a=(0,r.Z)(s.Z).extend({name:"v-responsive",props:{aspectRatio:[String,Number],contentClass:String},computed:{computedAspectRatio(){return Number(this.aspectRatio)},aspectStyle(){return this.computedAspectRatio?{paddingBottom:1/this.computedAspectRatio*100+"%"}:void 0},__cachedSizer(){return this.aspectStyle?this.$createElement("div",{style:this.aspectStyle,staticClass:"v-responsive__sizer"}):[]}},methods:{genContent(){return this.$createElement("div",{staticClass:"v-responsive__content",class:this.contentClass},(0,o.z9)(this))}},render(e){return e("div",{staticClass:"v-responsive",style:this.measurableStyles,on:this.$listeners},[this.__cachedSizer,this.genContent()])}}),c=a,l=n(2066),u=n(7559),h=n(8219);const d="undefined"!==typeof window&&"IntersectionObserver"in window;var p=(0,r.Z)(c,l.Z).extend({name:"v-img",directives:{intersect:i.Z},props:{alt:String,contain:Boolean,eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},position:{type:String,default:"center center"},sizes:String,src:{type:[String,Object],default:""},srcset:String,transition:{type:[Boolean,String],default:"fade-transition"}},data(){return{currentSrc:"",image:null,isLoading:!0,calculatedAspectRatio:void 0,naturalWidth:void 0,hasError:!1}},computed:{computedAspectRatio(){return Number(this.normalisedSrc.aspect||this.calculatedAspectRatio)},normalisedSrc(){return this.src&&"object"===typeof this.src?{src:this.src.src,srcset:this.srcset||this.src.srcset,lazySrc:this.lazySrc||this.src.lazySrc,aspect:Number(this.aspectRatio||this.src.aspect)}:{src:this.src,srcset:this.srcset,lazySrc:this.lazySrc,aspect:Number(this.aspectRatio||0)}},__cachedImage(){if(!(this.normalisedSrc.src||this.normalisedSrc.lazySrc||this.gradient))return[];const e=[],t=this.isLoading?this.normalisedSrc.lazySrc:this.currentSrc;this.gradient&&e.push(`linear-gradient(${this.gradient})`),t&&e.push(`url("${t}")`);const n=this.$createElement("div",{staticClass:"v-image__image",class:{"v-image__image--preload":this.isLoading,"v-image__image--contain":this.contain,"v-image__image--cover":!this.contain},style:{backgroundImage:e.join(", "),backgroundPosition:this.position},key:+this.isLoading});return this.transition?this.$createElement("transition",{attrs:{name:this.transition,mode:"in-out"}},[n]):n}},watch:{src(){this.isLoading?this.loadImage():this.init(void 0,void 0,!0)},"$vuetify.breakpoint.width":"getSrc"},mounted(){this.init()},methods:{init(e,t,n){if(!d||n||this.eager){if(this.normalisedSrc.lazySrc){const e=new Image;e.src=this.normalisedSrc.lazySrc,this.pollForSize(e,null)}this.normalisedSrc.src&&this.loadImage()}},onLoad(){this.getSrc(),this.isLoading=!1,this.$emit("load",this.src),this.image&&(this.normalisedSrc.src.endsWith(".svg")||this.normalisedSrc.src.startsWith("data:image/svg+xml"))&&(this.image.naturalHeight&&this.image.naturalWidth?(this.naturalWidth=this.image.naturalWidth,this.calculatedAspectRatio=this.image.naturalWidth/this.image.naturalHeight):this.calculatedAspectRatio=1)},onError(){this.hasError=!0,this.$emit("error",this.src)},getSrc(){this.image&&(this.currentSrc=this.image.currentSrc||this.image.src)},loadImage(){const e=new Image;this.image=e,e.onload=()=>{e.decode?e.decode().catch((e=>{(0,h.Kd)(`Failed to decode image, trying to render anyway\n\nsrc: ${this.normalisedSrc.src}`+(e.message?`\nOriginal error: ${e.message}`:""),this)})).then(this.onLoad):this.onLoad()},e.onerror=this.onError,this.hasError=!1,this.sizes&&(e.sizes=this.sizes),this.normalisedSrc.srcset&&(e.srcset=this.normalisedSrc.srcset),e.src=this.normalisedSrc.src,this.$emit("loadstart",this.normalisedSrc.src),this.aspectRatio||this.pollForSize(e),this.getSrc()},pollForSize(e,t=100){const n=()=>{const{naturalHeight:i,naturalWidth:s}=e;i||s?(this.naturalWidth=s,this.calculatedAspectRatio=s/i):e.complete||!this.isLoading||this.hasError||null==t||setTimeout(n,t)};n()},genContent(){const e=c.options.methods.genContent.call(this);return this.naturalWidth&&this._b(e.data,"div",{style:{width:`${this.naturalWidth}px`}}),e},__genPlaceholder(){const e=(0,o.z9)(this,"placeholder");if(e){const t=this.isLoading?[this.$createElement("div",{staticClass:"v-image__placeholder"},e)]:[];return this.transition?this.$createElement("transition",{props:{appear:!0,name:this.transition}},t):t[0]}}},render(e){const t=c.options.render.call(this,e),n=(0,u.ZP)(t.data,{staticClass:"v-image",attrs:{"aria-label":this.alt,role:this.alt?"img":void 0},class:this.themeClasses,directives:d?[{name:"intersect",modifiers:{once:!0},value:{handler:this.init,options:this.options}}]:void 0});return t.children=[this.__cachedSizer,this.__cachedImage,this.__genPlaceholder(),this.genContent()],e(t.tag,n,t.children)}})},2926:function(e,t,n){n.d(t,{Z:function(){return g}});var i=n(9524),s=n(2980),r=n(5836),o=n(2066),a=n(5530),c=n(8131),l=(0,a.Z)(r.Z,o.Z).extend({name:"v-messages",props:{value:{type:Array,default:()=>[]}},methods:{genChildren(){return this.$createElement("transition-group",{staticClass:"v-messages__wrapper",attrs:{name:"message-transition",tag:"div"}},this.value.map(this.genMessage))},genMessage(e,t){return this.$createElement("div",{staticClass:"v-messages__message",key:t},(0,c.z9)(this,"default",{message:e,key:t})||[e])}},render(e){return e("div",this.setTextColor(this.color,{staticClass:"v-messages",class:this.themeClasses}),[this.genChildren()])}}),u=l,h=n(6141),d=n(371),p=n(7559);const f=(0,a.Z)(h.Z,d.Z);var m=f.extend().extend({name:"v-input",inheritAttrs:!1,props:{appendIcon:String,backgroundColor:{type:String,default:""},dense:Boolean,height:[Number,String],hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,id:String,label:String,loading:Boolean,persistentHint:Boolean,prependIcon:String,value:null},data(){return{lazyValue:this.value,hasMouseDown:!1}},computed:{classes(){return{"v-input--has-state":this.hasState,"v-input--hide-details":!this.showDetails,"v-input--is-label-active":this.isLabelActive,"v-input--is-dirty":this.isDirty,"v-input--is-disabled":this.isDisabled,"v-input--is-focused":this.isFocused,"v-input--is-loading":!1!==this.loading&&null!=this.loading,"v-input--is-readonly":this.isReadonly,"v-input--dense":this.dense,"v-input--hide-spin-buttons":this.hideSpinButtons,...this.themeClasses}},computedId(){return this.id||`input-${this._uid}`},hasDetails(){return this.messagesToDisplay.length>0},hasHint(){return!this.hasMessages&&!!this.hint&&(this.persistentHint||this.isFocused)},hasLabel(){return!(!this.$slots.label&&!this.label)},internalValue:{get(){return this.lazyValue},set(e){this.lazyValue=e,this.$emit(this.$_modelEvent,e)}},isDirty(){return!!this.lazyValue},isLabelActive(){return this.isDirty},messagesToDisplay(){return this.hasHint?[this.hint]:this.hasMessages?this.validations.map((e=>{if("string"===typeof e)return e;const t=e(this.internalValue);return"string"===typeof t?t:""})).filter((e=>""!==e)):[]},showDetails(){return!1===this.hideDetails||"auto"===this.hideDetails&&this.hasDetails}},watch:{value(e){this.lazyValue=e}},beforeCreate(){this.$_modelEvent=this.$options.model&&this.$options.model.event||"input"},methods:{genContent(){return[this.genPrependSlot(),this.genControl(),this.genAppendSlot()]},genControl(){return this.$createElement("div",{staticClass:"v-input__control",attrs:{title:this.attrs$.title}},[this.genInputSlot(),this.genMessages()])},genDefaultSlot(){return[this.genLabel(),this.$slots.default]},genIcon(e,t,n={}){var s;const r=this[`${e}Icon`],o=`click:${(0,c.GL)(e)}`,a=!(!this.listeners$[o]&&!t),l={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendOuter:"appendAction",clear:"clear"}[e],u=a&&l?this.$vuetify.lang.t(`$vuetify.input.${l}`,null!==(s=this.label)&&void 0!==s?s:""):void 0,h=(0,p.ZP)({attrs:{"aria-label":u,color:this.validationState,dark:this.dark,disabled:this.isDisabled,light:this.light,tabindex:"clear"===e?-1:void 0},on:a?{click:e=>{e.preventDefault(),e.stopPropagation(),this.$emit(o,e),t&&t(e)},mouseup:e=>{e.preventDefault(),e.stopPropagation()}}:void 0},n);return this.$createElement("div",{staticClass:"v-input__icon",class:e?`v-input__icon--${(0,c.GL)(e)}`:void 0},[this.$createElement(i.Z,h,r)])},genInputSlot(){return this.$createElement("div",this.setBackgroundColor(this.backgroundColor,{staticClass:"v-input__slot",style:{height:(0,c.kb)(this.height)},on:{click:this.onClick,mousedown:this.onMouseDown,mouseup:this.onMouseUp},ref:"input-slot"}),[this.genDefaultSlot()])},genLabel(){return this.hasLabel?this.$createElement(s.Z,{props:{color:this.validationState,dark:this.dark,disabled:this.isDisabled,focused:this.hasState,for:this.computedId,light:this.light}},this.$slots.label||this.label):null},genMessages(){return this.showDetails?this.$createElement(u,{props:{color:this.hasHint?"":this.validationState,dark:this.dark,light:this.light,value:this.messagesToDisplay},attrs:{role:this.hasMessages?"alert":null},scopedSlots:{default:e=>(0,c.z9)(this,"message",e)}}):null},genSlot(e,t,n){if(!n.length)return null;const i=`${e}-${t}`;return this.$createElement("div",{staticClass:`v-input__${i}`,ref:i},n)},genPrependSlot(){const e=[];return this.$slots.prepend?e.push(this.$slots.prepend):this.prependIcon&&e.push(this.genIcon("prepend")),this.genSlot("prepend","outer",e)},genAppendSlot(){const e=[];return this.$slots.append?e.push(this.$slots.append):this.appendIcon&&e.push(this.genIcon("append")),this.genSlot("append","outer",e)},onClick(e){this.$emit("click",e)},onMouseDown(e){this.hasMouseDown=!0,this.$emit("mousedown",e)},onMouseUp(e){this.hasMouseDown=!1,this.$emit("mouseup",e)}},render(e){return e("div",this.setTextColor(this.validationState,{staticClass:"v-input",class:this.classes}),this.genContent())}}),g=m},2980:function(e,t,n){n.d(t,{Z:function(){return l}});var i=n(5836),s=n(2066),r=n(5530),o=n(8131),a=n(7559),c=(0,r.Z)(s.Z).extend({name:"v-label",functional:!0,props:{absolute:Boolean,color:{type:String,default:"primary"},disabled:Boolean,focused:Boolean,for:String,left:{type:[Number,String],default:0},right:{type:[Number,String],default:"auto"},value:Boolean},render(e,t){const{children:n,listeners:r,props:c,data:l}=t,u=(0,a.ZP)({staticClass:"v-label",class:{"v-label--active":c.value,"v-label--is-disabled":c.disabled,...(0,s.X)(t)},attrs:{for:c.for,"aria-hidden":!c.for},on:r,style:{left:(0,o.kb)(c.left),right:(0,o.kb)(c.right),position:c.absolute?"absolute":"relative"},ref:"label"},l);return e("label",i.Z.options.methods.setTextColor(c.focused&&c.color,u),n)}}),l=c},7970:function(e,t,n){n.d(t,{Z:function(){return s}});var i=n(5439),s=i.Z.extend().extend({name:"v-list",provide(){return{isInList:!0,list:this}},inject:{isInMenu:{default:!1},isInNav:{default:!1}},props:{dense:Boolean,disabled:Boolean,expand:Boolean,flat:Boolean,nav:Boolean,rounded:Boolean,subheader:Boolean,threeLine:Boolean,twoLine:Boolean},data:()=>({groups:[]}),computed:{classes(){return{...i.Z.options.computed.classes.call(this),"v-list--dense":this.dense,"v-list--disabled":this.disabled,"v-list--flat":this.flat,"v-list--nav":this.nav,"v-list--rounded":this.rounded,"v-list--subheader":this.subheader,"v-list--two-line":this.twoLine,"v-list--three-line":this.threeLine}}},methods:{register(e){this.groups.push(e)},unregister(e){const t=this.groups.findIndex((t=>t._uid===e._uid));t>-1&&this.groups.splice(t,1)},listClick(e){if(!this.expand)for(const t of this.groups)t.toggle(e)}},render(e){const t={staticClass:"v-list",class:this.classes,style:this.styles,attrs:{role:this.isInNav||this.isInMenu?void 0:"list",...this.attrs$}};return e(this.tag,this.setBackgroundColor(this.color,t),[this.$slots.default])}})},1667:function(e,t,n){n.d(t,{Z:function(){return p}});var i=n(5836),s=n(9367),r=n(1302),o=n(2066),a=n(4552),c=n(293),l=n(8131),u=n(8219),h=n(5530);const d=(0,h.Z)(i.Z,s.Z,o.Z,(0,r.d)("listItemGroup"),(0,a.d)("inputValue"));var p=d.extend().extend({name:"v-list-item",directives:{Ripple:c.Z},inject:{isInGroup:{default:!1},isInList:{default:!1},isInMenu:{default:!1},isInNav:{default:!1}},inheritAttrs:!1,props:{activeClass:{type:String,default(){return this.listItemGroup?this.listItemGroup.activeClass:""}},dense:Boolean,inactive:Boolean,link:Boolean,selectable:{type:Boolean},tag:{type:String,default:"div"},threeLine:Boolean,twoLine:Boolean,value:null},data:()=>({proxyClass:"v-list-item--active"}),computed:{classes(){return{"v-list-item":!0,...s.Z.options.computed.classes.call(this),"v-list-item--dense":this.dense,"v-list-item--disabled":this.disabled,"v-list-item--link":this.isClickable&&!this.inactive,"v-list-item--selectable":this.selectable,"v-list-item--three-line":this.threeLine,"v-list-item--two-line":this.twoLine,...this.themeClasses}},isClickable(){return Boolean(s.Z.options.computed.isClickable.call(this)||this.listItemGroup)}},created(){this.$attrs.hasOwnProperty("avatar")&&(0,u.Jk)("avatar",this)},methods:{click(e){e.detail&&this.$el.blur(),this.$emit("click",e),this.to||this.toggle()},genAttrs(){const e={"aria-disabled":!!this.disabled||void 0,tabindex:this.isClickable&&!this.disabled?0:-1,...this.$attrs};return this.$attrs.hasOwnProperty("role")||this.isInNav||(this.isInGroup?(e.role="option",e["aria-selected"]=String(this.isActive)):this.isInMenu?(e.role=this.isClickable?"menuitem":void 0,e.id=e.id||`list-item-${this._uid}`):this.isInList&&(e.role="listitem")),e},toggle(){this.to&&void 0===this.inputValue&&(this.isActive=!this.isActive),this.$emit("change")}},render(e){let{tag:t,data:n}=this.generateRouteLink();n.attrs={...n.attrs,...this.genAttrs()},n[this.to?"nativeOn":"on"]={...n[this.to?"nativeOn":"on"],keydown:e=>{this.disabled||(e.keyCode===l.Do.enter&&this.click(e),this.$emit("keydown",e))}},this.inactive&&(t="div"),this.inactive&&this.to&&(n.on=n.nativeOn,delete n.nativeOn);const i=this.$scopedSlots.default?this.$scopedSlots.default({active:this.isActive,toggle:this.toggle}):this.$slots.default;return e(t,this.isActive?this.setTextColor(this.color,n):n,i)}})},3444:function(e,t,n){var i=n(144);t.Z=i.ZP.extend({name:"v-list-item-action",functional:!0,render(e,{data:t,children:n=[]}){t.staticClass=t.staticClass?`v-list-item__action ${t.staticClass}`:"v-list-item__action";const i=n.filter((e=>!1===e.isComment&&" "!==e.text));return i.length>1&&(t.staticClass+=" v-list-item__action--stack"),e("div",t,n)}})},6849:function(e,t,n){n.d(t,{Z:function(){return u}});var i=n(5836),s=n(9548),r=n(5357),o=n(8131),a=n(5530),c=(0,a.Z)(i.Z,s.Z,r.Z).extend({name:"v-avatar",props:{left:Boolean,right:Boolean,size:{type:[Number,String],default:48}},computed:{classes(){return{"v-avatar--left":this.left,"v-avatar--right":this.right,...this.roundedClasses}},styles(){return{height:(0,o.kb)(this.size),minWidth:(0,o.kb)(this.size),width:(0,o.kb)(this.size),...this.measurableStyles}}},render(e){const t={staticClass:"v-avatar",class:this.classes,style:this.styles,on:this.$listeners};return e("div",this.setBackgroundColor(this.color,t),this.$slots.default)}}),l=c,u=l.extend({name:"v-list-item-avatar",props:{horizontal:Boolean,size:{type:[Number,String],default:40}},computed:{classes(){return{"v-list-item__avatar--horizontal":this.horizontal,...l.options.computed.classes.call(this),"v-avatar--tile":this.tile||this.horizontal}}},render(e){const t=l.options.render.call(this,e);return t.data=t.data||{},t.data.staticClass+=" v-list-item__avatar",t}})},6322:function(e,t,n){n.d(t,{km:function(){return x},V9:function(){return A}});var i=n(8131),s=n(7970),r=n(9524),o=n(1667),a=n(144),c=a.ZP.extend({name:"v-list-item-icon",functional:!0,render(e,{data:t,children:n}){return t.staticClass=`v-list-item__icon ${t.staticClass||""}`.trim(),e("div",t,n)}}),l=n(6141),u=n(6986),h=n(5836),d=n(4552),p=n(950),f=n(293),m=n(6930),g=n(5530);const v=(0,g.Z)(l.Z,u.Z,h.Z,(0,p.f)("list"),d.Z);var y=v.extend().extend({name:"v-list-group",directives:{ripple:f.Z},props:{activeClass:{type:String,default:""},appendIcon:{type:String,default:"$expand"},color:{type:String,default:"primary"},disabled:Boolean,group:[String,RegExp],noAction:Boolean,prependIcon:String,ripple:{type:[Boolean,Object],default:!0},subGroup:Boolean},computed:{classes(){return{"v-list-group--active":this.isActive,"v-list-group--disabled":this.disabled,"v-list-group--no-action":this.noAction,"v-list-group--sub-group":this.subGroup}}},watch:{isActive(e){!this.subGroup&&e&&this.list&&this.list.listClick(this._uid)},$route:"onRouteChange"},created(){this.list&&this.list.register(this),this.group&&this.$route&&null==this.value&&(this.isActive=this.matchRoute(this.$route.path))},beforeDestroy(){this.list&&this.list.unregister(this)},methods:{click(e){this.disabled||(this.isBooted=!0,this.$emit("click",e),this.$nextTick((()=>this.isActive=!this.isActive)))},genIcon(e){return this.$createElement(r.Z,e)},genAppendIcon(){const e=!this.subGroup&&this.appendIcon;return e||this.$slots.appendIcon?this.$createElement(c,{staticClass:"v-list-group__header__append-icon"},[this.$slots.appendIcon||this.genIcon(e)]):null},genHeader(){return this.$createElement(o.Z,{staticClass:"v-list-group__header",attrs:{"aria-expanded":String(this.isActive),role:"button"},class:{[this.activeClass]:this.isActive},props:{inputValue:this.isActive},directives:[{name:"ripple",value:this.ripple}],on:{...this.listeners$,click:this.click}},[this.genPrependIcon(),this.$slots.activator,this.genAppendIcon()])},genItems(){return this.showLazyContent((()=>[this.$createElement("div",{staticClass:"v-list-group__items",directives:[{name:"show",value:this.isActive}]},(0,i.z9)(this))]))},genPrependIcon(){const e=this.subGroup&&null==this.prependIcon?"$subgroup":this.prependIcon;return e||this.$slots.prependIcon?this.$createElement(c,{staticClass:"v-list-group__header__prepend-icon"},[this.$slots.prependIcon||this.genIcon(e)]):null},onRouteChange(e){if(!this.group)return;const t=this.matchRoute(e.path);t&&this.isActive!==t&&this.list&&this.list.listClick(this._uid),this.isActive=t},toggle(e){const t=this._uid===e;t&&(this.isBooted=!0),this.$nextTick((()=>this.isActive=t))},matchRoute(e){return null!==e.match(this.group)}},render(e){return e("div",this.setTextColor(this.isActive&&this.color,{staticClass:"v-list-group",class:this.classes}),[this.genHeader(),e(m.Fx,this.genItems())])}}),_=n(8789),w=n(7779),b=n(2066),I=n(8219);const C=(0,g.Z)(_.Z,w.Z,b.Z).extend({name:"base-item-group",props:{activeClass:{type:String,default:"v-item--active"},mandatory:Boolean,max:{type:[Number,String],default:null},multiple:Boolean,tag:{type:String,default:"div"}},data(){return{internalLazyValue:void 0!==this.value?this.value:this.multiple?[]:void 0,items:[]}},computed:{classes(){return{"v-item-group":!0,...this.themeClasses}},selectedIndex(){return this.selectedItem&&this.items.indexOf(this.selectedItem)||-1},selectedItem(){if(!this.multiple)return this.selectedItems[0]},selectedItems(){return this.items.filter(((e,t)=>this.toggleMethod(this.getValue(e,t))))},selectedValues(){return null==this.internalValue?[]:Array.isArray(this.internalValue)?this.internalValue:[this.internalValue]},toggleMethod(){if(!this.multiple)return e=>this.valueComparator(this.internalValue,e);const e=this.internalValue;return Array.isArray(e)?t=>e.some((e=>this.valueComparator(e,t))):()=>!1}},watch:{internalValue:"updateItemsState",items:"updateItemsState"},created(){this.multiple&&!Array.isArray(this.internalValue)&&(0,I.Kd)("Model must be bound to an array if the multiple property is true.",this)},methods:{genData(){return{class:this.classes}},getValue(e,t){return void 0===e.value?t:e.value},onClick(e){this.updateInternalValue(this.getValue(e,this.items.indexOf(e)))},register(e){const t=this.items.push(e)-1;e.$on("change",(()=>this.onClick(e))),this.mandatory&&!this.selectedValues.length&&this.updateMandatory(),this.updateItem(e,t)},unregister(e){if(this._isDestroyed)return;const t=this.items.indexOf(e),n=this.getValue(e,t);this.items.splice(t,1);const i=this.selectedValues.indexOf(n);if(!(i<0)){if(!this.mandatory)return this.updateInternalValue(n);this.multiple&&Array.isArray(this.internalValue)?this.internalValue=this.internalValue.filter((e=>e!==n)):this.internalValue=void 0,this.selectedItems.length||this.updateMandatory(!0)}},updateItem(e,t){const n=this.getValue(e,t);e.isActive=this.toggleMethod(n)},updateItemsState(){this.$nextTick((()=>{if(this.mandatory&&!this.selectedItems.length)return this.updateMandatory();this.items.forEach(this.updateItem)}))},updateInternalValue(e){this.multiple?this.updateMultiple(e):this.updateSingle(e)},updateMandatory(e){if(!this.items.length)return;const t=this.items.slice();e&&t.reverse();const n=t.find((e=>!e.disabled));if(!n)return;const i=this.items.indexOf(n);this.updateInternalValue(this.getValue(n,i))},updateMultiple(e){const t=Array.isArray(this.internalValue)?this.internalValue:[],n=t.slice(),i=n.findIndex((t=>this.valueComparator(t,e)));this.mandatory&&i>-1&&n.length-1<1||null!=this.max&&i<0&&n.length+1>this.max||(i>-1?n.splice(i,1):n.push(e),this.internalValue=n)},updateSingle(e){const t=this.valueComparator(this.internalValue,e);this.mandatory&&t||(this.internalValue=t?void 0:e)}},render(e){return e(this.tag,this.genData(),this.$slots.default)}});C.extend({name:"v-item-group",provide(){return{itemGroup:this}}});var S=(0,g.Z)(C,h.Z).extend({name:"v-list-item-group",provide(){return{isInGroup:!0,listItemGroup:this}},computed:{classes(){return{...C.options.computed.classes.call(this),"v-list-item-group":!0}}},methods:{genData(){return this.setTextColor(this.color,{...C.options.methods.genData.call(this),attrs:{role:"listbox"}})}}}),T=n(3444),E=n(6849);const k=(0,i.Ji)("v-list-item__action-text","span"),x=(0,i.Ji)("v-list-item__content","div"),A=(0,i.Ji)("v-list-item__title","div"),N=(0,i.Ji)("v-list-item__subtitle","div");s.Z,o.Z,T.Z,E.Z},3102:function(e,t,n){n.d(t,{Z:function(){return s}});var i=n(8191),s=i.Z.extend({name:"v-main",props:{tag:{type:String,default:"main"}},computed:{styles(){const{bar:e,top:t,right:n,footer:i,insetFooter:s,bottom:r,left:o}=this.$vuetify.application;return{paddingTop:`${t+e}px`,paddingRight:`${n}px`,paddingBottom:`${i+s+r}px`,paddingLeft:`${o}px`}}},render(e){const t={staticClass:"v-main",style:this.styles,ref:"main"};return e(this.tag,t,[e("div",{staticClass:"v-main__wrap"},this.$slots.default)])}})},2437:function(e,t,n){n.d(t,{Z:function(){return T}});var i=n(1584),s=n(2404),r=n(5836),o=n(4665),a=n(9989),c=n(8605),l=n(8191),u=n(2066),h=n(3664),d=n(7293),p=n(8131);const f=e=>{const{touchstartX:t,touchendX:n,touchstartY:i,touchendY:s}=e,r=.5,o=16;e.offsetX=n-t,e.offsetY=s-i,Math.abs(e.offsetY)<r*Math.abs(e.offsetX)&&(e.left&&n<t-o&&e.left(e),e.right&&n>t+o&&e.right(e)),Math.abs(e.offsetX)<r*Math.abs(e.offsetY)&&(e.up&&s<i-o&&e.up(e),e.down&&s>i+o&&e.down(e))};function m(e,t){const n=e.changedTouches[0];t.touchstartX=n.clientX,t.touchstartY=n.clientY,t.start&&t.start(Object.assign(e,t))}function g(e,t){const n=e.changedTouches[0];t.touchendX=n.clientX,t.touchendY=n.clientY,t.end&&t.end(Object.assign(e,t)),f(t)}function v(e,t){const n=e.changedTouches[0];t.touchmoveX=n.clientX,t.touchmoveY=n.clientY,t.move&&t.move(Object.assign(e,t))}function y(e){const t={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:e.left,right:e.right,up:e.up,down:e.down,start:e.start,move:e.move,end:e.end};return{touchstart:e=>m(e,t),touchend:e=>g(e,t),touchmove:e=>v(e,t)}}function _(e,t,n){const i=t.value,s=i.parent?e.parentElement:e,r=i.options||{passive:!0};if(!s)return;const o=y(t.value);s._touchHandlers=Object(s._touchHandlers),s._touchHandlers[n.context._uid]=o,(0,p.XP)(o).forEach((e=>{s.addEventListener(e,o[e],r)}))}function w(e,t,n){const i=t.value.parent?e.parentElement:e;if(!i||!i._touchHandlers)return;const s=i._touchHandlers[n.context._uid];(0,p.XP)(s).forEach((e=>{i.removeEventListener(e,s[e])})),delete i._touchHandlers[n.context._uid]}const b={inserted:_,unbind:w};var I=b,C=n(5530);const S=(0,C.Z)((0,s.Z)("left",["isActive","isMobile","miniVariant","expandOnHover","permanent","right","temporary","width"]),r.Z,o.Z,a.Z,c.Z,l.Z,u.Z);var T=S.extend({name:"v-navigation-drawer",directives:{ClickOutside:h.Z,Resize:d.Z,Touch:I},provide(){return{isInNav:"nav"===this.tag}},props:{bottom:Boolean,clipped:Boolean,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,height:{type:[Number,String],default(){return this.app?"100vh":"100%"}},miniVariant:Boolean,miniVariantWidth:{type:[Number,String],default:56},permanent:Boolean,right:Boolean,src:{type:[String,Object],default:""},stateless:Boolean,tag:{type:String,default(){return this.app?"nav":"aside"}},temporary:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},value:null},data:()=>({isMouseover:!1,touchArea:{left:0,right:0},stackMinZIndex:6}),computed:{applicationProperty(){return this.right?"right":"left"},classes(){return{"v-navigation-drawer":!0,"v-navigation-drawer--absolute":this.absolute,"v-navigation-drawer--bottom":this.bottom,"v-navigation-drawer--clipped":this.clipped,"v-navigation-drawer--close":!this.isActive,"v-navigation-drawer--fixed":!this.absolute&&(this.app||this.fixed),"v-navigation-drawer--floating":this.floating,"v-navigation-drawer--is-mobile":this.isMobile,"v-navigation-drawer--is-mouseover":this.isMouseover,"v-navigation-drawer--mini-variant":this.isMiniVariant,"v-navigation-drawer--custom-mini-variant":56!==Number(this.miniVariantWidth),"v-navigation-drawer--open":this.isActive,"v-navigation-drawer--open-on-hover":this.expandOnHover,"v-navigation-drawer--right":this.right,"v-navigation-drawer--temporary":this.temporary,...this.themeClasses}},computedMaxHeight(){if(!this.hasApp)return null;const e=this.$vuetify.application.bottom+this.$vuetify.application.footer+this.$vuetify.application.bar;return this.clipped?e+this.$vuetify.application.top:e},computedTop(){if(!this.hasApp)return 0;let e=this.$vuetify.application.bar;return e+=this.clipped?this.$vuetify.application.top:0,e},computedTransform(){return this.isActive?0:this.isBottom||this.right?100:-100},computedWidth(){return this.isMiniVariant?this.miniVariantWidth:this.width},hasApp(){return this.app&&!this.isMobile&&!this.temporary},isBottom(){return this.bottom&&this.isMobile},isMiniVariant(){return!this.expandOnHover&&this.miniVariant||this.expandOnHover&&!this.isMouseover},isMobile(){return!this.stateless&&!this.permanent&&a.Z.options.computed.isMobile.call(this)},reactsToClick(){return!this.stateless&&!this.permanent&&(this.isMobile||this.temporary)},reactsToMobile(){return this.app&&!this.disableResizeWatcher&&!this.permanent&&!this.stateless&&!this.temporary},reactsToResize(){return!this.disableResizeWatcher&&!this.stateless},reactsToRoute(){return!this.disableRouteWatcher&&!this.stateless&&(this.temporary||this.isMobile)},showOverlay(){return!this.hideOverlay&&this.isActive&&(this.isMobile||this.temporary)},styles(){const e=this.isBottom?"translateY":"translateX";return{height:(0,p.kb)(this.height),top:this.isBottom?"auto":(0,p.kb)(this.computedTop),maxHeight:null!=this.computedMaxHeight?`calc(100% - ${(0,p.kb)(this.computedMaxHeight)})`:void 0,transform:`${e}(${(0,p.kb)(this.computedTransform,"%")})`,width:(0,p.kb)(this.computedWidth)}}},watch:{$route:"onRouteChange",isActive(e){this.$emit("input",e)},isMobile(e,t){!e&&this.isActive&&!this.temporary&&this.removeOverlay(),null!=t&&this.reactsToResize&&this.reactsToMobile&&(this.isActive=!e)},permanent(e){e&&(this.isActive=!0)},showOverlay(e){e?this.genOverlay():this.removeOverlay()},value(e){this.permanent||(null!=e?e!==this.isActive&&(this.isActive=e):this.init())},expandOnHover:"updateMiniVariant",isMouseover(e){this.updateMiniVariant(!e)}},beforeMount(){this.init()},methods:{calculateTouchArea(){const e=this.$el.parentNode;if(!e)return;const t=e.getBoundingClientRect();this.touchArea={left:t.left+50,right:t.right-50}},closeConditional(){return this.isActive&&!this._isDestroyed&&this.reactsToClick},genAppend(){return this.genPosition("append")},genBackground(){const e={height:"100%",width:"100%",src:this.src},t=this.$scopedSlots.img?this.$scopedSlots.img(e):this.$createElement(i.Z,{props:e});return this.$createElement("div",{staticClass:"v-navigation-drawer__image"},[t])},genDirectives(){const e=[{name:"click-outside",value:{handler:()=>{this.isActive=!1},closeConditional:this.closeConditional,include:this.getOpenDependentElements}}];return this.touchless||this.stateless||e.push({name:"touch",value:{parent:!0,left:this.swipeLeft,right:this.swipeRight}}),e},genListeners(){const e={mouseenter:()=>this.isMouseover=!0,mouseleave:()=>this.isMouseover=!1,transitionend:e=>{if(e.target!==e.currentTarget)return;this.$emit("transitionend",e);const t=document.createEvent("UIEvents");t.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(t)}};return this.miniVariant&&(e.click=()=>this.$emit("update:mini-variant",!1)),e},genPosition(e){const t=(0,p.z9)(this,e);return t?this.$createElement("div",{staticClass:`v-navigation-drawer__${e}`},t):t},genPrepend(){return this.genPosition("prepend")},genContent(){return this.$createElement("div",{staticClass:"v-navigation-drawer__content"},this.$slots.default)},genBorder(){return this.$createElement("div",{staticClass:"v-navigation-drawer__border"})},init(){this.permanent?this.isActive=!0:this.stateless||null!=this.value?this.isActive=this.value:this.temporary||(this.isActive=!this.isMobile)},onRouteChange(){this.reactsToRoute&&this.closeConditional()&&(this.isActive=!1)},swipeLeft(e){this.isActive&&this.right||(this.calculateTouchArea(),Math.abs(e.touchendX-e.touchstartX)<100||(this.right&&e.touchstartX>=this.touchArea.right?this.isActive=!0:!this.right&&this.isActive&&(this.isActive=!1)))},swipeRight(e){this.isActive&&!this.right||(this.calculateTouchArea(),Math.abs(e.touchendX-e.touchstartX)<100||(!this.right&&e.touchstartX<=this.touchArea.left?this.isActive=!0:this.right&&this.isActive&&(this.isActive=!1)))},updateApplication(){if(!this.isActive||this.isMobile||this.temporary||!this.$el)return 0;const e=Number(this.miniVariant?this.miniVariantWidth:this.width);return isNaN(e)?this.$el.clientWidth:e},updateMiniVariant(e){this.expandOnHover&&this.miniVariant!==e&&this.$emit("update:mini-variant",e)}},render(e){const t=[this.genPrepend(),this.genContent(),this.genAppend(),this.genBorder()];return(this.src||(0,p.z9)(this,"img"))&&t.unshift(this.genBackground()),e(this.tag,this.setBackgroundColor(this.color,{class:this.classes,style:this.styles,directives:this.genDirectives(),on:this.genListeners()}),t)}})},5439:function(e,t,n){n.d(t,{Z:function(){return u}});var i=n(6141),s=n(5836),r=n(8427),o=n(9548),a=n(5357),c=n(2066),l=n(5530),u=(0,l.Z)(i.Z,s.Z,r.Z,o.Z,a.Z,c.Z).extend({name:"v-sheet",props:{outlined:Boolean,shaped:Boolean,tag:{type:String,default:"div"}},computed:{classes(){return{"v-sheet":!0,"v-sheet--outlined":this.outlined,"v-sheet--shaped":this.shaped,...this.themeClasses,...this.elevationClasses,...this.roundedClasses}},styles(){return this.measurableStyles}},render(e){const t={class:this.classes,style:this.styles,on:this.listeners$};return e(this.tag,this.setBackgroundColor(this.color,t),this.$slots.default)}})},9744:function(e,t,n){var i=n(5439);t.Z=i.Z},9007:function(e,t,n){n.d(t,{Z:function(){return b}});n(2838);var i=n(2926),s=n(2066),r=n(5530),o=(0,r.Z)(s.Z).extend({name:"v-counter",functional:!0,props:{value:{type:[Number,String],default:""},max:[Number,String]},render(e,t){const{props:n}=t,i=parseInt(n.max,10),r=parseInt(n.value,10),o=i?`${r} / ${i}`:String(n.value),a=i&&r>i;return e("div",{staticClass:"v-counter",class:{"error--text":a,...(0,s.X)(t)}},o)}}),a=o,c=n(2980),l=n(7006),u=n(8219),h=n(144);function d(e){return h.ZP.extend({name:"intersectable",data:()=>({isIntersecting:!1}),mounted(){l.Z.inserted(this.$el,{name:"intersect",value:this.onObserve},this.$vnode)},destroyed(){l.Z.unbind(this.$el,{name:"intersect",value:this.onObserve},this.$vnode)},methods:{onObserve(t,n,i){if(this.isIntersecting=i,i)for(let s=0,r=e.onVisible.length;s<r;s++){const t=this[e.onVisible[s]];"function"!==typeof t?(0,u.Kd)(e.onVisible[s]+" method is not available on the instance but referenced in intersectable mixin options"):t()}}}})}var p=n(9799),f=n(371),m=n(7293),g=n(293),v=n(3118),y=n(8131);const _=(0,r.Z)(i.Z,d({onVisible:["onResize","tryAutofocus"]}),p.Z),w=["color","file","time","date","datetime-local","week","month"];var b=_.extend().extend({name:"v-text-field",directives:{resize:m.Z,ripple:g.Z},inheritAttrs:!1,props:{appendOuterIcon:String,autofocus:Boolean,clearable:Boolean,clearIcon:{type:String,default:"$clear"},counter:[Boolean,Number,String],counterValue:Function,filled:Boolean,flat:Boolean,fullWidth:Boolean,label:String,outlined:Boolean,placeholder:String,prefix:String,prependInnerIcon:String,persistentPlaceholder:Boolean,reverse:Boolean,rounded:Boolean,shaped:Boolean,singleLine:Boolean,solo:Boolean,soloInverted:Boolean,suffix:String,type:{type:String,default:"text"}},data:()=>({badInput:!1,labelWidth:0,prefixWidth:0,prependWidth:0,initialValue:null,isBooted:!1,isClearing:!1}),computed:{classes(){return{...i.Z.options.computed.classes.call(this),"v-text-field":!0,"v-text-field--full-width":this.fullWidth,"v-text-field--prefix":this.prefix,"v-text-field--single-line":this.isSingle,"v-text-field--solo":this.isSolo,"v-text-field--solo-inverted":this.soloInverted,"v-text-field--solo-flat":this.flat,"v-text-field--filled":this.filled,"v-text-field--is-booted":this.isBooted,"v-text-field--enclosed":this.isEnclosed,"v-text-field--reverse":this.reverse,"v-text-field--outlined":this.outlined,"v-text-field--placeholder":this.placeholder,"v-text-field--rounded":this.rounded,"v-text-field--shaped":this.shaped}},computedColor(){const e=f.Z.options.computed.computedColor.call(this);return this.soloInverted&&this.isFocused?this.color||"primary":e},computedCounterValue(){return"function"===typeof this.counterValue?this.counterValue(this.internalValue):[...(this.internalValue||"").toString()].length},hasCounter(){return!1!==this.counter&&null!=this.counter},hasDetails(){return i.Z.options.computed.hasDetails.call(this)||this.hasCounter},internalValue:{get(){return this.lazyValue},set(e){this.lazyValue=e,this.$emit("input",this.lazyValue)}},isDirty(){var e;return(null===(e=this.lazyValue)||void 0===e?void 0:e.toString().length)>0||this.badInput},isEnclosed(){return this.filled||this.isSolo||this.outlined},isLabelActive(){return this.isDirty||w.includes(this.type)},isSingle(){return this.isSolo||this.singleLine||this.fullWidth||this.filled&&!this.hasLabel},isSolo(){return this.solo||this.soloInverted},labelPosition(){let e=this.prefix&&!this.labelValue?this.prefixWidth:0;return this.labelValue&&this.prependWidth&&(e-=this.prependWidth),this.$vuetify.rtl===this.reverse?{left:e,right:"auto"}:{left:"auto",right:e}},showLabel(){return this.hasLabel&&!(this.isSingle&&this.labelValue)},labelValue(){return this.isFocused||this.isLabelActive||this.persistentPlaceholder}},watch:{outlined:"setLabelWidth",label(){this.$nextTick(this.setLabelWidth)},prefix(){this.$nextTick(this.setPrefixWidth)},isFocused:"updateValue",value(e){this.lazyValue=e}},created(){this.$attrs.hasOwnProperty("box")&&(0,u.fK)("box","filled",this),this.$attrs.hasOwnProperty("browser-autocomplete")&&(0,u.fK)("browser-autocomplete","autocomplete",this),this.shaped&&!(this.filled||this.outlined||this.isSolo)&&(0,u.Kd)("shaped should be used with either filled or outlined",this)},mounted(){this.$watch((()=>this.labelValue),this.setLabelWidth),this.autofocus&&this.tryAutofocus(),requestAnimationFrame((()=>{this.isBooted=!0,requestAnimationFrame((()=>{this.isIntersecting||this.onResize()}))}))},methods:{focus(){this.onFocus()},blur(e){window.requestAnimationFrame((()=>{this.$refs.input&&this.$refs.input.blur()}))},clearableCallback(){this.$refs.input&&this.$refs.input.focus(),this.$nextTick((()=>this.internalValue=null))},genAppendSlot(){const e=[];return this.$slots["append-outer"]?e.push(this.$slots["append-outer"]):this.appendOuterIcon&&e.push(this.genIcon("appendOuter")),this.genSlot("append","outer",e)},genPrependInnerSlot(){const e=[];return this.$slots["prepend-inner"]?e.push(this.$slots["prepend-inner"]):this.prependInnerIcon&&e.push(this.genIcon("prependInner")),this.genSlot("prepend","inner",e)},genIconSlot(){const e=[];return this.$slots.append?e.push(this.$slots.append):this.appendIcon&&e.push(this.genIcon("append")),this.genSlot("append","inner",e)},genInputSlot(){const e=i.Z.options.methods.genInputSlot.call(this),t=this.genPrependInnerSlot();return t&&(e.children=e.children||[],e.children.unshift(t)),e},genClearIcon(){return this.clearable?this.isDirty?this.genSlot("append","inner",[this.genIcon("clear",this.clearableCallback)]):this.genSlot("append","inner",[this.$createElement("div")]):null},genCounter(){var e,t,n;if(!this.hasCounter)return null;const i=!0===this.counter?this.attrs$.maxlength:this.counter,s={dark:this.dark,light:this.light,max:i,value:this.computedCounterValue};return null!==(n=null===(t=(e=this.$scopedSlots).counter)||void 0===t?void 0:t.call(e,{props:s}))&&void 0!==n?n:this.$createElement(a,{props:s})},genControl(){return i.Z.options.methods.genControl.call(this)},genDefaultSlot(){return[this.genFieldset(),this.genTextFieldSlot(),this.genClearIcon(),this.genIconSlot(),this.genProgress()]},genFieldset(){return this.outlined?this.$createElement("fieldset",{attrs:{"aria-hidden":!0}},[this.genLegend()]):null},genLabel(){if(!this.showLabel)return null;const e={props:{absolute:!0,color:this.validationState,dark:this.dark,disabled:this.isDisabled,focused:!this.isSingle&&(this.isFocused||!!this.validationState),for:this.computedId,left:this.labelPosition.left,light:this.light,right:this.labelPosition.right,value:this.labelValue}};return this.$createElement(c.Z,e,this.$slots.label||this.label)},genLegend(){const e=this.singleLine||!this.labelValue&&!this.isDirty?0:this.labelWidth,t=this.$createElement("span",{domProps:{innerHTML:"&#8203;"},staticClass:"notranslate"});return this.$createElement("legend",{style:{width:this.isSingle?void 0:(0,y.kb)(e)}},[t])},genInput(){const e=Object.assign({},this.listeners$);delete e.change;const{title:t,...n}=this.attrs$;return this.$createElement("input",{style:{},domProps:{value:"number"===this.type&&Object.is(this.lazyValue,-0)?"-0":this.lazyValue},attrs:{...n,autofocus:this.autofocus,disabled:this.isDisabled,id:this.computedId,placeholder:this.persistentPlaceholder||this.isFocused||!this.hasLabel?this.placeholder:void 0,readonly:this.isReadonly,type:this.type},on:Object.assign(e,{blur:this.onBlur,input:this.onInput,focus:this.onFocus,keydown:this.onKeyDown}),ref:"input",directives:[{name:"resize",modifiers:{quiet:!0},value:this.onResize}]})},genMessages(){if(!this.showDetails)return null;const e=i.Z.options.methods.genMessages.call(this),t=this.genCounter();return this.$createElement("div",{staticClass:"v-text-field__details"},[e,t])},genTextFieldSlot(){return this.$createElement("div",{staticClass:"v-text-field__slot"},[this.genLabel(),this.prefix?this.genAffix("prefix"):null,this.genInput(),this.suffix?this.genAffix("suffix"):null])},genAffix(e){return this.$createElement("div",{class:`v-text-field__${e}`,ref:e},this[e])},onBlur(e){this.isFocused=!1,e&&this.$nextTick((()=>this.$emit("blur",e)))},onClick(){this.isFocused||this.isDisabled||!this.$refs.input||this.$refs.input.focus()},onFocus(e){if(!this.$refs.input)return;const t=(0,v.e)(this.$el);return t?t.activeElement!==this.$refs.input?this.$refs.input.focus():void(this.isFocused||(this.isFocused=!0,e&&this.$emit("focus",e))):void 0},onInput(e){const t=e.target;this.internalValue=t.value,this.badInput=t.validity&&t.validity.badInput},onKeyDown(e){e.keyCode===y.Do.enter&&this.lazyValue!==this.initialValue&&(this.initialValue=this.lazyValue,this.$emit("change",this.initialValue)),this.$emit("keydown",e)},onMouseDown(e){e.target!==this.$refs.input&&(e.preventDefault(),e.stopPropagation()),i.Z.options.methods.onMouseDown.call(this,e)},onMouseUp(e){this.hasMouseDown&&this.focus(),i.Z.options.methods.onMouseUp.call(this,e)},setLabelWidth(){this.outlined&&(this.labelWidth=this.$refs.label?Math.min(.75*this.$refs.label.scrollWidth+6,this.$el.offsetWidth-24):0)},setPrefixWidth(){this.$refs.prefix&&(this.prefixWidth=this.$refs.prefix.offsetWidth)},setPrependWidth(){this.outlined&&this.$refs["prepend-inner"]&&(this.prependWidth=this.$refs["prepend-inner"].offsetWidth)},tryAutofocus(){if(!this.autofocus||"undefined"===typeof document||!this.$refs.input)return!1;const e=(0,v.e)(this.$el);return!(!e||e.activeElement===this.$refs.input)&&(this.$refs.input.focus(),!0)},updateValue(e){this.hasColor=e,e?this.initialValue=this.lazyValue:this.initialValue!==this.lazyValue&&this.$emit("change",this.lazyValue)},onResize(){this.setLabelWidth(),this.setPrefixWidth(),this.setPrependWidth()}}})},8345:function(e,t,n){var i=n(2066);t.Z=i.Z.extend({name:"v-theme-provider",props:{root:Boolean},computed:{isDark(){return this.root?this.rootIsDark:i.Z.options.computed.isDark.call(this)}},render(){return this.$slots.default&&this.$slots.default.find((e=>!e.isComment&&" "!==e.text))}})},2732:function(e,t,n){n.d(t,{Z:function(){return a}});var i=n(5439),s=n(1584),r=n(8131),o=n(8219),a=i.Z.extend({name:"v-toolbar",props:{absolute:Boolean,bottom:Boolean,collapse:Boolean,dense:Boolean,extended:Boolean,extensionHeight:{default:48,type:[Number,String]},flat:Boolean,floating:Boolean,prominent:Boolean,short:Boolean,src:{type:[String,Object],default:""},tag:{type:String,default:"header"}},data:()=>({isExtended:!1}),computed:{computedHeight(){const e=this.computedContentHeight;if(!this.isExtended)return e;const t=parseInt(this.extensionHeight);return this.isCollapsed?e:e+(isNaN(t)?0:t)},computedContentHeight(){return this.height?parseInt(this.height):this.isProminent&&this.dense?96:this.isProminent&&this.short?112:this.isProminent?128:this.dense?48:this.short||this.$vuetify.breakpoint.smAndDown?56:64},classes(){return{...i.Z.options.computed.classes.call(this),"v-toolbar":!0,"v-toolbar--absolute":this.absolute,"v-toolbar--bottom":this.bottom,"v-toolbar--collapse":this.collapse,"v-toolbar--collapsed":this.isCollapsed,"v-toolbar--dense":this.dense,"v-toolbar--extended":this.isExtended,"v-toolbar--flat":this.flat,"v-toolbar--floating":this.floating,"v-toolbar--prominent":this.isProminent}},isCollapsed(){return this.collapse},isProminent(){return this.prominent},styles(){return{...this.measurableStyles,height:(0,r.kb)(this.computedHeight)}}},created(){const e=[["app","<v-app-bar app>"],["manual-scroll",'<v-app-bar :value="false">'],["clipped-left","<v-app-bar clipped-left>"],["clipped-right","<v-app-bar clipped-right>"],["inverted-scroll","<v-app-bar inverted-scroll>"],["scroll-off-screen","<v-app-bar scroll-off-screen>"],["scroll-target","<v-app-bar scroll-target>"],["scroll-threshold","<v-app-bar scroll-threshold>"],["card","<v-app-bar flat>"]];e.forEach((([e,t])=>{this.$attrs.hasOwnProperty(e)&&(0,o.fK)(e,t,this)}))},methods:{genBackground(){const e={height:(0,r.kb)(this.computedHeight),src:this.src},t=this.$scopedSlots.img?this.$scopedSlots.img({props:e}):this.$createElement(s.Z,{props:e});return this.$createElement("div",{staticClass:"v-toolbar__image"},[t])},genContent(){return this.$createElement("div",{staticClass:"v-toolbar__content",style:{height:(0,r.kb)(this.computedContentHeight)}},(0,r.z9)(this))},genExtension(){return this.$createElement("div",{staticClass:"v-toolbar__extension",style:{height:(0,r.kb)(this.extensionHeight)}},(0,r.z9)(this,"extension"))}},render(e){this.isExtended=this.extended||!!this.$scopedSlots.extension;const t=[this.genContent()],n=this.setBackgroundColor(this.color,{class:this.classes,style:this.styles,on:this.$listeners});return this.isExtended&&t.push(this.genExtension()),(this.src||this.$scopedSlots.img)&&t.unshift(this.genBackground()),e(this.tag,n,t)}})},3845:function(e,t,n){n.d(t,{qW:function(){return r}});var i=n(2732),s=n(8131);const r=(0,s.Ji)("v-toolbar__title"),o=(0,s.Ji)("v-toolbar__items");i.Z},6930:function(e,t,n){n.d(t,{Fx:function(){return h},Zq:function(){return d},Z5:function(){return l},Qn:function(){return u}});var i=n(7559);function s(e=[],...t){return Array().concat(e,...t)}function r(e,t="top center 0",n){return{name:e,functional:!0,props:{group:{type:Boolean,default:!1},hideOnLeave:{type:Boolean,default:!1},leaveAbsolute:{type:Boolean,default:!1},mode:{type:String,default:n},origin:{type:String,default:t}},render(t,n){const r="transition"+(n.props.group?"-group":""),o={props:{name:e,mode:n.props.mode},on:{beforeEnter(e){e.style.transformOrigin=n.props.origin,e.style.webkitTransformOrigin=n.props.origin}}};return n.props.leaveAbsolute&&(o.on.leave=s(o.on.leave,(e=>{const{offsetTop:t,offsetLeft:n,offsetWidth:i,offsetHeight:s}=e;e._transitionInitialStyles={position:e.style.position,top:e.style.top,left:e.style.left,width:e.style.width,height:e.style.height},e.style.position="absolute",e.style.top=t+"px",e.style.left=n+"px",e.style.width=i+"px",e.style.height=s+"px"})),o.on.afterLeave=s(o.on.afterLeave,(e=>{if(e&&e._transitionInitialStyles){const{position:t,top:n,left:i,width:s,height:r}=e._transitionInitialStyles;delete e._transitionInitialStyles,e.style.position=t||"",e.style.top=n||"",e.style.left=i||"",e.style.width=s||"",e.style.height=r||""}}))),n.props.hideOnLeave&&(o.on.leave=s(o.on.leave,(e=>{e.style.setProperty("display","none","important")}))),t(r,(0,i.ZP)(n.data,o),n.children)}}}function o(e,t,n="in-out"){return{name:e,functional:!0,props:{mode:{type:String,default:n}},render(n,s){return n("transition",(0,i.ZP)(s.data,{props:{name:e},on:t}),s.children)}}}var a=n(8131);function c(e="",t=!1){const n=t?"width":"height",i=`offset${(0,a.jC)(n)}`;return{beforeEnter(e){e._parent=e.parentNode,e._initialStyle={transition:e.style.transition,overflow:e.style.overflow,[n]:e.style[n]}},enter(t){const s=t._initialStyle;t.style.setProperty("transition","none","important"),t.style.overflow="hidden";const r=`${t[i]}px`;t.style[n]="0",t.offsetHeight,t.style.transition=s.transition,e&&t._parent&&t._parent.classList.add(e),requestAnimationFrame((()=>{t.style[n]=r}))},afterEnter:r,enterCancelled:r,leave(e){e._initialStyle={transition:"",overflow:e.style.overflow,[n]:e.style[n]},e.style.overflow="hidden",e.style[n]=`${e[i]}px`,e.offsetHeight,requestAnimationFrame((()=>e.style[n]="0"))},afterLeave:s,leaveCancelled:s};function s(t){e&&t._parent&&t._parent.classList.remove(e),r(t)}function r(e){const t=e._initialStyle[n];e.style.overflow=e._initialStyle.overflow,null!=t&&(e.style[n]=t),delete e._initialStyle}}r("carousel-transition"),r("carousel-reverse-transition"),r("tab-transition"),r("tab-reverse-transition"),r("menu-transition"),r("fab-transition","center center","out-in"),r("dialog-transition"),r("dialog-bottom-transition"),r("dialog-top-transition");const l=r("fade-transition"),u=(r("scale-transition"),r("scroll-x-transition"),r("scroll-x-reverse-transition"),r("scroll-y-transition"),r("scroll-y-reverse-transition"),r("slide-x-transition")),h=(r("slide-x-reverse-transition"),r("slide-y-transition"),r("slide-y-reverse-transition"),o("expand-transition",c())),d=o("expand-x-transition",c("",!0))},3664:function(e,t,n){var i=n(3118);function s(){return!0}function r(e,t,n){if(!e||!1===o(e,n))return!1;const s=(0,i.e)(t);if("undefined"!==typeof ShadowRoot&&s instanceof ShadowRoot&&s.host===e.target)return!1;const r=("object"===typeof n.value&&n.value.include||(()=>[]))();return r.push(t),!r.some((t=>t.contains(e.target)))}function o(e,t){const n="object"===typeof t.value&&t.value.closeConditional||s;return n(e)}function a(e,t,n){const i="function"===typeof n.value?n.value:n.value.handler;t._clickOutside.lastMousedownWasOutside&&r(e,t,n)&&setTimeout((()=>{o(e,n)&&i&&i(e)}),0)}function c(e,t){const n=(0,i.e)(e);t(document),"undefined"!==typeof ShadowRoot&&n instanceof ShadowRoot&&t(n)}const l={inserted(e,t,n){const i=n=>a(n,e,t),s=n=>{e._clickOutside.lastMousedownWasOutside=r(n,e,t)};c(e,(e=>{e.addEventListener("click",i,!0),e.addEventListener("mousedown",s,!0)})),e._clickOutside||(e._clickOutside={lastMousedownWasOutside:!0}),e._clickOutside[n.context._uid]={onClick:i,onMousedown:s}},unbind(e,t,n){e._clickOutside&&(c(e,(t=>{var i;if(!t||!(null===(i=e._clickOutside)||void 0===i?void 0:i[n.context._uid]))return;const{onClick:s,onMousedown:r}=e._clickOutside[n.context._uid];t.removeEventListener("click",s,!0),t.removeEventListener("mousedown",r,!0)})),delete e._clickOutside[n.context._uid])}};t.Z=l},7006:function(e,t,n){function i(e,t,n){if("undefined"===typeof window||!("IntersectionObserver"in window))return;const i=t.modifiers||{},r=t.value,{handler:o,options:a}="object"===typeof r?r:{handler:r,options:{}},c=new IntersectionObserver(((r=[],a)=>{var c;const l=null===(c=e._observe)||void 0===c?void 0:c[n.context._uid];if(!l)return;const u=r.some((e=>e.isIntersecting));!o||i.quiet&&!l.init||i.once&&!u&&!l.init||o(r,a,u),u&&i.once?s(e,t,n):l.init=!0}),a);e._observe=Object(e._observe),e._observe[n.context._uid]={init:!1,observer:c},c.observe(e)}function s(e,t,n){var i;const s=null===(i=e._observe)||void 0===i?void 0:i[n.context._uid];s&&(s.observer.unobserve(e),delete e._observe[n.context._uid])}const r={inserted:i,unbind:s};t.Z=r},7293:function(e,t,n){function i(e,t,n){const i=t.value,s=t.options||{passive:!0};window.addEventListener("resize",i,s),e._onResize=Object(e._onResize),e._onResize[n.context._uid]={callback:i,options:s},t.modifiers&&t.modifiers.quiet||i()}function s(e,t,n){var i;if(!(null===(i=e._onResize)||void 0===i?void 0:i[n.context._uid]))return;const{callback:s,options:r}=e._onResize[n.context._uid];window.removeEventListener("resize",s,r),delete e._onResize[n.context._uid]}const r={inserted:i,unbind:s};t.Z=r},293:function(e,t,n){n.d(t,{Z:function(){return S}});var i=n(8131);const s=80;function r(e,t){e.style.transform=t,e.style.webkitTransform=t}function o(e){return"TouchEvent"===e.constructor.name}function a(e){return"KeyboardEvent"===e.constructor.name}const c=(e,t,n={})=>{let i=0,s=0;if(!a(e)){const n=t.getBoundingClientRect(),r=o(e)?e.touches[e.touches.length-1]:e;i=r.clientX-n.left,s=r.clientY-n.top}let r=0,c=.3;t._ripple&&t._ripple.circle?(c=.15,r=t.clientWidth/2,r=n.center?r:r+Math.sqrt((i-r)**2+(s-r)**2)/4):r=Math.sqrt(t.clientWidth**2+t.clientHeight**2)/2;const l=(t.clientWidth-2*r)/2+"px",u=(t.clientHeight-2*r)/2+"px",h=n.center?l:i-r+"px",d=n.center?u:s-r+"px";return{radius:r,scale:c,x:h,y:d,centerX:l,centerY:u}},l={show(e,t,n={}){if(!t._ripple||!t._ripple.enabled)return;const i=document.createElement("span"),s=document.createElement("span");i.appendChild(s),i.className="v-ripple__container",n.class&&(i.className+=` ${n.class}`);const{radius:o,scale:a,x:l,y:u,centerX:h,centerY:d}=c(e,t,n),p=2*o+"px";s.className="v-ripple__animation",s.style.width=p,s.style.height=p,t.appendChild(i);const f=window.getComputedStyle(t);f&&"static"===f.position&&(t.style.position="relative",t.dataset.previousPosition="static"),s.classList.add("v-ripple__animation--enter"),s.classList.add("v-ripple__animation--visible"),r(s,`translate(${l}, ${u}) scale3d(${a},${a},${a})`),s.dataset.activated=String(performance.now()),setTimeout((()=>{s.classList.remove("v-ripple__animation--enter"),s.classList.add("v-ripple__animation--in"),r(s,`translate(${h}, ${d}) scale3d(1,1,1)`)}),0)},hide(e){if(!e||!e._ripple||!e._ripple.enabled)return;const t=e.getElementsByClassName("v-ripple__animation");if(0===t.length)return;const n=t[t.length-1];if(n.dataset.isHiding)return;n.dataset.isHiding="true";const i=performance.now()-Number(n.dataset.activated),s=Math.max(250-i,0);setTimeout((()=>{n.classList.remove("v-ripple__animation--in"),n.classList.add("v-ripple__animation--out"),setTimeout((()=>{var t;const i=e.getElementsByClassName("v-ripple__animation");1===i.length&&e.dataset.previousPosition&&(e.style.position=e.dataset.previousPosition,delete e.dataset.previousPosition),(null===(t=n.parentNode)||void 0===t?void 0:t.parentNode)===e&&e.removeChild(n.parentNode)}),300)}),s)}};function u(e){return"undefined"===typeof e||!!e}function h(e){const t={},n=e.currentTarget;if(n&&n._ripple&&!n._ripple.touched&&!e.rippleStop){if(e.rippleStop=!0,o(e))n._ripple.touched=!0,n._ripple.isTouch=!0;else if(n._ripple.isTouch)return;if(t.center=n._ripple.centered||a(e),n._ripple.class&&(t.class=n._ripple.class),o(e)){if(n._ripple.showTimerCommit)return;n._ripple.showTimerCommit=()=>{l.show(e,n,t)},n._ripple.showTimer=window.setTimeout((()=>{n&&n._ripple&&n._ripple.showTimerCommit&&(n._ripple.showTimerCommit(),n._ripple.showTimerCommit=null)}),s)}else l.show(e,n,t)}}function d(e){const t=e.currentTarget;if(t&&t._ripple){if(window.clearTimeout(t._ripple.showTimer),"touchend"===e.type&&t._ripple.showTimerCommit)return t._ripple.showTimerCommit(),t._ripple.showTimerCommit=null,void(t._ripple.showTimer=setTimeout((()=>{d(e)})));window.setTimeout((()=>{t._ripple&&(t._ripple.touched=!1)})),l.hide(t)}}function p(e){const t=e.currentTarget;t&&t._ripple&&(t._ripple.showTimerCommit&&(t._ripple.showTimerCommit=null),window.clearTimeout(t._ripple.showTimer))}let f=!1;function m(e){f||e.keyCode!==i.Do.enter&&e.keyCode!==i.Do.space||(f=!0,h(e))}function g(e){f=!1,d(e)}function v(e){!0===f&&(f=!1,d(e))}function y(e,t,n){const i=u(t.value);i||l.hide(e),e._ripple=e._ripple||{},e._ripple.enabled=i;const s=t.value||{};s.center&&(e._ripple.centered=!0),s.class&&(e._ripple.class=t.value.class),s.circle&&(e._ripple.circle=s.circle),i&&!n?(e.addEventListener("touchstart",h,{passive:!0}),e.addEventListener("touchend",d,{passive:!0}),e.addEventListener("touchmove",p,{passive:!0}),e.addEventListener("touchcancel",d),e.addEventListener("mousedown",h),e.addEventListener("mouseup",d),e.addEventListener("mouseleave",d),e.addEventListener("keydown",m),e.addEventListener("keyup",g),e.addEventListener("blur",v),e.addEventListener("dragstart",d,{passive:!0})):!i&&n&&_(e)}function _(e){e.removeEventListener("mousedown",h),e.removeEventListener("touchstart",h),e.removeEventListener("touchend",d),e.removeEventListener("touchmove",p),e.removeEventListener("touchcancel",d),e.removeEventListener("mouseup",d),e.removeEventListener("mouseleave",d),e.removeEventListener("keydown",m),e.removeEventListener("keyup",g),e.removeEventListener("dragstart",d),e.removeEventListener("blur",v)}function w(e,t,n){y(e,t,!1)}function b(e){delete e._ripple,_(e)}function I(e,t){if(t.value===t.oldValue)return;const n=u(t.oldValue);y(e,t,n)}const C={bind:w,unbind:b,update:I};var S=C},8986:function(e,t,n){n.d(t,{Z:function(){return ee}});var i=n(144),s=n(8219);function r(e,t={}){if(r.installed)return;r.installed=!0,i.ZP!==e&&(0,s.N6)("Multiple instances of Vue detected\nSee https://github.com/vuetifyjs/vuetify/issues/4068\n\nIf you're seeing \"$attrs is readonly\", it's caused by this");const n=t.components||{},o=t.directives||{};for(const i in o){const t=o[i];e.directive(i,t)}(function t(n){if(n){for(const i in n){const s=n[i];s&&!t(s.$_vuetify_subcomponents)&&e.component(i,s)}return!0}return!1})(n),e.$_vuetify_installed||(e.$_vuetify_installed=!0,e.mixin({beforeCreate(){const t=this.$options;t.vuetify?(t.vuetify.init(this,this.$ssrContext),this.$vuetify=e.observable(t.vuetify.framework)):this.$vuetify=t.parent&&t.parent.$vuetify||this},beforeMount(){this.$options.vuetify&&this.$el&&this.$el.hasAttribute("data-server-rendered")&&(this.$vuetify.isHydrating=!0,this.$vuetify.breakpoint.update(!0))},mounted(){this.$options.vuetify&&this.$vuetify.isHydrating&&(this.$vuetify.isHydrating=!1,this.$vuetify.breakpoint.update())}}))}var o={badge:"Badge",close:"Close",dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},datePicker:{itemsSelected:"{0} selected",nextMonthAriaLabel:"Next month",nextYearAriaLabel:"Next year",prevMonthAriaLabel:"Previous month",prevYearAriaLabel:"Previous year"},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},timePicker:{am:"AM",pm:"PM"},pagination:{ariaLabel:{wrapper:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Goto Page {0}",currentPage:"Current Page, Page {0}"}},rating:{ariaLabel:{icon:"Rating {0} of {1}"}},loading:"Loading..."};const a={breakpoint:{mobileBreakpoint:1264,scrollBarWidth:16,thresholds:{xs:600,sm:960,md:1280,lg:1920}},icons:{iconfont:"mdi",values:{}},lang:{current:"en",locales:{en:o},t:void 0},rtl:!1,theme:{dark:!1,default:"light",disable:!1,options:{cspNonce:void 0,customProperties:void 0,minifyTheme:void 0,themeCache:void 0,variations:!0},themes:{light:{primary:"#1976D2",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},dark:{primary:"#2196F3",secondary:"#424242",accent:"#FF4081",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"}}}};var c=n(8131),l=n(4046);class u extends l.t{constructor(e,t){super();const n=(0,c.Ee)({},a),{userPreset:i}=t,{preset:r={},...o}=i;null!=r.preset&&(0,s.Kd)("Global presets do not support the **preset** option, it can be safely omitted"),t.preset=(0,c.Ee)((0,c.Ee)(n,r),o)}}u.property="presets";class h extends l.t{constructor(){super(...arguments),this.bar=0,this.top=0,this.left=0,this.insetFooter=0,this.right=0,this.bottom=0,this.footer=0,this.application={bar:{},top:{},left:{},insetFooter:{},right:{},bottom:{},footer:{}}}register(e,t,n){this.application[t][e]=n,this.update(t)}unregister(e,t){null!=this.application[t][e]&&(delete this.application[t][e],this.update(t))}update(e){this[e]=Object.values(this.application[e]).reduce(((e,t)=>e+t),0)}}h.property="application";class d extends l.t{constructor(e){super(),this.xs=!1,this.sm=!1,this.md=!1,this.lg=!1,this.xl=!1,this.xsOnly=!1,this.smOnly=!1,this.smAndDown=!1,this.smAndUp=!1,this.mdOnly=!1,this.mdAndDown=!1,this.mdAndUp=!1,this.lgOnly=!1,this.lgAndDown=!1,this.lgAndUp=!1,this.xlOnly=!1,this.name="xs",this.height=0,this.width=0,this.mobile=!0,this.resizeTimeout=0;const{mobileBreakpoint:t,scrollBarWidth:n,thresholds:i}=e[d.property];this.mobileBreakpoint=t,this.scrollBarWidth=n,this.thresholds=i}init(){this.update(),"undefined"!==typeof window&&window.addEventListener("resize",this.onResize.bind(this),{passive:!0})}update(e=!1){const t=e?0:this.getClientHeight(),n=e?0:this.getClientWidth(),i=n<this.thresholds.xs,s=n<this.thresholds.sm&&!i,r=n<this.thresholds.md-this.scrollBarWidth&&!(s||i),o=n<this.thresholds.lg-this.scrollBarWidth&&!(r||s||i),a=n>=this.thresholds.lg-this.scrollBarWidth;switch(this.height=t,this.width=n,this.xs=i,this.sm=s,this.md=r,this.lg=o,this.xl=a,this.xsOnly=i,this.smOnly=s,this.smAndDown=(i||s)&&!(r||o||a),this.smAndUp=!i&&(s||r||o||a),this.mdOnly=r,this.mdAndDown=(i||s||r)&&!(o||a),this.mdAndUp=!(i||s)&&(r||o||a),this.lgOnly=o,this.lgAndDown=(i||s||r||o)&&!a,this.lgAndUp=!(i||s||r)&&(o||a),this.xlOnly=a,!0){case i:this.name="xs";break;case s:this.name="sm";break;case r:this.name="md";break;case o:this.name="lg";break;default:this.name="xl";break}if("number"===typeof this.mobileBreakpoint)return void(this.mobile=n<parseInt(this.mobileBreakpoint,10));const c={xs:0,sm:1,md:2,lg:3,xl:4},l=c[this.name],u=c[this.mobileBreakpoint];this.mobile=l<=u}onResize(){clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(this.update.bind(this),200)}getClientWidth(){return"undefined"===typeof document?0:Math.max(document.documentElement.clientWidth,window.innerWidth||0)}getClientHeight(){return"undefined"===typeof document?0:Math.max(document.documentElement.clientHeight,window.innerHeight||0)}}d.property="breakpoint";var p=n(1922);const f={complete:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z",cancel:"M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z",close:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z",delete:"M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z",clear:"M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z",success:"M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41 10.59L10 14.17L17.59 6.58L19 8L10 17Z",info:"M13,9H11V7H13M13,17H11V11H13M12,2C6.48,2 2,6.48 2,12C2,17.52 6.48,22 12,22C17.52,22 22,17.52 22,12C22,6.48 17.52,2 12,2ZM13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",warning:"M13,13H11V7H13M13,17H11V15H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z",error:"M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z",prev:"M15.41,16.58L10.83,12L15.41,7.41L14,6L8,12L14,18L15.41,16.58Z",next:"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z",checkboxOn:"M10,17L5,12L6.41,10.58L10,14.17L17.59,6.58L19,8M19,3H5C3.89,3 3,3.89 3,5V19C3,20.1 3.9,21 5,21H19C20.1,21 21,20.1 21,19V5C21,3.89 20.1,3 19,3Z",checkboxOff:"M19,3H5C3.89,3 3,3.89 3,5V19C3,20.1 3.9,21 5,21H19C20.1,21 21,20.1 21,19V5C21,3.89 20.1,3 19,3M19,5V19H5V5H19Z",checkboxIndeterminate:"M17,13H7V11H17M19,3H5C3.89,3 3,3.89 3,5V19C3,20.1 3.9,21 5,21H19C20.1,21 21,20.1 21,19V5C21,3.89 20.1,3 19,3Z",delimiter:"M12,2C6.48,2 2,6.48 2,12C2,17.52 6.48,22 12,22C17.52,22 22,17.52 22,12C22,6.48 17.52,2 12,2Z",sort:"M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z",expand:"M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z",menu:"M3,6H21V8H3V6M3,11H21V13H3V11M3,16H21V18H3V16Z",subgroup:"M7,10L12,15L17,10H7Z",dropdown:"M7,10L12,15L17,10H7Z",radioOn:"M12,20C7.58,20 4,16.42 4,12C4,7.58 7.58,4 12,4C16.42,4 20,7.58 20,12C20,16.42 16.42,20 12,20M12,2C6.48,2 2,6.48 2,12C2,17.52 6.48,22 12,22C17.52,22 22,17.52 22,12C22,6.48 17.52,2 12,2M12,7C9.24,7 7,9.24 7,12C7,14.76 9.24,17 12,17C14.76,17 17,14.76 17,12C17,9.24 14.76,7 12,7Z",radioOff:"M12,20C7.58,20 4,16.42 4,12C4,7.58 7.58,4 12,4C16.42,4 20,7.58 20,12C20,16.42 16.42,20 12,20M12,2C6.48,2 2,6.48 2,12C2,17.52 6.48,22 12,22C17.52,22 22,17.52 22,12C22,6.48 17.52,2 12,2Z",edit:"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z",ratingEmpty:"M12,15.39L8.24,17.66L9.23,13.38L5.91,10.5L10.29,10.13L12,6.09L13.71,10.13L18.09,10.5L14.77,13.38L15.76,17.66M22,9.24L14.81,8.63L12,2L9.19,8.63L2,9.24L7.45,13.97L5.82,21L12,17.27L18.18,21L16.54,13.97L22,9.24Z",ratingFull:"M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z",ratingHalf:"M12,15.4V6.1L13.71,10.13L18.09,10.5L14.77,13.39L15.76,17.67M22,9.24L14.81,8.63L12,2L9.19,8.63L2,9.24L7.45,13.97L5.82,21L12,17.27L18.18,21L16.54,13.97L22,9.24Z",loading:"M19,8L15,12H18C18,15.31 15.31,18 12,18C11,18 10.03,17.75 9.2,17.3L7.74,18.76C8.97,19.54 10.43,20 12,20C16.42,20 20,16.42 20,12H23M6,12C6,8.69 8.69,6 12,6C13,6 13.97,6.25 14.8,6.7L16.26,5.24C15.03,4.46 13.57,4 12,4C7.58,4 4,7.58 4,12H1L5,16L9,12",first:"M18.41,16.59L13.82,12L18.41,7.41L17,6L11,12L17,18L18.41,16.59M6,6H8V18H6V6Z",last:"M5.59,7.41L10.18,12L5.59,16.59L7,18L13,12L7,6L5.59,7.41M16,6H18V18H16V6Z",unfold:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z",file:"M16.5,6V17.5C16.5,19.71 14.71,21.5 12.5,21.5C10.29,21.5 8.5,19.71 8.5,17.5V5C8.5,3.62 9.62,2.5 11,2.5C12.38,2.5 13.5,3.62 13.5,5V15.5C13.5,16.05 13.05,16.5 12.5,16.5C11.95,16.5 11.5,16.05 11.5,15.5V6H10V15.5C10,16.88 11.12,18 12.5,18C13.88,18 15,16.88 15,15.5V5C15,2.79 13.21,1 11,1C8.79,1 7,2.79 7,5V17.5C7,20.54 9.46,23 12.5,23C15.54,23 18,20.54 18,17.5V6H16.5Z",plus:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",minus:"M19,13H5V11H19V13Z"};var m=f;const g={complete:"check",cancel:"cancel",close:"close",delete:"cancel",clear:"clear",success:"check_circle",info:"info",warning:"priority_high",error:"warning",prev:"chevron_left",next:"chevron_right",checkboxOn:"check_box",checkboxOff:"check_box_outline_blank",checkboxIndeterminate:"indeterminate_check_box",delimiter:"fiber_manual_record",sort:"arrow_upward",expand:"keyboard_arrow_down",menu:"menu",subgroup:"arrow_drop_down",dropdown:"arrow_drop_down",radioOn:"radio_button_checked",radioOff:"radio_button_unchecked",edit:"edit",ratingEmpty:"star_border",ratingFull:"star",ratingHalf:"star_half",loading:"cached",first:"first_page",last:"last_page",unfold:"unfold_more",file:"attach_file",plus:"add",minus:"remove"};var v=g;const y={complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-exclamation",error:"mdi-alert",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sort:"mdi-arrow-up",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus"};var _=y;const w={complete:"fas fa-check",cancel:"fas fa-times-circle",close:"fas fa-times",delete:"fas fa-times-circle",clear:"fas fa-times-circle",success:"fas fa-check-circle",info:"fas fa-info-circle",warning:"fas fa-exclamation-circle",error:"fas fa-exclamation-triangle",prev:"fas fa-chevron-left",next:"fas fa-chevron-right",checkboxOn:"fas fa-check-square",checkboxOff:"far fa-square",checkboxIndeterminate:"fas fa-minus-square",delimiter:"fas fa-circle",sort:"fas fa-sort-up",expand:"fas fa-chevron-down",menu:"fas fa-bars",subgroup:"fas fa-caret-down",dropdown:"fas fa-caret-down",radioOn:"far fa-dot-circle",radioOff:"far fa-circle",edit:"fas fa-edit",ratingEmpty:"far fa-star",ratingFull:"fas fa-star",ratingHalf:"fas fa-star-half",loading:"fas fa-sync",first:"fas fa-step-backward",last:"fas fa-step-forward",unfold:"fas fa-arrows-alt-v",file:"fas fa-paperclip",plus:"fas fa-plus",minus:"fas fa-minus"};var b=w;const I={complete:"fa fa-check",cancel:"fa fa-times-circle",close:"fa fa-times",delete:"fa fa-times-circle",clear:"fa fa-times-circle",success:"fa fa-check-circle",info:"fa fa-info-circle",warning:"fa fa-exclamation",error:"fa fa-exclamation-triangle",prev:"fa fa-chevron-left",next:"fa fa-chevron-right",checkboxOn:"fa fa-check-square",checkboxOff:"fa fa-square-o",checkboxIndeterminate:"fa fa-minus-square",delimiter:"fa fa-circle",sort:"fa fa-sort-up",expand:"fa fa-chevron-down",menu:"fa fa-bars",subgroup:"fa fa-caret-down",dropdown:"fa fa-caret-down",radioOn:"fa fa-dot-circle-o",radioOff:"fa fa-circle-o",edit:"fa fa-pencil",ratingEmpty:"fa fa-star-o",ratingFull:"fa fa-star",ratingHalf:"fa fa-star-half-o",loading:"fa fa-refresh",first:"fa fa-step-backward",last:"fa fa-step-forward",unfold:"fa fa-angle-double-down",file:"fa fa-paperclip",plus:"fa fa-plus",minus:"fa fa-minus"};var C=I;function S(e,t){const n={};for(const i in t)n[i]={component:e,props:{icon:t[i].split(" fa-")}};return n}var T=S("font-awesome-icon",b),E=Object.freeze({mdiSvg:m,md:v,mdi:_,fa:b,fa4:C,faSvg:T});class k extends l.t{constructor(e){super();const{iconfont:t,values:n,component:i}=e[k.property];this.component=i,this.iconfont=t,this.values=(0,c.Ee)(E[t],n)}}k.property="icons";const x="$vuetify.",A=Symbol("Lang fallback");function N(e,t,n=!1,i){const r=t.replace(x,"");let o=(0,c.vO)(e,r,A);return o===A&&(n?((0,s.N6)(`Translation key "${r}" not found in fallback`),o=t):((0,s.Kd)(`Translation key "${r}" not found, falling back to default`),o=N(i,t,!0,i))),o}class O extends l.t{constructor(e){super(),this.defaultLocale="en";const{current:t,locales:n,t:i}=e[O.property];this.current=t,this.locales=n,this.translator=i||this.defaultTranslator}currentLocale(e){const t=this.locales[this.current],n=this.locales[this.defaultLocale];return N(t,e,!1,n)}t(e,...t){return e.startsWith(x)?this.translator(e,...t):this.replace(e,t)}defaultTranslator(e,...t){return this.replace(this.currentLocale(e),t)}replace(e,t){return e.replace(/\{(\d+)\}/g,((e,n)=>String(t[+n])))}}O.property="lang";var D=n(4771);const P=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],R=e=>e<=.0031308?12.92*e:1.055*e**(1/2.4)-.055,L=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],$=e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4;function M(e){const t=Array(3),n=R,i=P;for(let s=0;s<3;++s)t[s]=Math.round(255*(0,c.uZ)(n(i[s][0]*e[0]+i[s][1]*e[1]+i[s][2]*e[2])));return(t[0]<<16)+(t[1]<<8)+(t[2]<<0)}function F(e){const t=[0,0,0],n=$,i=L,s=n((e>>16&255)/255),r=n((e>>8&255)/255),o=n((e>>0&255)/255);for(let a=0;a<3;++a)t[a]=i[a][0]*s+i[a][1]*r+i[a][2]*o;return t}const V=.20689655172413793,B=e=>e>V**3?Math.cbrt(e):e/(3*V**2)+4/29,U=e=>e>V?e**3:3*V**2*(e-4/29);function j(e){const t=B,n=t(e[1]);return[116*n-16,500*(t(e[0]/.95047)-n),200*(n-t(e[2]/1.08883))]}function z(e){const t=U,n=(e[0]+16)/116;return[.95047*t(n+e[1]/500),t(n),1.08883*t(n-e[2]/200)]}function q(e,t=!1,n=!0){const{anchor:i,...s}=e,r=Object.keys(s),o={};for(let a=0;a<r.length;++a){const i=r[a],s=e[i];null!=s&&(n?t?("base"===i||i.startsWith("lighten")||i.startsWith("darken"))&&(o[i]=(0,D.hq)(s)):o[i]="object"===typeof s?q(s,!0,n):Q(i,(0,D.jx)(s)):o[i]={base:(0,D.I4)((0,D.jx)(s))})}return t||(o.anchor=i||o.base||o.primary.base),o}const H=(e,t)=>`\n.v-application .${e} {\n  background-color: ${t} !important;\n  border-color: ${t} !important;\n}\n.v-application .${e}--text {\n  color: ${t} !important;\n  caret-color: ${t} !important;\n}`,W=(e,t,n)=>{const[i,s]=t.split(/(\d)/,2);return`\n.v-application .${e}.${i}-${s} {\n  background-color: ${n} !important;\n  border-color: ${n} !important;\n}\n.v-application .${e}--text.text--${i}-${s} {\n  color: ${n} !important;\n  caret-color: ${n} !important;\n}`},Z=(e,t="base")=>`--v-${e}-${t}`,K=(e,t="base")=>`var(${Z(e,t)})`;function G(e,t=!1){const{anchor:n,...i}=e,s=Object.keys(i);if(!s.length)return"";let r="",o="";const a=t?K("anchor"):n;o+=`.v-application a { color: ${a}; }`,t&&(r+=`  ${Z("anchor")}: ${n};\n`);for(let l=0;l<s.length;++l){const n=s[l],i=e[n];o+=H(n,t?K(n):i.base),t&&(r+=`  ${Z(n)}: ${i.base};\n`);const a=(0,c.XP)(i);for(let e=0;e<a.length;++e){const s=a[e],c=i[s];"base"!==s&&(o+=W(n,s,t?K(n,s):c),t&&(r+=`  ${Z(n,s)}: ${c};\n`))}}return t&&(r=`:root {\n${r}}\n\n`),r+o}function Q(e,t){const n={base:(0,D.I4)(t)};for(let i=5;i>0;--i)n[`lighten${i}`]=(0,D.I4)(Y(t,i));for(let i=1;i<=4;++i)n[`darken${i}`]=(0,D.I4)(X(t,i));return n}function Y(e,t){const n=j(F(e));return n[0]=n[0]+10*t,M(z(n))}function X(e,t){const n=j(F(e));return n[0]=n[0]-10*t,M(z(n))}class J extends l.t{constructor(e){super(),this.disabled=!1,this.isDark=null,this.unwatch=null,this.vueMeta=null;const{dark:t,disable:n,options:i,themes:s}=e[J.property];this.dark=Boolean(t),this.defaults=this.themes=s,this.options=i,n?this.disabled=!0:this.themes={dark:this.fillVariant(s.dark,!0),light:this.fillVariant(s.light,!1)}}set css(e){this.vueMeta?this.isVueMeta23&&this.applyVueMeta23():this.checkOrCreateStyleElement()&&(this.styleEl.innerHTML=e)}set dark(e){const t=this.isDark;this.isDark=e,null!=t&&this.applyTheme()}get dark(){return Boolean(this.isDark)}applyTheme(){if(this.disabled)return this.clearCss();this.css=this.generatedStyles}clearCss(){this.css=""}init(e,t){this.disabled||(e.$meta?this.initVueMeta(e):t&&this.initSSR(t),this.initTheme(e))}setTheme(e,t){this.themes[e]=Object.assign(this.themes[e],t),this.applyTheme()}resetThemes(){this.themes.light=Object.assign({},this.defaults.light),this.themes.dark=Object.assign({},this.defaults.dark),this.applyTheme()}checkOrCreateStyleElement(){return this.styleEl=document.getElementById("vuetify-theme-stylesheet"),!!this.styleEl||(this.genStyleElement(),Boolean(this.styleEl))}fillVariant(e={},t){const n=this.themes[t?"dark":"light"];return Object.assign({},n,e)}genStyleElement(){"undefined"!==typeof document&&(this.styleEl=document.createElement("style"),this.styleEl.type="text/css",this.styleEl.id="vuetify-theme-stylesheet",this.options.cspNonce&&this.styleEl.setAttribute("nonce",this.options.cspNonce),document.head.appendChild(this.styleEl))}initVueMeta(e){if(this.vueMeta=e.$meta(),this.isVueMeta23)return void e.$nextTick((()=>{this.applyVueMeta23()}));const t="function"===typeof this.vueMeta.getOptions?this.vueMeta.getOptions().keyName:"metaInfo",n=e.$options[t]||{};e.$options[t]=()=>{n.style=n.style||[];const e=n.style.find((e=>"vuetify-theme-stylesheet"===e.id));return e?e.cssText=this.generatedStyles:n.style.push({cssText:this.generatedStyles,type:"text/css",id:"vuetify-theme-stylesheet",nonce:(this.options||{}).cspNonce}),n}}applyVueMeta23(){const{set:e}=this.vueMeta.addApp("vuetify");e({style:[{cssText:this.generatedStyles,type:"text/css",id:"vuetify-theme-stylesheet",nonce:this.options.cspNonce}]})}initSSR(e){const t=this.options.cspNonce?` nonce="${this.options.cspNonce}"`:"";e.head=e.head||"",e.head+=`<style type="text/css" id="vuetify-theme-stylesheet"${t}>${this.generatedStyles}</style>`}initTheme(e){"undefined"!==typeof document&&(this.unwatch&&(this.unwatch(),this.unwatch=null),e.$once("hook:created",(()=>{const t=i.ZP.observable({themes:this.themes});this.unwatch=e.$watch((()=>t.themes),(()=>this.applyTheme()),{deep:!0})})),this.applyTheme())}get currentTheme(){const e=this.dark?"dark":"light";return this.themes[e]}get generatedStyles(){const e=this.parsedTheme,t=this.options||{};let n;return null!=t.themeCache&&(n=t.themeCache.get(e),null!=n)||(n=G(e,t.customProperties),null!=t.minifyTheme&&(n=t.minifyTheme(n)),null!=t.themeCache&&t.themeCache.set(e,n)),n}get parsedTheme(){return q(this.currentTheme||{},void 0,(0,c.qw)(this.options,["variations"],!0))}get isVueMeta23(){return"function"===typeof this.vueMeta.addApp}}J.property="theme";class ee{constructor(e={}){this.framework={isHydrating:!1},this.installed=[],this.preset={},this.userPreset={},this.userPreset=e,this.use(u),this.use(h),this.use(d),this.use(p.A),this.use(k),this.use(O),this.use(J)}init(e,t){this.installed.forEach((n=>{const i=this.framework[n];i.framework=this.framework,i.init(e,t)})),this.framework.rtl=Boolean(this.preset.rtl)}use(e){const t=e.property;this.installed.includes(t)||(this.framework[t]=new e(this.preset,this),this.installed.push(t))}}ee.install=r,ee.installed=!1,ee.version="2.7.0",ee.config={silent:!1}},7561:function(e,t,n){var i=n(1811),s=n(4552),r=n(5530),o=n(8131),a=n(8219);const c=(0,r.Z)(i.Z,s.Z);t.Z=c.extend({name:"activatable",props:{activator:{default:null,validator:e=>["string","object"].includes(typeof e)},disabled:Boolean,internalActivator:Boolean,openOnClick:{type:Boolean,default:!0},openOnHover:Boolean,openOnFocus:Boolean},data:()=>({activatorElement:null,activatorNode:[],events:["click","mouseenter","mouseleave","focus"],listeners:{}}),watch:{activator:"resetActivator",openOnFocus:"resetActivator",openOnHover:"resetActivator"},mounted(){const e=(0,o.sp)(this,"activator",!0);e&&["v-slot","normal"].includes(e)&&(0,a.N6)('The activator slot must be bound, try \'<template v-slot:activator="{ on }"><v-btn v-on="on">\'',this),this.addActivatorEvents()},beforeDestroy(){this.removeActivatorEvents()},methods:{addActivatorEvents(){if(!this.activator||this.disabled||!this.getActivator())return;this.listeners=this.genActivatorListeners();const e=Object.keys(this.listeners);for(const t of e)this.getActivator().addEventListener(t,this.listeners[t])},genActivator(){const e=(0,o.z9)(this,"activator",Object.assign(this.getValueProxy(),{on:this.genActivatorListeners(),attrs:this.genActivatorAttributes()}))||[];return this.activatorNode=e,e},genActivatorAttributes(){return{role:this.openOnClick&&!this.openOnHover?"button":void 0,"aria-haspopup":!0,"aria-expanded":String(this.isActive)}},genActivatorListeners(){if(this.disabled)return{};const e={};return this.openOnHover?(e.mouseenter=e=>{this.getActivator(e),this.runDelay("open")},e.mouseleave=e=>{this.getActivator(e),this.runDelay("close")}):this.openOnClick&&(e.click=e=>{const t=this.getActivator(e);t&&t.focus(),e.stopPropagation(),this.isActive=!this.isActive}),this.openOnFocus&&(e.focus=e=>{this.getActivator(e),e.stopPropagation(),this.isActive=!this.isActive}),e},getActivator(e){if(this.activatorElement)return this.activatorElement;let t=null;if(this.activator){const e=this.internalActivator?this.$el:document;t="string"===typeof this.activator?e.querySelector(this.activator):this.activator.$el?this.activator.$el:this.activator}else if(1===this.activatorNode.length||this.activatorNode.length&&!e){const e=this.activatorNode[0].componentInstance;t=e&&e.$options.mixins&&e.$options.mixins.some((e=>e.options&&["activatable","menuable"].includes(e.options.name)))?e.getActivator():this.activatorNode[0].elm}else e&&(t=e.currentTarget||e.target);return this.activatorElement=(null===t||void 0===t?void 0:t.nodeType)===Node.ELEMENT_NODE?t:null,this.activatorElement},getContentSlot(){return(0,o.z9)(this,"default",this.getValueProxy(),!0)},getValueProxy(){const e=this;return{get value(){return e.isActive},set value(t){e.isActive=t}}},removeActivatorEvents(){if(!this.activator||!this.activatorElement)return;const e=Object.keys(this.listeners);for(const t of e)this.activatorElement.removeEventListener(t,this.listeners[t]);this.listeners={}},resetActivator(){this.removeActivatorEvents(),this.activatorElement=null,this.getActivator(),this.addActivatorEvents()}}})},2404:function(e,t,n){n.d(t,{Z:function(){return r}});var i=n(8747),s=n(5530);function r(e,t=[]){return(0,s.Z)((0,i.d)(["absolute","fixed"])).extend({name:"applicationable",props:{app:Boolean},computed:{applicationProperty(){return e}},watch:{app(e,t){t?this.removeApplication(!0):this.callUpdate()},applicationProperty(e,t){this.$vuetify.application.unregister(this._uid,t)}},activated(){this.callUpdate()},created(){for(let e=0,n=t.length;e<n;e++)this.$watch(t[e],this.callUpdate);this.callUpdate()},mounted(){this.callUpdate()},deactivated(){this.removeApplication()},destroyed(){this.removeApplication()},methods:{callUpdate(){this.app&&this.$vuetify.application.register(this._uid,this.applicationProperty,this.updateApplication())},removeApplication(e=!1){(e||this.app)&&this.$vuetify.application.unregister(this._uid,this.applicationProperty)},updateApplication:()=>0}})}},6141:function(e,t,n){var i=n(144);function s(e){return function(t,n){for(const i in n)Object.prototype.hasOwnProperty.call(t,i)||this.$delete(this.$data[e],i);for(const i in t)this.$set(this.$data[e],i,t[i])}}t.Z=i.ZP.extend({data:()=>({attrs$:{},listeners$:{}}),created(){this.$watch("$attrs",s("attrs$"),{immediate:!0}),this.$watch("$listeners",s("listeners$"),{immediate:!0})}})},6986:function(e,t,n){var i=n(8219),s=n(144);t.Z=s.ZP.extend().extend({name:"bootable",props:{eager:Boolean},data:()=>({isBooted:!1}),computed:{hasContent(){return this.isBooted||this.eager||this.isActive}},watch:{isActive(){this.isBooted=!0}},created(){"lazy"in this.$attrs&&(0,i.Jk)("lazy",this)},methods:{showLazyContent(e){return this.hasContent&&e?e():[this.$createElement()]}}})},5836:function(e,t,n){var i=n(144),s=n(8219),r=n(4771);t.Z=i.ZP.extend({name:"colorable",props:{color:String},methods:{setBackgroundColor(e,t={}){return"string"===typeof t.style?((0,s.N6)("style must be an object",this),t):"string"===typeof t.class?((0,s.N6)("class must be an object",this),t):((0,r.NA)(e)?t.style={...t.style,"background-color":`${e}`,"border-color":`${e}`}:e&&(t.class={...t.class,[e]:!0}),t)},setTextColor(e,t={}){if("string"===typeof t.style)return(0,s.N6)("style must be an object",this),t;if("string"===typeof t.class)return(0,s.N6)("class must be an object",this),t;if((0,r.NA)(e))t.style={...t.style,color:`${e}`,"caret-color":`${e}`};else if(e){const[n,i]=e.toString().trim().split(" ",2);t.class={...t.class,[n+"--text"]:!0},i&&(t.class["text--"+i]=!0)}return t}}})},8789:function(e,t,n){var i=n(144),s=n(8131);t.Z=i.ZP.extend({name:"comparable",props:{valueComparator:{type:Function,default:s.vZ}}})},1811:function(e,t,n){var i=n(144);t.Z=i.ZP.extend().extend({name:"delayable",props:{openDelay:{type:[Number,String],default:0},closeDelay:{type:[Number,String],default:0}},data:()=>({openTimeout:void 0,closeTimeout:void 0}),methods:{clearDelay(){clearTimeout(this.openTimeout),clearTimeout(this.closeTimeout)},runDelay(e,t){this.clearDelay();const n=parseInt(this[`${e}Delay`],10);this[`${e}Timeout`]=setTimeout(t||(()=>{this.isActive={open:!0,close:!1}[e]}),n)}}})},4665:function(e,t,n){var i=n(5530);function s(e){const t=[];for(let n=0;n<e.length;n++){const i=e[n];i.isActive&&i.isDependent?t.push(i):t.push(...s(i.$children))}return t}t.Z=(0,i.Z)().extend({name:"dependent",data(){return{closeDependents:!0,isActive:!1,isDependent:!0}},watch:{isActive(e){if(e)return;const t=this.getOpenDependents();for(let n=0;n<t.length;n++)t[n].isActive=!1}},methods:{getOpenDependents(){return this.closeDependents?s(this.$children):[]},getOpenDependentElements(){const e=[],t=this.getOpenDependents();for(let n=0;n<t.length;n++)e.push(...t[n].getClickableDependentElements());return e},getClickableDependentElements(){const e=[this.$el];return this.$refs.content&&e.push(this.$refs.content),this.overlay&&e.push(this.overlay.$el),e.push(...this.getOpenDependentElements()),e}}})},9556:function(e,t,n){var i=n(6986),s=n(8131),r=n(5530),o=n(8219);function a(e){const t=typeof e;return"boolean"===t||"string"===t||e.nodeType===Node.ELEMENT_NODE}function c(e){e.forEach((e=>{e.elm&&e.elm.parentNode&&e.elm.parentNode.removeChild(e.elm)}))}t.Z=(0,r.Z)(i.Z).extend({name:"detachable",props:{attach:{default:!1,validator:a},contentClass:{type:String,default:""}},data:()=>({activatorNode:null,hasDetached:!1}),watch:{attach(){this.hasDetached=!1,this.initDetach()},hasContent(){this.$nextTick(this.initDetach)}},beforeMount(){this.$nextTick((()=>{if(this.activatorNode){const e=Array.isArray(this.activatorNode)?this.activatorNode:[this.activatorNode];e.forEach((e=>{if(!e.elm)return;if(!this.$el.parentNode)return;const t=this.$el===this.$el.parentNode.firstChild?this.$el:this.$el.nextSibling;this.$el.parentNode.insertBefore(e.elm,t)}))}}))},mounted(){this.hasContent&&this.initDetach()},deactivated(){this.isActive=!1},beforeDestroy(){this.$refs.content&&this.$refs.content.parentNode&&this.$refs.content.parentNode.removeChild(this.$refs.content)},destroyed(){if(this.activatorNode){const e=Array.isArray(this.activatorNode)?this.activatorNode:[this.activatorNode];if(this.$el.isConnected){const t=new MutationObserver((n=>{n.some((e=>Array.from(e.removedNodes).includes(this.$el)))&&(t.disconnect(),c(e))}));t.observe(this.$el.parentNode,{subtree:!1,childList:!0})}else c(e)}},methods:{getScopeIdAttrs(){const e=(0,s.vO)(this.$vnode,"context.$options._scopeId");return e&&{[e]:""}},initDetach(){if(this._isDestroyed||!this.$refs.content||this.hasDetached||""===this.attach||!0===this.attach||"attach"===this.attach)return;let e;e=!1===this.attach?document.querySelector("[data-app]"):"string"===typeof this.attach?document.querySelector(this.attach):this.attach,e?(e.appendChild(this.$refs.content),this.hasDetached=!0):(0,o.Kd)(`Unable to locate target ${this.attach||"[data-app]"}`,this)}}})},8427:function(e,t,n){var i=n(144);t.Z=i.ZP.extend({name:"elevatable",props:{elevation:[Number,String]},computed:{computedElevation(){return this.elevation},elevationClasses(){const e=this.computedElevation;return null==e||isNaN(parseInt(e))?{}:{[`elevation-${this.elevation}`]:!0}}}})},1302:function(e,t,n){n.d(t,{d:function(){return s}});var i=n(950);function s(e,t,n){return(0,i.f)(e,t,n).extend({name:"groupable",props:{activeClass:{type:String,default(){if(this[e])return this[e].activeClass}},disabled:Boolean},data(){return{isActive:!1}},computed:{groupClasses(){return this.activeClass?{[this.activeClass]:this.isActive}:{}}},created(){this[e]&&this[e].register(this)},beforeDestroy(){this[e]&&this[e].unregister(this)},methods:{toggle(e){this.disabled&&e?e.preventDefault():this.$emit("change")}}})}s("itemGroup")},9799:function(e,t,n){n.d(t,{Z:function(){return m}});var i=n(144),s=n(6930),r=n(7006),o=n(5836),a=n(8747),c=n(7779),l=n(2066),u=n(8131),h=n(5530);const d=(0,h.Z)(o.Z,(0,a.d)(["absolute","fixed","top","bottom"]),c.Z,l.Z);var p=d.extend({name:"v-progress-linear",directives:{intersect:r.Z},props:{active:{type:Boolean,default:!0},backgroundColor:{type:String,default:null},backgroundOpacity:{type:[Number,String],default:null},bufferValue:{type:[Number,String],default:100},color:{type:String,default:"primary"},height:{type:[Number,String],default:4},indeterminate:Boolean,query:Boolean,reverse:Boolean,rounded:Boolean,stream:Boolean,striped:Boolean,value:{type:[Number,String],default:0}},data(){return{internalLazyValue:this.value||0,isVisible:!0}},computed:{__cachedBackground(){return this.$createElement("div",this.setBackgroundColor(this.backgroundColor||this.color,{staticClass:"v-progress-linear__background",style:this.backgroundStyle}))},__cachedBar(){return this.$createElement(this.computedTransition,[this.__cachedBarType])},__cachedBarType(){return this.indeterminate?this.__cachedIndeterminate:this.__cachedDeterminate},__cachedBuffer(){return this.$createElement("div",{staticClass:"v-progress-linear__buffer",style:this.styles})},__cachedDeterminate(){return this.$createElement("div",this.setBackgroundColor(this.color,{staticClass:"v-progress-linear__determinate",style:{width:(0,u.kb)(this.normalizedValue,"%")}}))},__cachedIndeterminate(){return this.$createElement("div",{staticClass:"v-progress-linear__indeterminate",class:{"v-progress-linear__indeterminate--active":this.active}},[this.genProgressBar("long"),this.genProgressBar("short")])},__cachedStream(){return this.stream?this.$createElement("div",this.setTextColor(this.color,{staticClass:"v-progress-linear__stream",style:{width:(0,u.kb)(100-this.normalizedBuffer,"%")}})):null},backgroundStyle(){const e=null==this.backgroundOpacity?this.backgroundColor?1:.3:parseFloat(this.backgroundOpacity);return{opacity:e,[this.isReversed?"right":"left"]:(0,u.kb)(this.normalizedValue,"%"),width:(0,u.kb)(Math.max(0,this.normalizedBuffer-this.normalizedValue),"%")}},classes(){return{"v-progress-linear--absolute":this.absolute,"v-progress-linear--fixed":this.fixed,"v-progress-linear--query":this.query,"v-progress-linear--reactive":this.reactive,"v-progress-linear--reverse":this.isReversed,"v-progress-linear--rounded":this.rounded,"v-progress-linear--striped":this.striped,"v-progress-linear--visible":this.isVisible,...this.themeClasses}},computedTransition(){return this.indeterminate?s.Z5:s.Qn},isReversed(){return this.$vuetify.rtl!==this.reverse},normalizedBuffer(){return this.normalize(this.bufferValue)},normalizedValue(){return this.normalize(this.internalLazyValue)},reactive(){return Boolean(this.$listeners.change)},styles(){const e={};return this.active||(e.height=0),this.indeterminate||100===parseFloat(this.normalizedBuffer)||(e.width=(0,u.kb)(this.normalizedBuffer,"%")),e}},methods:{genContent(){const e=(0,u.z9)(this,"default",{value:this.internalLazyValue});return e?this.$createElement("div",{staticClass:"v-progress-linear__content"},e):null},genListeners(){const e=this.$listeners;return this.reactive&&(e.click=this.onClick),e},genProgressBar(e){return this.$createElement("div",this.setBackgroundColor(this.color,{staticClass:"v-progress-linear__indeterminate",class:{[e]:!0}}))},onClick(e){if(!this.reactive)return;const{width:t}=this.$el.getBoundingClientRect();this.internalValue=e.offsetX/t*100},onObserve(e,t,n){this.isVisible=n},normalize(e){return e<0?0:e>100?100:parseFloat(e)}},render(e){const t={staticClass:"v-progress-linear",attrs:{role:"progressbar","aria-valuemin":0,"aria-valuemax":this.normalizedBuffer,"aria-valuenow":this.indeterminate?void 0:this.normalizedValue},class:this.classes,directives:[{name:"intersect",value:this.onObserve}],style:{bottom:this.bottom?0:void 0,height:this.active?(0,u.kb)(this.height):0,top:this.top?0:void 0},on:this.genListeners()};return e("div",t,[this.__cachedStream,this.__cachedBackground,this.__cachedBuffer,this.__cachedBar,this.genContent()])}}),f=p,m=i.ZP.extend().extend({name:"loadable",props:{loading:{type:[Boolean,String],default:!1},loaderHeight:{type:[Number,String],default:2}},methods:{genProgress(){return!1===this.loading?null:this.$slots.progress||this.$createElement(f,{props:{absolute:!0,color:!0===this.loading||""===this.loading?this.color||"primary":this.loading,height:this.loaderHeight,indeterminate:!0}})}}})},9548:function(e,t,n){var i=n(8131),s=n(144);t.Z=s.ZP.extend({name:"measurable",props:{height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},computed:{measurableStyles(){const e={},t=(0,i.kb)(this.height),n=(0,i.kb)(this.minHeight),s=(0,i.kb)(this.minWidth),r=(0,i.kb)(this.maxHeight),o=(0,i.kb)(this.maxWidth),a=(0,i.kb)(this.width);return t&&(e.height=t),n&&(e.minHeight=n),s&&(e.minWidth=s),r&&(e.maxHeight=r),o&&(e.maxWidth=o),a&&(e.width=a),e}}})},9989:function(e,t,n){var i=n(8219),s=n(144);t.Z=s.ZP.extend({name:"mobile",props:{mobileBreakpoint:{type:[Number,String],default(){return this.$vuetify?this.$vuetify.breakpoint.mobileBreakpoint:void 0},validator:e=>!isNaN(Number(e))||["xs","sm","md","lg","xl"].includes(String(e))}},computed:{isMobile(){const{mobile:e,width:t,name:n,mobileBreakpoint:i}=this.$vuetify.breakpoint;if(i===this.mobileBreakpoint)return e;const s=parseInt(this.mobileBreakpoint,10),r=!isNaN(s);return r?t<s:n===this.mobileBreakpoint}},created(){this.$attrs.hasOwnProperty("mobile-break-point")&&(0,i.Rn)("mobile-break-point","mobile-breakpoint",this)}})},8605:function(e,t,n){n.d(t,{Z:function(){return h}});var i=n(5836),s=n(2066),r=n(4552),o=n(5530),a=(0,o.Z)(i.Z,s.Z,r.Z).extend({name:"v-overlay",props:{absolute:Boolean,color:{type:String,default:"#212121"},dark:{type:Boolean,default:!0},opacity:{type:[Number,String],default:.46},value:{default:!0},zIndex:{type:[Number,String],default:5}},computed:{__scrim(){const e=this.setBackgroundColor(this.color,{staticClass:"v-overlay__scrim",style:{opacity:this.computedOpacity}});return this.$createElement("div",e)},classes(){return{"v-overlay--absolute":this.absolute,"v-overlay--active":this.isActive,...this.themeClasses}},computedOpacity(){return Number(this.isActive?this.opacity:0)},styles(){return{zIndex:this.zIndex}}},methods:{genContent(){return this.$createElement("div",{staticClass:"v-overlay__content"},this.$slots.default)}},render(e){const t=[this.__scrim];return this.isActive&&t.push(this.genContent()),e("div",{staticClass:"v-overlay",on:this.$listeners,class:this.classes,style:this.styles},t)}}),c=a,l=n(8131),u=n(144),h=u.ZP.extend().extend({name:"overlayable",props:{hideOverlay:Boolean,overlayColor:String,overlayOpacity:[Number,String]},data(){return{animationFrame:0,overlay:null}},watch:{hideOverlay(e){this.isActive&&(e?this.removeOverlay():this.genOverlay())}},beforeDestroy(){this.removeOverlay()},methods:{createOverlay(){const e=new c({propsData:{absolute:this.absolute,value:!1,color:this.overlayColor,opacity:this.overlayOpacity}});e.$mount();const t=this.absolute?this.$el.parentNode:document.querySelector("[data-app]");t&&t.insertBefore(e.$el,t.firstChild),this.overlay=e},genOverlay(){if(this.hideScroll(),!this.hideOverlay)return this.overlay||this.createOverlay(),this.animationFrame=requestAnimationFrame((()=>{this.overlay&&(void 0!==this.activeZIndex?this.overlay.zIndex=String(this.activeZIndex-1):this.$el&&(this.overlay.zIndex=(0,l.KK)(this.$el)),this.overlay.value=!0)})),!0},removeOverlay(e=!0){this.overlay&&((0,l.qh)(this.overlay.$el,"transitionend",(()=>{this.overlay&&this.overlay.$el&&this.overlay.$el.parentNode&&!this.overlay.value&&!this.isActive&&(this.overlay.$el.parentNode.removeChild(this.overlay.$el),this.overlay.$destroy(),this.overlay=null)})),cancelAnimationFrame(this.animationFrame),this.overlay.value=!1),e&&this.showScroll()},scrollListener(e){if("key"in e){if(["INPUT","TEXTAREA","SELECT"].includes(e.target.tagName)||e.target.isContentEditable)return;const t=[l.Do.up,l.Do.pageup],n=[l.Do.down,l.Do.pagedown];if(t.includes(e.keyCode))e.deltaY=-1;else{if(!n.includes(e.keyCode))return;e.deltaY=1}}(e.target===this.overlay||"keydown"!==e.type&&e.target===document.body||this.checkPath(e))&&e.preventDefault()},hasScrollbar(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e);return(["auto","scroll"].includes(t.overflowY)||"SELECT"===e.tagName)&&e.scrollHeight>e.clientHeight||["auto","scroll"].includes(t.overflowX)&&e.scrollWidth>e.clientWidth},shouldScroll(e,t){if(e.hasAttribute("data-app"))return!1;const n=t.shiftKey||t.deltaX?"x":"y",i="y"===n?t.deltaY:t.deltaX||t.deltaY;let s,r;"y"===n?(s=0===e.scrollTop,r=e.scrollTop+e.clientHeight===e.scrollHeight):(s=0===e.scrollLeft,r=e.scrollLeft+e.clientWidth===e.scrollWidth);const o=i<0,a=i>0;return!(s||!o)||(!(r||!a)||!(!s&&!r||!e.parentNode)&&this.shouldScroll(e.parentNode,t))},isInside(e,t){return e===t||null!==e&&e!==document.body&&this.isInside(e.parentNode,t)},checkPath(e){const t=(0,l.iZ)(e);if("keydown"===e.type&&t[0]===document.body){const t=this.$refs.dialog,n=window.getSelection().anchorNode;return!(t&&this.hasScrollbar(t)&&this.isInside(n,t))||!this.shouldScroll(t,e)}for(let n=0;n<t.length;n++){const i=t[n];if(i===document)return!0;if(i===document.documentElement)return!0;if(i===this.$refs.content)return!0;if(this.hasScrollbar(i))return!this.shouldScroll(i,e)}return!0},hideScroll(){this.$vuetify.breakpoint.smAndDown?document.documentElement.classList.add("overflow-y-hidden"):((0,l.lj)(window,"wheel",this.scrollListener,{passive:!1}),window.addEventListener("keydown",this.scrollListener))},showScroll(){document.documentElement.classList.remove("overflow-y-hidden"),window.removeEventListener("wheel",this.scrollListener),window.removeEventListener("keydown",this.scrollListener)}}})},8747:function(e,t,n){n.d(t,{d:function(){return o}});var i=n(144),s=n(8131);const r={absolute:Boolean,bottom:Boolean,fixed:Boolean,left:Boolean,right:Boolean,top:Boolean};function o(e=[]){return i.ZP.extend({name:"positionable",props:e.length?(0,s.ji)(r,e):r})}t.Z=o()},7779:function(e,t,n){var i=n(144);function s(e="value",t="change"){return i.ZP.extend({name:"proxyable",model:{prop:e,event:t},props:{[e]:{required:!1}},data(){return{internalLazyValue:this[e]}},computed:{internalValue:{get(){return this.internalLazyValue},set(e){e!==this.internalLazyValue&&(this.internalLazyValue=e,this.$emit(t,e))}}},watch:{[e](e){this.internalLazyValue=e}}})}const r=s();t.Z=r},950:function(e,t,n){n.d(t,{J:function(){return a},f:function(){return o}});var i=n(144),s=n(8219);function r(e,t){return()=>(0,s.Kd)(`The ${e} component must be used inside a ${t}`)}function o(e,t,n){const s=t&&n?{register:r(t,n),unregister:r(t,n)}:null;return i.ZP.extend({name:"registrable-inject",inject:{[e]:{default:s}}})}function a(e,t=!1){return i.ZP.extend({name:"registrable-provide",provide(){return{[e]:t?this:{register:this.register,unregister:this.unregister}}}})}},2893:function(e,t,n){var i=n(144);t.Z=i.ZP.extend({name:"returnable",props:{returnValue:null},data:()=>({isActive:!1,originalValue:null}),watch:{isActive(e){e?this.originalValue=this.returnValue:this.$emit("update:return-value",this.originalValue)}},methods:{save(e){this.originalValue=e,setTimeout((()=>{this.isActive=!1}))}}})},5357:function(e,t,n){var i=n(144);t.Z=i.ZP.extend({name:"roundable",props:{rounded:[Boolean,String],tile:Boolean},computed:{roundedClasses(){const e=[],t="string"===typeof this.rounded?String(this.rounded):!0===this.rounded;if(this.tile)e.push("rounded-0");else if("string"===typeof t){const n=t.split(" ");for(const t of n)e.push(`rounded-${t}`)}else t&&e.push("rounded");return e.length>0?{[e.join(" ")]:!0}:{}}}})},9367:function(e,t,n){var i=n(144),s=n(293),r=n(8131);t.Z=i.ZP.extend({name:"routable",directives:{Ripple:s.Z},props:{activeClass:String,append:Boolean,disabled:Boolean,exact:{type:Boolean,default:void 0},exactPath:Boolean,exactActiveClass:String,link:Boolean,href:[String,Object],to:[String,Object],nuxt:Boolean,replace:Boolean,ripple:{type:[Boolean,Object],default:null},tag:String,target:String},data:()=>({isActive:!1,proxyClass:""}),computed:{classes(){const e={};return this.to||(this.activeClass&&(e[this.activeClass]=this.isActive),this.proxyClass&&(e[this.proxyClass]=this.isActive)),e},computedRipple(){var e;return null!==(e=this.ripple)&&void 0!==e?e:!this.disabled&&this.isClickable},isClickable(){return!this.disabled&&Boolean(this.isLink||this.$listeners.click||this.$listeners["!click"]||this.$attrs.tabindex)},isLink(){return this.to||this.href||this.link},styles:()=>({})},watch:{$route:"onRouteChange"},mounted(){this.onRouteChange()},methods:{generateRouteLink(){let e,t=this.exact;const n={attrs:{tabindex:"tabindex"in this.$attrs?this.$attrs.tabindex:void 0},class:this.classes,style:this.styles,props:{},directives:[{name:"ripple",value:this.computedRipple}],[this.to?"nativeOn":"on"]:{...this.$listeners,..."click"in this?{click:this.click}:void 0},ref:"link"};if("undefined"===typeof this.exact&&(t="/"===this.to||this.to===Object(this.to)&&"/"===this.to.path),this.to){let i=this.activeClass,s=this.exactActiveClass||i;this.proxyClass&&(i=`${i} ${this.proxyClass}`.trim(),s=`${s} ${this.proxyClass}`.trim()),e=this.nuxt?"nuxt-link":"router-link",Object.assign(n.props,{to:this.to,exact:t,exactPath:this.exactPath,activeClass:i,exactActiveClass:s,append:this.append,replace:this.replace})}else e=(this.href?"a":this.tag)||"div","a"===e&&this.href&&(n.attrs.href=this.href);return this.target&&(n.attrs.target=this.target),{tag:e,data:n}},onRouteChange(){if(!this.to||!this.$refs.link||!this.$route)return;const e=`${this.activeClass||""} ${this.proxyClass||""}`.trim(),t=`${this.exactActiveClass||""} ${this.proxyClass||""}`.trim()||e,n="_vnode.data.class."+(this.exact?t:e);this.$nextTick((()=>{!(0,r.vO)(this.$refs.link,n)===this.isActive&&this.toggle()}))},toggle(){this.isActive=!this.isActive}}})},2412:function(e,t,n){var i=n(144);t.Z=i.ZP.extend({name:"sizeable",props:{large:Boolean,small:Boolean,xLarge:Boolean,xSmall:Boolean},computed:{medium(){return Boolean(!this.xSmall&&!this.small&&!this.large&&!this.xLarge)},sizeableClasses(){return{"v-size--x-small":this.xSmall,"v-size--small":this.small,"v-size--default":this.medium,"v-size--large":this.large,"v-size--x-large":this.xLarge}}}})},8191:function(e,t,n){var i=n(144);t.Z=i.ZP.extend({name:"ssr-bootable",data:()=>({isBooted:!1}),mounted(){window.requestAnimationFrame((()=>{this.$el.setAttribute("data-booted","true"),this.isBooted=!0}))}})},2389:function(e,t,n){var i=n(144),s=n(8131);t.Z=i.ZP.extend().extend({name:"stackable",data(){return{stackElement:null,stackExclude:null,stackMinZIndex:0,isActive:!1}},computed:{activeZIndex(){if("undefined"===typeof window)return 0;const e=this.stackElement||this.$refs.content,t=this.isActive?this.getMaxZIndex(this.stackExclude||[e])+2:(0,s.KK)(e);return null==t?t:parseInt(t)}},methods:{getMaxZIndex(e=[]){const t=this.$el,n=[this.stackMinZIndex,(0,s.KK)(t)],i=[...document.getElementsByClassName("v-menu__content--active"),...document.getElementsByClassName("v-dialog__content--active")];for(let r=0;r<i.length;r++)e.includes(i[r])||n.push((0,s.KK)(i[r]));return Math.max(...n)}}})},2066:function(e,t,n){n.d(t,{X:function(){return r}});var i=n(144);const s=i.ZP.extend().extend({name:"themeable",provide(){return{theme:this.themeableProvide}},inject:{theme:{default:{isDark:!1}}},props:{dark:{type:Boolean,default:null},light:{type:Boolean,default:null}},data(){return{themeableProvide:{isDark:!1}}},computed:{appIsDark(){return this.$vuetify.theme.dark||!1},isDark(){return!0===this.dark||!0!==this.light&&this.theme.isDark},themeClasses(){return{"theme--dark":this.isDark,"theme--light":!this.isDark}},rootIsDark(){return!0===this.dark||!0!==this.light&&this.appIsDark},rootThemeClasses(){return{"theme--dark":this.rootIsDark,"theme--light":!this.rootIsDark}}},watch:{isDark:{handler(e,t){e!==t&&(this.themeableProvide.isDark=this.isDark)},immediate:!0}}});function r(e){const t={...e.props,...e.injections},n=s.options.computed.isDark.call(t);return s.options.computed.themeClasses.call({isDark:n})}t.Z=s},4552:function(e,t,n){n.d(t,{d:function(){return s}});var i=n(144);function s(e="value",t="input"){return i.ZP.extend({name:"toggleable",model:{prop:e,event:t},props:{[e]:{required:!1}},data(){return{isActive:!!this[e]}},watch:{[e](e){this.isActive=!!e},isActive(n){!!n!==this[e]&&this.$emit(t,n)}}})}const r=s();t.Z=r},371:function(e,t,n){var i=n(5836),s=n(2066),r=n(950),o=n(8131),a=n(8219),c=n(5530);const l=(0,c.Z)(i.Z,(0,r.f)("form"),s.Z);t.Z=l.extend({name:"validatable",props:{disabled:{type:Boolean,default:null},error:Boolean,errorCount:{type:[Number,String],default:1},errorMessages:{type:[String,Array],default:()=>[]},messages:{type:[String,Array],default:()=>[]},readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},success:Boolean,successMessages:{type:[String,Array],default:()=>[]},validateOnBlur:Boolean,value:{required:!1}},data(){return{errorBucket:[],hasColor:!1,hasFocused:!1,hasInput:!1,isFocused:!1,isResetting:!1,lazyValue:this.value,valid:!1}},computed:{computedColor(){if(!this.isDisabled)return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"},hasError(){return this.internalErrorMessages.length>0||this.errorBucket.length>0||this.error},hasSuccess(){return this.internalSuccessMessages.length>0||this.success},externalError(){return this.internalErrorMessages.length>0||this.error},hasMessages(){return this.validationTarget.length>0},hasState(){return!this.isDisabled&&(this.hasSuccess||this.shouldValidate&&this.hasError)},internalErrorMessages(){return this.genInternalMessages(this.errorMessages)},internalMessages(){return this.genInternalMessages(this.messages)},internalSuccessMessages(){return this.genInternalMessages(this.successMessages)},internalValue:{get(){return this.lazyValue},set(e){this.lazyValue=e,this.$emit("input",e)}},isDisabled(){var e;return null!==(e=this.disabled)&&void 0!==e?e:!!this.form&&this.form.disabled},isInteractive(){return!this.isDisabled&&!this.isReadonly},isReadonly(){var e;return null!==(e=this.readonly)&&void 0!==e?e:!!this.form&&this.form.readonly},shouldValidate(){return!!this.externalError||!this.isResetting&&(this.validateOnBlur?this.hasFocused&&!this.isFocused:this.hasInput||this.hasFocused)},validations(){return this.validationTarget.slice(0,Number(this.errorCount))},validationState(){if(!this.isDisabled)return this.hasError&&this.shouldValidate?"error":this.hasSuccess?"success":this.hasColor?this.computedColor:void 0},validationTarget(){return this.internalErrorMessages.length>0?this.internalErrorMessages:this.successMessages&&this.successMessages.length>0?this.internalSuccessMessages:this.messages&&this.messages.length>0?this.internalMessages:this.shouldValidate?this.errorBucket:[]}},watch:{rules:{handler(e,t){(0,o.vZ)(e,t)||this.validate()},deep:!0},internalValue(){this.hasInput=!0,this.validateOnBlur||this.$nextTick(this.validate)},isFocused(e){e||this.isDisabled||(this.hasFocused=!0,this.validateOnBlur&&this.$nextTick(this.validate))},isResetting(){setTimeout((()=>{this.hasInput=!1,this.hasFocused=!1,this.isResetting=!1,this.validate()}),0)},hasError(e){this.shouldValidate&&this.$emit("update:error",e)},value(e){this.lazyValue=e}},beforeMount(){this.validate()},created(){this.form&&this.form.register(this)},beforeDestroy(){this.form&&this.form.unregister(this)},methods:{genInternalMessages(e){return e?Array.isArray(e)?e:[e]:[]},reset(){this.isResetting=!0,this.internalValue=Array.isArray(this.internalValue)?[]:null},resetValidation(){this.isResetting=!0},validate(e=!1,t){const n=[];t=t||this.internalValue,e&&(this.hasInput=this.hasFocused=!0);for(let i=0;i<this.rules.length;i++){const e=this.rules[i],s="function"===typeof e?e(t):e;!1===s||"string"===typeof s?n.push(s||""):"boolean"!==typeof s&&(0,a.N6)(`Rules should return a string or boolean, received '${typeof s}' instead`,this)}return this.errorBucket=n,this.valid=0===n.length,this.valid}}})},1922:function(e,t,n){n.d(t,{A:function(){return C},Z:function(){return I}});var i={};n.r(i),n.d(i,{easeInCubic:function(){return l},easeInOutCubic:function(){return h},easeInOutQuad:function(){return c},easeInOutQuart:function(){return f},easeInOutQuint:function(){return v},easeInQuad:function(){return o},easeInQuart:function(){return d},easeInQuint:function(){return m},easeOutCubic:function(){return u},easeOutQuad:function(){return a},easeOutQuart:function(){return p},easeOutQuint:function(){return g},linear:function(){return r}});var s=n(4046);const r=e=>e,o=e=>e**2,a=e=>e*(2-e),c=e=>e<.5?2*e**2:(4-2*e)*e-1,l=e=>e**3,u=e=>--e**3+1,h=e=>e<.5?4*e**3:(e-1)*(2*e-2)*(2*e-2)+1,d=e=>e**4,p=e=>1- --e**4,f=e=>e<.5?8*e*e*e*e:1-8*--e*e*e*e,m=e=>e**5,g=e=>1+--e**5,v=e=>e<.5?16*e**5:1+16*--e**5;function y(e){if("number"===typeof e)return e;let t=b(e);if(!t)throw"string"===typeof e?new Error(`Target element "${e}" not found.`):new TypeError(`Target must be a Number/Selector/HTMLElement/VueComponent, received ${w(e)} instead.`);let n=0;while(t)n+=t.offsetTop,t=t.offsetParent;return n}function _(e){const t=b(e);if(t)return t;throw"string"===typeof e?new Error(`Container element "${e}" not found.`):new TypeError(`Container must be a Selector/HTMLElement/VueComponent, received ${w(e)} instead.`)}function w(e){return null==e?e:e.constructor.name}function b(e){return"string"===typeof e?document.querySelector(e):e&&e._isVue?e.$el:e instanceof HTMLElement?e:null}function I(e,t={}){const n={container:document.scrollingElement||document.body||document.documentElement,duration:500,offset:0,easing:"easeInOutCubic",appOffset:!0,...t},s=_(n.container);if(n.appOffset&&I.framework.application){const e=s.classList.contains("v-navigation-drawer"),t=s.classList.contains("v-navigation-drawer--clipped"),{bar:i,top:r}=I.framework.application;n.offset+=i,e&&!t||(n.offset+=r)}const r=performance.now();let o;o="number"===typeof e?y(e)-n.offset:y(e)-y(s)-n.offset;const a=s.scrollTop;if(o===a)return Promise.resolve(o);const c="function"===typeof n.easing?n.easing:i[n.easing];if(!c)throw new TypeError(`Easing function "${n.easing}" not found.`);return new Promise((e=>requestAnimationFrame((function t(i){const l=i-r,u=Math.abs(n.duration?Math.min(l/n.duration,1):1);s.scrollTop=Math.floor(a+(o-a)*c(u));const h=s===document.body?document.documentElement.clientHeight:s.clientHeight,d=h+s.scrollTop>=s.scrollHeight;if(1===u||o>s.scrollTop&&d)return e(o);requestAnimationFrame(t)}))))}I.framework={},I.init=()=>{};class C extends s.t{constructor(){return super(),I}}C.property="goTo"},4046:function(e,t,n){n.d(t,{t:function(){return i}});class i{constructor(){this.framework={}}init(e,t){}}},4771:function(e,t,n){n.d(t,{I4:function(){return o},NA:function(){return s},hq:function(){return a},jx:function(){return r}});var i=n(8219);function s(e){return!!e&&!!e.match(/^(#|var\(--|(rgb|hsl)a?\()/)}function r(e){let t;if("number"===typeof e)t=e;else{if("string"!==typeof e)throw new TypeError(`Colors can only be numbers or strings, recieved ${null==e?e:e.constructor.name} instead`);{let n="#"===e[0]?e.substring(1):e;3===n.length&&(n=n.split("").map((e=>e+e)).join("")),6!==n.length&&(0,i.Kd)(`'${e}' is not a valid rgb color`),t=parseInt(n,16)}}return t<0?((0,i.Kd)(`Colors cannot be negative: '${e}'`),t=0):(t>16777215||isNaN(t))&&((0,i.Kd)(`'${e}' is not a valid rgb color`),t=16777215),t}function o(e){let t=e.toString(16);return t.length<6&&(t="0".repeat(6-t.length)+t),"#"+t}function a(e){return o(r(e))}},8219:function(e,t,n){n.d(t,{Jk:function(){return l},Kd:function(){return r},N6:function(){return o},Rn:function(){return a},fK:function(){return c}});var i=n(8986);function s(e,t,n){if(!i.Z.config.silent){if(n&&(t={_isVue:!0,$parent:n,$options:t}),t){if(t.$_alreadyWarned=t.$_alreadyWarned||[],t.$_alreadyWarned.includes(e))return;t.$_alreadyWarned.push(e)}return`[Vuetify] ${e}`+(t?p(t):"")}}function r(e,t,n){const i=s(e,t,n);null!=i&&console.warn(i)}function o(e,t,n){const i=s(e,t,n);null!=i&&console.error(i)}function a(e,t,n,i){r(`[UPGRADE] '${e}' is deprecated, use '${t}' instead.`,n,i)}function c(e,t,n,i){o(`[BREAKING] '${e}' has been removed, use '${t}' instead. For more information, see the upgrade guide https://github.com/vuetifyjs/vuetify/releases/tag/v2.0.0#user-content-upgrade-guide`,n,i)}function l(e,t,n){r(`[REMOVED] '${e}' has been removed. You can safely omit it.`,t,n)}const u=/(?:^|[-_])(\w)/g,h=e=>e.replace(u,(e=>e.toUpperCase())).replace(/[-_]/g,"");function d(e,t){if(e.$root===e)return"<Root>";const n="function"===typeof e&&null!=e.cid?e.options:e._isVue?e.$options||e.constructor.options:e||{};let i=n.name||n._componentTag;const s=n.__file;if(!i&&s){const e=s.match(/([^/\\]+)\.vue$/);i=e&&e[1]}return(i?`<${h(i)}>`:"<Anonymous>")+(s&&!1!==t?` at ${s}`:"")}function p(e){if(e._isVue&&e.$parent){const t=[];let n=0;while(e){if(t.length>0){const i=t[t.length-1];if(i.constructor===e.constructor){n++,e=e.$parent;continue}n>0&&(t[t.length-1]=[i,n],n=0)}t.push(e),e=e.$parent}return"\n\nfound in\n\n"+t.map(((e,t)=>`${0===t?"---\x3e ":" ".repeat(5+2*t)}${Array.isArray(e)?`${d(e[0])}... (${e[1]} recursive calls)`:d(e)}`)).join("\n")}return`\n\n(found in ${d(e)})`}},3118:function(e,t,n){function i(e){if("function"!==typeof e.getRootNode){while(e.parentNode)e=e.parentNode;return e!==document?null:document}const t=e.getRootNode();return t!==document&&t.getRootNode({composed:!0})!==document?null:t}n.d(t,{e:function(){return i}})},8131:function(e,t,n){n.d(t,{$x:function(){return D},Do:function(){return v},Ee:function(){return P},FT:function(){return A},GL:function(){return m},Ji:function(){return s},KK:function(){return d},KT:function(){return k},RB:function(){return y},TI:function(){return S},XP:function(){return _},_A:function(){return b},f9:function(){return E},iZ:function(){return L},jC:function(){return I},ji:function(){return p},kb:function(){return f},kg:function(){return R},lj:function(){return a},qF:function(){return h},qh:function(){return r},qw:function(){return c},sD:function(){return C},sp:function(){return x},uZ:function(){return O},vO:function(){return u},vZ:function(){return l},xl:function(){return T},z9:function(){return N}});var i=n(144);function s(e,t="div",n){return i.ZP.extend({name:n||e.replace(/__/g,"-"),functional:!0,props:{tag:{type:String,default:t}},render(t,{data:n,props:i,children:s}){return n.staticClass=`${e} ${n.staticClass||""}`.trim(),t(i.tag,n,s)}})}function r(e,t,n,i=!1){const s=r=>{n(r),e.removeEventListener(t,s,i)};e.addEventListener(t,s,i)}let o=!1;try{if("undefined"!==typeof window){const e=Object.defineProperty({},"passive",{get:()=>{o=!0}});window.addEventListener("testListener",e,e),window.removeEventListener("testListener",e,e)}}catch($){console.warn($)}function a(e,t,n,i){e.addEventListener(t,n,!!o&&i)}function c(e,t,n){const i=t.length-1;if(i<0)return void 0===e?n:e;for(let s=0;s<i;s++){if(null==e)return n;e=e[t[s]]}return null==e||void 0===e[t[i]]?n:e[t[i]]}function l(e,t){if(e===t)return!0;if(e instanceof Date&&t instanceof Date&&e.getTime()!==t.getTime())return!1;if(e!==Object(e)||t!==Object(t))return!1;const n=Object.keys(e);return n.length===Object.keys(t).length&&n.every((n=>l(e[n],t[n])))}function u(e,t,n){return null!=e&&t&&"string"===typeof t?void 0!==e[t]?e[t]:(t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,""),c(e,t.split("."),n)):n}function h(e,t,n){if(null==t)return void 0===e?n:e;if(e!==Object(e))return void 0===n?e:n;if("string"===typeof t)return u(e,t,n);if(Array.isArray(t))return c(e,t,n);if("function"!==typeof t)return n;const i=t(e,n);return"undefined"===typeof i?n:i}function d(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return 0;const t=+window.getComputedStyle(e).getPropertyValue("z-index");return t||d(e.parentNode)}function p(e,t){const n={};for(let i=0;i<t.length;i++){const s=t[i];"undefined"!==typeof e[s]&&(n[s]=e[s])}return n}function f(e,t="px"){return null==e||""===e?void 0:isNaN(+e)?String(e):`${Number(e)}${t}`}function m(e){return(e||"").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function g(e){return null!==e&&"object"===typeof e}const v=Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34,shift:16});function y(e,t){const n=e.$vuetify.icons.component;if(t.startsWith("$")){const n=`$vuetify.icons.values.${t.split("$").pop().split(".").pop()}`,i=u(e,n,t);if("string"!==typeof i)return i;t=i}return null==n?t:{component:n,props:{icon:t}}}function _(e){return Object.keys(e)}const w=/-(\w)/g,b=e=>e.replace(w,((e,t)=>t?t.toUpperCase():""));function I(e){return e.charAt(0).toUpperCase()+e.slice(1)}function C(e,t,n){const i=t[0],s=[];let r;for(let o=0;o<e.length;o++){const t=e[o],n=u(t,i,null);r!==n&&(r=n,s.push({name:null!==n&&void 0!==n?n:"",items:[]})),s[s.length-1].items.push(t)}return s}function S(e){return null!=e?Array.isArray(e)?e:[e]:[]}function T(e,t,n,i,s){if(null===t||!t.length)return e;const r=new Intl.Collator(i,{sensitivity:"accent",usage:"sort"});return e.sort(((e,i)=>{for(let o=0;o<t.length;o++){const a=t[o];let c=u(e,a),l=u(i,a);if(n[o]&&([c,l]=[l,c]),s&&s[a]){const e=s[a](c,l);if(!e)continue;return e}if(null!==c||null!==l){if(c instanceof Date&&l instanceof Date)return c.getTime()-l.getTime();if([c,l]=[c,l].map((e=>(e||"").toString().toLocaleLowerCase())),c!==l)return isNaN(c)||isNaN(l)?r.compare(c,l):Number(c)-Number(l)}}return 0}))}function E(e,t,n){return null!=e&&null!=t&&"boolean"!==typeof e&&-1!==e.toString().toLocaleLowerCase().indexOf(t.toLocaleLowerCase())}function k(e,t){return t?(t=t.toString().toLowerCase(),""===t.trim()?e:e.filter((e=>Object.keys(e).some((n=>E(u(e,n),t,e)))))):e}function x(e,t,n){return e.$slots.hasOwnProperty(t)&&e.$scopedSlots.hasOwnProperty(t)&&e.$scopedSlots[t].name?n?"v-slot":"scoped":e.$slots.hasOwnProperty(t)?"normal":e.$scopedSlots.hasOwnProperty(t)?"scoped":void 0}function A(e,t){return Object.keys(t).filter((t=>t.startsWith(e))).reduce(((n,i)=>(n[i.replace(e,"")]=t[i],n)),{})}function N(e,t="default",n,i=!1){return e.$scopedSlots.hasOwnProperty(t)?e.$scopedSlots[t](n instanceof Function?n():n):!e.$slots.hasOwnProperty(t)||n&&!i?void 0:e.$slots[t]}function O(e,t=0,n=1){return Math.max(t,Math.min(n,e))}function D(e){return e?Object.keys(e).reduce(((t,n)=>(t[b(n)]=e[n],t)),{}):{}}function P(e={},t={}){for(const n in t){const i=e[n],s=t[n];g(i)&&g(s)?e[n]=P(i,s):e[n]=s}return e}function R(e,t){return Array(e).fill(t)}function L(e){if(e.composedPath)return e.composedPath();const t=[];let n=e.target;while(n){if(t.push(n),"HTML"===n.tagName)return t.push(document),t.push(window),t;n=n.parentElement}return t}},7559:function(e,t,n){n.d(t,{ZP:function(){return o},y0:function(){return a},ze:function(){return c}});var i=n(8131);const s={styleList:/;(?![^(]*\))/g,styleProp:/:(.*)/};function r(e){const t={};for(const n of e.split(s.styleList)){let[e,r]=n.split(s.styleProp);e=e.trim(),e&&("string"===typeof r&&(r=r.trim()),t[(0,i._A)(e)]=r)}return t}function o(){const e={};let t,n=arguments.length;while(n--)for(t of Object.keys(arguments[n]))switch(t){case"class":case"directives":arguments[n][t]&&(e[t]=c(e[t],arguments[n][t]));break;case"style":arguments[n][t]&&(e[t]=a(e[t],arguments[n][t]));break;case"staticClass":if(!arguments[n][t])break;void 0===e[t]&&(e[t]=""),e[t]&&(e[t]+=" "),e[t]+=arguments[n][t].trim();break;case"on":case"nativeOn":arguments[n][t]&&(e[t]=l(e[t],arguments[n][t]));break;case"attrs":case"props":case"domProps":case"scopedSlots":case"staticStyle":case"hook":case"transition":if(!arguments[n][t])break;e[t]||(e[t]={}),e[t]={...arguments[n][t],...e[t]};break;default:e[t]||(e[t]=arguments[n][t])}return e}function a(e,t){return e?t?(e=(0,i.TI)("string"===typeof e?r(e):e),e.concat("string"===typeof t?r(t):t)):e:t}function c(e,t){return t?e&&e?(0,i.TI)(e).concat(t):t:e}function l(...e){if(!e[0])return e[1];if(!e[1])return e[0];const t={};for(let n=2;n--;){const i=e[n];for(const e in i)i[e]&&(t[e]?t[e]=[].concat(i[e],t[e]):t[e]=i[e])}return t}},5530:function(e,t,n){n.d(t,{Z:function(){return s}});var i=n(144);function s(...e){return i.ZP.extend({mixins:e})}},629:function(e,t,n){
/*!
 * vuex v3.6.2
 * (c) 2021 Evan You
 * @license MIT
 */
function i(e){var t=Number(e.version.split(".")[0]);if(t>=2)e.mixin({beforeCreate:i});else{var n=e.prototype._init;e.prototype._init=function(e){void 0===e&&(e={}),e.init=e.init?[i].concat(e.init):i,n.call(this,e)}}function i(){var e=this.$options;e.store?this.$store="function"===typeof e.store?e.store():e.store:e.parent&&e.parent.$store&&(this.$store=e.parent.$store)}}n.d(t,{rn:function(){return P}});var s="undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{},r=s.__VUE_DEVTOOLS_GLOBAL_HOOK__;function o(e){r&&(e._devtoolHook=r,r.emit("vuex:init",e),r.on("vuex:travel-to-state",(function(t){e.replaceState(t)})),e.subscribe((function(e,t){r.emit("vuex:mutation",e,t)}),{prepend:!0}),e.subscribeAction((function(e,t){r.emit("vuex:action",e,t)}),{prepend:!0}))}function a(e,t){return e.filter(t)[0]}function c(e,t){if(void 0===t&&(t=[]),null===e||"object"!==typeof e)return e;var n=a(t,(function(t){return t.original===e}));if(n)return n.copy;var i=Array.isArray(e)?[]:{};return t.push({original:e,copy:i}),Object.keys(e).forEach((function(n){i[n]=c(e[n],t)})),i}function l(e,t){Object.keys(e).forEach((function(n){return t(e[n],n)}))}function u(e){return null!==e&&"object"===typeof e}function h(e){return e&&"function"===typeof e.then}function d(e,t){return function(){return e(t)}}var p=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var n=e.state;this.state=("function"===typeof n?n():n)||{}},f={namespaced:{configurable:!0}};f.namespaced.get=function(){return!!this._rawModule.namespaced},p.prototype.addChild=function(e,t){this._children[e]=t},p.prototype.removeChild=function(e){delete this._children[e]},p.prototype.getChild=function(e){return this._children[e]},p.prototype.hasChild=function(e){return e in this._children},p.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},p.prototype.forEachChild=function(e){l(this._children,e)},p.prototype.forEachGetter=function(e){this._rawModule.getters&&l(this._rawModule.getters,e)},p.prototype.forEachAction=function(e){this._rawModule.actions&&l(this._rawModule.actions,e)},p.prototype.forEachMutation=function(e){this._rawModule.mutations&&l(this._rawModule.mutations,e)},Object.defineProperties(p.prototype,f);var m=function(e){this.register([],e,!1)};function g(e,t,n){if(t.update(n),n.modules)for(var i in n.modules){if(!t.getChild(i))return void 0;g(e.concat(i),t.getChild(i),n.modules[i])}}m.prototype.get=function(e){return e.reduce((function(e,t){return e.getChild(t)}),this.root)},m.prototype.getNamespace=function(e){var t=this.root;return e.reduce((function(e,n){return t=t.getChild(n),e+(t.namespaced?n+"/":"")}),"")},m.prototype.update=function(e){g([],this.root,e)},m.prototype.register=function(e,t,n){var i=this;void 0===n&&(n=!0);var s=new p(t,n);if(0===e.length)this.root=s;else{var r=this.get(e.slice(0,-1));r.addChild(e[e.length-1],s)}t.modules&&l(t.modules,(function(t,s){i.register(e.concat(s),t,n)}))},m.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1],i=t.getChild(n);i&&i.runtime&&t.removeChild(n)},m.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),n=e[e.length-1];return!!t&&t.hasChild(n)};var v;var y=function(e){var t=this;void 0===e&&(e={}),!v&&"undefined"!==typeof window&&window.Vue&&D(window.Vue);var n=e.plugins;void 0===n&&(n=[]);var i=e.strict;void 0===i&&(i=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new m(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new v,this._makeLocalGettersCache=Object.create(null);var s=this,r=this,a=r.dispatch,c=r.commit;this.dispatch=function(e,t){return a.call(s,e,t)},this.commit=function(e,t,n){return c.call(s,e,t,n)},this.strict=i;var l=this._modules.root.state;C(this,l,[],this._modules.root),I(this,l),n.forEach((function(e){return e(t)}));var u=void 0!==e.devtools?e.devtools:v.config.devtools;u&&o(this)},_={state:{configurable:!0}};function w(e,t,n){return t.indexOf(e)<0&&(n&&n.prepend?t.unshift(e):t.push(e)),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function b(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var n=e.state;C(e,n,[],e._modules.root,!0),I(e,n,t)}function I(e,t,n){var i=e._vm;e.getters={},e._makeLocalGettersCache=Object.create(null);var s=e._wrappedGetters,r={};l(s,(function(t,n){r[n]=d(t,e),Object.defineProperty(e.getters,n,{get:function(){return e._vm[n]},enumerable:!0})}));var o=v.config.silent;v.config.silent=!0,e._vm=new v({data:{$$state:t},computed:r}),v.config.silent=o,e.strict&&A(e),i&&(n&&e._withCommit((function(){i._data.$$state=null})),v.nextTick((function(){return i.$destroy()})))}function C(e,t,n,i,s){var r=!n.length,o=e._modules.getNamespace(n);if(i.namespaced&&(e._modulesNamespaceMap[o],e._modulesNamespaceMap[o]=i),!r&&!s){var a=N(t,n.slice(0,-1)),c=n[n.length-1];e._withCommit((function(){v.set(a,c,i.state)}))}var l=i.context=S(e,o,n);i.forEachMutation((function(t,n){var i=o+n;E(e,i,t,l)})),i.forEachAction((function(t,n){var i=t.root?n:o+n,s=t.handler||t;k(e,i,s,l)})),i.forEachGetter((function(t,n){var i=o+n;x(e,i,t,l)})),i.forEachChild((function(i,r){C(e,t,n.concat(r),i,s)}))}function S(e,t,n){var i=""===t,s={dispatch:i?e.dispatch:function(n,i,s){var r=O(n,i,s),o=r.payload,a=r.options,c=r.type;return a&&a.root||(c=t+c),e.dispatch(c,o)},commit:i?e.commit:function(n,i,s){var r=O(n,i,s),o=r.payload,a=r.options,c=r.type;a&&a.root||(c=t+c),e.commit(c,o,a)}};return Object.defineProperties(s,{getters:{get:i?function(){return e.getters}:function(){return T(e,t)}},state:{get:function(){return N(e.state,n)}}}),s}function T(e,t){if(!e._makeLocalGettersCache[t]){var n={},i=t.length;Object.keys(e.getters).forEach((function(s){if(s.slice(0,i)===t){var r=s.slice(i);Object.defineProperty(n,r,{get:function(){return e.getters[s]},enumerable:!0})}})),e._makeLocalGettersCache[t]=n}return e._makeLocalGettersCache[t]}function E(e,t,n,i){var s=e._mutations[t]||(e._mutations[t]=[]);s.push((function(t){n.call(e,i.state,t)}))}function k(e,t,n,i){var s=e._actions[t]||(e._actions[t]=[]);s.push((function(t){var s=n.call(e,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:e.getters,rootState:e.state},t);return h(s)||(s=Promise.resolve(s)),e._devtoolHook?s.catch((function(t){throw e._devtoolHook.emit("vuex:error",t),t})):s}))}function x(e,t,n,i){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(e){return n(i.state,i.getters,e.state,e.getters)})}function A(e){e._vm.$watch((function(){return this._data.$$state}),(function(){0}),{deep:!0,sync:!0})}function N(e,t){return t.reduce((function(e,t){return e[t]}),e)}function O(e,t,n){return u(e)&&e.type&&(n=t,t=e,e=e.type),{type:e,payload:t,options:n}}function D(e){v&&e===v||(v=e,i(v))}_.state.get=function(){return this._vm._data.$$state},_.state.set=function(e){0},y.prototype.commit=function(e,t,n){var i=this,s=O(e,t,n),r=s.type,o=s.payload,a=(s.options,{type:r,payload:o}),c=this._mutations[r];c&&(this._withCommit((function(){c.forEach((function(e){e(o)}))})),this._subscribers.slice().forEach((function(e){return e(a,i.state)})))},y.prototype.dispatch=function(e,t){var n=this,i=O(e,t),s=i.type,r=i.payload,o={type:s,payload:r},a=this._actions[s];if(a){try{this._actionSubscribers.slice().filter((function(e){return e.before})).forEach((function(e){return e.before(o,n.state)}))}catch(l){0}var c=a.length>1?Promise.all(a.map((function(e){return e(r)}))):a[0](r);return new Promise((function(e,t){c.then((function(t){try{n._actionSubscribers.filter((function(e){return e.after})).forEach((function(e){return e.after(o,n.state)}))}catch(l){0}e(t)}),(function(e){try{n._actionSubscribers.filter((function(e){return e.error})).forEach((function(t){return t.error(o,n.state,e)}))}catch(l){0}t(e)}))}))}},y.prototype.subscribe=function(e,t){return w(e,this._subscribers,t)},y.prototype.subscribeAction=function(e,t){var n="function"===typeof e?{before:e}:e;return w(n,this._actionSubscribers,t)},y.prototype.watch=function(e,t,n){var i=this;return this._watcherVM.$watch((function(){return e(i.state,i.getters)}),t,n)},y.prototype.replaceState=function(e){var t=this;this._withCommit((function(){t._vm._data.$$state=e}))},y.prototype.registerModule=function(e,t,n){void 0===n&&(n={}),"string"===typeof e&&(e=[e]),this._modules.register(e,t),C(this,this.state,e,this._modules.get(e),n.preserveState),I(this,this.state)},y.prototype.unregisterModule=function(e){var t=this;"string"===typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit((function(){var n=N(t.state,e.slice(0,-1));v.delete(n,e[e.length-1])})),b(this)},y.prototype.hasModule=function(e){return"string"===typeof e&&(e=[e]),this._modules.isRegistered(e)},y.prototype.hotUpdate=function(e){this._modules.update(e),b(this,!0)},y.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(y.prototype,_);var P=B((function(e,t){var n={};return F(t).forEach((function(t){var i=t.key,s=t.val;n[i]=function(){var t=this.$store.state,n=this.$store.getters;if(e){var i=U(this.$store,"mapState",e);if(!i)return;t=i.context.state,n=i.context.getters}return"function"===typeof s?s.call(this,t,n):t[s]},n[i].vuex=!0})),n})),R=B((function(e,t){var n={};return F(t).forEach((function(t){var i=t.key,s=t.val;n[i]=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];var i=this.$store.commit;if(e){var r=U(this.$store,"mapMutations",e);if(!r)return;i=r.context.commit}return"function"===typeof s?s.apply(this,[i].concat(t)):i.apply(this.$store,[s].concat(t))}})),n})),L=B((function(e,t){var n={};return F(t).forEach((function(t){var i=t.key,s=t.val;s=e+s,n[i]=function(){if(!e||U(this.$store,"mapGetters",e))return this.$store.getters[s]},n[i].vuex=!0})),n})),$=B((function(e,t){var n={};return F(t).forEach((function(t){var i=t.key,s=t.val;n[i]=function(){var t=[],n=arguments.length;while(n--)t[n]=arguments[n];var i=this.$store.dispatch;if(e){var r=U(this.$store,"mapActions",e);if(!r)return;i=r.context.dispatch}return"function"===typeof s?s.apply(this,[i].concat(t)):i.apply(this.$store,[s].concat(t))}})),n})),M=function(e){return{mapState:P.bind(null,e),mapGetters:L.bind(null,e),mapMutations:R.bind(null,e),mapActions:$.bind(null,e)}};function F(e){return V(e)?Array.isArray(e)?e.map((function(e){return{key:e,val:e}})):Object.keys(e).map((function(t){return{key:t,val:e[t]}})):[]}function V(e){return Array.isArray(e)||u(e)}function B(e){return function(t,n){return"string"!==typeof t?(n=t,t=""):"/"!==t.charAt(t.length-1)&&(t+="/"),e(t,n)}}function U(e,t,n){var i=e._modulesNamespaceMap[n];return i}function j(e){void 0===e&&(e={});var t=e.collapsed;void 0===t&&(t=!0);var n=e.filter;void 0===n&&(n=function(e,t,n){return!0});var i=e.transformer;void 0===i&&(i=function(e){return e});var s=e.mutationTransformer;void 0===s&&(s=function(e){return e});var r=e.actionFilter;void 0===r&&(r=function(e,t){return!0});var o=e.actionTransformer;void 0===o&&(o=function(e){return e});var a=e.logMutations;void 0===a&&(a=!0);var l=e.logActions;void 0===l&&(l=!0);var u=e.logger;return void 0===u&&(u=console),function(e){var h=c(e.state);"undefined"!==typeof u&&(a&&e.subscribe((function(e,r){var o=c(r);if(n(e,h,o)){var a=H(),l=s(e),d="mutation "+e.type+a;z(u,d,t),u.log("%c prev state","color: #9E9E9E; font-weight: bold",i(h)),u.log("%c mutation","color: #03A9F4; font-weight: bold",l),u.log("%c next state","color: #4CAF50; font-weight: bold",i(o)),q(u)}h=o})),l&&e.subscribeAction((function(e,n){if(r(e,n)){var i=H(),s=o(e),a="action "+e.type+i;z(u,a,t),u.log("%c action","color: #03A9F4; font-weight: bold",s),q(u)}})))}}function z(e,t,n){var i=n?e.groupCollapsed:e.group;try{i.call(e,t)}catch(s){e.log(t)}}function q(e){try{e.groupEnd()}catch(t){e.log(" log end ")}}function H(){var e=new Date;return" @ "+Z(e.getHours(),2)+":"+Z(e.getMinutes(),2)+":"+Z(e.getSeconds(),2)+"."+Z(e.getMilliseconds(),3)}function W(e,t){return new Array(t+1).join(e)}function Z(e,t){return W("0",t-e.toString().length)+e}var K={Store:y,install:D,version:"3.6.2",mapState:P,mapMutations:R,mapGetters:L,mapActions:$,createNamespacedHelpers:M,createLogger:j};t.ZP=K},8180:function(e,t,n){n.d(t,{Z:function(){return v}});var i=n(4444),s=n(8463),r=n(5816),o=n(3333);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class a{constructor(e,t){this._delegate=e,this.firebase=t,(0,r._addComponent)(e,new s.wA("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),(0,r.deleteApp)(this._delegate))))}_getService(e,t=r._DEFAULT_ENTRY_NAME){var n;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return i.isInitialized()||"EXPLICIT"!==(null===(n=i.getComponent())||void 0===n?void 0:n.instantiationMode)||i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=r._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){(0,r._addComponent)(this._delegate,e)}_addOrOverwriteComponent(e){(0,r._addOrOverwriteComponent)(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance."},l=new i.LL("app-compat","Firebase",c);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function u(e){const t={},n={__esModule:!0,initializeApp:a,app:o,registerVersion:r.registerVersion,setLogLevel:r.setLogLevel,onLog:r.onLog,apps:null,SDK_VERSION:r.SDK_VERSION,INTERNAL:{registerComponent:u,removeApp:s,useAsService:h,modularAPIs:r}};function s(e){delete t[e]}function o(e){if(e=e||r._DEFAULT_ENTRY_NAME,!(0,i.r3)(t,e))throw l.create("no-app",{appName:e});return t[e]}function a(s,o={}){const a=r.initializeApp(s,o);if((0,i.r3)(t,a.name))return t[a.name];const c=new e(a,n);return t[a.name]=c,c}function c(){return Object.keys(t).map((e=>t[e]))}function u(t){const s=t.name,a=s.replace("-compat","");if(r._registerComponent(t)&&"PUBLIC"===t.type){const r=(e=o())=>{if("function"!==typeof e[a])throw l.create("invalid-app-argument",{appName:s});return e[a]()};void 0!==t.serviceProps&&(0,i.ZB)(r,t.serviceProps),n[a]=r,e.prototype[a]=function(...e){const n=this._getService.bind(this,s);return n.apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?n[a]:null}function h(e,t){if("serverAuth"===t)return null;const n=t;return n}return n["default"]=n,Object.defineProperty(n,"apps",{get:c}),o["App"]=e,n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h(){const e=u(a);function t(t){(0,i.ZB)(e,t)}return e.INTERNAL=Object.assign(Object.assign({},e.INTERNAL),{createFirebaseNamespace:h,extendNamespace:t,createSubscribe:i.ne,ErrorFactory:i.LL,deepExtend:i.ZB}),e}const d=h(),p=new o.Yd("@firebase/app-compat"),f="@firebase/app-compat",m="0.2.14";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function g(e){(0,r.registerVersion)(f,m,e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if((0,i.jU)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const v=d;g()},5816:function(e,t,n){n.r(t),n.d(t,{FirebaseError:function(){return r.ZR},SDK_VERSION:function(){return ye},_DEFAULT_ENTRY_NAME:function(){return re},_addComponent:function(){return le},_addOrOverwriteComponent:function(){return ue},_apps:function(){return ae},_clearComponents:function(){return fe},_components:function(){return ce},_getProvider:function(){return de},_registerComponent:function(){return he},_removeServiceInstance:function(){return pe},deleteApp:function(){return Ie},getApp:function(){return we},getApps:function(){return be},initializeApp:function(){return _e},onLog:function(){return Se},registerVersion:function(){return Ce},setLogLevel:function(){return Te}});var i=n(8463),s=n(3333),r=n(4444);const o=(e,t)=>t.some((t=>e instanceof t));let a,c;function l(){return a||(a=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function u(){return c||(c=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const h=new WeakMap,d=new WeakMap,p=new WeakMap,f=new WeakMap,m=new WeakMap;function g(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",r)},s=()=>{t(I(e.result)),i()},r=()=>{n(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",r)}));return t.then((t=>{t instanceof IDBCursor&&h.set(t,e)})).catch((()=>{})),m.set(t,e),t}function v(e){if(d.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",r),e.removeEventListener("abort",r)},s=()=>{t(),i()},r=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",r),e.addEventListener("abort",r)}));d.set(e,t)}let y={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return d.get(e);if("objectStoreNames"===t)return e.objectStoreNames||p.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return I(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function _(e){y=e(y)}function w(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?u().includes(e)?function(...t){return e.apply(C(this),t),I(h.get(this))}:function(...t){return I(e.apply(C(this),t))}:function(t,...n){const i=e.call(C(this),t,...n);return p.set(i,t.sort?t.sort():[t]),I(i)}}function b(e){return"function"===typeof e?w(e):(e instanceof IDBTransaction&&v(e),o(e,l())?new Proxy(e,y):e)}function I(e){if(e instanceof IDBRequest)return g(e);if(f.has(e))return f.get(e);const t=b(e);return t!==e&&(f.set(e,t),m.set(t,e)),t}const C=e=>m.get(e);function S(e,t,{blocked:n,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(e,t),a=I(o);return i&&o.addEventListener("upgradeneeded",(e=>{i(I(o.result),e.oldVersion,e.newVersion,I(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{r&&e.addEventListener("close",(()=>r())),s&&e.addEventListener("versionchange",(e=>s(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}const T=["get","getKey","getAll","getAllKeys","count"],E=["put","add","delete","clear"],k=new Map;function x(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(k.get(t))return k.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,s=E.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!s&&!T.includes(n))return;const r=async function(e,...t){const r=this.transaction(e,s?"readwrite":"readonly");let o=r.store;return i&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),s&&r.done]))[0]};return k.set(t,r),r}_((e=>({...e,get:(t,n,i)=>x(t,n)||e.get(t,n,i),has:(t,n)=>!!x(t,n)||e.has(t,n)})));
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class A{constructor(e){this.container=e}getPlatformInfoString(){const e=this.container.getProviders();return e.map((e=>{if(N(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}function N(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}const O="@firebase/app",D="0.9.14",P=new s.Yd("@firebase/app"),R="@firebase/app-compat",L="@firebase/analytics-compat",$="@firebase/analytics",M="@firebase/app-check-compat",F="@firebase/app-check",V="@firebase/auth",B="@firebase/auth-compat",U="@firebase/database",j="@firebase/database-compat",z="@firebase/functions",q="@firebase/functions-compat",H="@firebase/installations",W="@firebase/installations-compat",Z="@firebase/messaging",K="@firebase/messaging-compat",G="@firebase/performance",Q="@firebase/performance-compat",Y="@firebase/remote-config",X="@firebase/remote-config-compat",J="@firebase/storage",ee="@firebase/storage-compat",te="@firebase/firestore",ne="@firebase/firestore-compat",ie="firebase",se="10.0.0",re="[DEFAULT]",oe={[O]:"fire-core",[R]:"fire-core-compat",[$]:"fire-analytics",[L]:"fire-analytics-compat",[F]:"fire-app-check",[M]:"fire-app-check-compat",[V]:"fire-auth",[B]:"fire-auth-compat",[U]:"fire-rtdb",[j]:"fire-rtdb-compat",[z]:"fire-fn",[q]:"fire-fn-compat",[H]:"fire-iid",[W]:"fire-iid-compat",[Z]:"fire-fcm",[K]:"fire-fcm-compat",[G]:"fire-perf",[Q]:"fire-perf-compat",[Y]:"fire-rc",[X]:"fire-rc-compat",[J]:"fire-gcs",[ee]:"fire-gcs-compat",[te]:"fire-fst",[ne]:"fire-fst-compat","fire-js":"fire-js",[ie]:"fire-js-all"},ae=new Map,ce=new Map;function le(e,t){try{e.container.addComponent(t)}catch(n){P.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function ue(e,t){e.container.addOrOverwriteComponent(t)}function he(e){const t=e.name;if(ce.has(t))return P.debug(`There were multiple attempts to register component ${t}.`),!1;ce.set(t,e);for(const n of ae.values())le(n,e);return!0}function de(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function pe(e,t,n=re){de(e,t).clearInstance(n)}function fe(){ce.clear()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const me={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ge=new r.LL("app","Firebase",me);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ve{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new i.wA("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ge.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ye=se;function _e(e,t={}){let n=e;if("object"!==typeof t){const e=t;t={name:e}}const s=Object.assign({name:re,automaticDataCollectionEnabled:!1},t),o=s.name;if("string"!==typeof o||!o)throw ge.create("bad-app-name",{appName:String(o)});if(n||(n=(0,r.aH)()),!n)throw ge.create("no-options");const a=ae.get(o);if(a){if((0,r.vZ)(n,a.options)&&(0,r.vZ)(s,a.config))return a;throw ge.create("duplicate-app",{appName:o})}const c=new i.H0(o);for(const i of ce.values())c.addComponent(i);const l=new ve(n,s,c);return ae.set(o,l),l}function we(e=re){const t=ae.get(e);if(!t&&e===re&&(0,r.aH)())return _e();if(!t)throw ge.create("no-app",{appName:e});return t}function be(){return Array.from(ae.values())}async function Ie(e){const t=e.name;ae.has(t)&&(ae.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Ce(e,t,n){var s;let r=null!==(s=oe[e])&&void 0!==s?s:e;n&&(r+=`-${n}`);const o=r.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${r}" with version "${t}":`];return o&&e.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void P.warn(e.join(" "))}he(new i.wA(`${r}-version`,(()=>({library:r,version:t})),"VERSION"))}function Se(e,t){if(null!==e&&"function"!==typeof e)throw ge.create("invalid-log-argument");(0,s.Am)(e,t)}function Te(e){(0,s.Ub)(e)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ee="firebase-heartbeat-database",ke=1,xe="firebase-heartbeat-store";let Ae=null;function Ne(){return Ae||(Ae=S(Ee,ke,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(xe)}}}).catch((e=>{throw ge.create("idb-open",{originalErrorMessage:e.message})}))),Ae}async function Oe(e){try{const t=await Ne(),n=await t.transaction(xe).objectStore(xe).get(Pe(e));return n}catch(t){if(t instanceof r.ZR)P.warn(t.message);else{const e=ge.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});P.warn(e.message)}}}async function De(e,t){try{const n=await Ne(),i=n.transaction(xe,"readwrite"),s=i.objectStore(xe);await s.put(t,Pe(e)),await i.done}catch(n){if(n instanceof r.ZR)P.warn(n.message);else{const e=ge.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});P.warn(e.message)}}}function Pe(e){return`${e.name}!${e.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Re=1024,Le=2592e6;class $e{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ve(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate(),t=e.getPlatformInfoString(),n=Me();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==n&&!this._heartbeatsCache.heartbeats.some((e=>e.date===n)))return this._heartbeatsCache.heartbeats.push({date:n,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf(),n=Date.now();return n-t<=Le})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=Me(),{heartbeatsToSend:t,unsentEntries:n}=Fe(this._heartbeatsCache.heartbeats),i=(0,r.L)(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Me(){const e=new Date;return e.toISOString().substring(0,10)}function Fe(e,t=Re){const n=[];let i=e.slice();for(const s of e){const e=n.find((e=>e.agent===s.agent));if(e){if(e.dates.push(s.date),Be(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Be(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class Ve{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,r.hl)()&&(0,r.eu)().then((()=>!0)).catch((()=>!1))}async read(){const e=await this._canUseIndexedDBPromise;if(e){const e=await Oe(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;const n=await this._canUseIndexedDBPromise;if(n){const n=await this.read();return De(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;const n=await this._canUseIndexedDBPromise;if(n){const n=await this.read();return De(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Be(e){return(0,r.L)(JSON.stringify({version:2,heartbeats:e})).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(e){he(new i.wA("platform-logger",(e=>new A(e)),"PRIVATE")),he(new i.wA("heartbeat",(e=>new $e(e)),"PRIVATE")),Ce(O,D,e),Ce(O,D,"esm2017"),Ce("fire-js","")}Ue("")},8463:function(e,t,n){n.d(t,{H0:function(){return l},wA:function(){return s}});var i=n(4444);class s{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new i.BH;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),i=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(c(e))try{this.getOrInitializeService({instanceIdentifier:r})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:i});n.resolve(e)}catch(t){}}}}clearInstance(e=r){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=r){return this.instances.has(e)}getOptions(e=r){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,r]of this.instancesDeferred.entries()){const e=this.normalizeInstanceIdentifier(s);n===e&&r.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&e(r,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(i){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:a(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(i){}return n||null}normalizeInstanceIdentifier(e=r){return this.component?this.component.multipleInstances?e:r:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function a(e){return e===r?void 0:e}function c(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){const t=this.getProvider(e.name);t.isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new o(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},3333:function(e,t,n){n.d(t,{Am:function(){return h},Ub:function(){return u},Yd:function(){return l},in:function(){return s}});
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const i=[];var s;(function(e){e[e["DEBUG"]=0]="DEBUG",e[e["VERBOSE"]=1]="VERBOSE",e[e["INFO"]=2]="INFO",e[e["WARN"]=3]="WARN",e[e["ERROR"]=4]="ERROR",e[e["SILENT"]=5]="SILENT"})(s||(s={}));const r={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},o=s.INFO,a={[s.DEBUG]:"log",[s.VERBOSE]:"log",[s.INFO]:"info",[s.WARN]:"warn",[s.ERROR]:"error"},c=(e,t,...n)=>{if(t<e.logLevel)return;const i=(new Date).toISOString(),s=a[t];if(!s)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[s](`[${i}]  ${e.name}:`,...n)};class l{constructor(e){this.name=e,this._logLevel=o,this._logHandler=c,this._userLogHandler=null,i.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in s))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?r[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,s.DEBUG,...e),this._logHandler(this,s.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,s.VERBOSE,...e),this._logHandler(this,s.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,s.INFO,...e),this._logHandler(this,s.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,s.WARN,...e),this._logHandler(this,s.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,s.ERROR,...e),this._logHandler(this,s.ERROR,...e)}}function u(e){i.forEach((t=>{t.setLogLevel(e)}))}function h(e,t){for(const n of i){let i=null;t&&t.level&&(i=r[t.level]),n.userLogHandler=null===e?null:(t,n,...r)=>{const o=r.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:s[n].toLowerCase(),message:o,args:r,type:t.name})}}}},1259:function(e,t,n){n.d(t,{v0:function(){return i.o},Aj:function(){return i.x}});var i=n(7164);n(4444),n(5816),n(3333),n(8463)},4866:function(e,t,n){n.d(t,{Z:function(){return i.Z}});var i=n(8180),s="firebase",r="10.0.0";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
i.Z.registerVersion(s,r,"app-compat")},8522:function(e,t,n){var i=n(8180),s=n(7164),r=n(4444),o=(n(5816),n(3333),n(8463));
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function a(){return window}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c=2e3;async function l(e,t,n){var i;const{BuildInfo:r}=a();(0,s.as)(t.sessionId,"AuthEvent did not contain a session ID");const o=await f(t.sessionId),c={};return(0,s.at)()?c["ibi"]=r.packageName:(0,s.au)()?c["apn"]=r.packageName:(0,s.av)(e,"operation-not-supported-in-this-environment"),r.displayName&&(c["appDisplayName"]=r.displayName),c["sessionId"]=o,(0,s.aw)(e,n,t.type,void 0,null!==(i=t.eventId)&&void 0!==i?i:void 0,c)}async function u(e){const{BuildInfo:t}=a(),n={};(0,s.at)()?n.iosBundleId=t.packageName:(0,s.au)()?n.androidPackageName=t.packageName:(0,s.av)(e,"operation-not-supported-in-this-environment"),await(0,s.ax)(e,n)}function h(e){const{cordova:t}=a();return new Promise((n=>{t.plugins.browsertab.isAvailable((i=>{let r=null;i?t.plugins.browsertab.openUrl(e):r=t.InAppBrowser.open(e,(0,s.ay)()?"_blank":"_system","location=yes"),n(r)}))}))}async function d(e,t,n){const{cordova:i}=a();let r=()=>{};try{await new Promise(((o,a)=>{let l=null;function u(){var e;o();const t=null===(e=i.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function h(){l||(l=window.setTimeout((()=>{a((0,s.az)(e,"redirect-cancelled-by-user"))}),c))}function d(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&h()}t.addPassiveListener(u),document.addEventListener("resume",h,!1),(0,s.au)()&&document.addEventListener("visibilitychange",d,!1),r=()=>{t.removePassiveListener(u),document.removeEventListener("resume",h,!1),document.removeEventListener("visibilitychange",d,!1),l&&window.clearTimeout(l)}}))}finally{r()}}function p(e){var t,n,i,r,o,c,l,u,h,d;const p=a();(0,s.aA)("function"===typeof(null===(t=null===p||void 0===p?void 0:p.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,s.aA)("undefined"!==typeof(null===(n=null===p||void 0===p?void 0:p.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,s.aA)("function"===typeof(null===(o=null===(r=null===(i=null===p||void 0===p?void 0:p.cordova)||void 0===i?void 0:i.plugins)||void 0===r?void 0:r.browsertab)||void 0===o?void 0:o.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,s.aA)("function"===typeof(null===(u=null===(l=null===(c=null===p||void 0===p?void 0:p.cordova)||void 0===c?void 0:c.plugins)||void 0===l?void 0:l.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,s.aA)("function"===typeof(null===(d=null===(h=null===p||void 0===p?void 0:p.cordova)||void 0===h?void 0:h.InAppBrowser)||void 0===d?void 0:d.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function f(e){const t=m(e),n=await crypto.subtle.digest("SHA-256",t),i=Array.from(new Uint8Array(n));return i.map((e=>e.toString(16).padStart(2,"0"))).join("")}function m(e){if((0,s.as)(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g=20;class v extends s.aB{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}function y(e,t,n=null){return{type:t,eventId:n,urlResponse:null,sessionId:I(),postBody:null,tenantId:e.tenantId,error:(0,s.az)(e,"no-auth-event")}}function _(e,t){return C()._set(S(e),t)}async function w(e){const t=await C()._get(S(e));return t&&await C()._remove(S(e)),t}function b(e,t){var n,i;const r=E(t);if(r.includes("/__/auth/callback")){const t=k(r),o=t["firebaseError"]?T(decodeURIComponent(t["firebaseError"])):null,a=null===(i=null===(n=null===o||void 0===o?void 0:o["code"])||void 0===n?void 0:n.split("auth/"))||void 0===i?void 0:i[1],c=a?(0,s.az)(a):null;return c?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:r,postBody:null}}return null}function I(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<g;n++){const n=Math.floor(Math.random()*t.length);e.push(t.charAt(n))}return e.join("")}function C(){return(0,s.aC)(s.b)}function S(e){return(0,s.aD)("authEvent",e.config.apiKey,e.name)}function T(e){try{return JSON.parse(e)}catch(t){return null}}function E(e){const t=k(e),n=t["link"]?decodeURIComponent(t["link"]):void 0,i=k(n)["link"],s=t["deep_link_id"]?decodeURIComponent(t["deep_link_id"]):void 0,r=k(s)["link"];return r||s||i||n||e}function k(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return(0,r.zd)(n.join("?"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x=500;class A{constructor(){this._redirectPersistence=s.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=s.aE,this._overrideRedirectResult=s.aF}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new v(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){(0,s.av)(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,i){p(e);const r=await this._initialize(e);await r.initialized(),r.resetRedirect(),(0,s.aG)(),await this._originValidation(e);const o=y(e,n,i);await _(e,o);const a=await l(e,o,t),c=await h(a);return d(e,r,c)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=u(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:i,BuildInfo:s}=a(),r=setTimeout((async()=>{await w(e),t.onEvent(O())}),x),o=async n=>{clearTimeout(r);const i=await w(e);let s=null;i&&(null===n||void 0===n?void 0:n["url"])&&(s=b(i,n["url"])),t.onEvent(s||O())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const c=i,l=`${s.packageName.toLowerCase()}://`;a().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&o({url:e}),"function"===typeof c)try{c(e)}catch(t){console.error(t)}}}}const N=A;function O(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,s.az)("no-auth-event")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D(e,t){(0,s.aH)(e)._logFramework(t)}var P="@firebase/auth-compat",R="0.4.3";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const L=1e3;function $(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function M(){return"http:"===$()||"https:"===$()}function F(e=(0,r.z$)()){return!("file:"!==$()&&"ionic:"!==$()&&"capacitor:"!==$()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function V(){return(0,r.b$)()||(0,r.UG)()}function B(){return(0,r.w1)()&&11===(null===document||void 0===document?void 0:document.documentMode)}function U(e=(0,r.z$)()){return/Edge\/\d+/.test(e)}function j(e=(0,r.z$)()){return B()||U(e)}function z(){try{const e=self.localStorage,t=s.aL();if(e)return e["setItem"](t,"1"),e["removeItem"](t),!j()||(0,r.hl)()}catch(e){return q()&&(0,r.hl)()}return!1}function q(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function H(){return(M()||(0,r.ru)()||F())&&!V()&&z()&&!q()}function W(){return F()&&"undefined"!==typeof document}async function Z(){return!!W()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),L);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}function K(){return"undefined"!==typeof window?window:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={LOCAL:"local",NONE:"none",SESSION:"session"},Q=s.aA,Y="persistence";function X(e,t){Q(Object.values(G).includes(t),e,"invalid-persistence-type"),(0,r.b$)()?Q(t!==G.SESSION,e,"unsupported-persistence-type"):(0,r.UG)()?Q(t===G.NONE,e,"unsupported-persistence-type"):q()?Q(t===G.NONE||t===G.LOCAL&&(0,r.hl)(),e,"unsupported-persistence-type"):Q(t===G.NONE||z(),e,"unsupported-persistence-type")}async function J(e){await e._initializationPromise;const t=te(),n=s.aD(Y,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function ee(e,t){const n=te();if(!n)return[];const i=s.aD(Y,e,t),r=n.getItem(i);switch(r){case G.NONE:return[s.N];case G.LOCAL:return[s.i,s.a];case G.SESSION:return[s.a];default:return[]}}function te(){var e;try{return(null===(e=K())||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne=s.aA;class ie{constructor(){this.browserResolver=s.aC(s.k),this.cordovaResolver=s.aC(N),this.underlyingResolver=null,this._redirectPersistence=s.a,this._completeRedirectFn=s.aE,this._overrideRedirectResult=s.aF}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,i)}async _openRedirect(e,t,n,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,i)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return W()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ne(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await Z();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function se(e){return e.unwrap()}function re(e){return e.wrapped()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(e){return ce(e)}function ae(e,t){var n;const i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){const n=t;n.resolver=new he(e,s.aq(e,t))}else if(i){const e=ce(t),n=t;e&&(n.credential=e,n.tenantId=i.tenantId||void 0,n.email=i.email||void 0,n.phoneNumber=i.phoneNumber||void 0)}}function ce(e){const{_tokenResponse:t}=e instanceof r.ZR?e.customData:e;if(!t)return null;if(!(e instanceof r.ZR)&&"temporaryProof"in t&&"phoneNumber"in t)return s.P.credentialFromResult(e);const n=t.providerId;if(!n||n===s.p.PASSWORD)return null;let i;switch(n){case s.p.GOOGLE:i=s.V;break;case s.p.FACEBOOK:i=s.U;break;case s.p.GITHUB:i=s.W;break;case s.p.TWITTER:i=s.Z;break;default:const{oauthIdToken:e,oauthAccessToken:r,oauthTokenSecret:o,pendingToken:a,nonce:c}=t;return r||o||e||a?a?n.startsWith("saml.")?s.aO._create(n,a):s.L._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:e,accessToken:r}):new s.X(n).credential({idToken:e,accessToken:r,rawNonce:c}):null}return e instanceof r.ZR?i.credentialFromError(e):i.credentialFromResult(e)}function le(e,t){return t.catch((t=>{throw t instanceof r.ZR&&ae(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:oe(e),additionalUserInfo:s.ao(e),user:de.getOrCreate(n)}}))}async function ue(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>le(e,n.confirm(t))}}class he{constructor(e,t){this.resolver=t,this.auth=re(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return le(se(this.auth),this.resolver.resolveSignIn(e))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this._delegate=e,this.multiFactor=s.ar(e)}static getOrCreate(e){return de.USER_MAP.has(e)||de.USER_MAP.set(e,new de(e)),de.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return le(this.auth,s.a0(this._delegate,e))}async linkWithPhoneNumber(e,t){return ue(this.auth,s.l(this._delegate,e,t))}async linkWithPopup(e){return le(this.auth,s.d(this._delegate,e,ie))}async linkWithRedirect(e){return await J(s.aH(this.auth)),s.g(this._delegate,e,ie)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return le(this.auth,s.a1(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return ue(this.auth,s.r(this._delegate,e,t))}reauthenticateWithPopup(e){return le(this.auth,s.e(this._delegate,e,ie))}async reauthenticateWithRedirect(e){return await J(s.aH(this.auth)),s.h(this._delegate,e,ie)}sendEmailVerification(e){return s.ae(this._delegate,e)}async unlink(e){return await s.an(this._delegate,e),this}updateEmail(e){return s.aj(this._delegate,e)}updatePassword(e){return s.ak(this._delegate,e)}updatePhoneNumber(e){return s.u(this._delegate,e)}updateProfile(e){return s.ai(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return s.af(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}de.USER_MAP=new WeakMap;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const pe=s.aA;class fe{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;pe(n,"invalid-api-key",{appName:e.name}),pe(n,"invalid-api-key",{appName:e.name});const i="undefined"!==typeof window?ie:void 0;this._delegate=t.initialize({options:{persistence:ge(n,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(s.D),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?de.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){s.I(this._delegate,e,t)}applyActionCode(e){return s.a5(this._delegate,e)}checkActionCode(e){return s.a6(this._delegate,e)}confirmPasswordReset(e,t){return s.a4(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return le(this._delegate,s.a8(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return s.ad(this._delegate,e)}isSignInWithEmailLink(e){return s.ab(this._delegate,e)}async getRedirectResult(){pe(H(),this._delegate,"operation-not-supported-in-this-environment");const e=await s.j(this._delegate,ie);return e?le(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){D(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:i,error:s,complete:r}=me(e,t,n);return this._delegate.onAuthStateChanged(i,s,r)}onIdTokenChanged(e,t,n){const{next:i,error:s,complete:r}=me(e,t,n);return this._delegate.onIdTokenChanged(i,s,r)}sendSignInLinkToEmail(e,t){return s.aa(this._delegate,e,t)}sendPasswordResetEmail(e,t){return s.a3(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(X(this._delegate,e),e){case G.SESSION:t=s.a;break;case G.LOCAL:const e=await s.aC(s.i)._isAvailable();t=e?s.i:s.b;break;case G.NONE:t=s.N;break;default:return s.av("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return le(this._delegate,s._(this._delegate))}signInWithCredential(e){return le(this._delegate,s.$(this._delegate,e))}signInWithCustomToken(e){return le(this._delegate,s.a2(this._delegate,e))}signInWithEmailAndPassword(e,t){return le(this._delegate,s.a9(this._delegate,e,t))}signInWithEmailLink(e,t){return le(this._delegate,s.ac(this._delegate,e,t))}signInWithPhoneNumber(e,t){return ue(this._delegate,s.s(this._delegate,e,t))}async signInWithPopup(e){return pe(H(),this._delegate,"operation-not-supported-in-this-environment"),le(this._delegate,s.c(this._delegate,e,ie))}async signInWithRedirect(e){return pe(H(),this._delegate,"operation-not-supported-in-this-environment"),await J(this._delegate),s.f(this._delegate,e,ie)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return s.a7(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function me(e,t,n){let i=e;"function"!==typeof e&&({next:i,error:t,complete:n}=e);const s=i,r=e=>s(e&&de.getOrCreate(e));return{next:r,error:t,complete:n}}function ge(e,t){const n=ee(e,t);if("undefined"===typeof self||n.includes(s.i)||n.push(s.i),"undefined"!==typeof window)for(const i of[s.b,s.a])n.includes(i)||n.push(i);return n.includes(s.N)||n.push(s.N),n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fe.Persistence=G;class ve{constructor(){this.providerId="phone",this._delegate=new s.P(se(i.Z.auth()))}static credential(e,t){return s.P.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}ve.PHONE_SIGN_IN_METHOD=s.P.PHONE_SIGN_IN_METHOD,ve.PROVIDER_ID=s.P.PROVIDER_ID;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const ye=s.aA;class _e{constructor(e,t,n=i.Z.app()){var r;ye(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new s.R(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const we="auth-compat";function be(e){e.INTERNAL.registerComponent(new o.wA(we,(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new fe(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:s.A.EMAIL_SIGNIN,PASSWORD_RESET:s.A.PASSWORD_RESET,RECOVER_EMAIL:s.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:s.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:s.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:s.A.VERIFY_EMAIL}},EmailAuthProvider:s.Q,FacebookAuthProvider:s.U,GithubAuthProvider:s.W,GoogleAuthProvider:s.V,OAuthProvider:s.X,SAMLAuthProvider:s.Y,PhoneAuthProvider:ve,PhoneMultiFactorGenerator:s.m,RecaptchaVerifier:_e,TwitterAuthProvider:s.Z,Auth:fe,AuthCredential:s.J,Error:r.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion(P,R)}be(i.Z)},4673:function(e,t,n){var i,s=n(8180),r=n(5816),o=n(8463),a=n(3333),c=n(4444),l="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},u={},h=h||{},d=l||self;function p(e){var t=typeof e;return t="object"!=t?t:e?Array.isArray(e)?"array":t:"null","array"==t||"object"==t&&"number"==typeof e.length}function f(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function m(e){return Object.prototype.hasOwnProperty.call(e,g)&&e[g]||(e[g]=++v)}var g="closure_uid_"+(1e9*Math.random()>>>0),v=0;function y(e,t,n){return e.call.apply(e.bind,arguments)}function _(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function w(e,t,n){return w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:_,w.apply(null,arguments)}function b(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function I(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,i){for(var s=Array(arguments.length-2),r=2;r<arguments.length;r++)s[r-2]=arguments[r];return t.prototype[n].apply(e,s)}}function C(){this.s=this.s,this.o=this.o}var S=0;C.prototype.s=!1,C.prototype.sa=function(){this.s||(this.s=!0,this.N(),0==S)||m(this)},C.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const T=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function E(e){const t=e.length;if(0<t){const n=Array(t);for(let i=0;i<t;i++)n[i]=e[i];return n}return[]}function k(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(p(t)){const n=e.length||0,i=t.length||0;e.length=n+i;for(let s=0;s<i;s++)e[n+s]=t[s]}else e.push(t)}}function x(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var A=function(){if(!d.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{d.addEventListener("test",(()=>{}),t),d.removeEventListener("test",(()=>{}),t)}catch(n){}return e}();function N(e){return/^[\s\xa0]*$/.test(e)}function O(){var e=d.navigator;return e&&(e=e.userAgent)?e:""}function D(e){return-1!=O().indexOf(e)}function P(e){return P[" "](e),e}function R(e,t){var n=bi;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}P[" "]=function(){};var L,$,M=D("Opera"),F=D("Trident")||D("MSIE"),V=D("Edge"),B=V||F,U=D("Gecko")&&!(-1!=O().toLowerCase().indexOf("webkit")&&!D("Edge"))&&!(D("Trident")||D("MSIE"))&&!D("Edge"),j=-1!=O().toLowerCase().indexOf("webkit")&&!D("Edge");function z(){var e=d.document;return e?e.documentMode:void 0}e:{var q="",H=function(){var e=O();return U?/rv:([^\);]+)(\)|;)/.exec(e):V?/Edge\/([\d\.]+)/.exec(e):F?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):j?/WebKit\/(\S+)/.exec(e):M?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(H&&(q=H?H[1]:""),F){var W=z();if(null!=W&&W>parseFloat(q)){L=String(W);break e}}L=q}if(d.document&&F){var Z=z();$=Z||(parseInt(L,10)||void 0)}else $=void 0;var K=$;function G(e,t){if(x.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(U){e:{try{P(t.nodeName);var s=!0;break e}catch(r){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Q[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&G.$.h.call(this)}}I(G,x);var Q={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Y="closure_listenable_"+(1e6*Math.random()|0),X=0;function J(e,t,n,i,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.la=s,this.key=++X,this.fa=this.ia=!1}function ee(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function te(e,t,n){for(const i in e)t.call(n,e[i],i,e)}function ne(e,t){for(const n in e)t.call(void 0,e[n],n,e)}function ie(e){const t={};for(const n in e)t[n]=e[n];return t}const se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function re(e,t){let n,i;for(let s=1;s<arguments.length;s++){for(n in i=arguments[s],i)e[n]=i[n];for(let t=0;t<se.length;t++)n=se[t],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function oe(e){this.src=e,this.g={},this.h=0}function ae(e,t){var n=t.type;if(n in e.g){var i,s=e.g[n],r=T(s,t);(i=0<=r)&&Array.prototype.splice.call(s,r,1),i&&(ee(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ce(e,t,n,i){for(var s=0;s<e.length;++s){var r=e[s];if(!r.fa&&r.listener==t&&r.capture==!!n&&r.la==i)return s}return-1}oe.prototype.add=function(e,t,n,i,s){var r=e.toString();e=this.g[r],e||(e=this.g[r]=[],this.h++);var o=ce(e,t,i,s);return-1<o?(t=e[o],n||(t.ia=!1)):(t=new J(t,this.src,r,!!i,s),t.ia=n,e.push(t)),t};var le="closure_lm_"+(1e6*Math.random()|0),ue={};function he(e,t,n,i,s){if(i&&i.once)return fe(e,t,n,i,s);if(Array.isArray(t)){for(var r=0;r<t.length;r++)he(e,t[r],n,i,s);return null}return n=be(n),e&&e[Y]?e.O(t,n,f(i)?!!i.capture:!!i,s):de(e,t,n,!1,i,s)}function de(e,t,n,i,s,r){if(!t)throw Error("Invalid event type");var o=f(s)?!!s.capture:!!s,a=_e(e);if(a||(e[le]=a=new oe(e)),n=a.add(t,n,i,o,r),n.proxy)return n;if(i=pe(),n.proxy=i,i.src=e,i.listener=n,e.addEventListener)A||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),i,s);else if(e.attachEvent)e.attachEvent(ve(t.toString()),i);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(i)}return n}function pe(){function e(n){return t.call(e.src,e.listener,n)}const t=ye;return e}function fe(e,t,n,i,s){if(Array.isArray(t)){for(var r=0;r<t.length;r++)fe(e,t[r],n,i,s);return null}return n=be(n),e&&e[Y]?e.P(t,n,f(i)?!!i.capture:!!i,s):de(e,t,n,!0,i,s)}function me(e,t,n,i,s){if(Array.isArray(t))for(var r=0;r<t.length;r++)me(e,t[r],n,i,s);else i=f(i)?!!i.capture:!!i,n=be(n),e&&e[Y]?(e=e.i,t=String(t).toString(),t in e.g&&(r=e.g[t],n=ce(r,n,i,s),-1<n&&(ee(r[n]),Array.prototype.splice.call(r,n,1),0==r.length&&(delete e.g[t],e.h--)))):e&&(e=_e(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ce(t,n,i,s)),(n=-1<e?t[e]:null)&&ge(n))}function ge(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Y])ae(t.i,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(ve(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=_e(t))?(ae(n,e),0==n.h&&(n.src=null,t[le]=null)):ee(e)}}}function ve(e){return e in ue?ue[e]:ue[e]="on"+e}function ye(e,t){if(e.fa)e=!0;else{t=new G(t,this);var n=e.listener,i=e.la||e.src;e.ia&&ge(e),e=n.call(i,t)}return e}function _e(e){return e=e[le],e instanceof oe?e:null}var we="__closure_events_fn_"+(1e9*Math.random()>>>0);function be(e){return"function"===typeof e?e:(e[we]||(e[we]=function(t){return e.handleEvent(t)}),e[we])}function Ie(){C.call(this),this.i=new oe(this),this.S=this,this.J=null}function Ce(e,t){var n,i=e.J;if(i)for(n=[];i;i=i.J)n.push(i);if(e=e.S,i=t.type||t,"string"===typeof t)t=new x(t,e);else if(t instanceof x)t.target=t.target||e;else{var s=t;t=new x(i,e),re(t,s)}if(s=!0,n)for(var r=n.length-1;0<=r;r--){var o=t.g=n[r];s=Se(o,i,!0,t)&&s}if(o=t.g=e,s=Se(o,i,!0,t)&&s,s=Se(o,i,!1,t)&&s,n)for(r=0;r<n.length;r++)o=t.g=n[r],s=Se(o,i,!1,t)&&s}function Se(e,t,n,i){if(t=e.i.g[String(t)],!t)return!0;t=t.concat();for(var s=!0,r=0;r<t.length;++r){var o=t[r];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&ae(e.i,o),s=!1!==a.call(c,i)&&s}}return s&&!i.defaultPrevented}I(Ie,C),Ie.prototype[Y]=!0,Ie.prototype.removeEventListener=function(e,t,n,i){me(this,e,t,n,i)},Ie.prototype.N=function(){if(Ie.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)ee(n[i]);delete t.g[e],t.h--}}this.J=null},Ie.prototype.O=function(e,t,n,i){return this.i.add(String(e),t,!1,n,i)},Ie.prototype.P=function(e,t,n,i){return this.i.add(String(e),t,!0,n,i)};var Te=d.JSON.stringify;class Ee{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function ke(){var e=Le;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}class xe{constructor(){this.h=this.g=null}add(e,t){const n=Ae.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}var Ae=new Ee((()=>new Ne),(e=>e.reset()));class Ne{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Oe(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function De(e){d.setTimeout((()=>{throw e}),0)}let Pe,Re=!1,Le=new xe,$e=()=>{const e=d.Promise.resolve(void 0);Pe=()=>{e.then(Me)}};var Me=()=>{for(var e;e=ke();){try{e.h.call(e.g)}catch(n){De(n)}var t=Ae;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Re=!1};function Fe(e,t){Ie.call(this),this.h=e||1,this.g=t||d,this.j=w(this.qb,this),this.l=Date.now()}function Ve(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Be(e,t,n){if("function"===typeof e)n&&(e=w(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=w(e.handleEvent,e)}return 2147483647<Number(t)?-1:d.setTimeout(e,t||0)}function Ue(e){e.g=Be((()=>{e.g=null,e.i&&(e.i=!1,Ue(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}I(Fe,Ie),i=Fe.prototype,i.ga=!1,i.T=null,i.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ce(this,"tick"),this.ga&&(Ve(this),this.start()))}},i.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},i.N=function(){Fe.$.N.call(this),Ve(this),delete this.g};class je extends C{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ue(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ze(e){C.call(this),this.h=e,this.g={}}I(ze,C);var qe=[];function He(e,t,n,i){Array.isArray(n)||(n&&(qe[0]=n.toString()),n=qe);for(var s=0;s<n.length;s++){var r=he(t,n[s],i||e.handleEvent,!1,e.h||e);if(!r)break;e.g[r.key]=r}}function We(e){te(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ge(e)}),e),e.g={}}function Ze(){this.g=!0}function Ke(e,t,n,i,s,r){e.info((function(){if(e.g)if(r)for(var o="",a=r.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=r;return"XMLHTTP REQ ("+i+") [attempt "+s+"]: "+t+"\n"+n+"\n"+o}))}function Ge(e,t,n,i,s,r,o){e.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+r+" "+o}))}function Qe(e,t,n,i){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+Xe(e,n)+(i?" "+i:"")}))}function Ye(e,t){e.info((function(){return"TIMEOUT: "+t}))}function Xe(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var i=n[e];if(!(2>i.length)){var s=i[1];if(Array.isArray(s)&&!(1>s.length)){var r=s[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var o=1;o<s.length;o++)s[o]=""}}}return Te(n)}catch(a){return t}}ze.prototype.N=function(){ze.$.N.call(this),We(this)},ze.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ze.prototype.Ea=function(){this.g=!1},Ze.prototype.info=function(){};var Je={},et=null;function tt(){return et=et||new Ie}function nt(e){x.call(this,Je.Ta,e)}function it(e){const t=tt();Ce(t,new nt(t))}function st(e,t){x.call(this,Je.STAT_EVENT,e),this.stat=t}function rt(e){const t=tt();Ce(t,new st(t,e))}function ot(e,t){x.call(this,Je.Ua,e),this.size=t}function at(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return d.setTimeout((function(){e()}),t)}Je.Ta="serverreachability",I(nt,x),Je.STAT_EVENT="statevent",I(st,x),Je.Ua="timingevent",I(ot,x);var ct={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},lt={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ut(){}function ht(e){return e.h||(e.h=e.i())}function dt(){}ut.prototype.h=null;var pt,ft={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function mt(){x.call(this,"d")}function gt(){x.call(this,"c")}function vt(){}function yt(e,t,n,i){this.l=e,this.j=t,this.m=n,this.W=i||1,this.U=new ze(this),this.P=wt,e=B?125:void 0,this.V=new Fe(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new _t}function _t(){this.i=null,this.g="",this.h=!1}I(mt,x),I(gt,x),I(vt,ut),vt.prototype.g=function(){return new XMLHttpRequest},vt.prototype.i=function(){return{}},pt=new vt;var wt=45e3,bt={},It={};function Ct(e,t,n){e.L=1,e.v=Ht(Bt(t)),e.s=n,e.S=!0,St(e,null)}function St(e,t){e.G=Date.now(),xt(e),e.A=Bt(e.v);var n=e.A,i=e.W;Array.isArray(i)||(i=[String(i)]),rn(n.i,"t",i),e.C=0,n=e.l.J,e.h=new _t,e.g=ui(e.l,n?t:null,!e.s),0<e.O&&(e.M=new je(w(e.Pa,e,e.g),e.O)),He(e.U,e.g,"readystatechange",e.nb),t=e.I?ie(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),it(),Ke(e.j,e.u,e.A,e.m,e.W,e.s)}function Tt(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Et(e,t,n){let i,s=!0;for(;!e.J&&e.C<n.length;){if(i=kt(e,n),i==It){4==t&&(e.o=4,rt(14),s=!1),Qe(e.j,e.m,null,"[Incomplete Response]");break}if(i==bt){e.o=4,rt(15),Qe(e.j,e.m,n,"[Invalid Chunk]"),s=!1;break}Qe(e.j,e.m,i,null),Pt(e,i)}Tt(e)&&i!=It&&i!=bt&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,rt(16),s=!1),e.i=e.i&&s,s?0<n.length&&!e.ba&&(e.ba=!0,t=e.l,t.g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),ni(t),t.M=!0,rt(11))):(Qe(e.j,e.m,n,"[Invalid Chunked Response]"),Dt(e),Ot(e))}function kt(e,t){var n=e.C,i=t.indexOf("\n",n);return-1==i?It:(n=Number(t.substring(n,i)),isNaN(n)?bt:(i+=1,i+n>t.length?It:(t=t.slice(i,i+n),e.C=i+n,t)))}function xt(e){e.Y=Date.now()+e.P,At(e,e.P)}function At(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=at(w(e.lb,e),t)}function Nt(e){e.B&&(d.clearTimeout(e.B),e.B=null)}function Ot(e){0==e.l.H||e.J||ri(e.l,e)}function Dt(e){Nt(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Ve(e.V),We(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Pt(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||pn(n.i,e)))if(!e.K&&pn(n.i,e)&&3==n.H){try{var i=n.Ja.g.parse(t)}catch(l){i=null}if(Array.isArray(i)&&3==i.length){var s=i;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;si(n),Zn(n)}ti(n),rt(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&0==n.A&&!n.v&&(n.v=at(w(n.ib,n),6e3));if(1>=dn(n.i)&&n.oa){try{n.oa()}catch(l){}n.oa=void 0}}else ai(n,11)}else if((e.K||n.g==e)&&si(n),!N(t))for(s=n.Ja.g.parse(t),t=0;t<s.length;t++){let l=s[t];if(n.V=l[0],l=l[1],2==n.H)if("c"==l[0]){n.K=l[1],n.pa=l[2];const t=l[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const s=l[4];null!=s&&(n.Ga=s,n.l.info("SVER="+n.Ga));const u=l[5];null!=u&&"number"===typeof u&&0<u&&(i=1.5*u,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var r=i.i;r.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(r.j=r.l,r.g=new Set,r.h&&(fn(r,r.h),r.h=null))}if(i.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(i.Da=e,qt(i.I,i.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms")),i=n;var o=e;if(i.wa=li(i,i.J?i.pa:null,i.Y),o.K){mn(i.i,o);var a=o,c=i.L;c&&a.setTimeout(c),a.B&&(Nt(a),xt(a)),i.g=o}else ei(i);0<n.j.length&&Gn(n)}else"stop"!=l[0]&&"close"!=l[0]||ai(n,7);else 3==n.H&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?ai(n,7):Wn(n):"noop"!=l[0]&&n.h&&n.h.Aa(l),n.A=0)}it(4)}catch(l){}}function Rt(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(p(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}for(i in t=[],n=0,e)t[n++]=e[i];return t}function Lt(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(p(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const i in e)t[n++]=i;return t}}}function $t(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(p(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=Lt(e),i=Rt(e),s=i.length,r=0;r<s;r++)t.call(void 0,i[r],n&&n[r],e)}i=yt.prototype,i.setTimeout=function(e){this.P=e},i.nb=function(e){e=e.target;const t=this.M;t&&3==Vn(e)?t.l():this.Pa(e)},i.Pa=function(e){try{if(e==this.g)e:{const u=Vn(this.g);var t=this.g.Ia();const h=this.g.da();if(!(3>u)&&(3!=u||B||this.g&&(this.h.h||this.g.ja()||Bn(this.g)))){this.J||4!=u||7==t||it(8==t||0>=h?3:2),Nt(this);var n=this.g.da();this.ca=n;t:if(Tt(this)){var i=Bn(this.g);e="";var s=i.length,r=4==Vn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Dt(this),Ot(this);var o="";break t}this.h.i=new d.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(i[t],{stream:r&&t==s-1});i.splice(0,s),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,Ge(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.o=3,rt(12),Dt(this),Ot(this);break e}Qe(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pt(this,n)}this.S?(Et(this,u,o),B&&this.i&&3==u&&(He(this.U,this.V,"tick",this.mb),this.V.start())):(Qe(this.j,this.m,o,null),Pt(this,o)),4==u&&Dt(this),this.i&&!this.J&&(4==u?ri(this.l,this):(this.i=!1,xt(this)))}else Un(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,rt(12)):(this.o=0,rt(13)),Dt(this),Ot(this)}}}catch(u){}},i.mb=function(){if(this.g){var e=Vn(this.g),t=this.g.ja();this.C<t.length&&(Nt(this),Et(this,e,t),this.i&&4!=e&&xt(this))}},i.cancel=function(){this.J=!0,Dt(this)},i.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(Ye(this.j,this.A),2!=this.L&&(it(),rt(17)),Dt(this),this.o=2,Ot(this)):At(this,this.Y-e)};var Mt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ft(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),s=null;if(0<=i){var r=e[n].substring(0,i);s=e[n].substring(i+1)}else r=e[n];t(r,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function Vt(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Vt){this.h=e.h,Ut(this,e.j),this.s=e.s,this.g=e.g,jt(this,e.m),this.l=e.l;var t=e.i,n=new en;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),zt(this,n),this.o=e.o}else e&&(t=String(e).match(Mt))?(this.h=!1,Ut(this,t[1]||"",!0),this.s=Wt(t[2]||""),this.g=Wt(t[3]||"",!0),jt(this,t[4]),this.l=Wt(t[5]||"",!0),zt(this,t[6]||"",!0),this.o=Wt(t[7]||"")):(this.h=!1,this.i=new en(null,this.h))}function Bt(e){return new Vt(e)}function Ut(e,t,n){e.j=n?Wt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function jt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function zt(e,t,n){t instanceof en?(e.i=t,an(e.i,e.h)):(n||(t=Zt(t,Xt)),e.i=new en(t,e.h))}function qt(e,t,n){e.i.set(t,n)}function Ht(e){return qt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Wt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Zt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Kt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Kt(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(15&e).toString(16)}Vt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Zt(t,Gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Zt(t,Gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,null!=n&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Zt(n,"/"==n.charAt(0)?Yt:Qt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Zt(n,Jt)),e.join("")};var Gt=/[#\/\?@]/g,Qt=/[#\?:]/g,Yt=/[#\?]/g,Xt=/[#\?@]/g,Jt=/#/g;function en(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function tn(e){e.g||(e.g=new Map,e.h=0,e.i&&Ft(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function nn(e,t){tn(e),t=on(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function sn(e,t){return tn(e),t=on(e,t),e.g.has(t)}function rn(e,t,n){nn(e,t),0<n.length&&(e.i=null,e.g.set(on(e,t),E(n)),e.h+=n.length)}function on(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function an(e,t){t&&!e.j&&(tn(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(nn(this,t),rn(this,n,e))}),e)),e.j=t}i=en.prototype,i.add=function(e,t){tn(this),this.i=null,e=on(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},i.forEach=function(e,t){tn(this),this.g.forEach((function(n,i){n.forEach((function(n){e.call(t,n,i,this)}),this)}),this)},i.ta=function(){tn(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let i=0;i<t.length;i++){const s=e[i];for(let e=0;e<s.length;e++)n.push(t[i])}return n},i.Z=function(e){tn(this);let t=[];if("string"===typeof e)sn(this,e)&&(t=t.concat(this.g.get(on(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},i.set=function(e,t){return tn(this),this.i=null,e=on(this,e),sn(this,e)&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},i.get=function(e,t){return e?(e=this.Z(e),0<e.length?String(e[0]):t):t},i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var i=t[n];const r=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var s=r;""!==o[i]&&(s+="="+encodeURIComponent(String(o[i]))),e.push(s)}}return this.i=e.join("&")};var cn=class{constructor(e,t){this.g=e,this.map=t}};function ln(e){this.l=e||un,d.PerformanceNavigationTiming?(e=d.performance.getEntriesByType("navigation"),e=0<e.length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol)):e=!!(d.g&&d.g.Ka&&d.g.Ka()&&d.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var un=10;function hn(e){return!!e.h||!!e.g&&e.g.size>=e.j}function dn(e){return e.h?1:e.g?e.g.size:0}function pn(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function fn(e,t){e.g?e.g.add(t):e.h=t}function mn(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function gn(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return E(e.i)}ln.prototype.cancel=function(){if(this.i=gn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var vn=class{stringify(e){return d.JSON.stringify(e,void 0)}parse(e){return d.JSON.parse(e,void 0)}};function yn(){this.g=new vn}function _n(e,t,n){const i=n||"";try{$t(e,(function(e,n){let s=e;f(e)&&(s=Te(e)),t.push(i+n+"="+encodeURIComponent(s))}))}catch(s){throw t.push(i+"type="+encodeURIComponent("_badmap")),s}}function wn(e,t){const n=new Ze;if(d.Image){const i=new Image;i.onload=b(bn,n,i,"TestLoadImage: loaded",!0,t),i.onerror=b(bn,n,i,"TestLoadImage: error",!1,t),i.onabort=b(bn,n,i,"TestLoadImage: abort",!1,t),i.ontimeout=b(bn,n,i,"TestLoadImage: timeout",!1,t),d.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=e}else t(!1)}function bn(e,t,n,i,s){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,s(i)}catch(r){}}function In(e){this.l=e.fc||null,this.j=e.ob||!1}function Cn(e,t){Ie.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Sn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}I(In,ut),In.prototype.g=function(){return new Cn(this.l,this.j)},In.prototype.i=function(e){return function(){return e}}({}),I(Cn,Ie);var Sn=0;function Tn(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function En(e){e.readyState=4,e.l=null,e.j=null,e.A=null,kn(e)}function kn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}i=Cn.prototype,i.open=function(e,t){if(this.readyState!=Sn)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,kn(this)},i.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||d).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},i.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,En(this)),this.readyState=Sn},i.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,kn(this)),this.g&&(this.readyState=3,kn(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof d.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Tn(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},i.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?En(this):kn(this),3==this.readyState&&Tn(this)}},i.Za=function(e){this.g&&(this.response=this.responseText=e,En(this))},i.Ya=function(e){this.g&&(this.response=e,En(this))},i.ka=function(){this.g&&En(this)},i.setRequestHeader=function(e,t){this.v.append(e,t)},i.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Cn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var xn=d.JSON.parse;function An(e){Ie.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Nn,this.L=this.M=!1}I(An,Ie);var Nn="",On=/^https?$/i,Dn=["POST","PUT"];function Pn(e){return F&&"number"===typeof e.timeout&&void 0!==e.ontimeout}function Rn(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Ln(e),Mn(e)}function Ln(e){e.F||(e.F=!0,Ce(e,"complete"),Ce(e,"error"))}function $n(e){if(e.h&&"undefined"!=typeof h&&(!e.C[1]||4!=Vn(e)||2!=e.da()))if(e.v&&4==Vn(e))Be(e.La,0,e);else if(Ce(e,"readystatechange"),4==Vn(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===a){var s=String(e.I).match(Mt)[1]||null;!s&&d.self&&d.self.location&&(s=d.self.location.protocol.slice(0,-1)),i=!On.test(s?s.toLowerCase():"")}n=i}if(n)Ce(e,"complete"),Ce(e,"success");else{e.m=6;try{var r=2<Vn(e)?e.g.statusText:""}catch(o){r=""}e.j=r+" ["+e.da()+"]",Ln(e)}}finally{Mn(e)}}}function Mn(e,t){if(e.g){Fn(e);const i=e.g,s=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Ce(e,"ready");try{i.onreadystatechange=s}catch(n){}}}function Fn(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(d.clearTimeout(e.A),e.A=null)}function Vn(e){return e.g?e.g.readyState:0}function Bn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Nn:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Yi){return null}}function Un(e){const t={};e=(e.g&&2<=Vn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<e.length;i++){if(N(e[i]))continue;var n=Oe(e[i]);const s=n[0];if(n=n[1],"string"!==typeof n)continue;n=n.trim();const r=t[s]||[];t[s]=r,r.push(n)}ne(t,(function(e){return e.join(", ")}))}function jn(e){let t="";return te(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function zn(e,t,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=jn(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):qt(e,t,n))}function qn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Hn(e){this.Ga=0,this.j=[],this.l=new Ze,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=qn("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=qn("baseRetryDelayMs",5e3,e),this.hb=qn("retryDelaySeedMs",1e4,e),this.eb=qn("forwardChannelMaxRetries",2,e),this.xa=qn("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new ln(e&&e.concurrentRequestLimit),this.Ja=new yn,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Wn(e){if(Kn(e),3==e.H){var t=e.W++,n=Bt(e.I);if(qt(n,"SID",e.K),qt(n,"RID",t),qt(n,"TYPE","terminate"),Xn(e,n),t=new yt(e,e.l,t),t.L=2,t.v=Ht(Bt(n)),n=!1,d.navigator&&d.navigator.sendBeacon)try{n=d.navigator.sendBeacon(t.v.toString(),"")}catch(i){}!n&&d.Image&&((new Image).src=t.v,n=!0),n||(t.g=ui(t.l,null),t.g.ha(t.v)),t.G=Date.now(),xt(t)}ci(e)}function Zn(e){e.g&&(ni(e),e.g.cancel(),e.g=null)}function Kn(e){Zn(e),e.u&&(d.clearTimeout(e.u),e.u=null),si(e),e.i.cancel(),e.m&&("number"===typeof e.m&&d.clearTimeout(e.m),e.m=null)}function Gn(e){if(!hn(e.i)&&!e.m){e.m=!0;var t=e.Na;Pe||$e(),Re||(Pe(),Re=!0),Le.add(t,e),e.C=0}}function Qn(e,t){return!(dn(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=at(w(e.Na,e,t),oi(e,e.C)),e.C++,!0))}function Yn(e,t){var n;n=t?t.m:e.W++;const i=Bt(e.I);qt(i,"SID",e.K),qt(i,"RID",n),qt(i,"AID",e.V),Xn(e,i),e.o&&e.s&&zn(i,e.o,e.s),n=new yt(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Jn(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),fn(e.i,n),Ct(n,i,t)}function Xn(e,t){e.na&&te(e.na,(function(e,n){qt(t,n,e)})),e.h&&$t({},(function(e,n){qt(t,n,e)}))}function Jn(e,t,n){n=Math.min(e.j.length,n);var i=e.h?w(e.h.Va,e.h,e):null;e:{var s=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let r=!0;for(let o=0;o<n;o++){let n=s[o].g;const a=s[o].map;if(n-=t,0>n)t=Math.max(0,s[o].g-100),r=!1;else try{_n(a,e,"req"+n+"_")}catch(gr){i&&i(a)}}if(r){i=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,i}function ei(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Pe||$e(),Re||(Pe(),Re=!0),Le.add(t,e),e.A=0}}function ti(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=at(w(e.Ma,e),oi(e,e.A)),e.A++,!0)}function ni(e){null!=e.B&&(d.clearTimeout(e.B),e.B=null)}function ii(e){e.g=new yt(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Bt(e.wa);qt(t,"RID","rpc"),qt(t,"SID",e.K),qt(t,"AID",e.V),qt(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&qt(t,"TO",e.qa),qt(t,"TYPE","xmlhttp"),Xn(e,t),e.o&&e.s&&zn(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Ht(Bt(t)),n.s=null,n.S=!0,St(n,e)}function si(e){null!=e.v&&(d.clearTimeout(e.v),e.v=null)}function ri(e,t){var n=null;if(e.g==t){si(e),ni(e),e.g=null;var i=2}else{if(!pn(e.i,t))return;n=t.F,mn(e.i,t),i=1}if(0!=e.H)if(t.i)if(1==i){n=t.s?t.s.length:0,t=Date.now()-t.G;var s=e.C;i=tt(),Ce(i,new ot(i,n)),Gn(e)}else ei(e);else if(s=t.o,3==s||0==s&&0<t.ca||!(1==i&&Qn(e,t)||2==i&&ti(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),s){case 1:ai(e,5);break;case 4:ai(e,10);break;case 3:ai(e,6);break;default:ai(e,2)}}function oi(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function ai(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var i=w(e.pb,e);n||(n=new Vt("//www.google.com/images/cleardot.gif"),d.location&&"http"==d.location.protocol||Ut(n,"https"),Ht(n)),wn(n.toString(),i)}else rt(2);e.H=0,e.h&&e.h.za(t),ci(e),Kn(e)}function ci(e){if(e.H=0,e.ma=[],e.h){const t=gn(e.i);0==t.length&&0==e.j.length||(k(e.ma,t),k(e.ma,e.j),e.i.i.length=0,E(e.j),e.j.length=0),e.h.ya()}}function li(e,t,n){var i=n instanceof Vt?Bt(n):new Vt(n);if(""!=i.g)t&&(i.g=t+"."+i.g),jt(i,i.m);else{var s=d.location;i=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var r=new Vt(null);i&&Ut(r,i),t&&(r.g=t),s&&jt(r,s),n&&(r.l=n),i=r}return n=e.F,t=e.Da,n&&t&&qt(i,n,t),qt(i,"VER",e.ra),Xn(e,i),i}function ui(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return t=n&&e.Ha&&!e.va?new An(new In({ob:!0})):new An(e.va),t.Oa(e.J),t}function hi(){}function di(){if(F&&!(10<=Number(K)))throw Error("Environmental error: no available transport.")}function pi(e,t){Ie.call(this),this.g=new Hn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!N(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!N(t)&&(this.g.F=t,e=this.h,null!==e&&t in e&&(e=this.h,t in e&&delete e[t])),this.j=new gi(this)}function fi(e){mt.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function mi(){gt.call(this),this.status=1}function gi(e){this.g=e}function vi(){this.blockSize=-1}function yi(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function _i(e,t,n){n||(n=0);var i=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)i[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)i[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var r=e.g[3],o=t+(r^n&(s^r))+i[0]+3614090360&4294967295;t=n+(o<<7&4294967295|o>>>25),o=r+(s^t&(n^s))+i[1]+3905402710&4294967295,r=t+(o<<12&4294967295|o>>>20),o=s+(n^r&(t^n))+i[2]+606105819&4294967295,s=r+(o<<17&4294967295|o>>>15),o=n+(t^s&(r^t))+i[3]+3250441966&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(r^n&(s^r))+i[4]+4118548399&4294967295,t=n+(o<<7&4294967295|o>>>25),o=r+(s^t&(n^s))+i[5]+1200080426&4294967295,r=t+(o<<12&4294967295|o>>>20),o=s+(n^r&(t^n))+i[6]+2821735955&4294967295,s=r+(o<<17&4294967295|o>>>15),o=n+(t^s&(r^t))+i[7]+4249261313&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(r^n&(s^r))+i[8]+1770035416&4294967295,t=n+(o<<7&4294967295|o>>>25),o=r+(s^t&(n^s))+i[9]+2336552879&4294967295,r=t+(o<<12&4294967295|o>>>20),o=s+(n^r&(t^n))+i[10]+4294925233&4294967295,s=r+(o<<17&4294967295|o>>>15),o=n+(t^s&(r^t))+i[11]+2304563134&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(r^n&(s^r))+i[12]+1804603682&4294967295,t=n+(o<<7&4294967295|o>>>25),o=r+(s^t&(n^s))+i[13]+4254626195&4294967295,r=t+(o<<12&4294967295|o>>>20),o=s+(n^r&(t^n))+i[14]+2792965006&4294967295,s=r+(o<<17&4294967295|o>>>15),o=n+(t^s&(r^t))+i[15]+1236535329&4294967295,n=s+(o<<22&4294967295|o>>>10),o=t+(s^r&(n^s))+i[1]+4129170786&4294967295,t=n+(o<<5&4294967295|o>>>27),o=r+(n^s&(t^n))+i[6]+3225465664&4294967295,r=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(r^t))+i[11]+643717713&4294967295,s=r+(o<<14&4294967295|o>>>18),o=n+(r^t&(s^r))+i[0]+3921069994&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^r&(n^s))+i[5]+3593408605&4294967295,t=n+(o<<5&4294967295|o>>>27),o=r+(n^s&(t^n))+i[10]+38016083&4294967295,r=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(r^t))+i[15]+3634488961&4294967295,s=r+(o<<14&4294967295|o>>>18),o=n+(r^t&(s^r))+i[4]+3889429448&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^r&(n^s))+i[9]+568446438&4294967295,t=n+(o<<5&4294967295|o>>>27),o=r+(n^s&(t^n))+i[14]+3275163606&4294967295,r=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(r^t))+i[3]+4107603335&4294967295,s=r+(o<<14&4294967295|o>>>18),o=n+(r^t&(s^r))+i[8]+1163531501&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(s^r&(n^s))+i[13]+2850285829&4294967295,t=n+(o<<5&4294967295|o>>>27),o=r+(n^s&(t^n))+i[2]+4243563512&4294967295,r=t+(o<<9&4294967295|o>>>23),o=s+(t^n&(r^t))+i[7]+1735328473&4294967295,s=r+(o<<14&4294967295|o>>>18),o=n+(r^t&(s^r))+i[12]+2368359562&4294967295,n=s+(o<<20&4294967295|o>>>12),o=t+(n^s^r)+i[5]+4294588738&4294967295,t=n+(o<<4&4294967295|o>>>28),o=r+(t^n^s)+i[8]+2272392833&4294967295,r=t+(o<<11&4294967295|o>>>21),o=s+(r^t^n)+i[11]+1839030562&4294967295,s=r+(o<<16&4294967295|o>>>16),o=n+(s^r^t)+i[14]+4259657740&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^r)+i[1]+2763975236&4294967295,t=n+(o<<4&4294967295|o>>>28),o=r+(t^n^s)+i[4]+1272893353&4294967295,r=t+(o<<11&4294967295|o>>>21),o=s+(r^t^n)+i[7]+4139469664&4294967295,s=r+(o<<16&4294967295|o>>>16),o=n+(s^r^t)+i[10]+3200236656&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^r)+i[13]+681279174&4294967295,t=n+(o<<4&4294967295|o>>>28),o=r+(t^n^s)+i[0]+3936430074&4294967295,r=t+(o<<11&4294967295|o>>>21),o=s+(r^t^n)+i[3]+3572445317&4294967295,s=r+(o<<16&4294967295|o>>>16),o=n+(s^r^t)+i[6]+76029189&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(n^s^r)+i[9]+3654602809&4294967295,t=n+(o<<4&4294967295|o>>>28),o=r+(t^n^s)+i[12]+3873151461&4294967295,r=t+(o<<11&4294967295|o>>>21),o=s+(r^t^n)+i[15]+530742520&4294967295,s=r+(o<<16&4294967295|o>>>16),o=n+(s^r^t)+i[2]+3299628645&4294967295,n=s+(o<<23&4294967295|o>>>9),o=t+(s^(n|~r))+i[0]+4096336452&4294967295,t=n+(o<<6&4294967295|o>>>26),o=r+(n^(t|~s))+i[7]+1126891415&4294967295,r=t+(o<<10&4294967295|o>>>22),o=s+(t^(r|~n))+i[14]+2878612391&4294967295,s=r+(o<<15&4294967295|o>>>17),o=n+(r^(s|~t))+i[5]+4237533241&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~r))+i[12]+1700485571&4294967295,t=n+(o<<6&4294967295|o>>>26),o=r+(n^(t|~s))+i[3]+2399980690&4294967295,r=t+(o<<10&4294967295|o>>>22),o=s+(t^(r|~n))+i[10]+4293915773&4294967295,s=r+(o<<15&4294967295|o>>>17),o=n+(r^(s|~t))+i[1]+2240044497&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~r))+i[8]+1873313359&4294967295,t=n+(o<<6&4294967295|o>>>26),o=r+(n^(t|~s))+i[15]+4264355552&4294967295,r=t+(o<<10&4294967295|o>>>22),o=s+(t^(r|~n))+i[6]+2734768916&4294967295,s=r+(o<<15&4294967295|o>>>17),o=n+(r^(s|~t))+i[13]+1309151649&4294967295,n=s+(o<<21&4294967295|o>>>11),o=t+(s^(n|~r))+i[4]+4149444226&4294967295,t=n+(o<<6&4294967295|o>>>26),o=r+(n^(t|~s))+i[11]+3174756917&4294967295,r=t+(o<<10&4294967295|o>>>22),o=s+(t^(r|~n))+i[2]+718787259&4294967295,s=r+(o<<15&4294967295|o>>>17),o=n+(r^(s|~t))+i[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+r&4294967295}function wi(e,t){this.h=t;for(var n=[],i=!0,s=e.length-1;0<=s;s--){var r=0|e[s];i&&r==t||(n[s]=r,i=!1)}this.g=n}i=An.prototype,i.Oa=function(e){this.M=e},i.ha=function(e,t,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():pt.g(),this.C=this.u?ht(this.u):ht(pt),this.g.onreadystatechange=w(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(r){return void Rn(this,r)}if(e=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var s in i)n.set(s,i[s]);else{if("function"!==typeof i.keys||"function"!==typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const e of i.keys())n.set(e,i.get(e))}i=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),s=d.FormData&&e instanceof d.FormData,!(0<=T(Dn,t))||i||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Fn(this),0<this.B&&((this.L=Pn(this.g))?(this.g.timeout=this.B,this.g.ontimeout=w(this.ua,this)):this.A=Be(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(r){Rn(this,r)}},i.ua=function(){"undefined"!=typeof h&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ce(this,"timeout"),this.abort(8))},i.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Ce(this,"complete"),Ce(this,"abort"),Mn(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Mn(this,!0)),An.$.N.call(this)},i.La=function(){this.s||(this.G||this.v||this.l?$n(this):this.kb())},i.kb=function(){$n(this)},i.isActive=function(){return!!this.g},i.da=function(){try{return 2<Vn(this)?this.g.status:-1}catch(e){return-1}},i.ja=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},i.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),xn(t)}},i.Ia=function(){return this.m},i.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},i=Hn.prototype,i.ra=8,i.H=1,i.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const s=new yt(this,this.l,e);let r=this.s;if(this.U&&(r?(r=ie(r),re(r,this.U)):r=this.U),null!==this.o||this.O||(s.I=r,r=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var i=this.j[n];if(i="__data__"in i.map&&(i=i.map.__data__,"string"===typeof i)?i.length:void 0,void 0===i)break;if(t+=i,4096<t){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Jn(this,s,t),n=Bt(this.I),qt(n,"RID",e),qt(n,"CVER",22),this.F&&qt(n,"X-HTTP-Session-Id",this.F),Xn(this,n),r&&(this.O?t="headers="+encodeURIComponent(String(jn(r)))+"&"+t:this.o&&zn(n,this.o,r)),fn(this.i,s),this.bb&&qt(n,"TYPE","init"),this.P?(qt(n,"$req",t),qt(n,"SID","null"),s.aa=!0,Ct(s,n,null)):Ct(s,n,t),this.H=2}}else 3==this.H&&(e?Yn(this,e):0==this.j.length||hn(this.i)||Yn(this))},i.Ma=function(){if(this.u=null,ii(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=at(w(this.jb,this),e)}},i.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,rt(10),Zn(this),ii(this))},i.ib=function(){null!=this.v&&(this.v=null,Zn(this),ti(this),rt(19))},i.pb=function(e){e?(this.l.info("Successfully pinged google.com"),rt(2)):(this.l.info("Failed to ping google.com"),rt(1))},i.isActive=function(){return!!this.h&&this.h.isActive(this)},i=hi.prototype,i.Ba=function(){},i.Aa=function(){},i.za=function(){},i.ya=function(){},i.isActive=function(){return!0},i.Va=function(){},di.prototype.g=function(e,t){return new pi(e,t)},I(pi,Ie),pi.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;rt(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=li(e,null,e.Y),Gn(e)},pi.prototype.close=function(){Wn(this.g)},pi.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&(n={},n.__data__=Te(e),e=n);t.j.push(new cn(t.fb++,e)),3==t.H&&Gn(t)},pi.prototype.N=function(){this.g.h=null,delete this.j,Wn(this.g),delete this.g,pi.$.N.call(this)},I(fi,mt),I(mi,gt),I(gi,hi),gi.prototype.Ba=function(){Ce(this.g,"a")},gi.prototype.Aa=function(e){Ce(this.g,new fi(e))},gi.prototype.za=function(e){Ce(this.g,new mi)},gi.prototype.ya=function(){Ce(this.g,"b")},I(yi,vi),yi.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},yi.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,i=this.m,s=this.h,r=0;r<t;){if(0==s)for(;r<=n;)_i(this,e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[s++]=e.charCodeAt(r++),s==this.blockSize){_i(this,i),s=0;break}}else for(;r<t;)if(i[s++]=e[r++],s==this.blockSize){_i(this,i),s=0;break}}this.h=s,this.i+=t},yi.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var i=0;32>i;i+=8)e[n++]=this.g[t]>>>i&255;return e};var bi={};function Ii(e){return-128<=e&&128>e?R(e,(function(e){return new wi([0|e],0>e?-1:0)})):new wi([0|e],0>e?-1:0)}function Ci(e){if(isNaN(e)||!isFinite(e))return Ei;if(0>e)return Oi(Ci(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=Ti;return new wi(t,0)}function Si(e,t){if(0==e.length)throw Error("number format error: empty string");if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if("-"==e.charAt(0))return Oi(Si(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Ci(Math.pow(t,8)),i=Ei,s=0;s<e.length;s+=8){var r=Math.min(8,e.length-s),o=parseInt(e.substring(s,s+r),t);8>r?(r=Ci(Math.pow(t,r)),i=i.R(r).add(Ci(o))):(i=i.R(n),i=i.add(Ci(o)))}return i}var Ti=4294967296,Ei=Ii(0),ki=Ii(1),xi=Ii(16777216);function Ai(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Ni(e){return-1==e.h}function Oi(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new wi(n,~e.h).add(ki)}function Di(e,t){return e.add(Oi(t))}function Pi(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Ri(e,t){this.g=e,this.h=t}function Li(e,t){if(Ai(t))throw Error("division by zero");if(Ai(e))return new Ri(Ei,Ei);if(Ni(e))return t=Li(Oi(e),t),new Ri(Oi(t.g),Oi(t.h));if(Ni(t))return t=Li(e,Oi(t)),new Ri(Oi(t.g),t.h);if(30<e.g.length){if(Ni(e)||Ni(t))throw Error("slowDivide_ only works with positive integers.");for(var n=ki,i=t;0>=i.X(e);)n=$i(n),i=$i(i);var s=Mi(n,1),r=Mi(i,1);for(i=Mi(i,2),n=Mi(n,2);!Ai(i);){var o=r.add(i);0>=o.X(e)&&(s=s.add(n),r=o),i=Mi(i,1),n=Mi(n,1)}return t=Di(e,s.R(t)),new Ri(s,t)}for(s=Ei;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),i=Math.ceil(Math.log(n)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),r=Ci(n),o=r.R(t);Ni(o)||0<o.X(e);)n-=i,r=Ci(n),o=r.R(t);Ai(r)&&(r=ki),s=s.add(r),e=Di(e,o)}return new Ri(s,e)}function $i(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.D(i)<<1|e.D(i-1)>>>31;return new wi(n,e.h)}function Mi(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,s=[],r=0;r<i;r++)s[r]=0<t?e.D(r+n)>>>t|e.D(r+n+1)<<32-t:e.D(r+n);return new wi(s,e.h)}i=wi.prototype,i.ea=function(){if(Ni(this))return-Oi(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var i=this.D(n);e+=(0<=i?i:Ti+i)*t,t*=Ti}return e},i.toString=function(e){if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(Ai(this))return"0";if(Ni(this))return"-"+Oi(this).toString(e);for(var t=Ci(Math.pow(e,6)),n=this,i="";;){var s=Li(n,t).g;n=Di(n,s.R(t));var r=((0<n.g.length?n.g[0]:n.h)>>>0).toString(e);if(n=s,Ai(n))return r+i;for(;6>r.length;)r="0"+r;i=r+i}},i.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},i.X=function(e){return e=Di(this,e),Ni(e)?-1:Ai(e)?0:1},i.abs=function(){return Ni(this)?Oi(this):this},i.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,s=0;s<=t;s++){var r=i+(65535&this.D(s))+(65535&e.D(s)),o=(r>>>16)+(this.D(s)>>>16)+(e.D(s)>>>16);i=o>>>16,r&=65535,o&=65535,n[s]=o<<16|r}return new wi(n,-2147483648&n[n.length-1]?-1:0)},i.R=function(e){if(Ai(this)||Ai(e))return Ei;if(Ni(this))return Ni(e)?Oi(this).R(Oi(e)):Oi(Oi(this).R(e));if(Ni(e))return Oi(this.R(Oi(e)));if(0>this.X(xi)&&0>e.X(xi))return Ci(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var s=0;s<e.g.length;s++){var r=this.D(i)>>>16,o=65535&this.D(i),a=e.D(s)>>>16,c=65535&e.D(s);n[2*i+2*s]+=o*c,Pi(n,2*i+2*s),n[2*i+2*s+1]+=r*c,Pi(n,2*i+2*s+1),n[2*i+2*s+1]+=o*a,Pi(n,2*i+2*s+1),n[2*i+2*s+2]+=r*a,Pi(n,2*i+2*s+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new wi(n,0)},i.gb=function(e){return Li(this,e).h},i.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)&e.D(i);return new wi(n,this.h&e.h)},i.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)|e.D(i);return new wi(n,this.h|e.h)},i.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)^e.D(i);return new wi(n,this.h^e.h)},di.prototype.createWebChannel=di.prototype.g,pi.prototype.send=pi.prototype.u,pi.prototype.open=pi.prototype.m,pi.prototype.close=pi.prototype.close,ct.NO_ERROR=0,ct.TIMEOUT=8,ct.HTTP_ERROR=6,lt.COMPLETE="complete",dt.EventType=ft,ft.OPEN="a",ft.CLOSE="b",ft.ERROR="c",ft.MESSAGE="d",Ie.prototype.listen=Ie.prototype.O,An.prototype.listenOnce=An.prototype.P,An.prototype.getLastError=An.prototype.Sa,An.prototype.getLastErrorCode=An.prototype.Ia,An.prototype.getStatus=An.prototype.da,An.prototype.getResponseJson=An.prototype.Wa,An.prototype.getResponseText=An.prototype.ja,An.prototype.send=An.prototype.ha,An.prototype.setWithCredentials=An.prototype.Oa,yi.prototype.digest=yi.prototype.l,yi.prototype.reset=yi.prototype.reset,yi.prototype.update=yi.prototype.j,wi.prototype.add=wi.prototype.add,wi.prototype.multiply=wi.prototype.R,wi.prototype.modulo=wi.prototype.gb,wi.prototype.compare=wi.prototype.X,wi.prototype.toNumber=wi.prototype.ea,wi.prototype.toString=wi.prototype.toString,wi.prototype.getBits=wi.prototype.D,wi.fromNumber=Ci,wi.fromString=Si;var Fi=u.createWebChannelTransport=function(){return new di},Vi=u.getStatEventTarget=function(){return tt()},Bi=u.ErrorCode=ct,Ui=u.EventType=lt,ji=u.Event=Je,zi=u.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},qi=u.FetchXmlHttpFactory=In,Hi=u.WebChannel=dt,Wi=u.XhrIo=An,Zi=u.Md5=yi,Ki=u.Integer=wi;const Gi="@firebase/firestore";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Qi.UNAUTHENTICATED=new Qi(null),Qi.GOOGLE_CREDENTIALS=new Qi("google-credentials-uid"),Qi.FIRST_PARTY=new Qi("first-party-uid"),Qi.MOCK_USER=new Qi("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let Yi="10.0.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi=new a.Yd("@firebase/firestore");function Ji(){return Xi.logLevel}function es(e){Xi.setLogLevel(e)}function ts(e,...t){if(Xi.logLevel<=a["in"].DEBUG){const n=t.map(ss);Xi.debug(`Firestore (${Yi}): ${e}`,...n)}}function ns(e,...t){if(Xi.logLevel<=a["in"].ERROR){const n=t.map(ss);Xi.error(`Firestore (${Yi}): ${e}`,...n)}}function is(e,...t){if(Xi.logLevel<=a["in"].WARN){const n=t.map(ss);Xi.warn(`Firestore (${Yi}): ${e}`,...n)}}function ss(e){if("string"==typeof e)return e;try{
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rs(e="Unexpected state"){const t=`FIRESTORE (${Yi}) INTERNAL ASSERTION FAILED: `+e;throw ns(t),new Error(t)}function os(e,t){e||rs()}function as(e,t){e||rs()}function cs(e,t){return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class us extends c.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ps{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Qi.UNAUTHENTICATED)))}shutdown(){}}class fs{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class ms{constructor(e){this.t=e,this.currentUser=Qi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const i=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new hs;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new hs,e.enqueueRetryable((()=>i(this.currentUser)))};const r=()=>{const t=s;e.enqueueRetryable((async()=>{await t.promise,await i(this.currentUser)}))},o=e=>{ts("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),r()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(ts("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new hs)}}),0),r()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(ts("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(os("string"==typeof t.accessToken),new ds(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return os(null===e||"string"==typeof e),new Qi(e)}}class gs{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Qi.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class vs{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new gs(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Qi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ys{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _s{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&ts("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,ts("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const i=e=>{ts("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>i(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?i(e):ts("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(os("string"==typeof e.token),this.R=e.token,new ys(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ws(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=ws(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<t&&(n+=e.charAt(i[s]%e.length))}return n}}function Is(e,t){return e<t?-1:e>t?1:0}function Cs(e,t,n){return e.length===t.length&&e.every(((e,i)=>n(e,t[i])))}function Ss(e){return e+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new us(ls.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new us(ls.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new us(ls.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new us(ls.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ts.fromMillis(Date.now())}static fromDate(e){return Ts.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Ts(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Is(this.nanoseconds,e.nanoseconds):Is(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Es(e)}static min(){return new Es(new Ts(0,0))}static max(){return new Es(new Ts(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e,t,n){void 0===t?t=0:t>e.length&&rs(),void 0===n?n=e.length-t:n>e.length-t&&rs(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ks.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ks?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const n=e.get(i),s=t.get(i);if(n<s)return-1;if(n>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class xs extends ks{construct(e,t,n){return new xs(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new us(ls.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new xs(t)}static emptyPath(){return new xs([])}}const As=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ns extends ks{construct(e,t,n){return new Ns(e,t,n)}static isValidIdentifier(e){return As.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ns.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ns(["__name__"])}static fromServerFormat(e){const t=[];let n="",i=0;const s=()=>{if(0===n.length)throw new us(ls.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let r=!1;for(;i<e.length;){const t=e[i];if("\\"===t){if(i+1===e.length)throw new us(ls.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[i+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new us(ls.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,i+=2}else"`"===t?(r=!r,i++):"."!==t||r?(n+=t,i++):(s(),i++)}if(s(),r)throw new us(ls.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ns(t)}static emptyPath(){return new Ns([])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e){this.path=e}static fromPath(e){return new Os(xs.fromString(e))}static fromName(e){return new Os(xs.fromString(e).popFirst(5))}static empty(){return new Os(xs.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===xs.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return xs.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Os(new xs(e.slice()))}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,t,n,i){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=i}}function Ps(e){return e.fields.find((e=>2===e.kind))}function Rs(e){return e.fields.filter((e=>2!==e.kind))}Ds.UNKNOWN_ID=-1;class Ls{constructor(e,t){this.fieldPath=e,this.kind=t}}class $s{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new $s(0,Vs.min())}}function Ms(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,s=Es.fromTimestamp(1e9===i?new Ts(n+1,0):new Ts(n,i));return new Vs(s,Os.empty(),t)}function Fs(e){return new Vs(e.readTime,e.key,-1)}class Vs{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Vs(Es.min(),Os.empty(),-1)}static max(){return new Vs(Es.max(),Os.empty(),-1)}}function Bs(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Os.comparator(e.documentKey,t.documentKey),0!==n?n:Is(e.largestBatchId,t.largestBatchId))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class js{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zs(e){if(e.code!==ls.FAILED_PRECONDITION||e.message!==Us)throw e;ts("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&rs(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new qs(((n,i)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,i)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof qs?t:qs.resolve(t)}catch(e){return qs.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):qs.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):qs.reject(t)}static resolve(e){return new qs(((t,n)=>{t(e)}))}static reject(e){return new qs(((t,n)=>{n(e)}))}static waitFor(e){return new qs(((t,n)=>{let i=0,s=0,r=!1;e.forEach((e=>{++i,e.next((()=>{++s,r&&s===i&&t()}),(e=>n(e)))})),r=!0,s===i&&t()}))}static or(e){let t=qs.resolve(!1);for(const n of e)t=t.next((e=>e?qs.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,i)=>{n.push(t.call(this,e,i))})),this.waitFor(n)}static mapArray(e,t){return new qs(((n,i)=>{const s=e.length,r=new Array(s);let o=0;for(let a=0;a<s;a++){const c=a;t(e[c]).next((e=>{r[c]=e,++o,o===s&&n(r)}),(e=>i(e)))}}))}static doWhile(e,t){return new qs(((n,i)=>{const s=()=>{!0===e()?t().next((()=>{s()}),i):n()};s()}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.m=new hs,this.transaction.oncomplete=()=>{this.m.resolve()},this.transaction.onabort=()=>{t.error?this.m.reject(new Ks(e,t.error)):this.m.resolve()},this.transaction.onerror=t=>{const n=Js(t.target.error);this.m.reject(new Ks(e,n))}}static open(e,t,n,i){try{return new Hs(t,e.transaction(i,n))}catch(e){throw new Ks(t,e)}}get g(){return this.m.promise}abort(e){e&&this.m.reject(e),this.aborted||(ts("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}p(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Qs(t)}}class Ws{constructor(e,t,n){this.name=e,this.version=t,this.S=n,12.2===Ws.D((0,c.z$)())&&ns("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ts("SimpleDb","Removing database:",e),Ys(window.indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!(0,c.hl)())return!1;if(Ws.C())return!0;const e=(0,c.z$)(),t=Ws.D(e),n=0<t&&t<10,i=Ws.F(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",BASE_URL:"/"})||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static F(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async N(e){return this.db||(ts("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=e=>{const n=e.target.result;t(n)},i.onblocked=()=>{n(new Ks(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=t=>{const i=t.target.error;"VersionError"===i.name?n(new us(ls.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===i.name?n(new us(ls.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new Ks(e,i))},i.onupgradeneeded=e=>{ts("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.S.B(t,i.transaction,e.oldVersion,this.version).next((()=>{ts("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.L&&(this.db.onversionchange=e=>this.L(e)),this.db}k(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,i){const s="readonly"===t;let r=0;for(;;){++r;try{this.db=await this.N(e);const t=Hs.open(this.db,e,s?"readonly":"readwrite",n),r=i(t).next((e=>(t.p(),e))).catch((e=>(t.abort(e),qs.reject(e)))).toPromise();return r.catch((()=>{})),await t.g,r}catch(e){const t=e,n="FirebaseError"!==t.name&&r<3;if(ts("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Zs{constructor(e){this.q=e,this.K=!1,this.$=null}get isDone(){return this.K}get U(){return this.$}set cursor(e){this.q=e}done(){this.K=!0}W(e){this.$=e}delete(){return Ys(this.q.delete())}}class Ks extends us{constructor(e,t){super(ls.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Gs(e){return"IndexedDbTransactionError"===e.name}class Qs{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(ts("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(ts("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ys(n)}add(e){return ts("SimpleDb","ADD",this.store.name,e,e),Ys(this.store.add(e))}get(e){return Ys(this.store.get(e)).next((t=>(void 0===t&&(t=null),ts("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return ts("SimpleDb","DELETE",this.store.name,e),Ys(this.store.delete(e))}count(){return ts("SimpleDb","COUNT",this.store.name),Ys(this.store.count())}G(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.j(e,((e,n)=>{t.push(n)})).next((()=>t))}{const e=this.store.getAll(n.range);return new qs(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}}H(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new qs(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}J(e,t){ts("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.Y=!1;const i=this.cursor(n);return this.j(i,((e,t,n)=>n.delete()))}Z(e,t){let n;t?n=e:(n={},t=e);const i=this.cursor(n);return this.j(i,t)}X(e){const t=this.cursor({});return new qs(((n,i)=>{t.onerror=e=>{const t=Js(e.target.error);i(t)},t.onsuccess=t=>{const i=t.target.result;i?e(i.primaryKey,i.value).next((e=>{e?i.continue():n()})):n()}}))}j(e,t){const n=[];return new qs(((i,s)=>{e.onerror=e=>{s(e.target.error)},e.onsuccess=e=>{const s=e.target.result;if(!s)return void i();const r=new Zs(s),o=t(s.primaryKey,s.value,r);if(o instanceof qs){const e=o.catch((e=>(r.done(),qs.reject(e))));n.push(e)}r.isDone?i():null===r.U?s.continue():s.continue(r.U)}})).next((()=>qs.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ys(e){return new qs(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Js(e.target.error);n(t)}}))}let Xs=!1;function Js(e){const t=Ws.D((0,c.z$)());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new us("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Xs||(Xs=!0,setTimeout((()=>{throw e}),0)),e}}return e}class er{constructor(e,t){this.asyncQueue=e,this.ee=t,this.task=null}start(){this.te(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}te(e){ts("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{ts("IndexBackiller",`Documents written: ${await this.ee.ne()}`)}catch(e){Gs(e)?ts("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e):await zs(e)}await this.te(6e4)}))}}class tr{constructor(e,t){this.localStore=e,this.persistence=t}async ne(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.re(t,e)))}re(e,t){const n=new Set;let i=t,s=!0;return qs.doWhile((()=>!0===s&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return ts("IndexBackiller",`Processing collection: ${t}`),this.ie(e,t,i).next((e=>{i-=e,n.add(t)}));s=!1})))).next((()=>t-i))}ie(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,n).next((n=>{const s=n.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next((()=>this.se(i,n))).next((n=>(ts("IndexBackiller",`Updating offset: ${n}`),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>s.size))}))))}se(e,t){let n=e;return t.changes.forEach(((e,t)=>{const i=Fs(t);Bs(i,n)>0&&(n=i)})),new Vs(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.oe(e),this._e=e=>t.writeSequenceNumber(e))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}function ir(e){return null==e}function sr(e){return 0===e&&1/e==-1/0}function rr(e){return"number"==typeof e&&Number.isInteger(e)&&!sr(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=cr(t)),t=ar(e.get(n),t);return cr(t)}function ar(e,t){let n=t;const i=e.length;for(let s=0;s<i;s++){const t=e.charAt(s);switch(t){case"\0":n+="";break;case"":n+="";break;default:n+=t}}return n}function cr(e){return e+""}function lr(e){const t=e.length;if(os(t>=2),2===t)return os(""===e.charAt(0)&&""===e.charAt(1)),xs.emptyPath();const n=t-2,i=[];let s="";for(let r=0;r<t;){const t=e.indexOf("",r);switch((t<0||t>n)&&rs(),e.charAt(t+1)){case"":const n=e.substring(r,t);let o;0===s.length?o=n:(s+=n,o=s,s=""),i.push(o);break;case"":s+=e.substring(r,t),s+="\0";break;case"":s+=e.substring(r,t+1);break;default:rs()}r=t+2}return new xs(i)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nr.ae=-1;const ur=["userId","batchId"];
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(e,t){return[e,or(t)]}function dr(e,t,n){return[e,or(t),n]}const pr={},fr=["prefixPath","collectionGroup","readTime","documentId"],mr=["prefixPath","collectionGroup","documentId"],gr=["collectionGroup","readTime","prefixPath","documentId"],vr=["canonicalId","targetId"],yr=["targetId","path"],_r=["path","targetId"],wr=["collectionId","parent"],br=["indexId","uid"],Ir=["uid","sequenceNumber"],Cr=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Sr=["indexId","uid","orderedDocumentKey"],Tr=["userId","collectionPath","documentId"],Er=["userId","collectionPath","largestBatchId"],kr=["userId","collectionGroup","largestBatchId"],xr=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ar=[...xr,"documentOverlays"],Nr=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Or=Nr,Dr=[...Or,"indexConfiguration","indexState","indexEntries"];
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends js{constructor(e,t){super(),this.ue=e,this.currentSequenceNumber=t}}function Rr(e,t){const n=cs(e);return Ws.O(n.ue,t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function $r(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Mr(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,t){this.comparator=e,this.root=t||Br.EMPTY}insert(e,t){return new Fr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Br.BLACK,null,null))}remove(e){return new Fr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Br.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(0===i)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Vr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Vr(this.root,e,this.comparator,!1)}getReverseIterator(){return new Vr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Vr(this.root,e,this.comparator,!0)}}class Vr{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Br{constructor(e,t,n,i,s){this.key=e,this.value=t,this.color=null!=n?n:Br.RED,this.left=null!=i?i:Br.EMPTY,this.right=null!=s?s:Br.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,s){return new Br(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const s=n(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Br.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Br.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Br.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Br.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw rs();if(this.right.isRed())throw rs();const e=this.left.check();if(e!==this.right.check())throw rs();return e+(this.isRed()?0:1)}}Br.EMPTY=null,Br.RED=!0,Br.BLACK=!1,Br.EMPTY=new class{constructor(){this.size=0}get key(){throw rs()}get value(){throw rs()}get color(){throw rs()}get left(){throw rs()}get right(){throw rs()}copy(e,t,n,i,s){return this}insert(e,t,n){return new Br(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ur{constructor(e){this.comparator=e,this.data=new Fr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jr(this.data.getIterator())}getIteratorFrom(e){return new jr(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Ur))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(e,i))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ur(this.comparator);return t.data=e,t}}class jr{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function zr(e){return e.hasNext()?e.getNext():void 0}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e){this.fields=e,e.sort(Ns.comparator)}static empty(){return new qr([])}unionWith(e){let t=new Ur(Ns.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new qr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Cs(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wr(){return"undefined"!=typeof atob}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Hr("Invalid base64 string: "+e):e}}(e);return new Zr(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Zr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Is(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zr.EMPTY_BYTE_STRING=new Zr("");const Kr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gr(e){if(os(!!e),"string"==typeof e){let t=0;const n=Kr.exec(e);if(os(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Qr(e.seconds),nanos:Qr(e.nanos)}}function Qr(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Yr(e){return"string"==typeof e?Zr.fromBase64String(e):Zr.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xr(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Jr(e){const t=e.mapValue.fields.__previous_value__;return Xr(t)?Jr(t):t}function eo(e){const t=Gr(e.mapValue.fields.__local_write_time__.timestampValue);return new Ts(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,t,n,i,s,r,o,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=r,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class no{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new no("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof no&&e.projectId===this.projectId&&e.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},so={nullValue:"NULL_VALUE"};function ro(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Xr(e)?4:wo(e)?9007199254740991:10:rs()}function oo(e,t){if(e===t)return!0;const n=ro(e);if(n!==ro(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return eo(e).isEqual(eo(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Gr(e.timestampValue),i=Gr(t.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Yr(e.bytesValue).isEqual(Yr(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Qr(e.geoPointValue.latitude)===Qr(t.geoPointValue.latitude)&&Qr(e.geoPointValue.longitude)===Qr(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Qr(e.integerValue)===Qr(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Qr(e.doubleValue),i=Qr(t.doubleValue);return n===i?sr(n)===sr(i):isNaN(n)&&isNaN(i)}return!1}(e,t);case 9:return Cs(e.arrayValue.values||[],t.arrayValue.values||[],oo);case 10:return function(e,t){const n=e.mapValue.fields||{},i=t.mapValue.fields||{};if(Lr(n)!==Lr(i))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===i[s]||!oo(n[s],i[s])))return!1;return!0}(e,t);default:return rs()}}function ao(e,t){return void 0!==(e.values||[]).find((e=>oo(e,t)))}function co(e,t){if(e===t)return 0;const n=ro(e),i=ro(t);if(n!==i)return Is(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Is(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Qr(e.integerValue||e.doubleValue),i=Qr(t.integerValue||t.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(e,t);case 3:return lo(e.timestampValue,t.timestampValue);case 4:return lo(eo(e),eo(t));case 5:return Is(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Yr(e),i=Yr(t);return n.compareTo(i)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),i=t.split("/");for(let s=0;s<n.length&&s<i.length;s++){const e=Is(n[s],i[s]);if(0!==e)return e}return Is(n.length,i.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Is(Qr(e.latitude),Qr(t.latitude));return 0!==n?n:Is(Qr(e.longitude),Qr(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],i=t.values||[];for(let s=0;s<n.length&&s<i.length;++s){const e=co(n[s],i[s]);if(e)return e}return Is(n.length,i.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===io.mapValue&&t===io.mapValue)return 0;if(e===io.mapValue)return 1;if(t===io.mapValue)return-1;const n=e.fields||{},i=Object.keys(n),s=t.fields||{},r=Object.keys(s);i.sort(),r.sort();for(let o=0;o<i.length&&o<r.length;++o){const e=Is(i[o],r[o]);if(0!==e)return e;const t=co(n[i[o]],s[r[o]]);if(0!==t)return t}return Is(i.length,r.length)}(e.mapValue,t.mapValue);default:throw rs()}}function lo(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Is(e,t);const n=Gr(e),i=Gr(t),s=Is(n.seconds,i.seconds);return 0!==s?s:Is(n.nanos,i.nanos)}function uo(e){return ho(e)}function ho(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Gr(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Yr(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Os.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const i of e.values||[])n?n=!1:t+=",",t+=ho(i);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",i=!0;for(const s of t)i?i=!1:n+=",",n+=`${s}:${ho(e.fields[s])}`;return n+"}"}(e.mapValue):rs()}function po(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function fo(e){return!!e&&"integerValue"in e}function mo(e){return!!e&&"arrayValue"in e}function go(e){return!!e&&"nullValue"in e}function vo(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function yo(e){return!!e&&"mapValue"in e}function _o(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return $r(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=_o(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=_o(e.arrayValue.values[n]);return t}return Object.assign({},e)}function wo(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function bo(e){return"nullValue"in e?so:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?po(no.empty(),Os.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:rs()}function Io(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?po(no.empty(),Os.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?io:rs()}function Co(e,t){const n=co(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function So(e,t){const n=co(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(e){this.value=e}static empty(){return new To({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!yo(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=_o(t)}setAll(e){let t=Ns.emptyPath(),n={},i=[];e.forEach(((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,i),n={},i=[],t=s.popLast()}e?n[s.lastSegment()]=_o(e):i.push(s.lastSegment())}));const s=this.getFieldsMap(t);this.applyChanges(s,n,i)}delete(e){const t=this.field(e.popLast());yo(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return oo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];yo(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){$r(t,((t,n)=>e[t]=n));for(const i of n)delete e[i]}clone(){return new To(_o(this.value))}}function Eo(e){const t=[];return $r(e.fields,((e,n)=>{const i=new Ns([e]);if(yo(n)){const e=Eo(n.mapValue).fields;if(0===e.length)t.push(i);else for(const n of e)t.push(i.child(n))}else t.push(i)})),new qr(t)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class ko{constructor(e,t,n,i,s,r,o){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=s,this.data=r,this.documentState=o}static newInvalidDocument(e){return new ko(e,0,Es.min(),Es.min(),Es.min(),To.empty(),0)}static newFoundDocument(e,t,n,i){return new ko(e,1,t,Es.min(),n,i,0)}static newNoDocument(e,t){return new ko(e,2,t,Es.min(),Es.min(),To.empty(),0)}static newUnknownDocument(e,t){return new ko(e,3,t,Es.min(),Es.min(),To.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Es.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=To.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=To.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Es.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ko&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ko(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e,t){this.position=e,this.inclusive=t}}function Ao(e,t,n){let i=0;for(let s=0;s<e.position.length;s++){const r=t[s],o=e.position[s];if(i=r.field.isKeyField()?Os.comparator(Os.fromName(o.referenceValue),n.key):co(o,n.data.field(r.field)),"desc"===r.dir&&(i*=-1),0!==i)break}return i}function No(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!oo(e.position[n],t.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e,t="asc"){this.field=e,this.dir=t}}function Do(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{}class Ro extends Po{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new qo(e,t,n):"array-contains"===t?new Ko(e,n):"in"===t?new Go(e,n):"not-in"===t?new Qo(e,n):"array-contains-any"===t?new Yo(e,n):new Ro(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Ho(e,n):new Wo(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(co(t,this.value)):null!==t&&ro(this.value)===ro(t)&&this.matchesComparison(co(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return rs()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Lo extends Po{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Lo(e,t)}matches(e){return $o(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ce||(this.ce=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le((e=>e.isInequality()));return null!==e?e.field:null}le(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function $o(e){return"and"===e.op}function Mo(e){return"or"===e.op}function Fo(e){return Vo(e)&&$o(e)}function Vo(e){for(const t of e.filters)if(t instanceof Lo)return!1;return!0}function Bo(e){if(e instanceof Ro)return e.field.canonicalString()+e.op.toString()+uo(e.value);if(Fo(e))return e.filters.map((e=>Bo(e))).join(",");{const t=e.filters.map((e=>Bo(e))).join(",");return`${e.op}(${t})`}}function Uo(e,t){return e instanceof Ro?function(e,t){return t instanceof Ro&&e.op===t.op&&e.field.isEqual(t.field)&&oo(e.value,t.value)}(e,t):e instanceof Lo?function(e,t){return t instanceof Lo&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,i)=>e&&Uo(n,t.filters[i])),!0)}(e,t):void rs()}function jo(e,t){const n=e.filters.concat(t);return Lo.create(n,e.op)}function zo(e){return e instanceof Ro?function(e){return`${e.field.canonicalString()} ${e.op} ${uo(e.value)}`}(e):e instanceof Lo?function(e){return e.op.toString()+" {"+e.getFilters().map(zo).join(" ,")+"}"}(e):"Filter"}class qo extends Ro{constructor(e,t,n){super(e,t,n),this.key=Os.fromName(n.referenceValue)}matches(e){const t=Os.comparator(e.key,this.key);return this.matchesComparison(t)}}class Ho extends Ro{constructor(e,t){super(e,"in",t),this.keys=Zo("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Wo extends Ro{constructor(e,t){super(e,"not-in",t),this.keys=Zo("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Zo(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>Os.fromName(e.referenceValue)))}class Ko extends Ro{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return mo(t)&&ao(t.arrayValue,this.value)}}class Go extends Ro{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ao(this.value.arrayValue,t)}}class Qo extends Ro{constructor(e,t){super(e,"not-in",t)}matches(e){if(ao(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ao(this.value.arrayValue,t)}}class Yo extends Ro{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!mo(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>ao(this.value.arrayValue,e)))}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e,t=null,n=[],i=[],s=null,r=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=r,this.endAt=o,this.he=null}}function Jo(e,t=null,n=[],i=[],s=null,r=null,o=null){return new Xo(e,t,n,i,s,r,o)}function ea(e){const t=cs(e);if(null===t.he){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Bo(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),ir(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>uo(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>uo(e))).join(",")),t.he=e}return t.he}function ta(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Do(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Uo(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!No(e.startAt,t.startAt)&&No(e.endAt,t.endAt)}function na(e){return Os.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function ia(e,t){return e.filters.filter((e=>e instanceof Ro&&e.field.isEqual(t)))}function sa(e,t,n){let i=so,s=!0;for(const r of ia(e,t)){let e=so,t=!0;switch(r.op){case"<":case"<=":e=bo(r.value);break;case"==":case"in":case">=":e=r.value;break;case">":e=r.value,t=!1;break;case"!=":case"not-in":e=so}Co({value:i,inclusive:s},{value:e,inclusive:t})<0&&(i=e,s=t)}if(null!==n)for(let r=0;r<e.orderBy.length;++r)if(e.orderBy[r].field.isEqual(t)){const e=n.position[r];Co({value:i,inclusive:s},{value:e,inclusive:n.inclusive})<0&&(i=e,s=n.inclusive);break}return{value:i,inclusive:s}}function ra(e,t,n){let i=io,s=!0;for(const r of ia(e,t)){let e=io,t=!0;switch(r.op){case">=":case">":e=Io(r.value),t=!1;break;case"==":case"in":case"<=":e=r.value;break;case"<":e=r.value,t=!1;break;case"!=":case"not-in":e=io}So({value:i,inclusive:s},{value:e,inclusive:t})>0&&(i=e,s=t)}if(null!==n)for(let r=0;r<e.orderBy.length;++r)if(e.orderBy[r].field.isEqual(t)){const e=n.position[r];So({value:i,inclusive:s},{value:e,inclusive:n.inclusive})>0&&(i=e,s=n.inclusive);break}return{value:i,inclusive:s}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,t=null,n=[],i=[],s=null,r="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=r,this.startAt=o,this.endAt=a,this.Pe=null,this.Ie=null,this.startAt,this.endAt}}function aa(e,t,n,i,s,r,o,a){return new oa(e,t,n,i,s,r,o,a)}function ca(e){return new oa(e)}function la(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function ua(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function ha(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function da(e){return null!==e.collectionGroup}function pa(e){const t=cs(e);if(null===t.Pe){t.Pe=[];const e=ha(t),n=ua(t);if(null!==e&&null===n)e.isKeyField()||t.Pe.push(new Oo(e)),t.Pe.push(new Oo(Ns.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.Pe.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.Pe.push(new Oo(Ns.keyField(),e))}}}return t.Pe}function fa(e){const t=cs(e);if(!t.Ie)if("F"===t.limitType)t.Ie=Jo(t.path,t.collectionGroup,pa(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const s of pa(t)){const t="desc"===s.dir?"asc":"desc";e.push(new Oo(s.field,t))}const n=t.endAt?new xo(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new xo(t.startAt.position,t.startAt.inclusive):null;t.Ie=Jo(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}return t.Ie}function ma(e,t){t.getFirstInequalityField(),ha(e);const n=e.filters.concat([t]);return new oa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function ga(e,t,n){return new oa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function va(e,t){return ta(fa(e),fa(t))&&e.limitType===t.limitType}function ya(e){return`${ea(fa(e))}|lt:${e.limitType}`}function _a(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>zo(e))).join(", ")}]`),ir(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>uo(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>uo(e))).join(",")),`Target(${t})`}(fa(e))}; limitType=${e.limitType})`}function wa(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Os.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of pa(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const i=Ao(e,t,n);return e.inclusive?i<=0:i<0}(e.startAt,pa(e),t))&&!(e.endAt&&!function(e,t,n){const i=Ao(e,t,n);return e.inclusive?i>=0:i>0}(e.endAt,pa(e),t))}(e,t)}function ba(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ia(e){return(t,n)=>{let i=!1;for(const s of pa(e)){const e=Ca(s,t,n);if(0!==e)return e;i=i||s.field.isKeyField()}return 0}}function Ca(e,t,n){const i=e.field.isKeyField()?Os.comparator(t.key,n.key):function(e,t,n){const i=t.data.field(e),s=n.data.field(e);return null!==i&&null!==s?co(i,s):rs()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return rs()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[i,s]of n)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(void 0===i)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return 1===n.length?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){$r(this.inner,((t,n)=>{for(const[i,s]of n)e(i,s)}))}isEmpty(){return Mr(this.inner)}size(){return this.innerSize}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ta=new Fr(Os.comparator);function Ea(){return Ta}const ka=new Fr(Os.comparator);function xa(...e){let t=ka;for(const n of e)t=t.insert(n.key,n);return t}function Aa(e){let t=ka;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function Na(){return Da()}function Oa(){return Da()}function Da(){return new Sa((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Pa=new Fr(Os.comparator),Ra=new Ur(Os.comparator);function La(...e){let t=Ra;for(const n of e)t=t.add(n);return t}const $a=new Ur(Is);function Ma(){return $a}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fa(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sr(t)?"-0":t}}function Va(e){return{integerValue:""+e}}function Ba(e,t){return rr(t)?Va(t):Fa(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(){this._=void 0}}function ja(e,t,n){return e instanceof Ha?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Xr(t)&&(t=Jr(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Wa?Za(e,t):e instanceof Ka?Ga(e,t):function(e,t){const n=qa(e,t),i=Ya(n)+Ya(e.Te);return fo(n)&&fo(e.Te)?Va(i):Fa(e.serializer,i)}(e,t)}function za(e,t,n){return e instanceof Wa?Za(e,t):e instanceof Ka?Ga(e,t):n}function qa(e,t){return e instanceof Qa?function(e){return fo(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Ha extends Ua{}class Wa extends Ua{constructor(e){super(),this.elements=e}}function Za(e,t){const n=Xa(t);for(const i of e.elements)n.some((e=>oo(e,i)))||n.push(i);return{arrayValue:{values:n}}}class Ka extends Ua{constructor(e){super(),this.elements=e}}function Ga(e,t){let n=Xa(t);for(const i of e.elements)n=n.filter((e=>!oo(e,i)));return{arrayValue:{values:n}}}class Qa extends Ua{constructor(e,t){super(),this.serializer=e,this.Te=t}}function Ya(e){return Qr(e.integerValue||e.doubleValue)}function Xa(e){return mo(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,t){this.field=e,this.transform=t}}function ec(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Wa&&t instanceof Wa||e instanceof Ka&&t instanceof Ka?Cs(e.elements,t.elements,oo):e instanceof Qa&&t instanceof Qa?oo(e.Te,t.Te):e instanceof Ha&&t instanceof Ha}(e.transform,t.transform)}class tc{constructor(e,t){this.version=e,this.transformResults=t}}class nc{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new nc}static exists(e){return new nc(void 0,e)}static updateTime(e){return new nc(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ic(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class sc{}function rc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new mc(e.key,nc.none()):new uc(e.key,e.data,nc.none());{const n=e.data,i=To.empty();let s=new Ur(Ns.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?i.delete(e):i.set(e,t),s=s.add(e)}return new hc(e.key,i,new qr(s.toArray()),nc.none())}}function oc(e,t,n){e instanceof uc?function(e,t,n){const i=e.value.clone(),s=pc(e.fieldTransforms,t,n.transformResults);i.setAll(s),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):e instanceof hc?function(e,t,n){if(!ic(e.precondition,t))return void t.convertToUnknownDocument(n.version);const i=pc(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(dc(e)),s.setAll(i),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ac(e,t,n,i){return e instanceof uc?function(e,t,n,i){if(!ic(e.precondition,t))return n;const s=e.value.clone(),r=fc(e.fieldTransforms,i,t);return s.setAll(r),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,i):e instanceof hc?function(e,t,n,i){if(!ic(e.precondition,t))return n;const s=fc(e.fieldTransforms,i,t),r=t.data;return r.setAll(dc(e)),r.setAll(s),t.convertToFoundDocument(t.version,r).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,i):function(e,t,n){return ic(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function cc(e,t){let n=null;for(const i of e.fieldTransforms){const e=t.data.field(i.field),s=qa(i.transform,e||null);null!=s&&(null===n&&(n=To.empty()),n.set(i.field,s))}return n||null}function lc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Cs(e,t,((e,t)=>ec(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class uc extends sc{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class hc extends sc{constructor(e,t,n,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function dc(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}})),t}function pc(e,t,n){const i=new Map;os(e.length===n.length);for(let s=0;s<n.length;s++){const r=e[s],o=r.transform,a=t.data.field(r.field);i.set(r.field,za(o,a,n[s]))}return i}function fc(e,t,n){const i=new Map;for(const s of e){const e=s.transform,r=n.data.field(s.field);i.set(s.field,ja(e,r,t))}return i}class mc extends sc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gc extends sc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const t=this.mutations[i];t.key.isEqual(e.key)&&oc(t,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=ac(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=ac(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Oa();return this.mutations.forEach((i=>{const s=e.get(i.key),r=s.overlayedDocument;let o=this.applyToLocalView(r,s.mutatedFields);o=t.has(i.key)?null:o;const a=rc(r,o);null!==a&&n.set(i.key,a),r.isValidDocument()||r.convertToNoDocument(Es.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),La())}isEqual(e){return this.batchId===e.batchId&&Cs(this.mutations,e.mutations,((e,t)=>lc(e,t)))&&Cs(this.baseMutations,e.baseMutations,((e,t)=>lc(e,t)))}}class yc{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){os(e.mutations.length===n.length);let i=function(){return Pa}();const s=e.mutations;for(let r=0;r<s.length;r++)i=i.insert(s[r].key,n[r].version);return new yc(e,t,n,i)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class wc{constructor(e,t){this.count=e,this.unchangedNames=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bc,Ic;function Cc(e){switch(e){default:return rs();case ls.CANCELLED:case ls.UNKNOWN:case ls.DEADLINE_EXCEEDED:case ls.RESOURCE_EXHAUSTED:case ls.INTERNAL:case ls.UNAVAILABLE:case ls.UNAUTHENTICATED:return!1;case ls.INVALID_ARGUMENT:case ls.NOT_FOUND:case ls.ALREADY_EXISTS:case ls.PERMISSION_DENIED:case ls.FAILED_PRECONDITION:case ls.ABORTED:case ls.OUT_OF_RANGE:case ls.UNIMPLEMENTED:case ls.DATA_LOSS:return!0}}function Sc(e){if(void 0===e)return ns("GRPC error has no .code"),ls.UNKNOWN;switch(e){case bc.OK:return ls.OK;case bc.CANCELLED:return ls.CANCELLED;case bc.UNKNOWN:return ls.UNKNOWN;case bc.DEADLINE_EXCEEDED:return ls.DEADLINE_EXCEEDED;case bc.RESOURCE_EXHAUSTED:return ls.RESOURCE_EXHAUSTED;case bc.INTERNAL:return ls.INTERNAL;case bc.UNAVAILABLE:return ls.UNAVAILABLE;case bc.UNAUTHENTICATED:return ls.UNAUTHENTICATED;case bc.INVALID_ARGUMENT:return ls.INVALID_ARGUMENT;case bc.NOT_FOUND:return ls.NOT_FOUND;case bc.ALREADY_EXISTS:return ls.ALREADY_EXISTS;case bc.PERMISSION_DENIED:return ls.PERMISSION_DENIED;case bc.FAILED_PRECONDITION:return ls.FAILED_PRECONDITION;case bc.ABORTED:return ls.ABORTED;case bc.OUT_OF_RANGE:return ls.OUT_OF_RANGE;case bc.UNIMPLEMENTED:return ls.UNIMPLEMENTED;case bc.DATA_LOSS:return ls.DATA_LOSS;default:return rs()}}(Ic=bc||(bc={}))[Ic.OK=0]="OK",Ic[Ic.CANCELLED=1]="CANCELLED",Ic[Ic.UNKNOWN=2]="UNKNOWN",Ic[Ic.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ic[Ic.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ic[Ic.NOT_FOUND=5]="NOT_FOUND",Ic[Ic.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ic[Ic.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ic[Ic.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ic[Ic.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ic[Ic.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ic[Ic.ABORTED=10]="ABORTED",Ic[Ic.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ic[Ic.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ic[Ic.INTERNAL=13]="INTERNAL",Ic[Ic.UNAVAILABLE=14]="UNAVAILABLE",Ic[Ic.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Tc{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Ec}static getOrCreateInstance(){return null===Ec&&(Ec=new Tc),Ec}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach((t=>t(e)))}}let Ec=null;
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(){return new TextEncoder}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc=new Ki([4294967295,4294967295],0);function Ac(e){const t=kc().encode(e),n=new Zi;return n.update(t),new Uint8Array(n.digest())}function Nc(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),r=t.getUint32(12,!0);return[new Ki([n,i],0),new Ki([s,r],0)]}class Oc{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Dc(`Invalid padding: ${t}`);if(n<0)throw new Dc(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Dc(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Dc(`Invalid padding when bitmap length is 0: ${t}`);this.de=8*e.length-t,this.Ae=Ki.fromNumber(this.de)}Re(e,t,n){let i=e.add(t.multiply(Ki.fromNumber(n)));return 1===i.compare(xc)&&(i=new Ki([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ae).toNumber()}Ve(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.de)return!1;const t=Ac(e),[n,i]=Nc(t);for(let s=0;s<this.hashCount;s++){const e=this.Re(n,i,s);if(!this.Ve(e))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),r=new Oc(s,i,t);return n.forEach((e=>r.insert(e))),r}insert(e){if(0===this.de)return;const t=Ac(e),[n,i]=Nc(t);for(let s=0;s<this.hashCount;s++){const e=this.Re(n,i,s);this.me(e)}}me(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Dc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,t,n,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,Rc.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Pc(Es.min(),i,new Fr(Is),Ea(),La())}}class Rc{constructor(e,t,n,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Rc(n,t,La(),La(),La())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,t,n,i){this.fe=e,this.removedTargetIds=t,this.key=n,this.ge=i}}class $c{constructor(e,t){this.targetId=e,this.pe=t}}class Mc{constructor(e,t,n=Zr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class Fc{constructor(){this.ye=0,this.we=Uc(),this.Se=Zr.EMPTY_BYTE_STRING,this.be=!1,this.De=!0}get current(){return this.be}get resumeToken(){return this.Se}get ve(){return 0!==this.ye}get Ce(){return this.De}Fe(e){e.approximateByteSize()>0&&(this.De=!0,this.Se=e)}Me(){let e=La(),t=La(),n=La();return this.we.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:rs()}})),new Rc(this.Se,this.be,e,t,n)}xe(){this.De=!1,this.we=Uc()}Oe(e,t){this.De=!0,this.we=this.we.insert(e,t)}Ne(e){this.De=!0,this.we=this.we.remove(e)}Be(){this.ye+=1}Le(){this.ye-=1}ke(){this.De=!0,this.be=!0}}class Vc{constructor(e){this.qe=e,this.Qe=new Map,this.Ke=Ea(),this.$e=Bc(),this.Ue=new Fr(Is)}We(e){for(const t of e.fe)e.ge&&e.ge.isFoundDocument()?this.Ge(t,e.ge):this.ze(t,e.key,e.ge);for(const t of e.removedTargetIds)this.ze(t,e.key,e.ge)}je(e){this.forEachTarget(e,(t=>{const n=this.He(t);switch(e.state){case 0:this.Je(t)&&n.Fe(e.resumeToken);break;case 1:n.Le(),n.ve||n.xe(),n.Fe(e.resumeToken);break;case 2:n.Le(),n.ve||this.removeTarget(t);break;case 3:this.Je(t)&&(n.ke(),n.Fe(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),n.Fe(e.resumeToken));break;default:rs()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qe.forEach(((e,n)=>{this.Je(n)&&t(n)}))}Ze(e){var t,n;const i=e.targetId,s=e.pe.count,r=this.Xe(i);if(r){const o=r.target;if(na(o))if(0===s){const e=new Os(o.path);this.ze(i,e,ko.newNoDocument(e,Es.min()))}else os(1===s);else{const r=this.et(i);if(r!==s){const s=this.tt(e,r);if(0!==s.status){this.Ye(i);const e=2===s.status?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(i,e)}null===(t=Tc.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n,i){var s,r,o,a,c,l;const u={localCacheCount:n,existenceFilterCount:i.count},h=i.unchangedNames;return h&&(u.bloomFilter={applied:0===e,hashCount:null!==(s=null==h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(a=null===(o=null===(r=null==h?void 0:h.bits)||void 0===r?void 0:r.bitmap)||void 0===o?void 0:o.length)&&void 0!==a?a:0,padding:null!==(l=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0},t&&(u.bloomFilter.mightContain=t)),u}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(s.status,null!==(n=s.nt)&&void 0!==n?n:null,r,e.pe))}}}}tt(e,t){const{unchangedNames:n,count:i}=e.pe;if(!n||!n.bits)return{status:1};const{bits:{bitmap:s="",padding:r=0},hashCount:o=0}=n;let a,c;try{a=Yr(s).toUint8Array()}catch(e){if(e instanceof Hr)return is("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),{status:1};throw e}try{c=new Oc(a,r,o)}catch(e){return is(e instanceof Dc?"BloomFilter error: ":"Applying bloom filter failed: ",e),{status:1}}const l=e=>{const t=this.qe.rt();return c.mightContain(`projects/${t.projectId}/databases/${t.database}/documents/${e}`)};return 0===c.de?{status:1}:{status:i===t-this.it(e.targetId,l)?0:2,nt:l}}it(e,t){const n=this.qe.getRemoteKeysForTarget(e);let i=0;return n.forEach((n=>{t(n.path.canonicalString())||(this.ze(e,n,null),i++)})),i}st(e){const t=new Map;this.Qe.forEach(((n,i)=>{const s=this.Xe(i);if(s){if(n.current&&na(s.target)){const t=new Os(s.target.path);null!==this.Ke.get(t)||this.ot(i,t)||this.ze(i,t,ko.newNoDocument(t,e))}n.Ce&&(t.set(i,n.Me()),n.xe())}}));let n=La();this.$e.forEach(((e,t)=>{let i=!0;t.forEachWhile((e=>{const t=this.Xe(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(i=!1,!1)})),i&&(n=n.add(e))})),this.Ke.forEach(((t,n)=>n.setReadTime(e)));const i=new Pc(e,t,this.Ue,this.Ke,n);return this.Ke=Ea(),this.$e=Bc(),this.Ue=new Fr(Is),i}Ge(e,t){if(!this.Je(e))return;const n=this.ot(e,t.key)?2:0;this.He(e).Oe(t.key,n),this.Ke=this.Ke.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e))}ze(e,t,n){if(!this.Je(e))return;const i=this.He(e);this.ot(e,t)?i.Oe(t,1):i.Ne(t),this.$e=this.$e.insert(t,this._t(t).delete(e)),n&&(this.Ke=this.Ke.insert(t,n))}removeTarget(e){this.Qe.delete(e)}et(e){const t=this.He(e).Me();return this.qe.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Be(e){this.He(e).Be()}He(e){let t=this.Qe.get(e);return t||(t=new Fc,this.Qe.set(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Ur(Is),this.$e=this.$e.insert(e,t)),t}Je(e){const t=null!==this.Xe(e);return t||ts("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.Qe.get(e);return t&&t.ve?null:this.qe.ut(e)}Ye(e){this.Qe.set(e,new Fc),this.qe.getRemoteKeysForTarget(e).forEach((t=>{this.ze(e,t,null)}))}ot(e,t){return this.qe.getRemoteKeysForTarget(e).has(t)}}function Bc(){return new Fr(Os.comparator)}function Uc(){return new Fr(Os.comparator)}const jc=(()=>{const e={asc:"ASCENDING",desc:"DESCENDING"};return e})(),zc=(()=>{const e={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};return e})(),qc=(()=>{const e={and:"AND",or:"OR"};return e})();class Hc{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Wc(e,t){return e.useProto3Json||ir(t)?t:{value:t}}function Zc(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Kc(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Gc(e,t){return Zc(e,t.toTimestamp())}function Qc(e){return os(!!e),Es.fromTimestamp(function(e){const t=Gr(e);return new Ts(t.seconds,t.nanos)}(e))}function Yc(e,t){return function(e){return new xs(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function Xc(e){const t=xs.fromString(e);return os(Sl(t)),t}function Jc(e,t){return Yc(e.databaseId,t.path)}function el(e,t){const n=Xc(t);if(n.get(1)!==e.databaseId.projectId)throw new us(ls.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new us(ls.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Os(sl(n))}function tl(e,t){return Yc(e.databaseId,t)}function nl(e){const t=Xc(e);return 4===t.length?xs.emptyPath():sl(t)}function il(e){return new xs(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function sl(e){return os(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function rl(e,t,n){return{name:Jc(e,t),fields:n.value.mapValue.fields}}function ol(e,t,n){const i=el(e,t.name),s=Qc(t.updateTime),r=t.createTime?Qc(t.createTime):Es.min(),o=new To({mapValue:{fields:t.fields}}),a=ko.newFoundDocument(i,s,r,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function al(e,t){return"found"in t?function(e,t){os(!!t.found),t.found.name,t.found.updateTime;const n=el(e,t.found.name),i=Qc(t.found.updateTime),s=t.found.createTime?Qc(t.found.createTime):Es.min(),r=new To({mapValue:{fields:t.found.fields}});return ko.newFoundDocument(n,i,s,r)}(e,t):"missing"in t?function(e,t){os(!!t.missing),os(!!t.readTime);const n=el(e,t.missing),i=Qc(t.readTime);return ko.newNoDocument(n,i)}(e,t):rs()}function cl(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:rs()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],r=function(e,t){return e.useProto3Json?(os(void 0===t||"string"==typeof t),Zr.fromBase64String(t||"")):(os(void 0===t||t instanceof Uint8Array),Zr.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?ls.UNKNOWN:Sc(e.code);return new us(t,e.message||"")}(o);n=new Mc(i,s,r,a||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const s=el(e,i.document.name),r=Qc(i.document.updateTime),o=i.document.createTime?Qc(i.document.createTime):Es.min(),a=new To({mapValue:{fields:i.document.fields}}),c=ko.newFoundDocument(s,r,o,a),l=i.targetIds||[],u=i.removedTargetIds||[];n=new Lc(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const s=el(e,i.document),r=i.readTime?Qc(i.readTime):Es.min(),o=ko.newNoDocument(s,r),a=i.removedTargetIds||[];n=new Lc([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const s=el(e,i.document),r=i.removedTargetIds||[];n=new Lc([],r,s,null)}else{if(!("filter"in t))return rs();{t.filter;const e=t.filter;e.targetId;const{count:i=0,unchangedNames:s}=e,r=new wc(i,s),o=e.targetId;n=new $c(o,r)}}return n}function ll(e,t){let n;if(t instanceof uc)n={update:rl(e,t.key,t.value)};else if(t instanceof mc)n={delete:Jc(e,t.key)};else if(t instanceof hc)n={update:rl(e,t.key,t.data),updateMask:Cl(t.fieldMask)};else{if(!(t instanceof gc))return rs();n={verify:Jc(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Ha)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Wa)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ka)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Qa)return{fieldPath:t.field.canonicalString(),increment:n.Te};throw rs()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Gc(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:rs()}(e,t.precondition)),n}function ul(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?nc.updateTime(Qc(e.updateTime)):void 0!==e.exists?nc.exists(e.exists):nc.none()}(t.currentDocument):nc.none(),i=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)os("REQUEST_TIME"===t.setToServerValue),n=new Ha;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Wa(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Ka(e)}else"increment"in t?n=new Qa(e,t.increment):rs();const i=Ns.fromServerFormat(t.fieldPath);return new Ja(i,n)}(e,t))):[];if(t.update){t.update.name;const s=el(e,t.update.name),r=new To({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new qr(t.map((e=>Ns.fromServerFormat(e))))}(t.updateMask);return new hc(s,r,e,n,i)}return new uc(s,r,n,i)}if(t.delete){const i=el(e,t.delete);return new mc(i,n)}if(t.verify){const i=el(e,t.verify);return new gc(i,n)}return rs()}function hl(e,t){return e&&e.length>0?(os(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Qc(e.updateTime):Qc(t);return n.isEqual(Es.min())&&(n=Qc(t)),new tc(n,e.transformResults||[])}(e,t)))):[]}function dl(e,t){return{documents:[tl(e,t.path)]}}function pl(e,t){const n={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(n.parent=tl(e,i),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=tl(e,i.popLast()),n.structuredQuery.from=[{collectionId:i.lastSegment()}]);const s=function(e){if(0!==e.length)return Il(Lo.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const r=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:wl(e.field),direction:vl(e.dir)}}(e)))}(t.orderBy);r&&(n.structuredQuery.orderBy=r);const o=Wc(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function fl(e){let t=nl(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){os(1===i);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let r=[];n.where&&(r=function(e){const t=gl(e);return t instanceof Lo&&Fo(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new Oo(bl(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,ir(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new xo(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new xo(n,t)}(n.endAt)),aa(t,s,o,r,a,"F",c,l)}function ml(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return rs()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}function gl(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=bl(e.unaryFilter.field);return Ro.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=bl(e.unaryFilter.field);return Ro.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=bl(e.unaryFilter.field);return Ro.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=bl(e.unaryFilter.field);return Ro.create(s,"!=",{nullValue:"NULL_VALUE"});default:return rs()}}(e):void 0!==e.fieldFilter?function(e){return Ro.create(bl(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rs()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Lo.create(e.compositeFilter.filters.map((e=>gl(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return rs()}}(e.compositeFilter.op))}(e):rs()}function vl(e){return jc[e]}function yl(e){return zc[e]}function _l(e){return qc[e]}function wl(e){return{fieldPath:e.canonicalString()}}function bl(e){return Ns.fromServerFormat(e.fieldPath)}function Il(e){return e instanceof Ro?function(e){if("=="===e.op){if(vo(e.value))return{unaryFilter:{field:wl(e.field),op:"IS_NAN"}};if(go(e.value))return{unaryFilter:{field:wl(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(vo(e.value))return{unaryFilter:{field:wl(e.field),op:"IS_NOT_NAN"}};if(go(e.value))return{unaryFilter:{field:wl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wl(e.field),op:yl(e.op),value:e.value}}}(e):e instanceof Lo?function(e){const t=e.getFilters().map((e=>Il(e)));return 1===t.length?t[0]:{compositeFilter:{op:_l(e.op),filters:t}}}(e):rs()}function Cl(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Sl(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,t,n,i,s=Es.min(),r=Es.min(),o=Zr.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=r,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Tl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Tl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Tl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Tl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(e){this.ct=e}}function kl(e,t){let n;if(t.document)n=ol(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=Os.fromSegments(t.noDocument.path),i=Ol(t.noDocument.readTime);n=ko.newNoDocument(e,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return rs();{const e=Os.fromSegments(t.unknownDocument.path),i=Ol(t.unknownDocument.version);n=ko.newUnknownDocument(e,i)}}return t.readTime&&n.setReadTime(function(e){const t=new Ts(e[0],e[1]);return Es.fromTimestamp(t)}(t.readTime)),n}function xl(e,t){const n=t.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Al(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document=function(e,t){return{name:Jc(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Zc(e,t.version.toTimestamp()),createTime:Zc(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:Nl(t.version)};else{if(!t.isUnknownDocument())return rs();i.unknownDocument={path:n.path.toArray(),version:Nl(t.version)}}return i}function Al(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Nl(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Ol(e){const t=new Ts(e.seconds,e.nanoseconds);return Es.fromTimestamp(t)}function Dl(e,t){const n=(t.baseMutations||[]).map((t=>ul(e.ct,t)));for(let r=0;r<t.mutations.length-1;++r){const e=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){const n=t.mutations[r+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}const i=t.mutations.map((t=>ul(e.ct,t))),s=Ts.fromMillis(t.localWriteTimeMs);return new vc(t.batchId,s,n,i)}function Pl(e){const t=Ol(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Ol(e.lastLimboFreeSnapshotVersion):Es.min();let i;return i=function(e){return void 0!==e.documents}(e.query)?function(e){return os(1===e.documents.length),fa(ca(nl(e.documents[0])))}(e.query):function(e){return fa(fl(e))}(e.query),new Tl(i,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Zr.fromBase64String(e.resumeToken))}function Rl(e,t){const n=Nl(t.snapshotVersion),i=Nl(t.lastLimboFreeSnapshotVersion);let s;s=na(t.target)?dl(e.ct,t.target):pl(e.ct,t.target);const r=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:ea(t.target),readTime:n,resumeToken:r,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:s}}function Ll(e){const t=fl({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?ga(t,t.limit,"L"):t}function $l(e,t){return new _c(t.largestBatchId,ul(e.ct,t.overlayMutation))}function Ml(e,t){const n=t.path.lastSegment();return[e,or(t.path.popLast()),n]}function Fl(e,t,n,i){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Nl(i.readTime),documentKey:or(i.documentKey.path),largestBatchId:i.largestBatchId}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{getBundleMetadata(e,t){return Bl(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:Ol(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return Bl(e).put(function(e){return{bundleId:e.id,createTime:Nl(Qc(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return Ul(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:Ll(e.bundledQuery),readTime:Ol(e.readTime)}}(e)}))}saveNamedQuery(e,t){return Ul(e).put(function(e){return{name:e.name,readTime:Nl(Qc(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Bl(e){return Rr(e,"bundles")}function Ul(e){return Rr(e,"namedQueries")}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new jl(e,n)}getOverlay(e,t){return zl(e).get(Ml(this.userId,t)).next((e=>e?$l(this.serializer,e):null))}getOverlays(e,t){const n=Na();return qs.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const i=[];return n.forEach(((n,s)=>{const r=new _c(t,s);i.push(this.ht(e,r))})),qs.waitFor(i)}removeOverlaysForBatchId(e,t,n){const i=new Set;t.forEach((e=>i.add(or(e.getCollectionPath()))));const s=[];return i.forEach((t=>{const i=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);s.push(zl(e).J("collectionPathOverlayIndex",i))})),qs.waitFor(s)}getOverlaysForCollection(e,t,n){const i=Na(),s=or(t),r=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return zl(e).G("collectionPathOverlayIndex",r).next((e=>{for(const t of e){const e=$l(this.serializer,t);i.set(e.getKey(),e)}return i}))}getOverlaysForCollectionGroup(e,t,n,i){const s=Na();let r;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return zl(e).Z({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=$l(this.serializer,t);s.size()<i||o.largestBatchId===r?(s.set(o.getKey(),o),r=o.largestBatchId):n.done()})).next((()=>s))}ht(e,t){return zl(e).put(function(e,t,n){const[i,s,r]=Ml(t,n.mutation.key);return{userId:t,collectionPath:s,documentId:r,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:ll(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function zl(e){return Rr(e,"documentOverlays")}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Qr(e.integerValue));else if("doubleValue"in e){const n=Qr(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),sr(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Et(t,20),"string"==typeof n?t.At(n):(t.At(`${n.seconds||""}`),t.dt(n.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Yr(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?wo(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):rs()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const i of Object.keys(n))this.Rt(i,t),this.It(n[i],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const i of n)this.It(i,t)}gt(e,t){this.Et(t,37),Os.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function Hl(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Wl(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const i=Hl(255&e[n]);if(t+=i,8!==i)break}return t}(e);return Math.ceil(t/8)}ql.bt=new ql;class Zl{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.vt(n.value),n=t.next();this.Ct()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.vt(e);else if(e<2048)this.vt(960|e>>>6),this.vt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.vt(480|e>>>12),this.vt(128|63&e>>>6),this.vt(128|63&e);else{const e=t.codePointAt(0);this.vt(240|e>>>18),this.vt(128|63&e>>>12),this.vt(128|63&e>>>6),this.vt(128|63&e)}}this.Ct()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Bt(e){const t=this.Lt(e),n=Wl(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let i=t.length-n;i<t.length;++i)this.buffer[this.position++]=255&t[i]}qt(e){const t=this.Lt(e),n=Wl(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let i=t.length-n;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let i=1;i<t.length;++i)t[i]^=n?255:0;return t}vt(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}Ct(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const i=new Uint8Array(n);i.set(this.buffer),this.buffer=i}}class Kl{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class Gl{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Ql{constructor(){this.Gt=new Zl,this.zt=new Kl(this.Gt),this.jt=new Gl(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,t,n,i){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=i}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Yl(this.indexId,this.documentKey,this.arrayValue,n)}}function Xl(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=Jl(e.arrayValue,t.arrayValue),0!==n?n:(n=Jl(e.directionalValue,t.directionalValue),0!==n?n:Os.comparator(e.documentKey,t.documentKey)))}function Jl(e,t){for(let n=0;n<e.length&&n<t.length;++n){const i=e[n]-t[n];if(0!==i)return i}return e.length-t.length}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Xt=e:this.Zt.push(e)}}en(e){os(e.collectionGroup===this.collectionId);const t=Ps(e);if(void 0!==t&&!this.tn(t))return!1;const n=Rs(e);let i=new Set,s=0,r=0;for(;s<n.length&&this.tn(n[s]);++s)i=i.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(void 0!==this.Xt){if(!i.has(this.Xt.field.canonicalString())){const e=n[s];if(!this.nn(this.Xt,e)||!this.rn(this.Yt[r++],e))return!1}++s}for(;s<n.length;++s){const e=n[s];if(r>=this.Yt.length||!this.rn(this.Yt[r++],e))return!1}return!0}tn(e){for(const t of this.Zt)if(this.nn(t,e))return!0;return!1}nn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}rn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(e){var t,n;if(os(e instanceof Ro||e instanceof Lo),e instanceof Ro){if(e instanceof Go){const i=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>Ro.create(e.field,"==",t))))||[];return Lo.create(i,"or")}return e}const i=e.filters.map((e=>tu(e)));return Lo.create(i,e.op)}function nu(e){if(0===e.getFilters().length)return[];const t=ou(tu(e));return os(ru(t)),iu(t)||su(t)?[t]:t.getFilters()}function iu(e){return e instanceof Ro}function su(e){return e instanceof Lo&&Fo(e)}function ru(e){return iu(e)||su(e)||function(e){if(e instanceof Lo&&Mo(e)){for(const t of e.getFilters())if(!iu(t)&&!su(t))return!1;return!0}return!1}(e)}function ou(e){if(os(e instanceof Ro||e instanceof Lo),e instanceof Ro)return e;if(1===e.filters.length)return ou(e.filters[0]);const t=e.filters.map((e=>ou(e)));let n=Lo.create(t,e.op);return n=lu(n),ru(n)?n:(os(n instanceof Lo),os($o(n)),os(n.filters.length>1),n.filters.reduce(((e,t)=>au(e,t))))}function au(e,t){let n;return os(e instanceof Ro||e instanceof Lo),os(t instanceof Ro||t instanceof Lo),n=e instanceof Ro?t instanceof Ro?function(e,t){return Lo.create([e,t],"and")}(e,t):cu(e,t):t instanceof Ro?cu(t,e):function(e,t){if(os(e.filters.length>0&&t.filters.length>0),$o(e)&&$o(t))return jo(e,t.getFilters());const n=Mo(e)?e:t,i=Mo(e)?t:e,s=n.filters.map((e=>au(e,i)));return Lo.create(s,"or")}(e,t),lu(n)}function cu(e,t){if($o(t))return jo(t,e.getFilters());{const n=t.filters.map((t=>au(e,t)));return Lo.create(n,"or")}}function lu(e){if(os(e instanceof Ro||e instanceof Lo),e instanceof Ro)return e;const t=e.getFilters();if(1===t.length)return lu(t[0]);if(Vo(e))return e;const n=t.map((e=>lu(e))),i=[];return n.forEach((t=>{t instanceof Ro?i.push(t):t instanceof Lo&&(t.op===e.op?i.push(...t.filters):i.push(t))})),1===i.length?i[0]:Lo.create(i,e.op)
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class uu{constructor(){this.sn=new hu}addToCollectionParentIndex(e,t){return this.sn.add(t),qs.resolve()}getCollectionParents(e,t){return qs.resolve(this.sn.getEntries(t))}addFieldIndex(e,t){return qs.resolve()}deleteFieldIndex(e,t){return qs.resolve()}getDocumentsMatchingTarget(e,t){return qs.resolve(null)}getIndexType(e,t){return qs.resolve(0)}getFieldIndexes(e,t){return qs.resolve([])}getNextCollectionGroupToUpdate(e){return qs.resolve(null)}getMinOffset(e,t){return qs.resolve(Vs.min())}getMinOffsetFromCollectionGroup(e,t){return qs.resolve(Vs.min())}updateCollectionGroup(e,t,n){return qs.resolve()}updateIndexEntries(e,t){return qs.resolve()}}class hu{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new Ur(xs.comparator),s=!i.has(n);return this.index[t]=i.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Ur(xs.comparator)).toArray()}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du=new Uint8Array(0);class pu{constructor(e,t){this.user=e,this.databaseId=t,this.on=new hu,this._n=new Sa((e=>ea(e)),((e,t)=>ta(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const n=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.on.add(t)}));const s={collectionId:n,parent:or(i)};return fu(e).put(s)}return qs.resolve()}getCollectionParents(e,t){const n=[],i=IDBKeyRange.bound([t,""],[Ss(t),""],!1,!0);return fu(e).G(i).next((e=>{for(const i of e){if(i.collectionId!==t)break;n.push(lr(i.parent))}return n}))}addFieldIndex(e,t){const n=gu(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete i.indexId;const s=n.add(i);if(t.indexState){const n=vu(e);return s.next((e=>{n.put(Fl(e,this.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return s.next()}deleteFieldIndex(e,t){const n=gu(e),i=vu(e),s=mu(e);return n.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}getDocumentsMatchingTarget(e,t){const n=mu(e);let i=!0;const s=new Map;return qs.forEach(this.an(t),(t=>this.un(e,t).next((e=>{i&&(i=!!e),s.set(t,e)})))).next((()=>{if(i){let e=La();const i=[];return qs.forEach(s,((s,r)=>{ts("IndexedDbIndexManager",`Using index ${function(e){return`id=${e.indexId}|cg=${e.collectionGroup}|f=${e.fields.map((e=>`${e.fieldPath}:${e.kind}`)).join(",")}`}(s)} to execute ${ea(t)}`);const o=function(e,t){const n=Ps(t);if(void 0===n)return null;for(const i of ia(e,n.fieldPath))switch(i.op){case"array-contains-any":return i.value.arrayValue.values||[];case"array-contains":return[i.value]}return null}(r,s),a=function(e,t){const n=new Map;for(const i of Rs(t))for(const t of ia(e,i.fieldPath))switch(t.op){case"==":case"in":n.set(i.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(i.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(r,s),c=function(e,t){const n=[];let i=!0;for(const s of Rs(t)){const t=0===s.kind?sa(e,s.fieldPath,e.startAt):ra(e,s.fieldPath,e.startAt);n.push(t.value),i&&(i=t.inclusive)}return new xo(n,i)}(r,s),l=function(e,t){const n=[];let i=!0;for(const s of Rs(t)){const t=0===s.kind?ra(e,s.fieldPath,e.endAt):sa(e,s.fieldPath,e.endAt);n.push(t.value),i&&(i=t.inclusive)}return new xo(n,i)}(r,s),u=this.cn(s,r,c),h=this.cn(s,r,l),d=this.ln(s,r,a),p=this.hn(s.indexId,o,u,c.inclusive,h,l.inclusive,d);return qs.forEach(p,(s=>n.H(s,t.limit).next((t=>{t.forEach((t=>{const n=Os.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),i.push(n))}))}))))})).next((()=>i))}return qs.resolve(null)}))}an(e){let t=this._n.get(e);return t||(t=0===e.filters.length?[e]:nu(Lo.create(e.filters,"and")).map((t=>Jo(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this._n.set(e,t),t)}hn(e,t,n,i,s,r,o){const a=(null!=t?t.length:1)*Math.max(n.length,s.length),c=a/(null!=t?t.length:1),l=[];for(let u=0;u<a;++u){const a=t?this.Pn(t[u/c]):du,h=this.In(e,a,n[u%c],i),d=this.Tn(e,a,s[u%c],r),p=o.map((t=>this.In(e,a,t,!0)));l.push(...this.createRange(h,d,p))}return l}In(e,t,n,i){const s=new Yl(e,Os.empty(),t,n);return i?s:s.Jt()}Tn(e,t,n,i){const s=new Yl(e,Os.empty(),t,n);return i?s.Jt():s}un(e,t){const n=new eu(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((e=>{let t=null;for(const i of e)n.en(i)&&(!t||i.fields.length>t.fields.length)&&(t=i);return t}))}getIndexType(e,t){let n=2;const i=this.an(t);return qs.forEach(i,(t=>this.un(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new Ur(Ns.comparator),n=!1;for(const i of e.filters)for(const e of i.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const i of e.orderBy)i.field.isKeyField()||(t=t.add(i.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&i.length>1&&2===n?1:n))}En(e,t){const n=new Ql;for(const i of Rs(e)){const e=t.data.field(i.fieldPath);if(null==e)return null;const s=n.Ht(i.kind);ql.bt.Pt(e,s)}return n.Wt()}Pn(e){const t=new Ql;return ql.bt.Pt(e,t.Ht(0)),t.Wt()}dn(e,t){const n=new Ql;return ql.bt.Pt(po(this.databaseId,t),n.Ht(function(e){const t=Rs(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}ln(e,t,n){if(null===n)return[];let i=[];i.push(new Ql);let s=0;for(const r of Rs(e)){const e=n[s++];for(const n of i)if(this.An(t,r.fieldPath)&&mo(e))i=this.Rn(i,r,e);else{const t=n.Ht(r.kind);ql.bt.Pt(e,t)}}return this.Vn(i)}cn(e,t,n){return this.ln(e,t,n.position)}Vn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}Rn(e,t,n){const i=[...e],s=[];for(const r of n.arrayValue.values||[])for(const e of i){const n=new Ql;n.seed(e.Wt()),ql.bt.Pt(r,n.Ht(t.kind)),s.push(n)}return s}An(e,t){return!!e.filters.find((e=>e instanceof Ro&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=gu(e),i=vu(e);return(t?n.G("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.G()).next((e=>{const t=[];return qs.forEach(e,(e=>i.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new $s(t.sequenceNumber,new Vs(Ol(t.readTime),new Os(lr(t.documentKey)),t.largestBatchId)):$s.empty(),i=e.fields.map((([e,t])=>new Ls(Ns.fromServerFormat(e),t)));return new Ds(e.indexId,e.collectionGroup,i,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Is(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const i=gu(e),s=vu(e);return this.mn(e).next((e=>i.G("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>qs.forEach(t,(t=>s.put(Fl(t.indexId,this.user,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return qs.forEach(t,((t,i)=>{const s=n.get(t.collectionGroup);return(s?qs.resolve(s):this.getFieldIndexes(e,t.collectionGroup)).next((s=>(n.set(t.collectionGroup,s),qs.forEach(s,(n=>this.fn(e,t,n).next((t=>{const s=this.gn(i,n);return t.isEqual(s)?qs.resolve():this.pn(e,i,n,t,s)})))))))}))}yn(e,t,n,i){return mu(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.dn(n,t.key),documentKey:t.key.path.toArray()})}wn(e,t,n,i){return mu(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.dn(n,t.key),t.key.path.toArray()])}fn(e,t,n){const i=mu(e);let s=new Ur(Xl);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.dn(n,t)])},((e,i)=>{s=s.add(new Yl(n.indexId,t,i.arrayValue,i.directionalValue))})).next((()=>s))}gn(e,t){let n=new Ur(Xl);const i=this.En(t,e);if(null==i)return n;const s=Ps(t);if(null!=s){const r=e.data.field(s.fieldPath);if(mo(r))for(const s of r.arrayValue.values||[])n=n.add(new Yl(t.indexId,e.key,this.Pn(s),i))}else n=n.add(new Yl(t.indexId,e.key,du,i));return n}pn(e,t,n,i,s){ts("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const r=[];return function(e,t,n,i,s){const r=e.getIterator(),o=t.getIterator();let a=zr(r),c=zr(o);for(;a||c;){let e=!1,t=!1;if(a&&c){const i=n(a,c);i<0?t=!0:i>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(i(c),c=zr(o)):t?(s(a),a=zr(r)):(a=zr(r),c=zr(o))}}(i,s,Xl,(i=>{r.push(this.yn(e,t,n,i))}),(i=>{r.push(this.wn(e,t,n,i))})),qs.waitFor(r)}mn(e){let t=1;return vu(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,i)=>{i.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>Xl(e,t))).filter(((e,t,n)=>!t||0!==Xl(e,n[t-1])));const i=[];i.push(e);for(const r of n){const n=Xl(r,e),s=Xl(r,t);if(0===n)i[0]=e.Jt();else if(n>0&&s<0)i.push(r),i.push(r.Jt());else if(s>0)break}i.push(t);const s=[];for(let r=0;r<i.length;r+=2){if(this.Sn(i[r],i[r+1]))return[];const e=[i[r].indexId,this.uid,i[r].arrayValue,i[r].directionalValue,du,[]],t=[i[r+1].indexId,this.uid,i[r+1].arrayValue,i[r+1].directionalValue,du,[]];s.push(IDBKeyRange.bound(e,t))}return s}Sn(e,t){return Xl(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(yu)}getMinOffset(e,t){return qs.mapArray(this.an(t),(t=>this.un(e,t).next((e=>e||rs())))).next(yu)}}function fu(e){return Rr(e,"collectionParents")}function mu(e){return Rr(e,"indexEntries")}function gu(e){return Rr(e,"indexConfiguration")}function vu(e){return Rr(e,"indexState")}function yu(e){os(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let i=1;i<e.length;i++){const s=e[i].indexState.offset;Bs(s,t)<0&&(t=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new Vs(t.readTime,t.documentKey,n)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class wu{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new wu(e,wu.DEFAULT_COLLECTION_PERCENTILE,wu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(e,t,n){const i=e.store("mutations"),s=e.store("documentMutations"),r=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=i.Z({range:o},((e,t,n)=>(a++,n.delete())));r.push(c.next((()=>{os(1===a)})));const l=[];for(const u of n.mutations){const e=dr(t,u.key.path,n.batchId);r.push(s.delete(e)),l.push(u.key)}return qs.waitFor(r).next((()=>l))}function Iu(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw rs();t=e.noDocument}return JSON.stringify(t).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wu.DEFAULT_COLLECTION_PERCENTILE=10,wu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wu.DEFAULT=new wu(41943040,wu.DEFAULT_COLLECTION_PERCENTILE,wu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wu.DISABLED=new wu(-1,0,0);class Cu{constructor(e,t,n,i){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=i,this.bn={}}static lt(e,t,n,i){os(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new Cu(s,t,n,i)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Tu(e).Z({index:"userMutationsIndex",range:n},((e,n,i)=>{t=!1,i.done()})).next((()=>t))}addMutationBatch(e,t,n,i){const s=Eu(e),r=Tu(e);return r.add({}).next((o=>{os("number"==typeof o);const a=new vc(o,t,n,i),c=function(e,t,n){const i=n.baseMutations.map((t=>ll(e.ct,t))),s=n.mutations.map((t=>ll(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:i,mutations:s}}(this.serializer,this.userId,a),l=[];let u=new Ur(((e,t)=>Is(e.canonicalString(),t.canonicalString())));for(const e of i){const t=dr(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),l.push(r.put(c)),l.push(s.put(t,pr))}return u.forEach((t=>{l.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.bn[o]=a.keys()})),qs.waitFor(l).next((()=>a))}))}lookupMutationBatch(e,t){return Tu(e).get(t).next((e=>e?(os(e.userId===this.userId),Dl(this.serializer,e)):null))}Dn(e,t){return this.bn[t]?qs.resolve(this.bn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.bn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return Tu(e).Z({index:"userMutationsIndex",range:i},((e,t,i)=>{t.userId===this.userId&&(os(t.batchId>=n),s=Dl(this.serializer,t)),i.done()})).next((()=>s))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Tu(e).Z({index:"userMutationsIndex",range:t,reverse:!0},((e,t,i)=>{n=t.batchId,i.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Tu(e).G("userMutationsIndex",t).next((e=>e.map((e=>Dl(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=hr(this.userId,t.path),i=IDBKeyRange.lowerBound(n),s=[];return Eu(e).Z({range:i},((n,i,r)=>{const[o,a,c]=n,l=lr(a);if(o===this.userId&&t.path.isEqual(l))return Tu(e).get(c).next((e=>{if(!e)throw rs();os(e.userId===this.userId),s.push(Dl(this.serializer,e))}));r.done()})).next((()=>s))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ur(Is);const i=[];return t.forEach((t=>{const s=hr(this.userId,t.path),r=IDBKeyRange.lowerBound(s),o=Eu(e).Z({range:r},((e,i,s)=>{const[r,o,a]=e,c=lr(o);r===this.userId&&t.path.isEqual(c)?n=n.add(a):s.done()}));i.push(o)})),qs.waitFor(i).next((()=>this.vn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1,s=hr(this.userId,n),r=IDBKeyRange.lowerBound(s);let o=new Ur(Is);return Eu(e).Z({range:r},((e,t,s)=>{const[r,a,c]=e,l=lr(a);r===this.userId&&n.isPrefixOf(l)?l.length===i&&(o=o.add(c)):s.done()})).next((()=>this.vn(e,o)))}vn(e,t){const n=[],i=[];return t.forEach((t=>{i.push(Tu(e).get(t).next((e=>{if(null===e)throw rs();os(e.userId===this.userId),n.push(Dl(this.serializer,e))})))})),qs.waitFor(i).next((()=>n))}removeMutationBatch(e,t){return bu(e.ue,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Cn(t.batchId)})),qs.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Cn(e){delete this.bn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return qs.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),i=[];return Eu(e).Z({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=lr(e[1]);i.push(t)}else n.done()})).next((()=>{os(0===i.length)}))}))}containsKey(e,t){return Su(e,this.userId,t)}Fn(e){return ku(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Su(e,t,n){const i=hr(t,n.path),s=i[1],r=IDBKeyRange.lowerBound(i);let o=!1;return Eu(e).Z({range:r,Y:!0},((e,n,i)=>{const[r,a,c]=e;r===t&&a===s&&(o=!0),i.done()})).next((()=>o))}function Tu(e){return Rr(e,"mutations")}function Eu(e){return Rr(e,"documentMutations")}function ku(e){return Rr(e,"mutationQueues")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e){this.Mn=e}next(){return this.Mn+=2,this.Mn}static xn(){return new xu(0)}static On(){return new xu(-1)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Nn(e).next((t=>{const n=new xu(t.highestTargetId);return t.highestTargetId=n.next(),this.Bn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Nn(e).next((e=>Es.fromTimestamp(new Ts(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Nn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Nn(e).next((i=>(i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Bn(e,i))))}addTargetData(e,t){return this.Ln(e,t).next((()=>this.Nn(e).next((n=>(n.targetCount+=1,this.kn(t,n),this.Bn(e,n))))))}updateTargetData(e,t){return this.Ln(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Nu(e).delete(t.targetId))).next((()=>this.Nn(e))).next((t=>(os(t.targetCount>0),t.targetCount-=1,this.Bn(e,t))))}removeTargets(e,t,n){let i=0;const s=[];return Nu(e).Z(((r,o)=>{const a=Pl(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(i++,s.push(this.removeTargetData(e,a)))})).next((()=>qs.waitFor(s))).next((()=>i))}forEachTarget(e,t){return Nu(e).Z(((e,n)=>{const i=Pl(n);t(i)}))}Nn(e){return Ou(e).get("targetGlobalKey").next((e=>(os(null!==e),e)))}Bn(e,t){return Ou(e).put("targetGlobalKey",t)}Ln(e,t){return Nu(e).put(Rl(this.serializer,t))}kn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Nn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=ea(t),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return Nu(e).Z({range:i,index:"queryTargetsIndex"},((e,n,i)=>{const r=Pl(n);ta(t,r.target)&&(s=r,i.done())})).next((()=>s))}addMatchingKeys(e,t,n){const i=[],s=Du(e);return t.forEach((t=>{const r=or(t.path);i.push(s.put({targetId:n,path:r})),i.push(this.referenceDelegate.addReference(e,n,t))})),qs.waitFor(i)}removeMatchingKeys(e,t,n){const i=Du(e);return qs.forEach(t,(t=>{const s=or(t.path);return qs.waitFor([i.delete([n,s]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Du(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),i=Du(e);let s=La();return i.Z({range:n,Y:!0},((e,t,n)=>{const i=lr(e[1]),r=new Os(i);s=s.add(r)})).next((()=>s))}containsKey(e,t){const n=or(t.path),i=IDBKeyRange.bound([n],[Ss(n)],!1,!0);let s=0;return Du(e).Z({index:"documentTargetsIndex",Y:!0,range:i},(([e,t],n,i)=>{0!==e&&(s++,i.done())})).next((()=>s>0))}ut(e,t){return Nu(e).get(t).next((e=>e?Pl(e):null))}}function Nu(e){return Rr(e,"targets")}function Ou(e){return Rr(e,"targetGlobal")}function Du(e){return Rr(e,"targetDocuments")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pu([e,t],[n,i]){const s=Is(e,n);return 0===s?Is(t,i):s}class Ru{constructor(e){this.qn=e,this.buffer=new Ur(Pu),this.Qn=0}Kn(){return++this.Qn}$n(e){const t=[e,this.Kn()];if(this.buffer.size<this.qn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Pu(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Lu{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Un=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Wn(6e4)}stop(){this.Un&&(this.Un.cancel(),this.Un=null)}get started(){return null!==this.Un}Wn(e){ts("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Un=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Un=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Gs(e)?ts("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await zs(e)}await this.Wn(3e5)}))}}class $u{constructor(e,t){this.Gn=e,this.params=t}calculateTargetCount(e,t){return this.Gn.zn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return qs.resolve(nr.ae);const n=new Ru(t);return this.Gn.forEachTarget(e,(e=>n.$n(e.sequenceNumber))).next((()=>this.Gn.jn(e,(e=>n.$n(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.Gn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Gn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ts("LruGarbageCollector","Garbage collection skipped; disabled"),qs.resolve(_u)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(ts("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_u):this.Hn(e,t)))}getCacheSize(e){return this.Gn.getCacheSize(e)}Hn(e,t){let n,i,s,r,o,c,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(ts("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),i=this.params.maximumSequenceNumbersToCollect):i=t,r=Date.now(),this.nthSequenceNumber(e,i)))).next((i=>(n=i,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(s=t,c=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),Ji()<=a["in"].DEBUG&&ts("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${r-u}ms\n\tDetermined least recently used ${i} in `+(o-r)+"ms\n"+`\tRemoved ${s} targets in `+(c-o)+"ms\n"+`\tRemoved ${e} documents in `+(l-c)+"ms\n"+`Total Duration: ${l-u}ms`),qs.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:e}))))}}function Mu(e,t){return new $u(e,t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(e,t){this.db=e,this.garbageCollector=Mu(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Jn(e){let t=0;return this.jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}jn(e,t){return this.Yn(e,((e,n)=>t(n)))}addReference(e,t,n){return Vu(e,n)}removeReference(e,t,n){return Vu(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Vu(e,t)}Zn(e,t){return function(e,t){let n=!1;return ku(e).X((i=>Su(e,i,t).next((e=>(e&&(n=!0),qs.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Yn(e,((r,o)=>{if(o<=t){const t=this.Zn(e,r).next((t=>{if(!t)return s++,n.getEntry(e,r).next((()=>(n.removeEntry(r,Es.min()),Du(e).delete(function(e){return[0,or(e.path)]}(r)))))}));i.push(t)}})).next((()=>qs.waitFor(i))).next((()=>n.apply(e))).next((()=>s))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Vu(e,t)}Yn(e,t){const n=Du(e);let i,s=nr.ae;return n.Z({index:"documentTargetsIndex"},(([e,n],{path:r,sequenceNumber:o})=>{0===e?(s!==nr.ae&&t(new Os(lr(i)),s),s=o,i=r):s=nr.ae})).next((()=>{s!==nr.ae&&t(new Os(lr(i)),s)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Vu(e,t){return Du(e).put(function(e,t){return{targetId:0,path:or(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(){this.changes=new Sa((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ko.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?qs.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Hu(e).put(n)}removeEntry(e,t,n){return Hu(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Al(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.Xn(e,n))))}getEntry(e,t){let n=ko.newInvalidDocument(t);return Hu(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Wu(t))},((e,i)=>{n=this.er(t,i)})).next((()=>n))}tr(e,t){let n={size:0,document:ko.newInvalidDocument(t)};return Hu(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Wu(t))},((e,i)=>{n={document:this.er(t,i),size:Iu(i)}})).next((()=>n))}getEntries(e,t){let n=Ea();return this.nr(e,t,((e,t)=>{const i=this.er(e,t);n=n.insert(e,i)})).next((()=>n))}rr(e,t){let n=Ea(),i=new Fr(Os.comparator);return this.nr(e,t,((e,t)=>{const s=this.er(e,t);n=n.insert(e,s),i=i.insert(e,Iu(t))})).next((()=>({documents:n,ir:i})))}nr(e,t,n){if(t.isEmpty())return qs.resolve();let i=new Ur(Ku);t.forEach((e=>i=i.add(e)));const s=IDBKeyRange.bound(Wu(i.first()),Wu(i.last())),r=i.getIterator();let o=r.getNext();return Hu(e).Z({index:"documentKeyIndex",range:s},((e,t,i)=>{const s=Os.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&Ku(o,s)<0;)n(o,null),o=r.getNext();o&&o.isEqual(s)&&(n(o,t),o=r.hasNext()?r.getNext():null),o?i.W(Wu(o)):i.done()})).next((()=>{for(;o;)n(o,null),o=r.hasNext()?r.getNext():null}))}getDocumentsMatchingQuery(e,t,n,i){const s=t.path,r=[s.popLast().toArray(),s.lastSegment(),Al(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],o=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Hu(e).G(IDBKeyRange.bound(r,o,!0)).next((e=>{let n=Ea();for(const s of e){const e=this.er(Os.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);e.isFoundDocument()&&(wa(t,e)||i.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,i){let s=Ea();const r=Zu(t,n),o=Zu(t,Vs.max());return Hu(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(r,o,!0)},((e,t,n)=>{const r=this.er(Os.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);s=s.insert(r.key,r),s.size===i&&n.done()})).next((()=>s))}newChangeBuffer(e){return new zu(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return qu(e).get("remoteDocumentGlobalKey").next((e=>(os(!!e),e)))}Xn(e,t){return qu(e).put("remoteDocumentGlobalKey",t)}er(e,t){if(t){const e=kl(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Es.min()))return e}return ko.newInvalidDocument(e)}}function ju(e){return new Uu(e)}class zu extends Bu{constructor(e,t){super(),this.sr=e,this.trackRemovals=t,this._r=new Sa((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,i=new Ur(((e,t)=>Is(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((s,r)=>{const o=this._r.get(s);if(t.push(this.sr.removeEntry(e,s,o.readTime)),r.isValidDocument()){const a=xl(this.sr.serializer,r);i=i.add(s.path.popLast());const c=Iu(a);n+=c-o.size,t.push(this.sr.addEntry(e,s,a))}else if(n-=o.size,this.trackRemovals){const n=xl(this.sr.serializer,r.convertToNoDocument(Es.min()));t.push(this.sr.addEntry(e,s,n))}})),i.forEach((n=>{t.push(this.sr.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.sr.updateMetadata(e,n)),qs.waitFor(t)}getFromCache(e,t){return this.sr.tr(e,t).next((e=>(this._r.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.sr.rr(e,t).next((({documents:e,ir:t})=>(t.forEach(((t,n)=>{this._r.set(t,{size:n,readTime:e.get(t).readTime})})),e)))}}function qu(e){return Rr(e,"remoteDocumentGlobal")}function Hu(e){return Rr(e,"remoteDocumentsV14")}function Wu(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Zu(e,t){const n=t.documentKey.path.toArray();return[e,Al(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Ku(e,t){const n=e.path.toArray(),i=t.path.toArray();let s=0;for(let r=0;r<n.length-2&&r<i.length-2;++r)if(s=Is(n[r],i[r]),s)return s;return s=Is(n.length,i.length),s||(s=Is(n[n.length-2],i[i.length-2]),s||Is(n[n.length-1],i[i.length-1]))
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Gu{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(n=i,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&ac(n.mutation,e,qr.empty(),Ts.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,La()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=La()){const i=Na();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,n).next((e=>{let t=xa();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=Na();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,La())))}populateOverlays(e,t,n){const i=[];return n.forEach((e=>{t.has(e)||i.push(e)})),this.documentOverlayCache.getOverlays(e,i).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,i){let s=Ea();const r=Da(),o=function(){return Da()}();return t.forEach(((e,t)=>{const o=n.get(t.key);i.has(t.key)&&(void 0===o||o.mutation instanceof hc)?s=s.insert(t.key,t):void 0!==o?(r.set(t.key,o.mutation.getFieldMask()),ac(o.mutation,t,o.mutation.getFieldMask(),Ts.now())):r.set(t.key,qr.empty())})),this.recalculateAndSaveOverlays(e,s).next((e=>(e.forEach(((e,t)=>r.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new Gu(t,null!==(n=r.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=Da();let i=new Fr(((e,t)=>e-t)),s=La();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const s of e)s.keys().forEach((e=>{const r=t.get(e);if(null===r)return;let o=n.get(e)||qr.empty();o=s.applyToLocalView(r,o),n.set(e,o);const a=(i.get(s.batchId)||La()).add(e);i=i.insert(s.batchId,a)}))})).next((()=>{const r=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,c=i.value,l=Oa();c.forEach((e=>{if(!s.has(e)){const i=rc(t.get(e),n.get(e));null!==i&&l.set(e,i),s=s.add(e)}})),r.push(this.documentOverlayCache.saveOverlays(e,a,l))}return qs.waitFor(r)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n){return function(e){return Os.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):da(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next((s=>{const r=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-s.size):qs.resolve(Na());let o=-1,a=s;return r.next((t=>qs.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),s.get(t)?qs.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,s))).next((()=>this.computeViews(e,a,t,La()))).next((e=>({batchId:o,changes:Aa(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Os(t)).next((e=>{let t=xa();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n){const i=t.collectionGroup;let s=xa();return this.indexManager.getCollectionParents(e,i).next((r=>qs.forEach(r,(r=>{const o=function(e,t){return new oa(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,r.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i)))).next((e=>{i.forEach(((t,n)=>{const i=n.getKey();null===e.get(i)&&(e=e.insert(i,ko.newInvalidDocument(i)))}));let n=xa();return e.forEach(((e,s)=>{const r=i.get(e);void 0!==r&&ac(r.mutation,s,qr.empty(),Ts.now()),wa(t,s)&&(n=n.insert(e,s))})),n}))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e){this.serializer=e,this.ar=new Map,this.ur=new Map}getBundleMetadata(e,t){return qs.resolve(this.ar.get(t))}saveBundleMetadata(e,t){return this.ar.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Qc(e.createTime)}}(t)),qs.resolve()}getNamedQuery(e,t){return qs.resolve(this.ur.get(t))}saveNamedQuery(e,t){return this.ur.set(t.name,function(e){return{name:e.name,query:Ll(e.bundledQuery),readTime:Qc(e.readTime)}}(t)),qs.resolve()}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(){this.overlays=new Fr(Os.comparator),this.cr=new Map}getOverlay(e,t){return qs.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Na();return qs.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,i)=>{this.ht(e,t,i)})),qs.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.cr.get(n);return void 0!==i&&(i.forEach((e=>this.overlays=this.overlays.remove(e))),this.cr.delete(n)),qs.resolve()}getOverlaysForCollection(e,t,n){const i=Na(),s=t.length+1,r=new Os(t.child("")),o=this.overlays.getIteratorFrom(r);for(;o.hasNext();){const e=o.getNext().value,r=e.getKey();if(!t.isPrefixOf(r.path))break;r.path.length===s&&e.largestBatchId>n&&i.set(e.getKey(),e)}return qs.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let s=new Fr(((e,t)=>e-t));const r=this.overlays.getIterator();for(;r.hasNext();){const e=r.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=Na(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Na(),a=s.getIterator();for(;a.hasNext();)if(a.getNext().value.forEach(((e,t)=>o.set(e,t))),o.size()>=i)break;return qs.resolve(o)}ht(e,t,n){const i=this.overlays.get(n.key);if(null!==i){const e=this.cr.get(i.largestBatchId).delete(n.key);this.cr.set(i.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new _c(t,n));let s=this.cr.get(t);void 0===s&&(s=La(),this.cr.set(t,s)),this.cr.set(t,s.add(n.key))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(){this.lr=new Ur(eh.hr),this.Pr=new Ur(eh.Ir)}isEmpty(){return this.lr.isEmpty()}addReference(e,t){const n=new eh(e,t);this.lr=this.lr.add(n),this.Pr=this.Pr.add(n)}Tr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Er(new eh(e,t))}dr(e,t){e.forEach((e=>this.removeReference(e,t)))}Ar(e){const t=new Os(new xs([])),n=new eh(t,e),i=new eh(t,e+1),s=[];return this.Pr.forEachInRange([n,i],(e=>{this.Er(e),s.push(e.key)})),s}Rr(){this.lr.forEach((e=>this.Er(e)))}Er(e){this.lr=this.lr.delete(e),this.Pr=this.Pr.delete(e)}Vr(e){const t=new Os(new xs([])),n=new eh(t,e),i=new eh(t,e+1);let s=La();return this.Pr.forEachInRange([n,i],(e=>{s=s.add(e.key)})),s}containsKey(e){const t=new eh(e,0),n=this.lr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class eh{constructor(e,t){this.key=e,this.mr=t}static hr(e,t){return Os.comparator(e.key,t.key)||Is(e.mr,t.mr)}static Ir(e,t){return Is(e.mr,t.mr)||Os.comparator(e.key,t.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.gr=1,this.pr=new Ur(eh.hr)}checkEmpty(e){return qs.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,i){const s=this.gr;this.gr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const r=new vc(s,t,n,i);this.mutationQueue.push(r);for(const o of i)this.pr=this.pr.add(new eh(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return qs.resolve(r)}lookupMutationBatch(e,t){return qs.resolve(this.yr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.wr(n),s=i<0?0:i;return qs.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return qs.resolve(0===this.mutationQueue.length?-1:this.gr-1)}getAllMutationBatches(e){return qs.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new eh(t,0),i=new eh(t,Number.POSITIVE_INFINITY),s=[];return this.pr.forEachInRange([n,i],(e=>{const t=this.yr(e.mr);s.push(t)})),qs.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Ur(Is);return t.forEach((e=>{const t=new eh(e,0),i=new eh(e,Number.POSITIVE_INFINITY);this.pr.forEachInRange([t,i],(e=>{n=n.add(e.mr)}))})),qs.resolve(this.Sr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let s=n;Os.isDocumentKey(s)||(s=s.child(""));const r=new eh(new Os(s),0);let o=new Ur(Is);return this.pr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===i&&(o=o.add(e.mr)),!0)}),r),qs.resolve(this.Sr(o))}Sr(e){const t=[];return e.forEach((e=>{const n=this.yr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){os(0===this.br(t.batchId,"removed")),this.mutationQueue.shift();let n=this.pr;return qs.forEach(t.mutations,(i=>{const s=new eh(i.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.pr=n}))}Cn(e){}containsKey(e,t){const n=new eh(t,0),i=this.pr.firstAfterOrEqual(n);return qs.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,qs.resolve()}br(e,t){return this.wr(e)}wr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}yr(e){const t=this.wr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e){this.Dr=e,this.docs=function(){return new Fr(Os.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),s=i?i.size:0,r=this.Dr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:r}),this.size+=r-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return qs.resolve(n?n.document.mutableCopy():ko.newInvalidDocument(t))}getEntries(e,t){let n=Ea();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ko.newInvalidDocument(e))})),qs.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let s=Ea();const r=t.path,o=new Os(r.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!r.isPrefixOf(e.path))break;e.path.length>r.length+1||Bs(Fs(o),n)<=0||(i.has(o.key)||wa(t,o))&&(s=s.insert(o.key,o.mutableCopy()))}return qs.resolve(s)}getAllFromCollectionGroup(e,t,n,i){rs()}vr(e,t){return qs.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new ih(this)}getSize(e){return qs.resolve(this.size)}}class ih extends Bu{constructor(e){super(),this.sr=e}applyChanges(e){const t=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?t.push(this.sr.addEntry(e,i)):this.sr.removeEntry(n)})),qs.waitFor(t)}getFromCache(e,t){return this.sr.getEntry(e,t)}getAllFromCache(e,t){return this.sr.getEntries(e,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sh{constructor(e){this.persistence=e,this.Cr=new Sa((e=>ea(e)),ta),this.lastRemoteSnapshotVersion=Es.min(),this.highestTargetId=0,this.Fr=0,this.Mr=new Ju,this.targetCount=0,this.Or=xu.xn()}forEachTarget(e,t){return this.Cr.forEach(((e,n)=>t(n))),qs.resolve()}getLastRemoteSnapshotVersion(e){return qs.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return qs.resolve(this.Fr)}allocateTargetId(e){return this.highestTargetId=this.Or.next(),qs.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Fr&&(this.Fr=t),qs.resolve()}Ln(e){this.Cr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Or=new xu(t),this.highestTargetId=t),e.sequenceNumber>this.Fr&&(this.Fr=e.sequenceNumber)}addTargetData(e,t){return this.Ln(t),this.targetCount+=1,qs.resolve()}updateTargetData(e,t){return this.Ln(t),qs.resolve()}removeTargetData(e,t){return this.Cr.delete(t.target),this.Mr.Ar(t.targetId),this.targetCount-=1,qs.resolve()}removeTargets(e,t,n){let i=0;const s=[];return this.Cr.forEach(((r,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Cr.delete(r),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)})),qs.waitFor(s).next((()=>i))}getTargetCount(e){return qs.resolve(this.targetCount)}getTargetData(e,t){const n=this.Cr.get(t)||null;return qs.resolve(n)}addMatchingKeys(e,t,n){return this.Mr.Tr(t,n),qs.resolve()}removeMatchingKeys(e,t,n){this.Mr.dr(t,n);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach((t=>{s.push(i.markPotentiallyOrphaned(e,t))})),qs.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Mr.Ar(t),qs.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Mr.Vr(t);return qs.resolve(n)}containsKey(e,t){return qs.resolve(this.Mr.containsKey(t))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,t){this.Nr={},this.overlays={},this.Br=new nr(0),this.Lr=!1,this.Lr=!0,this.referenceDelegate=e(this),this.kr=new sh(this),this.indexManager=new uu,this.remoteDocumentCache=function(e){return new nh(e)}((e=>this.referenceDelegate.qr(e))),this.serializer=new El(t),this.Qr=new Yu(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Lr=!1,Promise.resolve()}get started(){return this.Lr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Xu,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Nr[e.toKey()];return n||(n=new th(t,this.referenceDelegate),this.Nr[e.toKey()]=n),n}getTargetCache(){return this.kr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Qr}runTransaction(e,t,n){ts("MemoryPersistence","Starting transaction:",e);const i=new oh(this.Br.next());return this.referenceDelegate.Kr(),n(i).next((e=>this.referenceDelegate.$r(i).next((()=>e)))).toPromise().then((e=>(i.raiseOnCommittedEvent(),e)))}Ur(e,t){return qs.or(Object.values(this.Nr).map((n=>()=>n.containsKey(e,t))))}}class oh extends js{constructor(e){super(),this.currentSequenceNumber=e}}class ah{constructor(e){this.persistence=e,this.Wr=new Ju,this.Gr=null}static zr(e){return new ah(e)}get jr(){if(this.Gr)return this.Gr;throw rs()}addReference(e,t,n){return this.Wr.addReference(n,t),this.jr.delete(n.toString()),qs.resolve()}removeReference(e,t,n){return this.Wr.removeReference(n,t),this.jr.add(n.toString()),qs.resolve()}markPotentiallyOrphaned(e,t){return this.jr.add(t.toString()),qs.resolve()}removeTarget(e,t){this.Wr.Ar(t.targetId).forEach((e=>this.jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Kr(){this.Gr=new Set}$r(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return qs.forEach(this.jr,(n=>{const i=Os.fromPath(n);return this.Hr(e,i).next((e=>{e||t.removeEntry(i,Es.min())}))})).next((()=>(this.Gr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Hr(e,t).next((e=>{e?this.jr.delete(t.toString()):this.jr.add(t.toString())}))}qr(e){return 0}Hr(e,t){return qs.or([()=>qs.resolve(this.Wr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ur(e,t)])}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ch{constructor(e){this.serializer=e}B(e,t,n,i){const s=new Hs("createOrUpgrade",t);n<1&&i>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ur,{unique:!0}),e.createObjectStore("documentMutations")}(e),lh(e),function(e){e.createObjectStore("remoteDocuments")}(e));let r=qs.resolve();return n<3&&i>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),lh(e)),r=r.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Es.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(s)))),n<4&&i>=4&&(0!==n&&(r=r.next((()=>function(e,t){return t.store("mutations").G().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ur,{unique:!0});const i=t.store("mutations"),s=n.map((e=>i.put(e)));return qs.waitFor(s)}))}(e,s)))),r=r.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&i>=5&&(r=r.next((()=>this.Yr(s)))),n<6&&i>=6&&(r=r.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Zr(s))))),n<7&&i>=7&&(r=r.next((()=>this.Xr(s)))),n<8&&i>=8&&(r=r.next((()=>this.ei(e,s)))),n<9&&i>=9&&(r=r.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&i>=10&&(r=r.next((()=>this.ti(s)))),n<11&&i>=11&&(r=r.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&i>=12&&(r=r.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Tr});t.createIndex("collectionPathOverlayIndex",Er,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",kr,{unique:!1})}(e)}))),n<13&&i>=13&&(r=r.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:fr});t.createIndex("documentKeyIndex",mr),t.createIndex("collectionGroupIndex",gr)}(e))).next((()=>this.ni(e,s))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&i>=14&&(r=r.next((()=>this.ri(e,s)))),n<15&&i>=15&&(r=r.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:br}).createIndex("sequenceNumberIndex",Ir,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Cr}).createIndex("documentKeyIndex",Sr,{unique:!1})}(e)))),r}Zr(e){let t=0;return e.store("remoteDocuments").Z(((e,n)=>{t+=Iu(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Yr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.G().next((t=>qs.forEach(t,(t=>{const i=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.G("userMutationsIndex",i).next((n=>qs.forEach(n,(n=>{os(n.userId===t.userId);const i=Dl(this.serializer,n);return bu(e,t.userId,i).next((()=>{}))}))))}))))}Xr(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const i=[];return n.Z(((n,s)=>{const r=new xs(n),o=function(e){return[0,or(e)]}(r);i.push(t.get(o).next((n=>n?qs.resolve():(n=>t.put({targetId:0,path:or(n),sequenceNumber:e.highestListenSequenceNumber}))(r))))})).next((()=>qs.waitFor(i)))}))}ei(e,t){e.createObjectStore("collectionParents",{keyPath:wr});const n=t.store("collectionParents"),i=new hu,s=e=>{if(i.add(e)){const t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:or(i)})}};return t.store("remoteDocuments").Z({Y:!0},((e,t)=>{const n=new xs(e);return s(n.popLast())})).next((()=>t.store("documentMutations").Z({Y:!0},(([e,t,n],i)=>{const r=lr(t);return s(r.popLast())}))))}ti(e){const t=e.store("targets");return t.Z(((e,n)=>{const i=Pl(n),s=Rl(this.serializer,i);return t.put(s)}))}ni(e,t){const n=t.store("remoteDocuments"),i=[];return n.Z(((e,n)=>{const s=t.store("remoteDocumentsV14"),r=function(e){return e.document?new Os(xs.fromString(e.document.name).popFirst(5)):e.noDocument?Os.fromSegments(e.noDocument.path):e.unknownDocument?Os.fromSegments(e.unknownDocument.path):rs()}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n).path.toArray(),o={prefixPath:r.slice(0,r.length-2),collectionGroup:r[r.length-2],documentId:r[r.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};i.push(s.put(o))})).next((()=>qs.waitFor(i)))}ri(e,t){const n=t.store("mutations"),i=ju(this.serializer),s=new rh(ah.zr,this.serializer.ct);return n.G().next((e=>{const n=new Map;return e.forEach((e=>{var t;let i=null!==(t=n.get(e.userId))&&void 0!==t?t:La();Dl(this.serializer,e).keys().forEach((e=>i=i.add(e))),n.set(e.userId,i)})),qs.forEach(n,((e,n)=>{const r=new Qi(n),o=jl.lt(this.serializer,r),a=s.getIndexManager(r),c=Cu.lt(r,this.serializer,a,s.referenceDelegate);return new Qu(i,c,o,a).recalculateAndSaveOverlaysForDocumentKeys(new Pr(t,nr.ae),e).next()}))}))}}function lh(e){e.createObjectStore("targetDocuments",{keyPath:yr}).createIndex("documentTargetsIndex",_r,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",vr,{unique:!0}),e.createObjectStore("targetGlobal")}const uh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class hh{constructor(e,t,n,i,s,r,o,a,c,l,u=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.ii=s,this.window=r,this.document=o,this.si=c,this.oi=l,this._i=u,this.Br=null,this.Lr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ai=null,this.inForeground=!1,this.ui=null,this.ci=null,this.li=Number.NEGATIVE_INFINITY,this.hi=e=>Promise.resolve(),!hh.v())throw new us(ls.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Fu(this,i),this.Pi=t+"main",this.serializer=new El(a),this.Ii=new Ws(this.Pi,this._i,new ch(this.serializer)),this.kr=new Au(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ju(this.serializer),this.Qr=new Vl,this.window&&this.window.localStorage?this.Ti=this.window.localStorage:(this.Ti=null,!1===l&&ns("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ei().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new us(ls.FAILED_PRECONDITION,uh);return this.di(),this.Ai(),this.Ri(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.kr.getHighestSequenceNumber(e)))})).then((e=>{this.Br=new nr(e,this.si)})).then((()=>{this.Lr=!0})).catch((e=>(this.Ii&&this.Ii.close(),Promise.reject(e))))}Vi(e){return this.hi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ii.k((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((async()=>{this.started&&await this.Ei()})))}Ei(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>ph(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.mi(e).next((e=>{e||(this.isPrimary=!1,this.ii.enqueueRetryable((()=>this.hi(!1))))}))})).next((()=>this.fi(e))).next((t=>this.isPrimary&&!t?this.gi(e).next((()=>!1)):!!t&&this.pi(e).next((()=>!0)))))).catch((e=>{if(Gs(e))return ts("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ts("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.ii.enqueueRetryable((()=>this.hi(e))),this.isPrimary=e}))}mi(e){return dh(e).get("owner").next((e=>qs.resolve(this.yi(e))))}wi(e){return ph(e).delete(this.clientId)}async Si(){if(this.isPrimary&&!this.bi(this.li,18e5)){this.li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=Rr(e,"clientMetadata");return t.G().next((e=>{const n=this.Di(e,18e5),i=e.filter((e=>-1===n.indexOf(e)));return qs.forEach(i,(e=>t.delete(e.clientId))).next((()=>i))}))})).catch((()=>[]));if(this.Ti)for(const t of e)this.Ti.removeItem(this.vi(t.clientId))}}Ri(){this.ci=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ei().then((()=>this.Si())).then((()=>this.Ri()))))}yi(e){return!!e&&e.ownerId===this.clientId}fi(e){return this.oi?qs.resolve(!0):dh(e).get("owner").next((t=>{if(null!==t&&this.bi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.yi(t)&&this.networkEnabled)return!0;if(!this.yi(t)){if(!t.allowTabSynchronization)throw new us(ls.FAILED_PRECONDITION,uh);return!1}}return!(!this.networkEnabled||!this.inForeground)||ph(e).G().next((e=>void 0===this.Di(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,i=this.networkEnabled===e.networkEnabled;if(t||n&&i)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&ts("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.Lr=!1,this.Fi(),this.ci&&(this.ci.cancel(),this.ci=null),this.Mi(),this.xi(),await this.Ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new Pr(e,nr.ae);return this.gi(t).next((()=>this.wi(t)))})),this.Ii.close(),this.Oi()}Di(e,t){return e.filter((e=>this.bi(e.updateTimeMs,t)&&!this.Ci(e.clientId)))}Ni(){return this.runTransaction("getActiveClients","readonly",(e=>ph(e).G().next((e=>this.Di(e,18e5).map((e=>e.clientId))))))}get started(){return this.Lr}getMutationQueue(e,t){return Cu.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.kr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new pu(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return jl.lt(this.serializer,e)}getBundleCache(){return this.Qr}runTransaction(e,t,n){ts("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=function(e){return 15===e?Dr:14===e?Or:13===e?Nr:12===e?Ar:11===e?xr:void rs()}(this._i);let r;return this.Ii.runTransaction(e,i,s,(i=>(r=new Pr(i,this.Br?this.Br.next():nr.ae),"readwrite-primary"===t?this.mi(r).next((e=>!!e||this.fi(r))).next((t=>{if(!t)throw ns(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable((()=>this.hi(!1))),new us(ls.FAILED_PRECONDITION,Us);return n(r)})).next((e=>this.pi(r).next((()=>e)))):this.Bi(r).next((()=>n(r)))))).then((e=>(r.raiseOnCommittedEvent(),e)))}Bi(e){return dh(e).get("owner").next((e=>{if(null!==e&&this.bi(e.leaseTimestampMs,5e3)&&!this.Ci(e.ownerId)&&!this.yi(e)&&!(this.oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new us(ls.FAILED_PRECONDITION,uh)}))}pi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return dh(e).put("owner",t)}static v(){return Ws.v()}gi(e){const t=dh(e);return t.get("owner").next((e=>this.yi(e)?(ts("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):qs.resolve()))}bi(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(ns(`Detected an update time that is in the future: ${e} > ${n}`),!1))}di(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ui=()=>{this.ii.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ei())))},this.document.addEventListener("visibilitychange",this.ui),this.inForeground="visible"===this.document.visibilityState)}Mi(){this.ui&&(this.document.removeEventListener("visibilitychange",this.ui),this.ui=null)}Ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ai=()=>{this.Fi();const e=/(?:Version|Mobile)\/1[456]/;(0,c.G6)()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ai))}xi(){this.ai&&(this.window.removeEventListener("pagehide",this.ai),this.ai=null)}Ci(e){var t;try{const n=null!==(null===(t=this.Ti)||void 0===t?void 0:t.getItem(this.vi(e)));return ts("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return ns("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Fi(){if(this.Ti)try{this.Ti.setItem(this.vi(this.clientId),String(Date.now()))}catch(e){ns("Failed to set zombie client id.",e)}}Oi(){if(this.Ti)try{this.Ti.removeItem(this.vi(this.clientId))}catch(e){}}vi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function dh(e){return Rr(e,"owner")}function ph(e){return Rr(e,"clientMetadata")}function fh(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class mh{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.Li=n,this.ki=i}static qi(e,t){let n=La(),i=La();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new mh(e,t.fromCache,n,i)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(){this.Qi=!1}initialize(e,t){this.Ki=e,this.indexManager=t,this.Qi=!0}getDocumentsMatchingQuery(e,t,n,i){return this.$i(e,t).next((s=>s||this.Ui(e,t,i,n))).next((n=>n||this.Wi(e,t)))}$i(e,t){if(la(t))return qs.resolve(null);let n=fa(t);return this.indexManager.getIndexType(e,n).next((i=>0===i?null:(null!==t.limit&&1===i&&(t=ga(t,null,"F"),n=fa(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((i=>{const s=La(...i);return this.Ki.getDocuments(e,s).next((i=>this.indexManager.getMinOffset(e,n).next((n=>{const r=this.Gi(t,i);return this.zi(t,r,s,n.readTime)?this.$i(e,ga(t,null,"F")):this.ji(e,r,t,n)}))))})))))}Ui(e,t,n,i){return la(t)||i.isEqual(Es.min())?this.Wi(e,t):this.Ki.getDocuments(e,n).next((s=>{const r=this.Gi(t,s);return this.zi(t,r,n,i)?this.Wi(e,t):(Ji()<=a["in"].DEBUG&&ts("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),_a(t)),this.ji(e,r,t,Ms(i,-1)))}))}Gi(e,t){let n=new Ur(Ia(e));return t.forEach(((t,i)=>{wa(e,i)&&(n=n.add(i))})),n}zi(e,t,n,i){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Wi(e,t){return Ji()<=a["in"].DEBUG&&ts("QueryEngine","Using full collection scan to execute query:",_a(t)),this.Ki.getDocumentsMatchingQuery(e,t,Vs.min())}ji(e,t,n,i){return this.Ki.getDocumentsMatchingQuery(e,n,i).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,t,n,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new Fr(Is),this.Yi=new Sa((e=>ea(e)),ta),this.Zi=new Map,this.Xi=e.getRemoteDocumentCache(),this.kr=e.getTargetCache(),this.Qr=e.getBundleCache(),this.es(n)}es(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Qu(this.Xi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Xi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ji)))}}function yh(e,t,n,i){return new vh(e,t,n,i)}async function _h(e,t){const n=cs(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let i;return n.mutationQueue.getAllMutationBatches(e).next((s=>(i=s,n.es(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const s=[],r=[];let o=La();for(const e of i){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({ts:e,removedBatchIds:s,addedBatchIds:r})))}))}))}function wh(e,t){const n=cs(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const i=t.batch.keys(),s=n.Xi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,i){const s=n.batch,r=s.keys();let o=qs.resolve();return r.forEach((e=>{o=o.next((()=>i.getEntry(t,e))).next((t=>{const r=n.docVersions.get(e);os(null!==r),t.version.compareTo(r)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),i.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,s)))}(n,e,t,s).next((()=>s.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,i,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=La();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,i)))}))}function bh(e){const t=cs(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.kr.getLastRemoteSnapshotVersion(e)))}function Ih(e,t){const n=cs(e),i=t.snapshotVersion;let s=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const r=n.Xi.newChangeBuffer({trackRemovals:!0});s=n.Ji;const o=[];t.targetChanges.forEach(((r,a)=>{const c=s.get(a);if(!c)return;o.push(n.kr.removeMatchingKeys(e,r.removedDocuments,a).next((()=>n.kr.addMatchingKeys(e,r.addedDocuments,a))));let l=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?l=l.withResumeToken(Zr.EMPTY_BYTE_STRING,Es.min()).withLastLimboFreeSnapshotVersion(Es.min()):r.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(r.resumeToken,i)),s=s.insert(a,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(c,l,r)&&o.push(n.kr.updateTargetData(e,l))}));let a=Ea(),c=La();if(t.documentUpdates.forEach((i=>{t.resolvedLimboDocuments.has(i)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,i))})),o.push(Ch(e,r,t.documentUpdates).next((e=>{a=e.ns,c=e.rs}))),!i.isEqual(Es.min())){const t=n.kr.getLastRemoteSnapshotVersion(e).next((t=>n.kr.setTargetsMetadata(e,e.currentSequenceNumber,i)));o.push(t)}return qs.waitFor(o).next((()=>r.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,c))).next((()=>a))})).then((e=>(n.Ji=s,e)))}function Ch(e,t,n){let i=La(),s=La();return n.forEach((e=>i=i.add(e))),t.getEntries(e,i).next((e=>{let i=Ea();return n.forEach(((n,r)=>{const o=e.get(n);r.isFoundDocument()!==o.isFoundDocument()&&(s=s.add(n)),r.isNoDocument()&&r.version.isEqual(Es.min())?(t.removeEntry(n,r.readTime),i=i.insert(n,r)):!o.isValidDocument()||r.version.compareTo(o.version)>0||0===r.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(r),i=i.insert(n,r)):ts("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",r.version)})),{ns:i,rs:s}}))}function Sh(e,t){const n=cs(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Th(e,t){const n=cs(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let i;return n.kr.getTargetData(e,t).next((s=>s?(i=s,qs.resolve(i)):n.kr.allocateTargetId(e).next((s=>(i=new Tl(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.kr.addTargetData(e,i).next((()=>i)))))))})).then((e=>{const i=n.Ji.get(e.targetId);return(null===i||e.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e}))}async function Eh(e,t,n){const i=cs(e),s=i.Ji.get(t),r=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",r,(e=>i.persistence.referenceDelegate.removeTarget(e,s)))}catch(e){if(!Gs(e))throw e;ts("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}i.Ji=i.Ji.remove(t),i.Yi.delete(s.target)}function kh(e,t,n){const i=cs(e);let s=Es.min(),r=La();return i.persistence.runTransaction("Execute query","readonly",(e=>function(e,t,n){const i=cs(e),s=i.Yi.get(n);return void 0!==s?qs.resolve(i.Ji.get(s)):i.kr.getTargetData(t,n)}(i,e,fa(t)).next((t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,i.kr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{r=e}))})).next((()=>i.Hi.getDocumentsMatchingQuery(e,t,n?s:Es.min(),n?r:La()))).next((e=>(Nh(i,ba(t),e),{documents:e,ss:r})))))}function xh(e,t){const n=cs(e),i=cs(n.kr),s=n.Ji.get(t);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",(e=>i.ut(e,t).next((e=>e?e.target:null))))}function Ah(e,t){const n=cs(e),i=n.Zi.get(t)||Es.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.Xi.getAllFromCollectionGroup(e,t,Ms(i,-1),Number.MAX_SAFE_INTEGER))).then((e=>(Nh(n,t,e),e)))}function Nh(e,t,n){let i=e.Zi.get(t)||Es.min();n.forEach(((e,t)=>{t.readTime.compareTo(i)>0&&(i=t.readTime)})),e.Zi.set(t,i)}async function Oh(e,t,n,i){const s=cs(e);let r=La(),o=Ea();for(const l of n){const e=t.os(l.metadata.name);l.document&&(r=r.add(e));const n=t._s(l);n.setReadTime(t.us(l.metadata.readTime)),o=o.insert(e,n)}const a=s.Xi.newChangeBuffer({trackRemovals:!0}),c=await Th(s,function(e){return fa(ca(xs.fromString(`__bundle__/docs/${e}`)))}(i));return s.persistence.runTransaction("Apply bundle documents","readwrite",(e=>Ch(e,a,o).next((t=>(a.apply(e),t))).next((t=>s.kr.removeMatchingKeysForTargetId(e,c.targetId).next((()=>s.kr.addMatchingKeys(e,r,c.targetId))).next((()=>s.localDocuments.getLocalViewOfDocuments(e,t.ns,t.rs))).next((()=>t.ns))))))}async function Dh(e,t,n=La()){const i=await Th(e,fa(Ll(t.bundledQuery))),s=cs(e);return s.persistence.runTransaction("Save named query","readwrite",(e=>{const r=Qc(t.readTime);if(i.snapshotVersion.compareTo(r)>=0)return s.Qr.saveNamedQuery(e,t);const o=i.withResumeToken(Zr.EMPTY_BYTE_STRING,r);return s.Ji=s.Ji.insert(o.targetId,o),s.kr.updateTargetData(e,o).next((()=>s.kr.removeMatchingKeysForTargetId(e,i.targetId))).next((()=>s.kr.addMatchingKeys(e,n,i.targetId))).next((()=>s.Qr.saveNamedQuery(e,t)))}))}function Ph(e,t){return`firestore_clients_${e}_${t}`}function Rh(e,t,n){let i=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function Lh(e,t){return`firestore_targets_${e}_${t}`}class $h{constructor(e,t,n,i){this.user=e,this.batchId=t,this.state=n,this.error=i}static cs(e,t,n){const i=JSON.parse(n);let s,r="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return r&&i.error&&(r="string"==typeof i.error.message&&"string"==typeof i.error.code,r&&(s=new us(i.error.code,i.error.message))),r?new $h(e,t,i.state,s):(ns("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}ls(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Mh{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static cs(e,t){const n=JSON.parse(t);let i,s="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return s&&n.error&&(s="string"==typeof n.error.message&&"string"==typeof n.error.code,s&&(i=new us(n.error.code,n.error.message))),s?new Mh(e,n.state,i):(ns("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ls(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Fh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static cs(e,t){const n=JSON.parse(t);let i="object"==typeof n&&n.activeTargetIds instanceof Array,s=Ma();for(let r=0;i&&r<n.activeTargetIds.length;++r)i=rr(n.activeTargetIds[r]),s=s.add(n.activeTargetIds[r]);return i?new Fh(e,s):(ns("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Vh{constructor(e,t){this.clientId=e,this.onlineState=t}static cs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Vh(t.clientId,t.onlineState):(ns("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Bh{constructor(){this.activeTargetIds=Ma()}hs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ps(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ls(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Uh{constructor(e,t,n,i,s){this.window=e,this.ii=t,this.persistenceKey=n,this.Is=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ts=this.Es.bind(this),this.ds=new Fr(Is),this.started=!1,this.As=[];const r=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Rs=Ph(this.persistenceKey,this.Is),this.Vs=function(e){return`firestore_sequence_number_${e}`}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.persistenceKey),this.ds=this.ds.insert(this.Is,new Bh),this.fs=new RegExp(`^firestore_clients_${r}_([^_]*)$`),this.gs=new RegExp(`^firestore_mutations_${r}_(\\d+)(?:_(.*))?$`),this.ps=new RegExp(`^firestore_targets_${r}_(\\d+)$`),this.ys=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this.ws=function(e){return`firestore_bundle_loaded_v2_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.Ts)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ni();for(const n of e){if(n===this.Is)continue;const e=this.getItem(Ph(this.persistenceKey,n));if(e){const t=Fh.cs(n,e);t&&(this.ds=this.ds.insert(t.clientId,t))}}this.Ss();const t=this.storage.getItem(this.ys);if(t){const e=this.bs(t);e&&this.Ds(e)}for(const n of this.As)this.Es(n);this.As=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.vs(this.ds)}isActiveQueryTarget(e){let t=!1;return this.ds.forEach(((n,i)=>{i.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Cs(e,"pending")}updateMutationState(e,t,n){this.Cs(e,t,n),this.Fs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(Lh(this.persistenceKey,e));if(n){const i=Mh.cs(e,n);i&&(t=i.state)}}return this.Ms.hs(e),this.Ss(),t}removeLocalQueryTarget(e){this.Ms.Ps(e),this.Ss()}isLocalQueryTarget(e){return this.Ms.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Lh(this.persistenceKey,e))}updateQueryState(e,t,n){this.xs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Fs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Os(e)}notifyBundleLoaded(e){this.Ns(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Ts),this.removeItem(this.Rs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ts("SharedClientState","READ",e,t),t}setItem(e,t){ts("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ts("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Es(e){const t=e;if(t.storageArea===this.storage){if(ts("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Rs)return void ns("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.fs.test(t.key)){if(null==t.newValue){const e=this.Bs(t.key);return this.Ls(e,null)}{const e=this.ks(t.key,t.newValue);if(e)return this.Ls(e.clientId,e)}}else if(this.gs.test(t.key)){if(null!==t.newValue){const e=this.qs(t.key,t.newValue);if(e)return this.Qs(e)}}else if(this.ps.test(t.key)){if(null!==t.newValue){const e=this.Ks(t.key,t.newValue);if(e)return this.$s(e)}}else if(t.key===this.ys){if(null!==t.newValue){const e=this.bs(t.newValue);if(e)return this.Ds(e)}}else if(t.key===this.Vs){const e=function(e){let t=nr.ae;if(null!=e)try{const n=JSON.parse(e);os("number"==typeof n),t=n}catch(e){ns("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==nr.ae&&this.sequenceNumberHandler(e)}else if(t.key===this.ws){const e=this.Us(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ws(e))))}}else this.As.push(t)}))}}get Ms(){return this.ds.get(this.Is)}Ss(){this.setItem(this.Rs,this.Ms.ls())}Cs(e,t,n){const i=new $h(this.currentUser,e,t,n),s=Rh(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ls())}Fs(e){const t=Rh(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Os(e){const t={clientId:this.Is,onlineState:e};this.storage.setItem(this.ys,JSON.stringify(t))}xs(e,t,n){const i=Lh(this.persistenceKey,e),s=new Mh(e,t,n);this.setItem(i,s.ls())}Ns(e){const t=JSON.stringify(Array.from(e));this.setItem(this.ws,t)}Bs(e){const t=this.fs.exec(e);return t?t[1]:null}ks(e,t){const n=this.Bs(e);return Fh.cs(n,t)}qs(e,t){const n=this.gs.exec(e),i=Number(n[1]),s=void 0!==n[2]?n[2]:null;return $h.cs(new Qi(s),i,t)}Ks(e,t){const n=this.ps.exec(e),i=Number(n[1]);return Mh.cs(i,t)}bs(e){return Vh.cs(e)}Us(e){return JSON.parse(e)}async Qs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Gs(e.batchId,e.state,e.error);ts("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}$s(e){return this.syncEngine.zs(e.targetId,e.state,e.error)}Ls(e,t){const n=t?this.ds.insert(e,t):this.ds.remove(e),i=this.vs(this.ds),s=this.vs(n),r=[],o=[];return s.forEach((e=>{i.has(e)||r.push(e)})),i.forEach((e=>{s.has(e)||o.push(e)})),this.syncEngine.js(r,o).then((()=>{this.ds=n}))}Ds(e){this.ds.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}vs(e){let t=Ma();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class jh{constructor(){this.Hs=new Bh,this.Js={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hs.hs(e),this.Js[e]||"not-current"}updateQueryState(e,t,n){this.Js[e]=t}removeLocalQueryTarget(e){this.Hs.Ps(e)}isLocalQueryTarget(e){return this.Hs.activeTargetIds.has(e)}clearQueryState(e){delete this.Js[e]}getAllActiveQueryTargets(){return this.Hs.activeTargetIds}isActiveQueryTarget(e){return this.Hs.activeTargetIds.has(e)}start(){return this.Hs=new Bh,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{Ys(e){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(){this.Zs=()=>this.Xs(),this.eo=()=>this.no(),this.ro=[],this.io()}Ys(e){this.ro.push(e)}shutdown(){window.removeEventListener("online",this.Zs),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Zs),window.addEventListener("offline",this.eo)}Xs(){ts("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ro)e(0)}no(){ts("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ro)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hh=null;function Wh(){return null===Hh?Hh=function(){return 268435456+Math.round(2147483648*Math.random())}():Hh++,"0x"+Hh.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const Zh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e){this.so=e.so,this.oo=e.oo}_o(e){this.ao=e}uo(e){this.co=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.so(e)}ho(){this.ao()}Po(e){this.co(e)}Io(e){this.lo(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gh="WebChannelConnection";class Qh extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.To=t+"://"+e.host,this.Eo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get Ao(){return!1}Ro(e,t,n,i,s){const r=Wh(),o=this.Vo(e,t);ts("RestConnection",`Sending RPC '${e}' ${r}:`,o,n);const a={};return this.mo(a,i,s),this.fo(e,o,a,n).then((t=>(ts("RestConnection",`Received RPC '${e}' ${r}: `,t),t)),(t=>{throw is("RestConnection",`RPC '${e}' ${r} failed with error: `,t,"url: ",o,"request:",n),t}))}po(e,t,n,i,s,r){return this.Ro(e,t,n,i,s)}mo(e,t,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Yi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}Vo(e,t){const n=Zh[e];return`${this.To}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}fo(e,t,n,i){const s=Wh();return new Promise(((r,o)=>{const a=new Wi;a.setWithCredentials(!0),a.listenOnce(Ui.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Bi.NO_ERROR:const t=a.getResponseJson();ts(Gh,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(t)),r(t);break;case Bi.TIMEOUT:ts(Gh,`RPC '${e}' ${s} timed out`),o(new us(ls.DEADLINE_EXCEEDED,"Request time out"));break;case Bi.HTTP_ERROR:const n=a.getStatus();if(ts(Gh,`RPC '${e}' ${s} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(ls).indexOf(t)>=0?t:ls.UNKNOWN}(t.status);o(new us(e,t.message))}else o(new us(ls.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new us(ls.UNAVAILABLE,"Connection failed."));break;default:rs()}}finally{ts(Gh,`RPC '${e}' ${s} completed.`)}}));const c=JSON.stringify(i);ts(Gh,`RPC '${e}' ${s} sending request:`,i),a.send(t,"POST",c,n,15)}))}yo(e,t,n){const i=Wh(),s=[this.To,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=Fi(),o=Vi(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.xmlHttpFactory=new qi({})),this.mo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const l=s.join("");ts(Gh,`Creating RPC '${e}' stream ${i}: ${l}`,a);const u=r.createWebChannel(l,a);let h=!1,d=!1;const p=new Kh({so:t=>{d?ts(Gh,`Not sending because RPC '${e}' stream ${i} is closed:`,t):(h||(ts(Gh,`Opening RPC '${e}' stream ${i} transport.`),u.open(),h=!0),ts(Gh,`RPC '${e}' stream ${i} sending:`,t),u.send(t))},oo:()=>u.close()}),f=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return f(u,Hi.EventType.OPEN,(()=>{d||ts(Gh,`RPC '${e}' stream ${i} transport opened.`)})),f(u,Hi.EventType.CLOSE,(()=>{d||(d=!0,ts(Gh,`RPC '${e}' stream ${i} transport closed`),p.Po())})),f(u,Hi.EventType.ERROR,(t=>{d||(d=!0,is(Gh,`RPC '${e}' stream ${i} transport errored:`,t),p.Po(new us(ls.UNAVAILABLE,"The operation could not be completed")))})),f(u,Hi.EventType.MESSAGE,(t=>{var n;if(!d){const s=t.data[0];os(!!s);const r=s,o=r.error||(null===(n=r[0])||void 0===n?void 0:n.error);if(o){ts(Gh,`RPC '${e}' stream ${i} received error:`,o);const t=o.status;let n=function(e){const t=bc[e];if(void 0!==t)return Sc(t)}(t),s=o.message;void 0===n&&(n=ls.INTERNAL,s="Unknown error status: "+t+" with message "+o.message),d=!0,p.Po(new us(n,s)),u.close()}else ts(Gh,`RPC '${e}' stream ${i} received:`,s),p.Io(s)}})),f(o,ji.STAT_EVENT,(t=>{t.stat===zi.PROXY?ts(Gh,`RPC '${e}' stream ${i} detected buffering proxy`):t.stat===zi.NOPROXY&&ts(Gh,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{p.ho()}),0),p}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(){return"undefined"!=typeof window?window:null}function Xh(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jh(e){return new Hc(e,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e,t,n=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=t,this.wo=n,this.So=i,this.bo=s,this.Do=0,this.vo=null,this.Co=Date.now(),this.reset()}reset(){this.Do=0}Fo(){this.Do=this.bo}Mo(e){this.cancel();const t=Math.floor(this.Do+this.xo()),n=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-n);i>0&&ts("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Do} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.vo=this.ii.enqueueAfterDelay(this.timerId,i,(()=>(this.Co=Date.now(),e()))),this.Do*=this.So,this.Do<this.wo&&(this.Do=this.wo),this.Do>this.bo&&(this.Do=this.bo)}Oo(){null!==this.vo&&(this.vo.skipDelay(),this.vo=null)}cancel(){null!==this.vo&&(this.vo.cancel(),this.vo=null)}xo(){return(Math.random()-.5)*this.Do}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e,t,n,i,s,r,o,a){this.ii=e,this.No=n,this.Bo=i,this.connection=s,this.authCredentialsProvider=r,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Lo=0,this.ko=null,this.qo=null,this.stream=null,this.Qo=new ed(e,t)}Ko(){return 1===this.state||5===this.state||this.$o()}$o(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Uo()}async stop(){this.Ko()&&await this.close(0)}Wo(){this.state=0,this.Qo.reset()}Go(){this.$o()&&null===this.ko&&(this.ko=this.ii.enqueueAfterDelay(this.No,6e4,(()=>this.zo())))}jo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.$o())return this.close(0)}Ho(){this.ko&&(this.ko.cancel(),this.ko=null)}Jo(){this.qo&&(this.qo.cancel(),this.qo=null)}async close(e,t){this.Ho(),this.Jo(),this.Qo.cancel(),this.Lo++,4!==e?this.Qo.reset():t&&t.code===ls.RESOURCE_EXHAUSTED?(ns(t.toString()),ns("Using maximum backoff delay to prevent overloading the backend."),this.Qo.Fo()):t&&t.code===ls.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.uo(t)}Yo(){}auth(){this.state=1;const e=this.Zo(this.Lo),t=this.Lo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.Lo===t&&this.Xo(e,n)}),(t=>{e((()=>{const e=new us(ls.UNKNOWN,"Fetching auth token failed: "+t.message);return this.e_(e)}))}))}Xo(e,t){const n=this.Zo(this.Lo);this.stream=this.t_(e,t),this.stream._o((()=>{n((()=>(this.state=2,this.qo=this.ii.enqueueAfterDelay(this.Bo,1e4,(()=>(this.$o()&&(this.state=3),Promise.resolve()))),this.listener._o())))})),this.stream.uo((e=>{n((()=>this.e_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Uo(){this.state=5,this.Qo.Mo((async()=>{this.state=0,this.start()}))}e_(e){return ts("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Zo(e){return t=>{this.ii.enqueueAndForget((()=>this.Lo===e?t():(ts("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class nd extends td{constructor(e,t,n,i,s,r){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,r),this.serializer=s}t_(e,t){return this.connection.yo("Listen",e,t)}onMessage(e){this.Qo.reset();const t=cl(this.serializer,e),n=function(e){if(!("targetChange"in e))return Es.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Es.min():t.readTime?Qc(t.readTime):Es.min()}(e);return this.listener.n_(t,n)}r_(e){const t={};t.database=il(this.serializer),t.addTarget=function(e,t){let n;const i=t.target;if(n=na(i)?{documents:dl(e,i)}:{query:pl(e,i)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Kc(e,t.resumeToken);const i=Wc(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(Es.min())>0){n.readTime=Zc(e,t.snapshotVersion.toTimestamp());const i=Wc(e,t.expectedCount);null!==i&&(n.expectedCount=i)}return n}(this.serializer,e);const n=ml(this.serializer,e);n&&(t.labels=n),this.jo(t)}i_(e){const t={};t.database=il(this.serializer),t.removeTarget=e,this.jo(t)}}class id extends td{constructor(e,t,n,i,s,r){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,r),this.serializer=s,this.s_=!1}get o_(){return this.s_}start(){this.s_=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.s_&&this.__([])}t_(e,t){return this.connection.yo("Write",e,t)}onMessage(e){if(os(!!e.streamToken),this.lastStreamToken=e.streamToken,this.s_){this.Qo.reset();const t=hl(e.writeResults,e.commitTime),n=Qc(e.commitTime);return this.listener.a_(n,t)}return os(!e.writeResults||0===e.writeResults.length),this.s_=!0,this.listener.u_()}c_(){const e={};e.database=il(this.serializer),this.jo(e)}__(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>ll(this.serializer,e)))};this.jo(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd extends class{}{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.l_=!1}h_(){if(this.l_)throw new us(ls.FAILED_PRECONDITION,"The client has already been terminated.")}Ro(e,t,n){return this.h_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,s])=>this.connection.Ro(e,t,n,i,s))).catch((e=>{throw"FirebaseError"===e.name?(e.code===ls.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new us(ls.UNKNOWN,e.toString())}))}po(e,t,n,i){return this.h_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,r])=>this.connection.po(e,t,n,s,r,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===ls.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new us(ls.UNKNOWN,e.toString())}))}terminate(){this.l_=!0}}class rd{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.I_=0,this.T_=null,this.E_=!0}d_(){0===this.I_&&(this.A_("Unknown"),this.T_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.T_=null,this.R_("Backend didn't respond within 10 seconds."),this.A_("Offline"),Promise.resolve()))))}V_(e){"Online"===this.state?this.A_("Unknown"):(this.I_++,this.I_>=1&&(this.m_(),this.R_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.A_("Offline")))}set(e){this.m_(),this.I_=0,"Online"===e&&(this.E_=!1),this.A_(e)}A_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}R_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.E_?(ns(t),this.E_=!1):ts("OnlineStateTracker",t)}m_(){null!==this.T_&&(this.T_.cancel(),this.T_=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,t,n,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.f_=[],this.g_=new Map,this.p_=new Set,this.y_=[],this.w_=s,this.w_.Ys((e=>{n.enqueueAndForget((async()=>{md(this)&&(ts("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=cs(e);t.p_.add(4),await cd(t),t.S_.set("Unknown"),t.p_.delete(4),await ad(t)}(this))}))})),this.S_=new rd(n,i)}}async function ad(e){if(md(e))for(const t of e.y_)await t(!0)}async function cd(e){for(const t of e.y_)await t(!1)}function ld(e,t){const n=cs(e);n.g_.has(t.targetId)||(n.g_.set(t.targetId,t),fd(n)?pd(n):Pd(n).$o()&&hd(n,t))}function ud(e,t){const n=cs(e),i=Pd(n);n.g_.delete(t),i.$o()&&dd(n,t),0===n.g_.size&&(i.$o()?i.Go():md(n)&&n.S_.set("Unknown"))}function hd(e,t){if(e.b_.Be(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Es.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Pd(e).r_(t)}function dd(e,t){e.b_.Be(t),Pd(e).i_(t)}function pd(e){e.b_=new Vc({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ut:t=>e.g_.get(t)||null,rt:()=>e.datastore.serializer.databaseId}),Pd(e).start(),e.S_.d_()}function fd(e){return md(e)&&!Pd(e).Ko()&&e.g_.size>0}function md(e){return 0===cs(e).p_.size}function gd(e){e.b_=void 0}async function vd(e){e.g_.forEach(((t,n)=>{hd(e,t)}))}async function yd(e,t){gd(e),fd(e)?(e.S_.V_(t),pd(e)):e.S_.set("Unknown")}async function _d(e,t,n){if(e.S_.set("Online"),t instanceof Mc&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const i of t.targetIds)e.g_.has(i)&&(await e.remoteSyncer.rejectListen(i,n),e.g_.delete(i),e.b_.removeTarget(i))}(e,t)}catch(n){ts("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await wd(e,n)}else if(t instanceof Lc?e.b_.We(t):t instanceof $c?e.b_.Ze(t):e.b_.je(t),!n.isEqual(Es.min()))try{const t=await bh(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.b_.st(t);return n.targetChanges.forEach(((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.g_.get(i);s&&e.g_.set(i,s.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const i=e.g_.get(t);if(!i)return;e.g_.set(t,i.withResumeToken(Zr.EMPTY_BYTE_STRING,i.snapshotVersion)),dd(e,t);const s=new Tl(i.target,t,n,i.sequenceNumber);hd(e,s)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){ts("RemoteStore","Failed to raise snapshot:",t),await wd(e,t)}}async function wd(e,t,n){if(!Gs(t))throw t;e.p_.add(1),await cd(e),e.S_.set("Offline"),n||(n=()=>bh(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{ts("RemoteStore","Retrying IndexedDB access"),await n(),e.p_.delete(1),await ad(e)}))}function bd(e,t){return t().catch((n=>wd(e,n,t)))}async function Id(e){const t=cs(e),n=Rd(t);let i=t.f_.length>0?t.f_[t.f_.length-1].batchId:-1;for(;Cd(t);)try{const e=await Sh(t.localStore,i);if(null===e){0===t.f_.length&&n.Go();break}i=e.batchId,Sd(t,e)}catch(e){await wd(t,e)}Td(t)&&Ed(t)}function Cd(e){return md(e)&&e.f_.length<10}function Sd(e,t){e.f_.push(t);const n=Rd(e);n.$o()&&n.o_&&n.__(t.mutations)}function Td(e){return md(e)&&!Rd(e).Ko()&&e.f_.length>0}function Ed(e){Rd(e).start()}async function kd(e){Rd(e).c_()}async function xd(e){const t=Rd(e);for(const n of e.f_)t.__(n.mutations)}async function Ad(e,t,n){const i=e.f_.shift(),s=yc.from(i,t,n);await bd(e,(()=>e.remoteSyncer.applySuccessfulWrite(s))),await Id(e)}async function Nd(e,t){t&&Rd(e).o_&&await async function(e,t){if(function(e){return Cc(e)&&e!==ls.ABORTED}(t.code)){const n=e.f_.shift();Rd(e).Wo(),await bd(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Id(e)}}(e,t),Td(e)&&Ed(e)}async function Od(e,t){const n=cs(e);n.asyncQueue.verifyOperationInProgress(),ts("RemoteStore","RemoteStore received new credentials");const i=md(n);n.p_.add(3),await cd(n),i&&n.S_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.p_.delete(3),await ad(n)}async function Dd(e,t){const n=cs(e);t?(n.p_.delete(2),await ad(n)):t||(n.p_.add(2),await cd(n),n.S_.set("Unknown"))}function Pd(e){return e.D_||(e.D_=function(e,t,n){const i=cs(e);return i.h_(),new nd(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}(e.datastore,e.asyncQueue,{_o:vd.bind(null,e),uo:yd.bind(null,e),n_:_d.bind(null,e)}),e.y_.push((async t=>{t?(e.D_.Wo(),fd(e)?pd(e):e.S_.set("Unknown")):(await e.D_.stop(),gd(e))}))),e.D_}function Rd(e){return e.v_||(e.v_=function(e,t,n){const i=cs(e);return i.h_(),new id(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(e.datastore,e.asyncQueue,{_o:kd.bind(null,e),uo:Nd.bind(null,e),u_:xd.bind(null,e),a_:Ad.bind(null,e)}),e.y_.push((async t=>{t?(e.v_.Wo(),await Id(e)):(await e.v_.stop(),e.f_.length>0&&(ts("RemoteStore",`Stopping write stream with ${e.f_.length} pending writes`),e.f_=[]))}))),e.v_
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Ld{constructor(e,t,n,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new hs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}static createAndSchedule(e,t,n,i,s){const r=Date.now()+n,o=new Ld(e,t,r,i,s);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new us(ls.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $d(e,t){if(ns("AsyncQueue",`${t}: ${e}`),Gs(e))return new us(ls.UNAVAILABLE,`${t}: ${e}`);throw e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Os.comparator(t.key,n.key):(e,t)=>Os.comparator(e.key,t.key),this.keyedMap=xa(),this.sortedSet=new Fr(this.comparator)}static emptySet(e){return new Md(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Md))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(!e.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Md;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(){this.C_=new Fr(Os.comparator)}track(e){const t=e.doc.key,n=this.C_.get(t);n?0!==e.type&&3===n.type?this.C_=this.C_.insert(t,e):3===e.type&&1!==n.type?this.C_=this.C_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.C_=this.C_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.C_=this.C_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.C_=this.C_.remove(t):1===e.type&&2===n.type?this.C_=this.C_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.C_=this.C_.insert(t,{type:2,doc:e.doc}):rs():this.C_=this.C_.insert(t,e)}F_(){const e=[];return this.C_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class Vd{constructor(e,t,n,i,s,r,o,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=r,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,i,s){const r=[];return t.forEach((e=>{r.push({type:0,doc:e})})),new Vd(e,t,Md.emptySet(t),r,n,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&va(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(){this.M_=void 0,this.listeners=[]}}class Ud{constructor(){this.queries=new Sa((e=>ya(e)),va),this.onlineState="Unknown",this.x_=new Set}}async function jd(e,t){const n=cs(e),i=t.query;let s=!1,r=n.queries.get(i);if(r||(s=!0,r=new Bd),s)try{r.M_=await n.onListen(i)}catch(e){const n=$d(e,`Initialization of query '${_a(t.query)}' failed`);return void t.onError(n)}n.queries.set(i,r),r.listeners.push(t),t.O_(n.onlineState),r.M_&&t.N_(r.M_)&&Wd(n)}async function zd(e,t){const n=cs(e),i=t.query;let s=!1;const r=n.queries.get(i);if(r){const e=r.listeners.indexOf(t);e>=0&&(r.listeners.splice(e,1),s=0===r.listeners.length)}if(s)return n.queries.delete(i),n.onUnlisten(i)}function qd(e,t){const n=cs(e);let i=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.N_(s)&&(i=!0);t.M_=s}}i&&Wd(n)}function Hd(e,t,n){const i=cs(e),s=i.queries.get(t);if(s)for(const r of s.listeners)r.onError(n);i.queries.delete(t)}function Wd(e){e.x_.forEach((e=>{e.next()}))}class Zd{constructor(e,t,n){this.query=e,this.B_=t,this.L_=!1,this.k_=null,this.onlineState="Unknown",this.options=n||{}}N_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Vd(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.L_?this.q_(e)&&(this.B_.next(e),t=!0):this.Q_(e,this.onlineState)&&(this.K_(e),t=!0),this.k_=e,t}onError(e){this.B_.error(e)}O_(e){this.onlineState=e;let t=!1;return this.k_&&!this.L_&&this.Q_(this.k_,e)&&(this.K_(this.k_),t=!0),t}Q_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.U_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}q_(e){if(e.docChanges.length>0)return!0;const t=this.k_&&this.k_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}K_(e){e=Vd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.L_=!0,this.B_.next(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,t){this.W_=e,this.byteLength=t}G_(){return"metadata"in this.W_}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gd{constructor(e){this.serializer=e}os(e){return el(this.serializer,e)}_s(e){return e.metadata.exists?ol(this.serializer,e.document,!1):ko.newNoDocument(this.os(e.metadata.name),this.us(e.metadata.readTime))}us(e){return Qc(e)}}class Qd{constructor(e,t,n){this.z_=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Yd(e)}j_(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.W_.namedQuery)this.queries.push(e.W_.namedQuery);else if(e.W_.documentMetadata){this.documents.push({metadata:e.W_.documentMetadata}),e.W_.documentMetadata.exists||++t;const n=xs.fromString(e.W_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.W_.document&&(this.documents[this.documents.length-1].document=e.W_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}H_(e){const t=new Map,n=new Gd(this.serializer);for(const i of e)if(i.metadata.queries){const e=n.os(i.metadata.name);for(const n of i.metadata.queries){const i=(t.get(n)||La()).add(e);t.set(n,i)}}return t}async complete(){const e=await Oh(this.localStore,new Gd(this.serializer),this.documents,this.z_.id),t=this.H_(this.documents);for(const n of this.queries)await Dh(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,J_:this.collectionGroups,Y_:e}}}function Yd(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(e){this.key=e}}class Jd{constructor(e){this.key=e}}class ep{constructor(e,t){this.query=e,this.Z_=t,this.X_=null,this.hasCachedResults=!1,this.current=!1,this.ea=La(),this.mutatedKeys=La(),this.ta=Ia(e),this.na=new Md(this.ta)}get ra(){return this.Z_}ia(e,t){const n=t?t.sa:new Fd,i=t?t.na:this.na;let s=t?t.mutatedKeys:this.mutatedKeys,r=i,o=!1;const a="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((e,t)=>{const l=i.get(e),u=wa(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let p=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),p=!0):this.oa(l,u)||(n.track({type:2,doc:u}),p=!0,(a&&this.ta(u,a)>0||c&&this.ta(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),p=!0):l&&!u&&(n.track({type:1,doc:l}),p=!0,(a||c)&&(o=!0)),p&&(u?(r=r.add(u),s=d?s.add(e):s.delete(e)):(r=r.delete(e),s=s.delete(e)))})),null!==this.query.limit)for(;r.size>this.query.limit;){const e="F"===this.query.limitType?r.last():r.first();r=r.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{na:r,sa:n,zi:o,mutatedKeys:s}}oa(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const i=this.na;this.na=e.na,this.mutatedKeys=e.mutatedKeys;const s=e.sa.F_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rs()}};return n(e)-n(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e.type,t.type)||this.ta(e.doc,t.doc))),this._a(n);const r=t?this.aa():[],o=0===this.ea.size&&this.current?1:0,a=o!==this.X_;return this.X_=o,0!==s.length||a?{snapshot:new Vd(this.query,e.na,i,s,e.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),ua:r}:{ua:r}}O_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({na:this.na,sa:new Fd,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{ua:[]}}ca(e){return!this.Z_.has(e)&&!!this.na.has(e)&&!this.na.get(e).hasLocalMutations}_a(e){e&&(e.addedDocuments.forEach((e=>this.Z_=this.Z_.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.Z_=this.Z_.delete(e))),this.current=e.current)}aa(){if(!this.current)return[];const e=this.ea;this.ea=La(),this.na.forEach((e=>{this.ca(e.key)&&(this.ea=this.ea.add(e.key))}));const t=[];return e.forEach((e=>{this.ea.has(e)||t.push(new Jd(e))})),this.ea.forEach((n=>{e.has(n)||t.push(new Xd(n))})),t}la(e){this.Z_=e.ss,this.ea=La();const t=this.ia(e.documents);return this.applyChanges(t,!0)}ha(){return Vd.fromInitialDocuments(this.query,this.na,this.mutatedKeys,0===this.X_,this.hasCachedResults)}}class tp{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class np{constructor(e){this.key=e,this.Pa=!1}}class ip{constructor(e,t,n,i,s,r){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=r,this.Ia={},this.Ta=new Sa((e=>ya(e)),va),this.Ea=new Map,this.da=new Set,this.Aa=new Fr(Os.comparator),this.Ra=new Map,this.Va=new Ju,this.ma={},this.fa=new Map,this.ga=xu.On(),this.onlineState="Unknown",this.pa=void 0}get isPrimaryClient(){return!0===this.pa}}async function sp(e,t){const n=Pp(e);let i,s;const r=n.Ta.get(t);if(r)i=r.targetId,n.sharedClientState.addLocalQueryTarget(i),s=r.view.ha();else{const e=await Th(n.localStore,fa(t)),r=n.sharedClientState.addLocalQueryTarget(e.targetId);i=e.targetId,s=await rp(n,t,i,"current"===r,e.resumeToken),n.isPrimaryClient&&ld(n.remoteStore,e)}return s}async function rp(e,t,n,i,s){e.ya=(t,n,i)=>async function(e,t,n,i){let s=t.view.ia(n);s.zi&&(s=await kh(e.localStore,t.query,!1).then((({documents:e})=>t.view.ia(e,s))));const r=i&&i.targetChanges.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,r);return yp(e,t.targetId,o.ua),o.snapshot}(e,t,n,i);const r=await kh(e.localStore,t,!0),o=new ep(t,r.ss),a=o.ia(r.documents),c=Rc.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==e.onlineState,s),l=o.applyChanges(a,e.isPrimaryClient,c);yp(e,n,l.ua);const u=new tp(t,n,o);return e.Ta.set(t,u),e.Ea.has(n)?e.Ea.get(n).push(t):e.Ea.set(n,[t]),l.snapshot}async function op(e,t){const n=cs(e),i=n.Ta.get(t),s=n.Ea.get(i.targetId);if(s.length>1)return n.Ea.set(i.targetId,s.filter((e=>!va(e,t)))),void n.Ta.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Eh(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),ud(n.remoteStore,i.targetId),gp(n,i.targetId)})).catch(zs)):(gp(n,i.targetId),await Eh(n.localStore,i.targetId,!0))}async function ap(e,t,n){const i=Rp(e);try{const e=await function(e,t){const n=cs(e),i=Ts.now(),s=t.reduce(((e,t)=>e.add(t.key)),La());let r,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Ea(),c=La();return n.Xi.getEntries(e,s).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(c=c.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((s=>{r=s;const o=[];for(const e of t){const t=cc(e,r.get(e.key).overlayedDocument);null!=t&&o.push(new hc(e.key,t,Eo(t.value.mapValue),nc.exists(!0)))}return n.mutationQueue.addMutationBatch(e,i,o,t)})).next((t=>{o=t;const i=t.applyToLocalDocumentSet(r,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,i)}))})).then((()=>({batchId:o.batchId,changes:Aa(r)})))}(i.localStore,t);i.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let i=e.ma[e.currentUser.toKey()];i||(i=new Fr(Is)),i=i.insert(t,n),e.ma[e.currentUser.toKey()]=i}(i,e.batchId,n),await bp(i,e.changes),await Id(i.remoteStore)}catch(e){const t=$d(e,"Failed to persist write");n.reject(t)}}async function cp(e,t){const n=cs(e);try{const e=await Ih(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const i=n.Ra.get(t);i&&(os(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?i.Pa=!0:e.modifiedDocuments.size>0?os(i.Pa):e.removedDocuments.size>0&&(os(i.Pa),i.Pa=!1))})),await bp(n,e,t)}catch(e){await zs(e)}}function lp(e,t,n){const i=cs(e);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const e=[];i.Ta.forEach(((n,i)=>{const s=i.view.O_(t);s.snapshot&&e.push(s.snapshot)})),function(e,t){const n=cs(e);n.onlineState=t;let i=!1;n.queries.forEach(((e,n)=>{for(const s of n.listeners)s.O_(t)&&(i=!0)})),i&&Wd(n)}(i.eventManager,t),e.length&&i.Ia.n_(e),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function up(e,t,n){const i=cs(e);i.sharedClientState.updateQueryState(t,"rejected",n);const s=i.Ra.get(t),r=s&&s.key;if(r){let e=new Fr(Os.comparator);e=e.insert(r,ko.newNoDocument(r,Es.min()));const n=La().add(r),s=new Pc(Es.min(),new Map,new Fr(Is),e,n);await cp(i,s),i.Aa=i.Aa.remove(r),i.Ra.delete(t),wp(i)}else await Eh(i.localStore,t,!1).then((()=>gp(i,t,n))).catch(zs)}async function hp(e,t){const n=cs(e),i=t.batch.batchId;try{const e=await wh(n.localStore,t);mp(n,i,null),fp(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await bp(n,e)}catch(e){await zs(e)}}async function dp(e,t,n){const i=cs(e);try{const e=await function(e,t){const n=cs(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let i;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(os(null!==t),i=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,i,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,i))).next((()=>n.localDocuments.getDocuments(e,i)))}))}(i.localStore,t);mp(i,t,n),fp(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await bp(i,e)}catch(n){await zs(n)}}async function pp(e,t){const n=cs(e);md(n.remoteStore)||ts("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=cs(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const i=n.fa.get(e)||[];i.push(t),n.fa.set(e,i)}catch(e){const n=$d(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}function fp(e,t){(e.fa.get(t)||[]).forEach((e=>{e.resolve()})),e.fa.delete(t)}function mp(e,t,n){const i=cs(e);let s=i.ma[i.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),i.ma[i.currentUser.toKey()]=s}}function gp(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Ea.get(t))e.Ta.delete(i),n&&e.Ia.wa(i,n);e.Ea.delete(t),e.isPrimaryClient&&e.Va.Ar(t).forEach((t=>{e.Va.containsKey(t)||vp(e,t)}))}function vp(e,t){e.da.delete(t.path.canonicalString());const n=e.Aa.get(t);null!==n&&(ud(e.remoteStore,n),e.Aa=e.Aa.remove(t),e.Ra.delete(n),wp(e))}function yp(e,t,n){for(const i of n)i instanceof Xd?(e.Va.addReference(i.key,t),_p(e,i)):i instanceof Jd?(ts("SyncEngine","Document no longer in limbo: "+i.key),e.Va.removeReference(i.key,t),e.Va.containsKey(i.key)||vp(e,i.key)):rs()}function _p(e,t){const n=t.key,i=n.path.canonicalString();e.Aa.get(n)||e.da.has(i)||(ts("SyncEngine","New document in limbo: "+n),e.da.add(i),wp(e))}function wp(e){for(;e.da.size>0&&e.Aa.size<e.maxConcurrentLimboResolutions;){const t=e.da.values().next().value;e.da.delete(t);const n=new Os(xs.fromString(t)),i=e.ga.next();e.Ra.set(i,new np(n)),e.Aa=e.Aa.insert(n,i),ld(e.remoteStore,new Tl(fa(ca(n.path)),i,"TargetPurposeLimboResolution",nr.ae))}}async function bp(e,t,n){const i=cs(e),s=[],r=[],o=[];i.Ta.isEmpty()||(i.Ta.forEach(((e,a)=>{o.push(i.ya(a,t,n).then((e=>{if((e||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){s.push(e);const t=mh.qi(a.targetId,e);r.push(t)}})))})),await Promise.all(o),i.Ia.n_(s),await async function(e,t){const n=cs(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>qs.forEach(t,(t=>qs.forEach(t.Li,(i=>n.persistence.referenceDelegate.addReference(e,t.targetId,i))).next((()=>qs.forEach(t.ki,(i=>n.persistence.referenceDelegate.removeReference(e,t.targetId,i)))))))))}catch(e){if(!Gs(e))throw e;ts("LocalStore","Failed to update sequence numbers: "+e)}for(const i of t){const e=i.targetId;if(!i.fromCache){const t=n.Ji.get(e),i=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(i);n.Ji=n.Ji.insert(e,s)}}}(i.localStore,r))}async function Ip(e,t){const n=cs(e);if(!n.currentUser.isEqual(t)){ts("SyncEngine","User change. New user:",t.toKey());const e=await _h(n.localStore,t);n.currentUser=t,function(e,t){e.fa.forEach((e=>{e.forEach((e=>{e.reject(new us(ls.CANCELLED,t))}))})),e.fa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await bp(n,e.ts)}}function Cp(e,t){const n=cs(e),i=n.Ra.get(t);if(i&&i.Pa)return La().add(i.key);{let e=La();const i=n.Ea.get(t);if(!i)return e;for(const t of i){const i=n.Ta.get(t);e=e.unionWith(i.view.ra)}return e}}async function Sp(e,t){const n=cs(e),i=await kh(n.localStore,t.query,!0),s=t.view.la(i);return n.isPrimaryClient&&yp(n,t.targetId,s.ua),s}async function Tp(e,t){const n=cs(e);return Ah(n.localStore,t).then((e=>bp(n,e)))}async function Ep(e,t,n,i){const s=cs(e),r=await function(e,t){const n=cs(e),i=cs(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>i.Dn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):qs.resolve(null)))))}(s.localStore,t);null!==r?("pending"===n?await Id(s.remoteStore):"acknowledged"===n||"rejected"===n?(mp(s,t,i||null),fp(s,t),function(e,t){cs(cs(e).mutationQueue).Cn(t)}(s.localStore,t)):rs(),await bp(s,r)):ts("SyncEngine","Cannot apply mutation batch with id: "+t)}async function kp(e,t){const n=cs(e);if(Pp(n),Rp(n),!0===t&&!0!==n.pa){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await xp(n,e.toArray());n.pa=!0,await Dd(n.remoteStore,!0);for(const i of t)ld(n.remoteStore,i)}else if(!1===t&&!1!==n.pa){const e=[];let t=Promise.resolve();n.Ea.forEach(((i,s)=>{n.sharedClientState.isLocalQueryTarget(s)?e.push(s):t=t.then((()=>(gp(n,s),Eh(n.localStore,s,!0)))),ud(n.remoteStore,s)})),await t,await xp(n,e),function(e){const t=cs(e);t.Ra.forEach(((e,n)=>{ud(t.remoteStore,n)})),t.Va.Rr(),t.Ra=new Map,t.Aa=new Fr(Os.comparator)}(n),n.pa=!1,await Dd(n.remoteStore,!1)}}async function xp(e,t,n){const i=cs(e),s=[],r=[];for(const o of t){let e;const t=i.Ea.get(o);if(t&&0!==t.length){e=await Th(i.localStore,fa(t[0]));for(const e of t){const t=i.Ta.get(e),n=await Sp(i,t);n.snapshot&&r.push(n.snapshot)}}else{const t=await xh(i.localStore,o);e=await Th(i.localStore,t),await rp(i,Ap(t),o,!1,e.resumeToken)}s.push(e)}return i.Ia.n_(r),s}function Ap(e){return aa(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Np(e){return function(e){return cs(cs(e).persistence).Ni()}(cs(e).localStore)}async function Op(e,t,n,i){const s=cs(e);if(s.pa)return void ts("SyncEngine","Ignoring unexpected query state notification.");const r=s.Ea.get(t);if(r&&r.length>0)switch(n){case"current":case"not-current":{const e=await Ah(s.localStore,ba(r[0])),i=Pc.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,Zr.EMPTY_BYTE_STRING);await bp(s,e,i);break}case"rejected":await Eh(s.localStore,t,!0),gp(s,t,i);break;default:rs()}}async function Dp(e,t,n){const i=Pp(e);if(i.pa){for(const e of t){if(i.Ea.has(e)){ts("SyncEngine","Adding an already active target "+e);continue}const t=await xh(i.localStore,e),n=await Th(i.localStore,t);await rp(i,Ap(t),n.targetId,!1,n.resumeToken),ld(i.remoteStore,n)}for(const e of n)i.Ea.has(e)&&await Eh(i.localStore,e,!1).then((()=>{ud(i.remoteStore,e),gp(i,e)})).catch(zs)}}function Pp(e){const t=cs(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=cp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Cp.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=up.bind(null,t),t.Ia.n_=qd.bind(null,t.eventManager),t.Ia.wa=Hd.bind(null,t.eventManager),t}function Rp(e){const t=cs(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=hp.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=dp.bind(null,t),t}function Lp(e,t,n){const i=cs(e);(async function(e,t,n){try{const i=await t.getMetadata();if(await function(e,t){const n=cs(e),i=Qc(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.Qr.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(i)>=0))}(e.localStore,i))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),Promise.resolve(new Set);n._updateProgress(Yd(i));const s=new Qd(i,e.localStore,t.serializer);let r=await t.Sa();for(;r;){const e=await s.j_(r);e&&n._updateProgress(e),r=await t.Sa()}const o=await s.complete();return await bp(e,o.Y_,void 0),await function(e,t){const n=cs(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.Qr.saveBundleMetadata(e,t)))}(e.localStore,i),n._completeWith(o.progress),Promise.resolve(o.J_)}catch(e){return is("SyncEngine",`Loading bundle failed with ${e}`),n._failWith(e),Promise.resolve(new Set)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)(i,t,n).then((e=>{i.sharedClientState.notifyBundleLoaded(e)}))}class $p{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Jh(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return yh(this.persistence,new gh,e.initialUser,this.serializer)}createPersistence(e){return new rh(ah.zr,this.serializer)}createSharedClientState(e){return new jh}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Mp extends $p{constructor(e,t,n){super(),this.ba=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ba.initialize(this,e),await Rp(this.ba.syncEngine),await Id(this.ba.remoteStore),await this.persistence.Vi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return yh(this.persistence,new gh,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Lu(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new tr(t,this.persistence);return new er(e.asyncQueue,n)}createPersistence(e){const t=fh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?wu.withCacheSize(this.cacheSizeBytes):wu.DEFAULT;return new hh(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Yh(),Xh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new jh}}class Fp extends Mp{constructor(e,t){super(e,t,!1),this.ba=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.ba.syncEngine;this.sharedClientState instanceof Uh&&(this.sharedClientState.syncEngine={Gs:Ep.bind(null,t),zs:Op.bind(null,t),js:Dp.bind(null,t),Ni:Np.bind(null,t),Ws:Tp.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Vi((async e=>{await kp(this.ba.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=Yh();if(!Uh.v(t))throw new us(ls.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=fh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Uh(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Vp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>lp(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ip.bind(null,this.syncEngine),await Dd(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Ud}()}createDatastore(e){const t=Jh(e.databaseInfo.databaseId),n=function(e){return new Qh(e)}(e.databaseInfo);return function(e,t,n,i){return new sd(e,t,n,i)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,i,s){return new od(e,t,n,i,s)}(this.localStore,this.datastore,e.asyncQueue,(e=>lp(this.syncEngine,e,0)),function(){return qh.v()?new qh:new zh}())}createSyncEngine(e,t){return function(e,t,n,i,s,r,o){const a=new ip(e,t,n,i,s,r);return o&&(a.pa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=cs(e);ts("RemoteStore","RemoteStore shutting down."),t.p_.add(5),await cd(t),t.w_.shutdown(),t.S_.set("Unknown")}(this.remoteStore)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(e,t=10240){let n=0;return{async read(){if(n<e.byteLength){const i={value:e.slice(n,n+t),done:!1};return n+=t,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Da(this.observer.next,e)}error(e){this.observer.error?this.Da(this.observer.error,e):ns("Uncaught Error in snapshot listener:",e.toString())}va(){this.muted=!0}Da(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(e,t){this.Ca=e,this.serializer=t,this.metadata=new hs,this.buffer=new Uint8Array,this.Fa=function(){return new TextDecoder("utf-8")}(),this.Ma().then((e=>{e&&e.G_()?this.metadata.resolve(e.W_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e.W_)}`))}),(e=>this.metadata.reject(e)))}close(){return this.Ca.cancel()}async getMetadata(){return this.metadata.promise}async Sa(){return await this.getMetadata(),this.Ma()}async Ma(){const e=await this.xa();if(null===e)return null;const t=this.Fa.decode(e),n=Number(t);isNaN(n)&&this.Oa(`length string (${t}) is not valid number`);const i=await this.Na(n);return new Kd(JSON.parse(i),e.length+n)}Ba(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async xa(){for(;this.Ba()<0;)if(await this.La())break;if(0===this.buffer.length)return null;const e=this.Ba();e<0&&this.Oa("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Na(e){for(;this.buffer.length<e;)await this.La()&&this.Oa("Reached the end of bundle when more is expected.");const t=this.Fa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Oa(e){throw this.Ca.cancel(),new Error(`Invalid bundle format: ${e}`)}async La(){const e=await this.Ca.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new us(ls.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=cs(e),i=il(n.serializer)+"/documents",s={documents:t.map((e=>Jc(n.serializer,e)))},r=await n.po("BatchGetDocuments",i,s,t.length),o=new Map;r.forEach((e=>{const t=al(n.serializer,e);o.set(t.key.toString(),t)}));const a=[];return t.forEach((e=>{const t=o.get(e.toString());os(!!t),a.push(t)})),a}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new mc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=Os.fromPath(t);this.mutations.push(new gc(n,this.precondition(n)))})),await async function(e,t){const n=cs(e),i=il(n.serializer)+"/documents",s={writes:t.map((e=>ll(n.serializer,e)))};await n.Ro("Commit",i,s)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw rs();t=Es.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new us(ls.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Es.min())?nc.exists(!1):nc.updateTime(t):nc.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Es.min()))throw new us(ls.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return nc.updateTime(t)}return nc.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,t,n,i,s){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=i,this.deferred=s,this.ka=n.maxAttempts,this.Qo=new ed(this.asyncQueue,"transaction_retry")}run(){this.ka-=1,this.qa()}qa(){this.Qo.Mo((async()=>{const e=new zp(this.datastore),t=this.Qa(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Ka(e)}))))})).catch((e=>{this.Ka(e)}))}))}Qa(e){try{const t=this.updateFunction(e);return!ir(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Ka(e){this.ka>0&&this.$a(e)?(this.ka-=1,this.asyncQueue.enqueueAndForget((()=>(this.qa(),Promise.resolve())))):this.deferred.reject(e)}$a(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Cc(t)}return!1}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(e,t,n,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=Qi.UNAUTHENTICATED,this.clientId=bs.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{ts("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(ts("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new us(ls.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=$d(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Wp(e,t){e.asyncQueue.verifyOperationInProgress(),ts("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener((async e=>{i.isEqual(e)||(await _h(t.localStore,e),i=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Zp(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Gp(e);ts("FirestoreClient","Initializing OnlineComponentProvider");const i=await e.getConfiguration();await t.initialize(n,i),e.setCredentialChangeListener((e=>Od(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Od(t.remoteStore,n))),e._onlineComponents=t}function Kp(e){return"FirebaseError"===e.name?e.code===ls.FAILED_PRECONDITION||e.code===ls.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function Gp(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ts("FirestoreClient","Using user provided OfflineComponentProvider");try{await Wp(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!Kp(n))throw n;is("Error using user provided cache. Falling back to memory cache: "+n),await Wp(e,new $p)}}else ts("FirestoreClient","Using default OfflineComponentProvider"),await Wp(e,new $p);return e._offlineComponents}async function Qp(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ts("FirestoreClient","Using user provided OnlineComponentProvider"),await Zp(e,e._uninitializedComponentsProvider._online)):(ts("FirestoreClient","Using default OnlineComponentProvider"),await Zp(e,new Vp))),e._onlineComponents}function Yp(e){return Gp(e).then((e=>e.persistence))}function Xp(e){return Gp(e).then((e=>e.localStore))}function Jp(e){return Qp(e).then((e=>e.remoteStore))}function ef(e){return Qp(e).then((e=>e.syncEngine))}function tf(e){return Qp(e).then((e=>e.datastore))}async function nf(e){const t=await Qp(e),n=t.eventManager;return n.onListen=sp.bind(null,t.syncEngine),n.onUnlisten=op.bind(null,t.syncEngine),n}function sf(e){return e.asyncQueue.enqueue((async()=>{const t=await Yp(e),n=await Jp(e);return t.setNetworkEnabled(!0),function(e){const t=cs(e);return t.p_.delete(0),ad(t)}(n)}))}function rf(e){return e.asyncQueue.enqueue((async()=>{const t=await Yp(e),n=await Jp(e);return t.setNetworkEnabled(!1),async function(e){const t=cs(e);t.p_.add(0),await cd(t),t.S_.set("Offline")}(n)}))}function of(e,t){const n=new hs;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const i=await function(e,t){const n=cs(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);i.isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new us(ls.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const i=$d(e,`Failed to get document '${t} from cache`);n.reject(i)}}(await Xp(e),t,n))),n.promise}function af(e,t,n={}){const i=new hs;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,i,s){const r=new Up({next:r=>{t.enqueueAndForget((()=>zd(e,o)));const a=r.docs.has(n);!a&&r.fromCache?s.reject(new us(ls.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&r.fromCache&&i&&"server"===i.source?s.reject(new us(ls.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(r)},error:e=>s.reject(e)}),o=new Zd(ca(n.path),r,{includeMetadataChanges:!0,U_:!0});return jd(e,o)}(await nf(e),e.asyncQueue,t,n,i))),i.promise}function cf(e,t){const n=new hs;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const i=await kh(e,t,!0),s=new ep(t,i.ss),r=s.ia(i.documents),o=s.applyChanges(r,!1);n.resolve(o.snapshot)}catch(e){const i=$d(e,`Failed to execute query '${t} against cache`);n.reject(i)}}(await Xp(e),t,n))),n.promise}function lf(e,t,n={}){const i=new hs;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,i,s){const r=new Up({next:n=>{t.enqueueAndForget((()=>zd(e,o))),n.fromCache&&"server"===i.source?s.reject(new us(ls.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),o=new Zd(n,r,{includeMetadataChanges:!0,U_:!0});return jd(e,o)}(await nf(e),e.asyncQueue,t,n,i))),i.promise}function uf(e,t){const n=new Up(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){cs(e).x_.add(t),t.next()}(await nf(e),n))),()=>{n.va(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){cs(e).x_.delete(t)}(await nf(e),n)))}}function hf(e,t,n,i){const s=function(e,t){let n;return n="string"==typeof e?kc().encode(e):e,function(e,t){return new jp(e,t)}(function(e,t){if(e instanceof Uint8Array)return Bp(e,t);if(e instanceof ArrayBuffer)return Bp(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Jh(t));e.asyncQueue.enqueueAndForget((async()=>{Lp(await ef(e),s,i)}))}function df(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=cs(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.Qr.getNamedQuery(e,t)))}(await Xp(e),t)))}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function pf(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const ff=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mf(e,t,n){if(!n)throw new us(ls.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function gf(e,t,n,i){if(!0===t&&!0===i)throw new us(ls.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function vf(e){if(!Os.isDocumentKey(e))throw new us(ls.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function yf(e){if(Os.isDocumentKey(e))throw new us(ls.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function _f(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":rs()}function wf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new us(ls.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=_f(e);throw new us(ls.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function bf(e,t){if(t<=0)throw new us(ls.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new us(ls.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new us(ls.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}gf("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pf(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new us(ls.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new us(ls.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new us(ls.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Cf{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new If({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new us(ls.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new us(ls.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new If(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ps;switch(e.type){case"firstParty":return new vs(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new us(ls.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ff.get(e);t&&(ts("ComponentProvider","Removing Datastore"),ff.delete(e),t.terminate())}(this),Promise.resolve()}}function Sf(e,t,n,i={}){var s;const r=(e=wf(e,Cf))._getSettings(),o=`${t}:${n}`;if("firestore.googleapis.com"!==r.host&&r.host!==o&&is("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},r),{host:o,ssl:!1})),i.mockUserToken){let t,n;if("string"==typeof i.mockUserToken)t=i.mockUserToken,n=Qi.MOCK_USER;else{t=(0,c.Sg)(i.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const r=i.mockUserToken.sub||i.mockUserToken.user_id;if(!r)throw new us(ls.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Qi(r)}e._authCredentials=new fs(new ds(t,n))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Tf(this.firestore,e,this._query)}}class Ef{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ef(this.firestore,e,this._key)}}class kf extends Tf{constructor(e,t,n){super(e,t,ca(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ef(this.firestore,null,new Os(e))}withConverter(e){return new kf(this.firestore,e,this._path)}}function xf(e,t,...n){if(e=(0,c.m9)(e),mf("collection","path",t),e instanceof Cf){const i=xs.fromString(t,...n);return yf(i),new kf(e,null,i)}{if(!(e instanceof Ef||e instanceof kf))throw new us(ls.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(xs.fromString(t,...n));return yf(i),new kf(e.firestore,null,i)}}function Af(e,t){if(e=wf(e,Cf),mf("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new us(ls.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Tf(e,null,function(e){return new oa(xs.emptyPath(),e)}(t))}function Nf(e,t,...n){if(e=(0,c.m9)(e),1===arguments.length&&(t=bs.V()),mf("doc","path",t),e instanceof Cf){const i=xs.fromString(t,...n);return vf(i),new Ef(e,null,new Os(i))}{if(!(e instanceof Ef||e instanceof kf))throw new us(ls.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=e._path.child(xs.fromString(t,...n));return vf(i),new Ef(e.firestore,e instanceof kf?e.converter:null,new Os(i))}}function Of(e,t){return e=(0,c.m9)(e),t=(0,c.m9)(t),(e instanceof Ef||e instanceof kf)&&(t instanceof Ef||t instanceof kf)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Df(e,t){return e=(0,c.m9)(e),t=(0,c.m9)(t),e instanceof Tf&&t instanceof Tf&&e.firestore===t.firestore&&va(e._query,t._query)&&e.converter===t.converter
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Pf{constructor(){this.Ua=Promise.resolve(),this.Wa=[],this.Ga=!1,this.za=[],this.ja=null,this.Ha=!1,this.Ja=!1,this.Ya=[],this.Qo=new ed(this,"async_queue_retry"),this.Za=()=>{const e=Xh();e&&ts("AsyncQueue","Visibility state changed to "+e.visibilityState),this.Qo.Oo()};const e=Xh();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Za)}get isShuttingDown(){return this.Ga}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Xa(),this.eu(e)}enterRestrictedMode(e){if(!this.Ga){this.Ga=!0,this.Ja=e||!1;const t=Xh();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Za)}}enqueue(e){if(this.Xa(),this.Ga)return new Promise((()=>{}));const t=new hs;return this.eu((()=>this.Ga&&this.Ja?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Wa.push(e),this.tu())))}async tu(){if(0!==this.Wa.length){try{await this.Wa[0](),this.Wa.shift(),this.Qo.reset()}catch(e){if(!Gs(e))throw e;ts("AsyncQueue","Operation failed with retryable error: "+e)}this.Wa.length>0&&this.Qo.Mo((()=>this.tu()))}}eu(e){const t=this.Ua.then((()=>(this.Ha=!0,e().catch((e=>{this.ja=e,this.Ha=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e);throw ns("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.Ha=!1,e))))));return this.Ua=t,t}enqueueAfterDelay(e,t,n){this.Xa(),this.Ya.indexOf(e)>-1&&(t=0);const i=Ld.createAndSchedule(this,e,t,n,(e=>this.nu(e)));return this.za.push(i),i}Xa(){this.ja&&rs()}verifyOperationInProgress(){}async ru(){let e;do{e=this.Ua,await e}while(e!==this.Ua)}iu(e){for(const t of this.za)if(t.timerId===e)return!0;return!1}su(e){return this.ru().then((()=>{this.za.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.za)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.ru()}))}ou(e){this.Ya.push(e)}nu(e){const t=this.za.indexOf(e);this.za.splice(t,1)}}function Rf(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const i of t)if(i in n&&"function"==typeof n[i])return!0;return!1}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,["next","error","complete"])}class Lf{constructor(){this._progressObserver={},this._taskCompletionResolver=new hs,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f=-1;class Mf extends Cf{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=function(){return new Pf}(),this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Vf(this),this._firestoreClient.terminate()}}function Ff(e){return e._firestoreClient||Vf(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Vf(e){var t,n,i;const s=e._freezeSettings(),r=function(e,t,n,i){return new to(e,t,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,pf(i.experimentalLongPollingOptions),i.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._firestoreClient=new Hp(e._authCredentials,e._appCheckCredentials,e._queue,r),(null===(n=s.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=s.localCache)||void 0===i?void 0:i._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.localCache.kind,_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider})}function Bf(e,t){Gf(e=wf(e,Mf));const n=Ff(e);if(n._uninitializedComponentsProvider)throw new us(ls.FAILED_PRECONDITION,"SDK cache is already specified.");is("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=e._freezeSettings(),s=new Vp;return jf(n,s,new Mp(s,i.cacheSizeBytes,null==t?void 0:t.forceOwnership))}function Uf(e){Gf(e=wf(e,Mf));const t=Ff(e);if(t._uninitializedComponentsProvider)throw new us(ls.FAILED_PRECONDITION,"SDK cache is already specified.");is("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),i=new Vp;return jf(t,i,new Fp(i,n.cacheSizeBytes))}function jf(e,t,n){const i=new hs;return e.asyncQueue.enqueue((async()=>{try{await Wp(e,n),await Zp(e,t),i.resolve()}catch(e){const n=e;if(!Kp(n))throw n;is("Error enabling indexeddb cache. Falling back to memory cache: "+n),i.reject(n)}})).then((()=>i.promise))}function zf(e){if(e._initialized&&!e._terminated)throw new us(ls.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new hs;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Ws.v())return Promise.resolve();const t=e+"main";await Ws.delete(t)}(fh(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}function qf(e){return function(e){const t=new hs;return e.asyncQueue.enqueueAndForget((async()=>pp(await ef(e),t))),t.promise}(Ff(e=wf(e,Mf)))}function Hf(e){return sf(Ff(e=wf(e,Mf)))}function Wf(e){return rf(Ff(e=wf(e,Mf)))}function Zf(e,t){const n=Ff(e=wf(e,Mf)),i=new Lf;return hf(n,e._databaseId,t,i),i}function Kf(e,t){return df(Ff(e=wf(e,Mf)),t).then((t=>t?new Tf(e,null,t.query):null))}function Gf(e){if(e._initialized||e._terminated)throw new us(ls.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Qf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qf(Zr.fromBase64String(e))}catch(e){throw new us(ls.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Qf(Zr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new us(ls.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ns(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Xf{constructor(e){this._methodName=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new us(ls.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new us(ls.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Is(this._lat,e._lat)||Is(this._long,e._long)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em=/^__.*__$/;class tm{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new hc(e,this.data,this.fieldMask,t,this.fieldTransforms):new uc(e,this.data,t,this.fieldTransforms)}}class nm{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new hc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function im(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rs()}}class sm{constructor(e,t,n,i,s,r){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===s&&this._u(),this.fieldTransforms=s||[],this.fieldMask=r||[]}get path(){return this.settings.path}get au(){return this.settings.au}uu(e){return new sm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}cu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.uu({path:n,lu:!1});return i.hu(e),i}Pu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.uu({path:n,lu:!1});return i._u(),i}Iu(e){return this.uu({path:void 0,lu:!0})}Tu(e){return Sm(e,this.settings.methodName,this.settings.Eu||!1,this.path,this.settings.du)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}_u(){if(this.path)for(let e=0;e<this.path.length;e++)this.hu(this.path.get(e))}hu(e){if(0===e.length)throw this.Tu("Document fields must not be empty");if(im(this.au)&&em.test(e))throw this.Tu('Document fields cannot begin and end with "__"')}}class rm{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Jh(e)}Au(e,t,n,i=!1){return new sm({au:e,methodName:t,du:n,path:Ns.emptyPath(),lu:!1,Eu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function om(e){const t=e._freezeSettings(),n=Jh(e._databaseId);return new rm(e._databaseId,!!t.ignoreUndefinedProperties,n)}function am(e,t,n,i,s,r={}){const o=e.Au(r.merge||r.mergeFields?2:0,t,n,s);wm("Data must be an object, but it was:",o,i);const a=ym(i,o);let c,l;if(r.merge)c=new qr(o.fieldMask),l=o.fieldTransforms;else if(r.mergeFields){const e=[];for(const i of r.mergeFields){const s=bm(t,i,n);if(!o.contains(s))throw new us(ls.INVALID_ARGUMENT,`Field '${s}' is specified in your field mask but missing from your input data.`);Tm(e,s)||e.push(s)}c=new qr(e),l=o.fieldTransforms.filter((e=>c.covers(e.field)))}else c=null,l=o.fieldTransforms;return new tm(new To(a),c,l)}class cm extends Xf{_toFieldTransform(e){if(2!==e.au)throw 1===e.au?e.Tu(`${this._methodName}() can only appear at the top level of your update data`):e.Tu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cm}}function lm(e,t,n){return new sm({au:3,du:t.settings.du,methodName:e._methodName,lu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class um extends Xf{_toFieldTransform(e){return new Ja(e.path,new Ha)}isEqual(e){return e instanceof um}}class hm extends Xf{constructor(e,t){super(e),this.Ru=t}_toFieldTransform(e){const t=lm(this,e,!0),n=this.Ru.map((e=>vm(e,t))),i=new Wa(n);return new Ja(e.path,i)}isEqual(e){return this===e}}class dm extends Xf{constructor(e,t){super(e),this.Ru=t}_toFieldTransform(e){const t=lm(this,e,!0),n=this.Ru.map((e=>vm(e,t))),i=new Ka(n);return new Ja(e.path,i)}isEqual(e){return this===e}}class pm extends Xf{constructor(e,t){super(e),this.Vu=t}_toFieldTransform(e){const t=new Qa(e.serializer,Ba(e.serializer,this.Vu));return new Ja(e.path,t)}isEqual(e){return this===e}}function fm(e,t,n,i){const s=e.Au(1,t,n);wm("Data must be an object, but it was:",s,i);const r=[],o=To.empty();$r(i,((e,i)=>{const a=Cm(t,e,n);i=(0,c.m9)(i);const l=s.Pu(a);if(i instanceof cm)r.push(a);else{const e=vm(i,l);null!=e&&(r.push(a),o.set(a,e))}}));const a=new qr(r);return new nm(o,a,s.fieldTransforms)}function mm(e,t,n,i,s,r){const o=e.Au(1,t,n),a=[bm(t,i,n)],l=[s];if(r.length%2!=0)throw new us(ls.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let c=0;c<r.length;c+=2)a.push(bm(t,r[c])),l.push(r[c+1]);const u=[],h=To.empty();for(let p=a.length-1;p>=0;--p)if(!Tm(u,a[p])){const e=a[p];let t=l[p];t=(0,c.m9)(t);const n=o.Pu(e);if(t instanceof cm)u.push(e);else{const i=vm(t,n);null!=i&&(u.push(e),h.set(e,i))}}const d=new qr(u);return new nm(h,d,o.fieldTransforms)}function gm(e,t,n,i=!1){return vm(n,e.Au(i?4:3,t))}function vm(e,t){if(_m(e=(0,c.m9)(e)))return wm("Unsupported field value:",t,e),ym(e,t);if(e instanceof Xf)return function(e,t){if(!im(t.au))throw t.Tu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Tu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.lu&&4!==t.au)throw t.Tu("Nested arrays are not supported");return function(e,t){const n=[];let i=0;for(const s of e){let e=vm(s,t.Iu(i));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),i++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,c.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Ba(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Ts.fromDate(e);return{timestampValue:Zc(t.serializer,n)}}if(e instanceof Ts){const n=new Ts(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Zc(t.serializer,n)}}if(e instanceof Jf)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Qf)return{bytesValue:Kc(t.serializer,e._byteString)};if(e instanceof Ef){const n=t.databaseId,i=e.firestore._databaseId;if(!i.isEqual(n))throw t.Tu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Yc(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Tu(`Unsupported field value: ${_f(e)}`)}(e,t)}function ym(e,t){const n={};return Mr(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):$r(e,((e,i)=>{const s=vm(i,t.cu(e));null!=s&&(n[e]=s)})),{mapValue:{fields:n}}}function _m(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ts||e instanceof Jf||e instanceof Qf||e instanceof Ef||e instanceof Xf)}function wm(e,t,n){if(!_m(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const i=_f(n);throw"an object"===i?t.Tu(e+" a custom object"):t.Tu(e+" "+i)}}function bm(e,t,n){if((t=(0,c.m9)(t))instanceof Yf)return t._internalPath;if("string"==typeof t)return Cm(e,t);throw Sm("Field path arguments must be of type string or ",e,!1,void 0,n)}const Im=new RegExp("[~\\*/\\[\\]]");function Cm(e,t,n){if(t.search(Im)>=0)throw Sm(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Yf(...t.split("."))._internalPath}catch(I){throw Sm(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Sm(e,t,n,i,s){const r=i&&!i.isEmpty(),o=void 0!==s;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(r||o)&&(c+=" (found",r&&(c+=` in field ${i}`),o&&(c+=` in document ${s}`),c+=")"),new us(ls.INVALID_ARGUMENT,a+e+c)}function Tm(e,t){return e.some((e=>e.isEqual(t)))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,t,n,i,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ef(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new km(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(xm("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class km extends Em{data(){return super.data()}}function xm(e,t){return"string"==typeof t?Cm(e,t):t instanceof Yf?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new us(ls.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Nm{}class Om extends Nm{}function Dm(e,t,...n){let i=[];t instanceof Nm&&i.push(t),i=i.concat(n),function(e){const t=e.filter((e=>e instanceof Lm)).length,n=e.filter((e=>e instanceof Pm)).length;if(t>1||t>0&&n>0)throw new us(ls.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(i);for(const s of i)e=s._apply(e);return e}class Pm extends Om{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Pm(e,t,n)}_apply(e){const t=this._parse(e);return Qm(e._query,t),new Tf(e.firestore,e.converter,ma(e._query,t))}_parse(e){const t=om(e.firestore),n=function(e,t,n,i,s,r,o){let a;if(s.isKeyField()){if("array-contains"===r||"array-contains-any"===r)throw new us(ls.INVALID_ARGUMENT,`Invalid Query. You can't perform '${r}' queries on documentId().`);if("in"===r||"not-in"===r){Gm(o,r);const t=[];for(const n of o)t.push(Km(i,e,n));a={arrayValue:{values:t}}}else a=Km(i,e,o)}else"in"!==r&&"not-in"!==r&&"array-contains-any"!==r||Gm(o,r),a=gm(n,t,o,"in"===r||"not-in"===r);return Ro.create(s,r,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Rm(e,t,n){const i=t,s=xm("where",e);return Pm._create(s,i,n)}class Lm extends Nm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Lm(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Lo.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const i=t.getFlattenedFilters();for(const s of i)Qm(n,s),n=ma(n,s)}(e._query,t),new Tf(e.firestore,e.converter,ma(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class $m extends Om{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new $m(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new us(ls.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new us(ls.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const i=new Oo(t,n);return function(e,t){if(null===ua(e)){const n=ha(e);null!==n&&Ym(e,n,t.field)}}(e,i),i}(e._query,this._field,this._direction);return new Tf(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new oa(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Mm(e,t="asc"){const n=t,i=xm("orderBy",e);return $m._create(i,n)}class Fm extends Om{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Fm(e,t,n)}_apply(e){return new Tf(e.firestore,e.converter,ga(e._query,this._limit,this._limitType))}}function Vm(e){return bf("limit",e),Fm._create("limit",e,"F")}function Bm(e){return bf("limitToLast",e),Fm._create("limitToLast",e,"L")}class Um extends Om{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Um(e,t,n)}_apply(e){const t=Zm(e,this.type,this._docOrFields,this._inclusive);return new Tf(e.firestore,e.converter,function(e,t){return new oa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}function jm(...e){return Um._create("startAt",e,!0)}function zm(...e){return Um._create("startAfter",e,!1)}class qm extends Om{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new qm(e,t,n)}_apply(e){const t=Zm(e,this.type,this._docOrFields,this._inclusive);return new Tf(e.firestore,e.converter,function(e,t){return new oa(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Hm(...e){return qm._create("endBefore",e,!1)}function Wm(...e){return qm._create("endAt",e,!0)}function Zm(e,t,n,i){if(n[0]=(0,c.m9)(n[0]),n[0]instanceof Em)return function(e,t,n,i,s){if(!i)throw new us(ls.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const r=[];for(const o of pa(e))if(o.field.isKeyField())r.push(po(t,i.key));else{const e=i.data.field(o.field);if(Xr(e))throw new us(ls.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new us(ls.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}r.push(e)}return new xo(r,s)}(e._query,e.firestore._databaseId,t,n[0]._document,i);{const s=om(e.firestore);return function(e,t,n,i,s,r){const o=e.explicitOrderBy;if(s.length>o.length)throw new us(ls.INVALID_ARGUMENT,`Too many arguments provided to ${i}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let c=0;c<s.length;c++){const r=s[c];if(o[c].field.isKeyField()){if("string"!=typeof r)throw new us(ls.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${i}(), but got a ${typeof r}`);if(!da(e)&&-1!==r.indexOf("/"))throw new us(ls.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${i}() must be a plain document ID, but '${r}' contains a slash.`);const n=e.path.child(xs.fromString(r));if(!Os.isDocumentKey(n))throw new us(ls.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${i}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const s=new Os(n);a.push(po(t,s))}else{const e=gm(n,i,r);a.push(e)}}return new xo(a,r)}(e._query,e.firestore._databaseId,s,t,n,i)}}function Km(e,t,n){if("string"==typeof(n=(0,c.m9)(n))){if(""===n)throw new us(ls.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!da(t)&&-1!==n.indexOf("/"))throw new us(ls.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(xs.fromString(n));if(!Os.isDocumentKey(i))throw new us(ls.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return po(e,new Os(i))}if(n instanceof Ef)return po(e,n._key);throw new us(ls.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_f(n)}.`)}function Gm(e,t){if(!Array.isArray(e)||0===e.length)throw new us(ls.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Qm(e,t){if(t.isInequality()){const n=ha(e),i=t.field;if(null!==n&&!n.isEqual(i))throw new us(ls.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${i.toString()}'`);const s=ua(e);null!==s&&Ym(e,i,s)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new us(ls.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new us(ls.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}function Ym(e,t,n){if(!n.isEqual(t))throw new us(ls.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Xm{convertValue(e,t="none"){switch(ro(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Yr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw rs()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return $r(e,((e,i)=>{n[e]=this.convertValue(i,t)})),n}convertGeoPoint(e){return new Jf(Qr(e.latitude),Qr(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Jr(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(eo(e));default:return null}}convertTimestamp(e){const t=Gr(e);return new Ts(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=xs.fromString(e);os(Sl(n));const i=new no(n.get(1),n.get(3)),s=new Os(n.popFirst(5));return i.isEqual(t)||ns(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class eg extends Xm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ef(this.firestore,null,t)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class tg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ng extends Em{constructor(e,t,n,i,s,r){super(e,t,n,i,r),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ig(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(xm("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class ig extends ng{data(e={}){return super.data(e)}}class sg{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new tg(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new ig(this._firestore,this._userDataWriter,n.key,n,new tg(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new us(ls.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const i=new ig(e._firestore,e._userDataWriter,n.doc.key,n.doc,new tg(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:i,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const i=new ig(e._firestore,e._userDataWriter,t.doc.key,t.doc,new tg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,r=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),r=n.indexOf(t.doc.key)),{type:rg(t.type),doc:i,oldIndex:s,newIndex:r}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function rg(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rs()}}function og(e,t){return e instanceof ng&&t instanceof ng?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof sg&&t instanceof sg&&e._firestore===t._firestore&&Df(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ag(e){e=wf(e,Ef);const t=wf(e.firestore,Mf);return af(Ff(t),e._key).then((n=>bg(t,e,n)))}class cg extends Xm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ef(this.firestore,null,t)}}function lg(e){e=wf(e,Ef);const t=wf(e.firestore,Mf),n=Ff(t),i=new cg(t);return of(n,e._key).then((n=>new ng(t,i,e._key,n,new tg(null!==n&&n.hasLocalMutations,!0),e.converter)))}function ug(e){e=wf(e,Ef);const t=wf(e.firestore,Mf);return af(Ff(t),e._key,{source:"server"}).then((n=>bg(t,e,n)))}function hg(e){e=wf(e,Tf);const t=wf(e.firestore,Mf),n=Ff(t),i=new cg(t);return Am(e._query),lf(n,e._query).then((n=>new sg(t,i,e,n)))}function dg(e){e=wf(e,Tf);const t=wf(e.firestore,Mf),n=Ff(t),i=new cg(t);return cf(n,e._query).then((n=>new sg(t,i,e,n)))}function pg(e){e=wf(e,Tf);const t=wf(e.firestore,Mf),n=Ff(t),i=new cg(t);return lf(n,e._query,{source:"server"}).then((n=>new sg(t,i,e,n)))}function fg(e,t,n){e=wf(e,Ef);const i=wf(e.firestore,Mf),s=Jm(e.converter,t,n);return wg(i,[am(om(i),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,nc.none())])}function mg(e,t,n,...i){e=wf(e,Ef);const s=wf(e.firestore,Mf),r=om(s);let o;return o="string"==typeof(t=(0,c.m9)(t))||t instanceof Yf?mm(r,"updateDoc",e._key,t,n,i):fm(r,"updateDoc",e._key,t),wg(s,[o.toMutation(e._key,nc.exists(!0))])}function gg(e){return wg(wf(e.firestore,Mf),[new mc(e._key,nc.none())])}function vg(e,t){const n=wf(e.firestore,Mf),i=Nf(e),s=Jm(e.converter,t);return wg(n,[am(om(e.firestore),"addDoc",i._key,s,null!==e.converter,{}).toMutation(i._key,nc.exists(!1))]).then((()=>i))}function yg(e,...t){var n,i,s;e=(0,c.m9)(e);let r={includeMetadataChanges:!1},o=0;"object"!=typeof t[o]||Rf(t[o])||(r=t[o],o++);const a={includeMetadataChanges:r.includeMetadataChanges};if(Rf(t[o])){const e=t[o];t[o]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[o+1]=null===(i=e.error)||void 0===i?void 0:i.bind(e),t[o+2]=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}let l,u,h;if(e instanceof Ef)u=wf(e.firestore,Mf),h=ca(e._key.path),l={next:n=>{t[o]&&t[o](bg(u,e,n))},error:t[o+1],complete:t[o+2]};else{const n=wf(e,Tf);u=wf(n.firestore,Mf),h=n._query;const i=new cg(u);l={next:e=>{t[o]&&t[o](new sg(u,i,n,e))},error:t[o+1],complete:t[o+2]},Am(e._query)}return function(e,t,n,i){const s=new Up(i),r=new Zd(t,s,n);return e.asyncQueue.enqueueAndForget((async()=>jd(await nf(e),r))),()=>{s.va(),e.asyncQueue.enqueueAndForget((async()=>zd(await nf(e),r)))}}(Ff(u),h,a,l)}function _g(e,t){return uf(Ff(e=wf(e,Mf)),Rf(t)?t:{next:t})}function wg(e,t){return function(e,t){const n=new hs;return e.asyncQueue.enqueueAndForget((async()=>ap(await ef(e),t,n))),n.promise}(Ff(e),t)}function bg(e,t,n){const i=n.docs.get(t._key),s=new cg(e);return new ng(e,s,t._key,i,new tg(n.hasPendingWrites,n.fromCache),t.converter)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Ig={maxAttempts:5};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=om(e)}set(e,t,n){this._verifyNotCommitted();const i=Sg(e,this._firestore),s=Jm(i.converter,t,n),r=am(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,n);return this._mutations.push(r.toMutation(i._key,nc.none())),this}update(e,t,n,...i){this._verifyNotCommitted();const s=Sg(e,this._firestore);let r;return r="string"==typeof(t=(0,c.m9)(t))||t instanceof Yf?mm(this._dataReader,"WriteBatch.update",s._key,t,n,i):fm(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(r.toMutation(s._key,nc.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Sg(e,this._firestore);return this._mutations=this._mutations.concat(new mc(t._key,nc.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new us(ls.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Sg(e,t){if((e=(0,c.m9)(e)).firestore!==t)throw new us(ls.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=om(e)}get(e){const t=Sg(e,this._firestore),n=new eg(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return rs();const i=e[0];if(i.isFoundDocument())return new Em(this._firestore,n,i.key,i,t.converter);if(i.isNoDocument())return new Em(this._firestore,n,t._key,null,t.converter);throw rs()}))}set(e,t,n){const i=Sg(e,this._firestore),s=Jm(i.converter,t,n),r=am(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,n);return this._transaction.set(i._key,r),this}update(e,t,n,...i){const s=Sg(e,this._firestore);let r;return r="string"==typeof(t=(0,c.m9)(t))||t instanceof Yf?mm(this._dataReader,"Transaction.update",s._key,t,n,i):fm(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,r),this}delete(e){const t=Sg(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Sg(e,this._firestore),n=new cg(this._firestore);return super.get(e).then((e=>new ng(this._firestore,n,t._key,e._document,new tg(!1,!1),t.converter)))}}function Eg(e,t,n){e=wf(e,Mf);const i=Object.assign(Object.assign({},Ig),n);return function(e){if(e.maxAttempts<1)throw new us(ls.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(e,t,n){const i=new hs;return e.asyncQueue.enqueueAndForget((async()=>{const s=await tf(e);new qp(e.asyncQueue,s,n,t,i).run()})),i.promise}(Ff(e),(n=>t(new Tg(e,n))),i)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(){return new cm("deleteField")}function xg(){return new um("serverTimestamp")}function Ag(...e){return new hm("arrayUnion",e)}function Ng(...e){return new dm("arrayRemove",e)}function Og(e){return new pm("increment",e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(e,t=!0){!function(e){Yi=e}(r.SDK_VERSION),(0,r._registerComponent)(new o.wA("firestore",((e,{instanceIdentifier:n,options:i})=>{const s=e.getProvider("app").getImmediate(),r=new Mf(new ms(e.getProvider("auth-internal")),new _s(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new us(ls.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new no(e.options.projectId,t)}(s,n),s);return i=Object.assign({useFetchStreams:t},i),r._setSettings(i),r}),"PUBLIC").setMultipleInstances(!0)),(0,r.registerVersion)(Gi,"4.0.0",e),(0,r.registerVersion)(Gi,"4.0.0","esm2017")}();const Dg="@firebase/firestore-compat",Pg="0.3.13";
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Rg(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new us("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(){if("undefined"===typeof Uint8Array)throw new us("unimplemented","Uint8Arrays are not available in this environment.")}function $g(){if(!Wr())throw new us("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Mg{constructor(e){this._delegate=e}static fromBase64String(e){return $g(),new Mg(Qf.fromBase64String(e))}static fromUint8Array(e){return Lg(),new Mg(Qf.fromUint8Array(e))}toBase64(){return $g(),this._delegate.toBase64()}toUint8Array(){return Lg(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(e){return Vg(e,["next","error","complete"])}function Vg(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const i of t)if(i in n&&"function"===typeof n[i])return!0;return!1}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{enableIndexedDbPersistence(e,t){return Bf(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return Uf(e._delegate)}clearIndexedDbPersistence(e){return zf(e._delegate)}}class Ug{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof no||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||is("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,n={}){Sf(this._delegate,e,t,n)}enableNetwork(){return Hf(this._delegate)}disableNetwork(){return Wf(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,gf("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return qf(this._delegate)}onSnapshotsInSync(e){return _g(this._delegate,e)}get app(){if(!this._appCompat)throw new us("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new nv(this,xf(this._delegate,e))}catch(t){throw Kg(t,"collection()","Firestore.collection()")}}doc(e){try{return new Zg(this,Nf(this._delegate,e))}catch(t){throw Kg(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Jg(this,Af(this._delegate,e))}catch(t){throw Kg(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Eg(this._delegate,(t=>e(new qg(this,t))))}batch(){return Ff(this._delegate),new Hg(new Cg(this._delegate,(e=>wg(this._delegate,e))))}loadBundle(e){return Zf(this._delegate,e)}namedQuery(e){return Kf(this._delegate,e).then((e=>e?new Jg(this,e):null))}}class jg extends Xm{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mg(new Qf(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Zg.forKey(t,this.firestore,null)}}function zg(e){es(e)}class qg{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new jg(e)}get(e){const t=iv(e);return this._delegate.get(t).then((e=>new Yg(this._firestore,new ng(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const i=iv(e);return n?(Rg("Transaction.set",n),this._delegate.set(i,t,n)):this._delegate.set(i,t),this}update(e,t,n,...i){const s=iv(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=iv(e);return this._delegate.delete(t),this}}class Hg{constructor(e){this._delegate=e}set(e,t,n){const i=iv(e);return n?(Rg("WriteBatch.set",n),this._delegate.set(i,t,n)):this._delegate.set(i,t),this}update(e,t,n,...i){const s=iv(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=iv(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Wg{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new ig(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Xg(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=Wg.INSTANCES;let i=n.get(e);i||(i=new WeakMap,n.set(e,i));let s=i.get(t);return s||(s=new Wg(e,new jg(e),t),i.set(t,s)),s}}Wg.INSTANCES=new WeakMap;class Zg{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jg(e)}static forPath(e,t,n){if(e.length%2!==0)throw new us("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Zg(t,new Ef(t._delegate,n,new Os(e)))}static forKey(e,t,n){return new Zg(t,new Ef(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new nv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new nv(this.firestore,xf(this._delegate,e))}catch(t){throw Kg(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=(0,c.m9)(e),e instanceof Ef&&Of(this._delegate,e)}set(e,t){t=Rg("DocumentReference.set",t);try{return t?fg(this._delegate,e,t):fg(this._delegate,e)}catch(n){throw Kg(n,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return 1===arguments.length?mg(this._delegate,e):mg(this._delegate,e,t,...n)}catch(i){throw Kg(i,"updateDoc()","DocumentReference.update()")}}delete(){return gg(this._delegate)}onSnapshot(...e){const t=Gg(e),n=Qg(e,(e=>new Yg(this.firestore,new ng(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return yg(this._delegate,t,n)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?lg(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?ug(this._delegate):ag(this._delegate),t.then((e=>new Yg(this.firestore,new ng(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new Zg(this.firestore,e?this._delegate.withConverter(Wg.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Kg(e,t,n){return e.message=e.message.replace(t,n),e}function Gg(e){for(const t of e)if("object"===typeof t&&!Fg(t))return t;return{}}function Qg(e,t){var n,i;let s;return s=Fg(e[0])?e[0]:Fg(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{s.next&&s.next(t(e))},error:null===(n=s.error)||void 0===n?void 0:n.bind(s),complete:null===(i=s.complete)||void 0===i?void 0:i.bind(s)}}class Yg{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Zg(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return og(this._delegate,e._delegate)}}class Xg extends Yg{data(e){const t=this._delegate.data(e);return as(void 0!==t,"Document in a QueryDocumentSnapshot should exist"),t}}class Jg{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jg(e)}where(e,t,n){try{return new Jg(this.firestore,Dm(this._delegate,Rm(e,t,n)))}catch(i){throw Kg(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Jg(this.firestore,Dm(this._delegate,Mm(e,t)))}catch(n){throw Kg(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Jg(this.firestore,Dm(this._delegate,Vm(e)))}catch(t){throw Kg(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Jg(this.firestore,Dm(this._delegate,Bm(e)))}catch(t){throw Kg(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Jg(this.firestore,Dm(this._delegate,jm(...e)))}catch(t){throw Kg(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Jg(this.firestore,Dm(this._delegate,zm(...e)))}catch(t){throw Kg(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Jg(this.firestore,Dm(this._delegate,Hm(...e)))}catch(t){throw Kg(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Jg(this.firestore,Dm(this._delegate,Wm(...e)))}catch(t){throw Kg(t,"endAt()","Query.endAt()")}}isEqual(e){return Df(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?dg(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?pg(this._delegate):hg(this._delegate),t.then((e=>new tv(this.firestore,new sg(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(...e){const t=Gg(e),n=Qg(e,(e=>new tv(this.firestore,new sg(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return yg(this._delegate,t,n)}withConverter(e){return new Jg(this.firestore,e?this._delegate.withConverter(Wg.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class ev{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Xg(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class tv{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Jg(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new Xg(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new ev(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new Xg(this._firestore,n))}))}isEqual(e){return og(this._delegate,e._delegate)}}class nv extends Jg{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Zg(this.firestore,e):null}doc(e){try{return new Zg(this.firestore,void 0===e?Nf(this._delegate):Nf(this._delegate,e))}catch(t){throw Kg(t,"doc()","CollectionReference.doc()")}}add(e){return vg(this._delegate,e).then((e=>new Zg(this.firestore,e)))}isEqual(e){return Of(this._delegate,e._delegate)}withConverter(e){return new nv(this.firestore,e?this._delegate.withConverter(Wg.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function iv(e){return wf(e,Ef)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(...e){this._delegate=new Yf(...e)}static documentId(){return new sv(Ns.keyField().canonicalString())}isEqual(e){return e=(0,c.m9)(e),e instanceof Yf&&this._delegate._internalPath.isEqual(e._internalPath)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e){this._delegate=e}static serverTimestamp(){const e=xg();return e._methodName="FieldValue.serverTimestamp",new rv(e)}static delete(){const e=kg();return e._methodName="FieldValue.delete",new rv(e)}static arrayUnion(...e){const t=Ag(...e);return t._methodName="FieldValue.arrayUnion",new rv(t)}static arrayRemove(...e){const t=Ng(...e);return t._methodName="FieldValue.arrayRemove",new rv(t)}static increment(e){const t=Og(e);return t._methodName="FieldValue.increment",new rv(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov={Firestore:Ug,GeoPoint:Jf,Timestamp:Ts,Blob:Mg,Transaction:qg,WriteBatch:Hg,DocumentReference:Zg,DocumentSnapshot:Yg,Query:Jg,QueryDocumentSnapshot:Xg,QuerySnapshot:tv,CollectionReference:nv,FieldPath:sv,FieldValue:rv,setLogLevel:zg,CACHE_SIZE_UNLIMITED:$f};function av(e,t){e.INTERNAL.registerComponent(new o.wA("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),i=e.getProvider("firestore").getImmediate();return t(n,i)}),"PUBLIC").setServiceProps(Object.assign({},ov)))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(e){av(e,((e,t)=>new Ug(e,t,new Bg))),e.registerVersion(Dg,Pg)}cv(s.Z)},9355:function(e,t,n){n.d(t,{N8:function(){return Wr}});var i=n(5816),s=n(8463),r=n(4444),o=n(3333);const a="@firebase/database",c="1.0.0";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let l="";function u(e){l=e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,r.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,r.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,r.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new h(t)}}catch(t){}return new d},f=p("localStorage"),m=p("sessionStorage"),g=new o.Yd("@firebase/database"),v=function(){let e=1;return function(){return e++}}(),y=function(e){const t=(0,r.dS)(e),n=new r.gQ;n.update(t);const i=n.digest();return r.US.encodeByteArray(i)},_=function(...e){let t="";for(let n=0;n<e.length;n++){const i=e[n];Array.isArray(i)||i&&"object"===typeof i&&"number"===typeof i.length?t+=_.apply(null,i):t+="object"===typeof i?(0,r.Wl)(i):i,t+=" "}return t};let w=null,b=!0;const I=function(e,t){(0,r.hu)(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(g.logLevel=o["in"].VERBOSE,w=g.log.bind(g),t&&m.set("logging_enabled",!0)):"function"===typeof e?w=e:(w=null,m.remove("logging_enabled"))},C=function(...e){if(!0===b&&(b=!1,null===w&&!0===m.get("logging_enabled")&&I(!0)),w){const t=_.apply(null,e);w(t)}},S=function(e){return function(...t){C(e,...t)}},T=function(...e){const t="FIREBASE INTERNAL ERROR: "+_(...e);g.error(t)},E=function(...e){const t=`FIREBASE FATAL ERROR: ${_(...e)}`;throw g.error(t),new Error(t)},k=function(...e){const t="FIREBASE WARNING: "+_(...e);g.warn(t)},x=function(){"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&k("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},A=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},N=function(e){if((0,r.Yr)()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(()=>{"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}},O="[MIN_NAME]",D="[MAX_NAME]",P=function(e,t){if(e===t)return 0;if(e===O||t===D)return-1;if(t===O||e===D)return 1;{const n=H(e),i=H(t);return null!==n?null!==i?n-i===0?e.length-t.length:n-i:-1:null!==i?1:e<t?-1:1}},R=function(e,t){return e===t?0:e<t?-1:1},L=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+(0,r.Wl)(t))},$=function(e){if("object"!==typeof e||null===e)return(0,r.Wl)(e);const t=[];for(const i in e)t.push(i);t.sort();let n="{";for(let i=0;i<t.length;i++)0!==i&&(n+=","),n+=(0,r.Wl)(t[i]),n+=":",n+=$(e[t[i]]);return n+="}",n},M=function(e,t){const n=e.length;if(n<=t)return[e];const i=[];for(let s=0;s<n;s+=t)s+t>n?i.push(e.substring(s,n)):i.push(e.substring(s,s+t));return i};function F(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const V=function(e){(0,r.hu)(!A(e),"Invalid JSON number");const t=11,n=52,i=(1<<t-1)-1;let s,o,a,c,l;0===e?(o=0,a=0,s=1/e===-1/0?1:0):(s=e<0,e=Math.abs(e),e>=Math.pow(2,1-i)?(c=Math.min(Math.floor(Math.log(e)/Math.LN2),i),o=c+i,a=Math.round(e*Math.pow(2,n-c)-Math.pow(2,n))):(o=0,a=Math.round(e/Math.pow(2,1-i-n))));const u=[];for(l=n;l;l-=1)u.push(a%2?1:0),a=Math.floor(a/2);for(l=t;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);u.push(s?1:0),u.reverse();const h=u.join("");let d="";for(l=0;l<64;l+=8){let e=parseInt(h.substr(l,8),2).toString(16);1===e.length&&(e="0"+e),d+=e}return d.toLowerCase()},B=function(){return!("object"!==typeof window||!window["chrome"]||!window["chrome"]["extension"]||/^chrome/.test(window.location.href))},U=function(){return"object"===typeof Windows&&"object"===typeof Windows.UI};const j=new RegExp("^-?(0*)\\d{1,10}$"),z=-2147483648,q=2147483647,H=function(e){if(j.test(e)){const t=Number(e);if(t>=z&&t<=q)return t}return null},W=function(e){try{e()}catch(t){setTimeout((()=>{const e=t.stack||"";throw k("Exception was thrown by user callback.",e),t}),Math.floor(0))}},Z=function(){const e="object"===typeof window&&window["navigator"]&&window["navigator"]["userAgent"]||"";return e.search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},K=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno["unrefTimer"]?Deno.unrefTimer(n):"object"===typeof n&&n["unref"]&&n["unref"](),n};
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class G{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then((e=>this.appCheck=e))}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise(((t,n)=>{setTimeout((()=>{this.appCheck?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((t=>t.addTokenListener(e)))}notifyForInvalidToken(){k(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((e=>this.auth_=e))}getToken(e){return this.auth_?this.auth_.getToken(e).catch((e=>e&&"auth/token-not-initialized"===e.code?(C("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e))):new Promise(((t,n)=>{setTimeout((()=>{this.auth_?this.getToken(e).then(t,n):t(null)}),0)}))}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((t=>t.addAuthTokenListener(e)))}removeTokenChangeListener(e){this.authProvider_.get().then((t=>t.removeAuthTokenListener(e)))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',k(e)}}class Y{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Y.OWNER="owner";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const X="5",J="v",ee="s",te="r",ne="f",ie=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,se="ls",re="p",oe="ac",ae="websocket",ce="long_polling";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class le{constructor(e,t,n,i,s=!1,r="",o=!1,a=!1){this.secure=t,this.namespace=n,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=r,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=f.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&f.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function ue(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams}function he(e,t,n){let i;if((0,r.hu)("string"===typeof t,"typeof type must == string"),(0,r.hu)("object"===typeof n,"typeof params must == object"),t===ae)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==ce)throw new Error("Unknown connection type: "+t);i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}ue(e)&&(n["ns"]=e.namespace);const s=[];return F(n,((e,t)=>{s.push(e+"="+t)})),i+s.join("&")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,r.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,r.p$)(this.counters_)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pe={},fe={};function me(e){const t=e.toString();return pe[t]||(pe[t]=new de),pe[t]}function ge(e,t){const n=e.toString();return fe[n]||(fe[n]=t()),fe[n]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){this.pendingResponses[e]=t;while(this.pendingResponses[this.currentResponseNum]){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&W((()=>{this.onMessage_(e[t])}));if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ye="start",_e="close",we="pLPCommand",be="pRTLPCB",Ie="id",Ce="pw",Se="ser",Te="cb",Ee="seg",ke="ts",xe="d",Ae="dframe",Ne=1870,Oe=30,De=Ne-Oe,Pe=25e3,Re=3e4;class Le{constructor(e,t,n,i,s,r,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=i,this.authToken=s,this.transportSessionId=r,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=S(e),this.stats_=me(t),this.urlFn=e=>(this.appCheckToken&&(e[oe]=this.appCheckToken),he(t,ce,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new ve(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null}),Math.floor(Re)),N((()=>{if(this.isClosed_)return;this.scriptTagHolder=new $e(((...e)=>{const[t,n,i,s,r]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,t===ye)this.id=n,this.password=i;else{if(t!==_e)throw new Error("Unrecognized command received: "+t);n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,(()=>{this.onClosed_()}))):this.onClosed_()}}),((...e)=>{const[t,n]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,n)}),(()=>{this.onClosed_()}),this.urlFn);const e={};e[ye]="t",e[Se]=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e[Te]=this.scriptTagHolder.uniqueCallbackIdentifier),e[J]=X,this.transportSessionId&&(e[ee]=this.transportSessionId),this.lastSessionId&&(e[se]=this.lastSessionId),this.applicationId&&(e[re]=this.applicationId),this.appCheckToken&&(e[oe]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&ie.test(location.hostname)&&(e[te]=ne);const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,(()=>{}))}))}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Le.forceAllow_=!0}static forceDisallow(){Le.forceDisallow_=!0}static isAvailable(){return!(0,r.Yr)()&&(!!Le.forceAllow_||!Le.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!B()&&!U())}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,r.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=(0,r.h$)(t),i=M(n,De);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,r.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const n={};n[Ae]="t",n[Ie]=e,n[Ce]=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,r.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class $e{constructor(e,t,n,i){if(this.onDisconnect=n,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,r.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=v(),window[we+this.uniqueCallbackIdentifier]=e,window[be+this.uniqueCallbackIdentifier]=t,this.myIFrame=$e.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){const e=document.domain;n='<script>document.domain="'+e+'";<\/script>'}const i="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(s){C("frame writing exception"),s.stack&&C(s.stack),C(s)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{const t=e.contentWindow.document;t||C("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout((()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)}),Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){this.myID=e,this.myPW=t,this.alive=!0;while(this.newRequest_());}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Ie]=this.myID,e[Ce]=this.myPW,e[Se]=this.currentSerial;let t=this.urlFn(e),n="",i=0;while(this.pendingSegs.length>0){const e=this.pendingSegs[0];if(!(e.d.length+Oe+n.length<=Ne))break;{const e=this.pendingSegs.shift();n=n+"&"+Ee+i+"="+e.seg+"&"+ke+i+"="+e.ts+"&"+xe+i+"="+e.d,i++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(n,Math.floor(Pe)),s=()=>{clearTimeout(i),n()};this.addTag(e,s)}addTag(e,t){(0,r.Yr)()?this.doNodeLongPoll(e,t):setTimeout((()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{C("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(n){}}),Math.floor(1))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Me=16384,Fe=45e3;let Ve=null;"undefined"!==typeof MozWebSocket?Ve=MozWebSocket:"undefined"!==typeof WebSocket&&(Ve=WebSocket);class Be{constructor(e,t,n,i,s,r,o){this.connId=e,this.applicationId=n,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=S(this.connId),this.stats_=me(t),this.connURL=Be.connectionURL_(t,r,o,i,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,i,s){const o={};return o[J]=X,!(0,r.Yr)()&&"undefined"!==typeof location&&location.hostname&&ie.test(location.hostname)&&(o[te]=ne),t&&(o[ee]=t),n&&(o[se]=n),i&&(o[oe]=i),s&&(o[re]=s),he(e,ae,o)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,f.set("previous_websocket_failure",!0);try{let e;if((0,r.Yr)()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":`Firebase/${X}/${l}/${process.platform}/${t}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers["Authorization"]=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",BASE_URL:"/"},i=0===this.connURL.indexOf("wss://")?n["HTTPS_PROXY"]||n["https_proxy"]:n["HTTP_PROXY"]||n["http_proxy"];i&&(e["proxy"]={origin:i})}this.mySock=new Ve(this.connURL,[],e)}catch(n){this.log_("Error instantiating WebSocket.");const e=n.message||n.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){Be.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Ve&&!Be.forceDisallow_}static previouslyFailed(){return f.isInMemoryStorage||!0===f.get("previous_websocket_failure")}markConnectionHealthy(){f.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=(0,r.cI)(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,r.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e["data"];if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=(0,r.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=M(t,Me);n.length>1&&this.sendString_(String(n.length));for(let i=0;i<n.length;i++)this.sendString_(n[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()}),Math.floor(Fe))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Be.responsesRequiredToBeHealthy=2,Be.healthyTimeout=3e4;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ue{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Le,Be]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const t=Be&&Be["isAvailable"]();let n=t&&!Be.previouslyFailed();if(e.webSocketOnly&&(t||k("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[Be];else{const e=this.transports_=[];for(const t of Ue.ALL_TRANSPORTS)t&&t["isAvailable"]()&&e.push(t);Ue.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Ue.globalTransportInitialized_=!1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const je=6e4,ze=5e3,qe=10240,He=102400,We="t",Ze="d",Ke="s",Ge="r",Qe="e",Ye="o",Xe="a",Je="n",et="p",tt="h";class nt{constructor(e,t,n,i,s,r,o,a,c,l){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=r,this.onReady_=o,this.onDisconnect_=a,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=S("c:"+this.id+":"),this.transportManager_=new Ue(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e["responsesRequiredToBeHealthy"]||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((()=>{this.conn_&&this.conn_.open(t,n)}),Math.floor(0));const i=e["healthyTimeout"]||0;i>0&&(this.healthyTimeout_=K((()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>He?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>qe?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))}),Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(We in e){const t=e[We];t===Xe?this.upgradeIfSecondaryHealthy_():t===Ge?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):t===Ye&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=L("t",e),n=L("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:et,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Xe,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Je,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=L("t",e),n=L("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=L(We,e);if(Ze in e){const n=e[Ze];if(t===tt){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if(t===Je){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===Ke?this.onConnectionShutdown_(n):t===Ge?this.onReset_(n):t===Qe?T("Server Error: "+n):t===Ye?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):T("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),X!==n&&k("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e["responsesRequiredToBeHealthy"]||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),K((()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())}),Math.floor(je))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):K((()=>{this.sendPingOnPrimaryIfNecessary_()}),Math.floor(ze))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:et,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(f.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{put(e,t,n,i){}merge(e,t,n,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,r.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let e=0;e<n.length;e++)n[e].callback.apply(n[e].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const i=this.getInitialEvent(e);i&&t.apply(n,i)}off(e,t,n){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!n||n===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,r.hu)(this.allowedEvents_.find((t=>t===e)),"Unknown event: "+e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt extends st{constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||(0,r.uI)()||(window.addEventListener("online",(()=>{this.online_||(this.online_=!0,this.trigger("online",!0))}),!1),window.addEventListener("offline",(()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))}),!1))}static getInstance(){return new rt}getInitialEvent(e){return(0,r.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ot=32,at=768;class ct{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function lt(){return new ct("")}function ut(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function ht(e){return e.pieces_.length-e.pieceNum_}function dt(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new ct(e.pieces_,t)}function pt(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function ft(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function mt(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function gt(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new ct(t,0)}function vt(e,t){const n=[];for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);if(t instanceof ct)for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new ct(n,0)}function yt(e){return e.pieceNum_>=e.pieces_.length}function _t(e,t){const n=ut(e),i=ut(t);if(null===n)return t;if(n===i)return _t(dt(e),dt(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function wt(e,t){if(ht(e)!==ht(t))return!1;for(let n=e.pieceNum_,i=t.pieceNum_;n<=e.pieces_.length;n++,i++)if(e.pieces_[n]!==t.pieces_[i])return!1;return!0}function bt(e,t){let n=e.pieceNum_,i=t.pieceNum_;if(ht(e)>ht(t))return!1;while(n<e.pieces_.length){if(e.pieces_[n]!==t.pieces_[i])return!1;++n,++i}return!0}class It{constructor(e,t){this.errorPrefix_=t,this.parts_=mt(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=(0,r.ug)(this.parts_[n]);Tt(this)}}function Ct(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=(0,r.ug)(t),Tt(e)}function St(e){const t=e.parts_.pop();e.byteLength_-=(0,r.ug)(t),e.parts_.length>0&&(e.byteLength_-=1)}function Tt(e){if(e.byteLength_>at)throw new Error(e.errorPrefix_+"has a key path longer than "+at+" bytes ("+e.byteLength_+").");if(e.parts_.length>ot)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ot+") or object contains a cycle "+Et(e))}function Et(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt extends st{constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document["hidden"]?(t="visibilitychange",e="hidden"):"undefined"!==typeof document["mozHidden"]?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document["msHidden"]?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document["webkitHidden"]&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,(()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))}),!1)}static getInstance(){return new kt}getInitialEvent(e){return(0,r.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xt=1e3,At=3e5,Nt=3e4,Ot=1.3,Dt=3e4,Pt="server_kill",Rt=3;class Lt extends it{constructor(e,t,n,i,s,o,a,c){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=Lt.nextPersistentConnectionId_++,this.log_=S("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=xt,this.maxReconnectDelay_=At,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!(0,r.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");kt.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&rt.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const i=++this.requestNumber_,s={r:i,a:e,b:t};this.log_((0,r.Wl)(s)),(0,r.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),n&&(this.requestCBHash_[i]=n)}get(e){this.initConnection_();const t=new r.BH,n={p:e._path.toString(),q:e._queryObject},i={action:"g",request:n,onComplete:e=>{const n=e["d"];"ok"===e["s"]?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),t.promise}listen(e,t,n,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),(0,r.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,r.hu)(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const a={onComplete:i,hashFn:t,query:e,tag:n};this.listens.get(o).set(s,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,(n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)}))}sendListen_(e){const t=e.query,n=t._path.toString(),i=t._queryIdentifier;this.log_("Listen on "+n+" for "+i);const s={p:n},r="q";e.tag&&(s["q"]=t._queryObject,s["t"]=e.tag),s["h"]=e.hashFn(),this.sendRequest(r,s,(s=>{const r=s["d"],o=s["s"];Lt.warnOnListenWarnings_(r,t);const a=this.listens.get(n)&&this.listens.get(n).get(i);a===e&&(this.log_("listen response",s),"ok"!==o&&this.removeListen_(n,i),e.onComplete&&e.onComplete(o,r))}))}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&(0,r.r3)(e,"w")){const n=(0,r.DV)(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();k(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(()=>{})),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){const t=e&&40===e.length;(t||(0,r.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Nt)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(()=>{}))}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=(0,r.w9)(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n["noauth"]=!0:"object"===typeof this.authOverride_&&(n["authvar"]=this.authOverride_),this.sendRequest(t,n,(t=>{const n=t["s"],i=t["d"]||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,i))}))}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(e=>{const t=e["s"],n=e["d"]||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)}))}unlisten(e,t){const n=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+i),(0,r.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");const s=this.removeListen_(n,i);s&&this.connected_&&this.sendUnlisten_(n,i,e._queryObject,t)}sendUnlisten_(e,t,n,i){this.log_("Unlisten on "+e+" for "+t);const s={p:e},r="n";i&&(s["q"]=n,s["t"]=i),this.sendRequest(r,s)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,i){const s={p:t,d:n};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,(e=>{i&&setTimeout((()=>{i(e["s"],e["d"])}),Math.floor(0))}))}put(e,t,n,i){this.putInternal("p",e,t,n,i)}merge(e,t,n,i){this.putInternal("m",e,t,n,i)}putInternal(e,t,n,i,s){this.initConnection_();const r={p:t,d:n};void 0!==s&&(r["h"]=s),this.outstandingPuts_.push({action:e,request:r,onComplete:i}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,(n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),i&&i(n["s"],n["d"])}))}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,(e=>{const t=e["s"];if("ok"!==t){const t=e["d"];this.log_("reportStats","Error sending stats: "+t)}}))}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,r.Wl)(e));const t=e["r"],n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e["b"]))}else{if("error"in e)throw"A server-side error has occurred: "+e["error"];"a"in e&&this.onDataPush_(e["a"],e["b"])}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t["p"],t["d"],!1,t["t"]):"m"===e?this.onDataUpdate_(t["p"],t["d"],!0,t["t"]):"c"===e?this.onListenRevoked_(t["p"],t["q"]):"ac"===e?this.onAuthRevoked_(t["s"],t["d"]):"apc"===e?this.onAppCheckRevoked_(t["s"],t["d"]):"sd"===e?this.onSecurityDebugPacket_(t):T("Unrecognized action received from server: "+(0,r.Wl)(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,r.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((()=>{this.establishConnectionTimer_=null,this.establishConnection_()}),Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=xt,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=xt,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){const e=(new Date).getTime()-this.lastConnectionEstablishedTime_;e>Dt&&(this.reconnectDelay_=xt),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*Ot)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Lt.nextConnectionId_++,s=this.lastSessionId;let o=!1,a=null;const c=function(){a?a.close():(o=!0,n())},l=function(e){(0,r.hu)(a,"sendRequest call when we're not connected not allowed."),a.sendRequest(e)};this.realtime_={close:c,sendRequest:l};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[r,c]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);o?C("getToken() completed but was canceled"):(C("getToken() completed. Creating connection."),this.authToken_=r&&r.accessToken,this.appCheckToken_=c&&c.token,a=new nt(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,(e=>{k(e+" ("+this.repoInfo_.toString()+")"),this.interrupt(Pt)}),s))}catch(T){this.log_("Failed to get token: "+T),o||(this.repoInfo_.nodeAdmin&&k(T),c())}}}interrupt(e){C("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){C("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,r.xb)(this.interruptReasons_)&&(this.reconnectDelay_=xt,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map((e=>$(e))).join("$"):"default";const i=this.removeListen_(e,n);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,t){const n=new ct(e).toString();let i;if(this.listens.has(n)){const e=this.listens.get(n);i=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else i=void 0;return i}onAuthRevoked_(e,t){C("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Rt&&(this.reconnectDelay_=Nt,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){C("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Rt&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e["msg"].replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);while(this.onDisconnectRequestQueue_.length){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";(0,r.Yr)()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+l.replace(/\./g,"-")]=1,(0,r.uI)()?e["framework.cordova"]=1:(0,r.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=rt.getInstance().currentlyOnline();return(0,r.xb)(this.interruptReasons_)&&e}}Lt.nextPersistentConnectionId_=0,Lt.nextConnectionId_=0;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class $t{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new $t(e,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new $t(O,e),i=new $t(O,t);return 0!==this.compare(n,i)}minPost(){return $t.MIN}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ft;class Vt extends Mt{static get __EMPTY_NODE(){return Ft}static set __EMPTY_NODE(e){Ft=e}compare(e,t){return P(e.name,t.name)}isDefinedOn(e){throw(0,r.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return $t.MIN}maxPost(){return new $t(D,Ft)}makePost(e,t){return(0,r.hu)("string"===typeof e,"KeyIndex indexValue must always be a string."),new $t(e,Ft)}toString(){return".key"}}const Bt=new Vt;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,t,n,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let r=1;while(!e.isEmpty())if(r=t?n(e.key,t):1,i&&(r*=-1),r<0)e=this.isReverse_?e.left:e.right;else{if(0===r){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_){t=t.left;while(!t.isEmpty())this.nodeStack_.push(t),t=t.right}else{t=t.right;while(!t.isEmpty())this.nodeStack_.push(t),t=t.left}return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class jt{constructor(e,t,n,i,s){this.key=e,this.value=t,this.color=null!=n?n:jt.RED,this.left=null!=i?i:qt.EMPTY_NODE,this.right=null!=s?s:qt.EMPTY_NODE}copy(e,t,n,i,s){return new jt(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=s?s:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const s=n(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return qt.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,i;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return qt.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}jt.RED=!0,jt.BLACK=!1;class zt{copy(e,t,n,i,s){return this}insert(e,t,n){return new jt(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class qt{constructor(e,t=qt.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new qt(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,jt.BLACK,null,null))}remove(e){return new qt(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,jt.BLACK,null,null))}get(e){let t,n=this.root_;while(!n.isEmpty()){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,i=null;while(!n.isEmpty()){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return i?i.key:null;n=n.left;while(!n.right.isEmpty())n=n.right;return n.key}t<0?n=n.left:t>0&&(i=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ut(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Ut(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Ut(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Ut(this.root_,null,this.comparator_,!0,e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ht(e,t){return P(e.name,t.name)}function Wt(e,t){return P(e,t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zt;function Kt(e){Zt=e}qt.EMPTY_NODE=new zt;const Gt=function(e){return"number"===typeof e?"number:"+V(e):"string:"+e},Qt=function(e){if(e.isLeafNode()){const t=e.val();(0,r.hu)("string"===typeof t||"number"===typeof t||"object"===typeof t&&(0,r.r3)(t,".sv"),"Priority must be a string or number.")}else(0,r.hu)(e===Zt||e.isEmpty(),"priority of unexpected type.");(0,r.hu)(e===Zt||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let Yt,Xt,Jt;class en{constructor(e,t=en.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,(0,r.hu)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Qt(this.priorityNode_)}static set __childrenNodeConstructor(e){Yt=e}static get __childrenNodeConstructor(){return Yt}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new en(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:en.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return yt(e)?this:".priority"===ut(e)?this.priorityNode_:en.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:en.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=ut(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:((0,r.hu)(".priority"!==n||1===ht(e),".priority must be the last token in a path"),this.updateImmediateChild(n,en.__childrenNodeConstructor.EMPTY_NODE.updateChild(dt(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Gt(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?V(this.value_):this.value_,this.lazyHash_=y(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===en.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof en.__childrenNodeConstructor?-1:((0,r.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,i=en.VALUE_TYPE_ORDER.indexOf(t),s=en.VALUE_TYPE_ORDER.indexOf(n);return(0,r.hu)(i>=0,"Unknown leaf type: "+t),(0,r.hu)(s>=0,"Unknown leaf type: "+n),i===s?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}function tn(e){Xt=e}function nn(e){Jt=e}en.VALUE_TYPE_ORDER=["object","boolean","number","string"];class sn extends Mt{compare(e,t){const n=e.node.getPriority(),i=t.node.getPriority(),s=n.compareTo(i);return 0===s?P(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return $t.MIN}maxPost(){return new $t(D,new en("[PRIORITY-POST]",Jt))}makePost(e,t){const n=Xt(e);return new $t(t,new en("[PRIORITY-POST]",n))}toString(){return".priority"}}const rn=new sn,on=Math.log(2);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){const t=e=>parseInt(Math.log(e)/on,10),n=e=>parseInt(Array(e+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const i=n(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const cn=function(e,t,n,i){e.sort(t);const s=function(t,i){const r=i-t;let o,a;if(0===r)return null;if(1===r)return o=e[t],a=n?n(o):o,new jt(a,o.node,jt.BLACK,null,null);{const c=parseInt(r/2,10)+t,l=s(t,c),u=s(c+1,i);return o=e[c],a=n?n(o):o,new jt(a,o.node,jt.BLACK,l,u)}},r=function(t){let i=null,r=null,o=e.length;const a=function(t,i){const r=o-t,a=o;o-=t;const l=s(r+1,a),u=e[r],h=n?n(u):u;c(new jt(h,u.node,i,null,l))},c=function(e){i?(i.left=e,i=e):(r=e,i=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),i=Math.pow(2,t.count-(e+1));n?a(i,jt.BLACK):(a(i,jt.BLACK),a(i,jt.RED))}return r},o=new an(e.length),a=r(o);return new qt(i||t,a)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ln;const un={};class hn{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,r.hu)(un&&rn,"ChildrenNode.ts has not been loaded"),ln=ln||new hn({".priority":un},{".priority":rn}),ln}get(e){const t=(0,r.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof qt?t:null}hasIndex(e){return(0,r.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,r.hu)(e!==Bt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let i=!1;const s=t.getIterator($t.Wrap);let o,a=s.getNext();while(a)i=i||e.isDefinedOn(a.node),n.push(a),a=s.getNext();o=i?cn(n,e.getCompare()):un;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const u=Object.assign({},this.indexes_);return u[c]=o,new hn(u,l)}addToIndexes(e,t){const n=(0,r.UI)(this.indexes_,((n,i)=>{const s=(0,r.DV)(this.indexSet_,i);if((0,r.hu)(s,"Missing index implementation for "+i),n===un){if(s.isDefinedOn(e.node)){const n=[],i=t.getIterator($t.Wrap);let r=i.getNext();while(r)r.name!==e.name&&n.push(r),r=i.getNext();return n.push(e),cn(n,s.getCompare())}return un}{const i=t.get(e.name);let s=n;return i&&(s=s.remove(new $t(e.name,i))),s.insert(e,e.node)}}));return new hn(n,this.indexSet_)}removeFromIndexes(e,t){const n=(0,r.UI)(this.indexes_,(n=>{if(n===un)return n;{const i=t.get(e.name);return i?n.remove(new $t(e.name,i)):n}}));return new hn(n,this.indexSet_)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dn;class pn{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Qt(this.priorityNode_),this.children_.isEmpty()&&(0,r.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return dn||(dn=new pn(new qt(Wt),null,hn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||dn}updatePriority(e){return this.children_.isEmpty()?this:new pn(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?dn:t}}getChild(e){const t=ut(e);return null===t?this:this.getImmediateChild(t).getChild(dt(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if((0,r.hu)(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new $t(e,t);let i,s;t.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(n,this.children_)):(i=this.children_.insert(e,t),s=this.indexMap_.addToIndexes(n,this.children_));const r=i.isEmpty()?dn:this.priorityNode_;return new pn(i,r,s)}}updateChild(e,t){const n=ut(e);if(null===n)return t;{(0,r.hu)(".priority"!==ut(e)||1===ht(e),".priority must be the last token in a path");const i=this.getImmediateChild(n).updateChild(dt(e),t);return this.updateImmediateChild(n,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,i=0,s=!0;if(this.forEachChild(rn,((r,o)=>{t[r]=o.val(e),n++,s&&pn.INTEGER_REGEXP_.test(r)?i=Math.max(i,Number(r)):s=!1})),!e&&s&&i<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+Gt(this.getPriority().val())+":"),this.forEachChild(rn,((t,n)=>{const i=n.hash();""!==i&&(e+=":"+t+":"+i)})),this.lazyHash_=""===e?"":y(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const i=this.resolveIndex_(n);if(i){const n=i.getPredecessorKey(new $t(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new $t(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new $t(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal((e=>t(e.name,e.node))):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(e=>e));{const n=this.children_.getIteratorFrom(e.name,$t.Wrap);let i=n.peek();while(null!=i&&t.compare(i,e)<0)n.getNext(),i=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(e=>e));{const n=this.children_.getReverseIteratorFrom(e.name,$t.Wrap);let i=n.peek();while(null!=i&&t.compare(i,e)>0)n.getNext(),i=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===mn?-1:0}withIndex(e){if(e===Bt||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new pn(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Bt||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(rn),n=t.getIterator(rn);let i=e.getNext(),s=n.getNext();while(i&&s){if(i.name!==s.name||!i.node.equals(s.node))return!1;i=e.getNext(),s=n.getNext()}return null===i&&null===s}return!1}return!1}}resolveIndex_(e){return e===Bt?null:this.indexMap_.get(e.toString())}}pn.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class fn extends pn{constructor(){super(new qt(Wt),pn.EMPTY_NODE,hn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return pn.EMPTY_NODE}isEmpty(){return!1}}const mn=new fn;Object.defineProperties($t,{MIN:{value:new $t(O,pn.EMPTY_NODE)},MAX:{value:new $t(D,mn)}}),Vt.__EMPTY_NODE=pn.EMPTY_NODE,en.__childrenNodeConstructor=pn,Kt(mn),nn(mn);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const gn=!0;function vn(e,t=null){if(null===e)return pn.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),(0,r.hu)(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){const n=e;return new en(n,vn(t))}if(e instanceof Array||!gn){let n=pn.EMPTY_NODE;return F(e,((t,i)=>{if((0,r.r3)(e,t)&&"."!==t.substring(0,1)){const e=vn(i);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}})),n.updatePriority(vn(t))}{const n=[];let i=!1;const s=e;if(F(s,((e,t)=>{if("."!==e.substring(0,1)){const s=vn(t);s.isEmpty()||(i=i||!s.getPriority().isEmpty(),n.push(new $t(e,s)))}})),0===n.length)return pn.EMPTY_NODE;const r=cn(n,Ht,(e=>e.name),Wt);if(i){const e=cn(n,rn.getCompare());return new pn(r,vn(t),new hn({".priority":e},{".priority":rn}))}return new pn(r,vn(t),hn.Default)}}tn(vn);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class yn extends Mt{constructor(e){super(),this.indexPath_=e,(0,r.hu)(!yt(e)&&".priority"!==ut(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),i=this.extractChild(t.node),s=n.compareTo(i);return 0===s?P(e.name,t.name):s}makePost(e,t){const n=vn(e),i=pn.EMPTY_NODE.updateChild(this.indexPath_,n);return new $t(t,i)}maxPost(){const e=pn.EMPTY_NODE.updateChild(this.indexPath_,mn);return new $t(D,e)}toString(){return mt(this.indexPath_,0).join("/")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n extends Mt{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?P(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return $t.MIN}maxPost(){return $t.MAX}makePost(e,t){const n=vn(e);return new $t(t,n)}toString(){return".value"}}const wn=new _n;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(e){return{type:"value",snapshotNode:e}}function In(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Cn(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Sn(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}function Tn(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class En{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=rn}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,r.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,r.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:O}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,r.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,r.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:D}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,r.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===rn}copy(){const e=new En;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function kn(e){const t={};if(e.isDefault())return t;let n;if(e.index_===rn?n="$priority":e.index_===wn?n="$value":e.index_===Bt?n="$key":((0,r.hu)(e.index_ instanceof yn,"Unrecognized index type!"),n=e.index_.toString()),t["orderBy"]=(0,r.Wl)(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=(0,r.Wl)(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+(0,r.Wl)(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=(0,r.Wl)(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+(0,r.Wl)(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t["limitToFirst"]=e.limit_:t["limitToLast"]=e.limit_),t}function xn(e){const t={};if(e.startSet_&&(t["sp"]=e.indexStartValue_,e.startNameSet_&&(t["sn"]=e.indexStartName_),t["sin"]=!e.startAfterSet_),e.endSet_&&(t["ep"]=e.indexEndValue_,e.endNameSet_&&(t["en"]=e.indexEndName_),t["ein"]=!e.endBeforeSet_),e.limitSet_){t["l"]=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t["vf"]=n}return e.index_!==rn&&(t["i"]=e.index_.toString()),t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An extends it{constructor(e,t,n,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=i,this.log_=S("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,r.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=An.getListenId_(e,n),a={};this.listens_[o]=a;const c=kn(e._queryParams);this.restRequest_(s+".json",c,((e,t)=>{let c=t;if(404===e&&(c=null,e=null),null===e&&this.onDataUpdate_(s,c,!1,n),(0,r.DV)(this.listens_,o)===a){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",i(t,null)}}))}unlisten(e,t){const n=An.getListenId_(e,t);delete this.listens_[n]}get(e){const t=kn(e._queryParams),n=e._path.toString(),i=new r.BH;return this.restRequest_(n+".json",t,((e,t)=>{let s=t;404===e&&(s=null,e=null),null===e?(this.onDataUpdate_(n,s,!1,null),i.resolve(s)):i.reject(new Error(s))})),i.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t["format"]="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((([i,s])=>{i&&i.accessToken&&(t["auth"]=i.accessToken),s&&s.token&&(t["ac"]=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,r.xO)(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let t=null;if(a.status>=200&&a.status<300){try{t=(0,r.cI)(a.responseText)}catch(e){k("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,t)}else 401!==a.status&&404!==a.status&&k("Got unsuccessful REST response for "+o+" Status: "+a.status),n(a.status);n=null}},a.open("GET",o,!0),a.send()}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(){this.rootNode_=pn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(){return{value:null,children:new Map}}function Dn(e,t,n){if(yt(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const i=ut(t);e.children.has(i)||e.children.set(i,On());const s=e.children.get(i);t=dt(t),Dn(s,t,n)}}function Pn(e,t,n){null!==e.value?n(t,e.value):Rn(e,((e,i)=>{const s=new ct(t.toString()+"/"+e);Pn(i,s,n)}))}function Rn(e,t){e.children.forEach(((e,n)=>{t(n,e)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&F(this.last_,((e,n)=>{t[e]=t[e]-n})),this.last_=e,t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n=1e4,Mn=3e4,Fn=3e5;class Vn{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Ln(e);const n=$n+(Mn-$n)*Math.random();K(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;F(e,((e,i)=>{i>0&&(0,r.r3)(this.statsToReport_,e)&&(t[e]=i,n=!0)})),n&&this.server_.reportStats(t),K(this.reportStats_.bind(this),Math.floor(2*Math.random()*Fn))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bn;function Un(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function jn(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function zn(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(e){e[e["OVERWRITE"]=0]="OVERWRITE",e[e["MERGE"]=1]="MERGE",e[e["ACK_USER_WRITE"]=2]="ACK_USER_WRITE",e[e["LISTEN_COMPLETE"]=3]="LISTEN_COMPLETE"})(Bn||(Bn={}));class qn{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Bn.ACK_USER_WRITE,this.source=Un()}operationForChild(e){if(yt(this.path)){if(null!=this.affectedTree.value)return(0,r.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new ct(e));return new qn(lt(),t,this.revert)}}return(0,r.hu)(ut(this.path)===e,"operationForChild called for unrelated child."),new qn(dt(this.path),this.affectedTree,this.revert)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Hn{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Bn.OVERWRITE}operationForChild(e){return yt(this.path)?new Hn(this.source,lt(),this.snap.getImmediateChild(e)):new Hn(this.source,dt(this.path),this.snap)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Bn.MERGE}operationForChild(e){if(yt(this.path)){const t=this.children.subtree(new ct(e));return t.isEmpty()?null:t.value?new Hn(this.source,lt(),t.value):new Wn(this.source,lt(),t)}return(0,r.hu)(ut(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Wn(this.source,dt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(yt(e))return this.isFullyInitialized()&&!this.filtered_;const t=ut(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(e,t,n,i){const s=[],r=[];return t.forEach((t=>{"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&r.push(Tn(t.childName,t.snapshotNode))})),Gn(e,s,"child_removed",t,i,n),Gn(e,s,"child_added",t,i,n),Gn(e,s,"child_moved",r,i,n),Gn(e,s,"child_changed",t,i,n),Gn(e,s,"value",t,i,n),s}function Gn(e,t,n,i,s,r){const o=i.filter((e=>e.type===n));o.sort(((t,n)=>Yn(e,t,n))),o.forEach((n=>{const i=Qn(e,n,r);s.forEach((s=>{s.respondsTo(n.type)&&t.push(s.createEvent(i,e.query_))}))}))}function Qn(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}function Yn(e,t,n){if(null==t.childName||null==n.childName)throw(0,r.g5)("Should only compare child_ events.");const i=new $t(t.childName,t.snapshotNode),s=new $t(n.childName,n.snapshotNode);return e.index_.compare(i,s)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(e,t){return{eventCache:e,serverCache:t}}function Jn(e,t,n,i){return Xn(new Zn(t,n,i),e.serverCache)}function ei(e,t,n,i){return Xn(e.eventCache,new Zn(t,n,i))}function ti(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function ni(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ii;const si=()=>(ii||(ii=new qt(R)),ii);class ri{constructor(e,t=si()){this.value=e,this.children=t}static fromObject(e){let t=new ri(null);return F(e,((e,n)=>{t=t.set(new ct(e),n)})),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:lt(),value:this.value};if(yt(e))return null;{const n=ut(e),i=this.children.get(n);if(null!==i){const s=i.findRootMostMatchingPathAndValue(dt(e),t);if(null!=s){const e=vt(new ct(n),s.path);return{path:e,value:s.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,(()=>!0))}subtree(e){if(yt(e))return this;{const t=ut(e),n=this.children.get(t);return null!==n?n.subtree(dt(e)):new ri(null)}}set(e,t){if(yt(e))return new ri(t,this.children);{const n=ut(e),i=this.children.get(n)||new ri(null),s=i.set(dt(e),t),r=this.children.insert(n,s);return new ri(this.value,r)}}remove(e){if(yt(e))return this.children.isEmpty()?new ri(null):new ri(null,this.children);{const t=ut(e),n=this.children.get(t);if(n){const i=n.remove(dt(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new ri(null):new ri(this.value,s)}return this}}get(e){if(yt(e))return this.value;{const t=ut(e),n=this.children.get(t);return n?n.get(dt(e)):null}}setTree(e,t){if(yt(e))return t;{const n=ut(e),i=this.children.get(n)||new ri(null),s=i.setTree(dt(e),t);let r;return r=s.isEmpty()?this.children.remove(n):this.children.insert(n,s),new ri(this.value,r)}}fold(e){return this.fold_(lt(),e)}fold_(e,t){const n={};return this.children.inorderTraversal(((i,s)=>{n[i]=s.fold_(vt(e,i),t)})),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,lt(),t)}findOnPath_(e,t,n){const i=!!this.value&&n(t,this.value);if(i)return i;if(yt(e))return null;{const i=ut(e),s=this.children.get(i);return s?s.findOnPath_(dt(e),vt(t,i),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,lt(),t)}foreachOnPath_(e,t,n){if(yt(e))return this;{this.value&&n(t,this.value);const i=ut(e),s=this.children.get(i);return s?s.foreachOnPath_(dt(e),vt(t,i),n):new ri(null)}}foreach(e){this.foreach_(lt(),e)}foreach_(e,t){this.children.inorderTraversal(((n,i)=>{i.foreach_(vt(e,n),t)})),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal(((t,n)=>{n.value&&e(t,n.value)}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this.writeTree_=e}static empty(){return new oi(new ri(null))}}function ai(e,t,n){if(yt(t))return new oi(new ri(n));{const i=e.writeTree_.findRootMostValueAndPath(t);if(null!=i){const s=i.path;let r=i.value;const o=_t(s,t);return r=r.updateChild(o,n),new oi(e.writeTree_.set(s,r))}{const i=new ri(n),s=e.writeTree_.setTree(t,i);return new oi(s)}}}function ci(e,t,n){let i=e;return F(n,((e,n)=>{i=ai(i,vt(t,e),n)})),i}function li(e,t){if(yt(t))return oi.empty();{const n=e.writeTree_.setTree(t,new ri(null));return new oi(n)}}function ui(e,t){return null!=hi(e,t)}function hi(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(_t(n.path,t)):null}function di(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(rn,((e,n)=>{t.push(new $t(e,n))})):e.writeTree_.children.inorderTraversal(((e,n)=>{null!=n.value&&t.push(new $t(e,n.value))})),t}function pi(e,t){if(yt(t))return e;{const n=hi(e,t);return new oi(null!=n?new ri(n):e.writeTree_.subtree(t))}}function fi(e){return e.writeTree_.isEmpty()}function mi(e,t){return gi(lt(),e.writeTree_,t)}function gi(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let i=null;return t.children.inorderTraversal(((t,s)=>{".priority"===t?((0,r.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):n=gi(vt(e,t),s,n)})),n.getChild(e).isEmpty()||null===i||(n=n.updateChild(vt(e,".priority"),i)),n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(e,t){return Vi(t,e)}function yi(e,t,n,i,s){(0,r.hu)(i>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===s&&(s=!0),e.allWrites.push({path:t,snap:n,writeId:i,visible:s}),s&&(e.visibleWrites=ai(e.visibleWrites,t,n)),e.lastWriteId=i}function _i(e,t){for(let n=0;n<e.allWrites.length;n++){const i=e.allWrites[n];if(i.writeId===t)return i}return null}function wi(e,t){const n=e.allWrites.findIndex((e=>e.writeId===t));(0,r.hu)(n>=0,"removeWrite called with nonexistent writeId.");const i=e.allWrites[n];e.allWrites.splice(n,1);let s=i.visible,o=!1,a=e.allWrites.length-1;while(s&&a>=0){const t=e.allWrites[a];t.visible&&(a>=n&&bi(t,i.path)?s=!1:bt(i.path,t.path)&&(o=!0)),a--}if(s){if(o)return Ii(e),!0;if(i.snap)e.visibleWrites=li(e.visibleWrites,i.path);else{const t=i.children;F(t,(t=>{e.visibleWrites=li(e.visibleWrites,vt(i.path,t))}))}return!0}return!1}function bi(e,t){if(e.snap)return bt(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&bt(vt(e.path,n),t))return!0;return!1}function Ii(e){e.visibleWrites=Si(e.allWrites,Ci,lt()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}function Ci(e){return e.visible}function Si(e,t,n){let i=oi.empty();for(let s=0;s<e.length;++s){const o=e[s];if(t(o)){const e=o.path;let t;if(o.snap)bt(n,e)?(t=_t(n,e),i=ai(i,t,o.snap)):bt(e,n)&&(t=_t(e,n),i=ai(i,lt(),o.snap.getChild(t)));else{if(!o.children)throw(0,r.g5)("WriteRecord should have .snap or .children");if(bt(n,e))t=_t(n,e),i=ci(i,t,o.children);else if(bt(e,n))if(t=_t(e,n),yt(t))i=ci(i,lt(),o.children);else{const e=(0,r.DV)(o.children,ut(t));if(e){const n=e.getChild(dt(t));i=ai(i,lt(),n)}}}}}return i}function Ti(e,t,n,i,s){if(i||s){const r=pi(e.visibleWrites,t);if(!s&&fi(r))return n;if(s||null!=n||ui(r,lt())){const r=function(e){return(e.visible||s)&&(!i||!~i.indexOf(e.writeId))&&(bt(e.path,t)||bt(t,e.path))},o=Si(e.allWrites,r,t),a=n||pn.EMPTY_NODE;return mi(o,a)}return null}{const i=hi(e.visibleWrites,t);if(null!=i)return i;{const i=pi(e.visibleWrites,t);if(fi(i))return n;if(null!=n||ui(i,lt())){const e=n||pn.EMPTY_NODE;return mi(i,e)}return null}}}function Ei(e,t,n){let i=pn.EMPTY_NODE;const s=hi(e.visibleWrites,t);if(s)return s.isLeafNode()||s.forEachChild(rn,((e,t)=>{i=i.updateImmediateChild(e,t)})),i;if(n){const s=pi(e.visibleWrites,t);return n.forEachChild(rn,((e,t)=>{const n=mi(pi(s,new ct(e)),t);i=i.updateImmediateChild(e,n)})),di(s).forEach((e=>{i=i.updateImmediateChild(e.name,e.node)})),i}{const n=pi(e.visibleWrites,t);return di(n).forEach((e=>{i=i.updateImmediateChild(e.name,e.node)})),i}}function ki(e,t,n,i,s){(0,r.hu)(i||s,"Either existingEventSnap or existingServerSnap must exist");const o=vt(t,n);if(ui(e.visibleWrites,o))return null;{const t=pi(e.visibleWrites,o);return fi(t)?s.getChild(n):mi(t,s.getChild(n))}}function xi(e,t,n,i){const s=vt(t,n),r=hi(e.visibleWrites,s);if(null!=r)return r;if(i.isCompleteForChild(n)){const t=pi(e.visibleWrites,s);return mi(t,i.getNode().getImmediateChild(n))}return null}function Ai(e,t){return hi(e.visibleWrites,t)}function Ni(e,t,n,i,s,r,o){let a;const c=pi(e.visibleWrites,t),l=hi(c,lt());if(null!=l)a=l;else{if(null==n)return[];a=mi(c,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=r?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let c=n.getNext();while(c&&e.length<s)0!==t(c,i)&&e.push(c),c=n.getNext();return e}}function Oi(){return{visibleWrites:oi.empty(),allWrites:[],lastWriteId:-1}}function Di(e,t,n,i){return Ti(e.writeTree,e.treePath,t,n,i)}function Pi(e,t){return Ei(e.writeTree,e.treePath,t)}function Ri(e,t,n,i){return ki(e.writeTree,e.treePath,t,n,i)}function Li(e,t){return Ai(e.writeTree,vt(e.treePath,t))}function $i(e,t,n,i,s,r){return Ni(e.writeTree,e.treePath,t,n,i,s,r)}function Mi(e,t,n){return xi(e.writeTree,e.treePath,t,n)}function Fi(e,t){return Vi(vt(e.treePath,t),e.writeTree)}function Vi(e,t){return{treePath:e,writeTree:t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;(0,r.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,r.hu)(".priority"!==n,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(n);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(n,Sn(n,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(n,Cn(n,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(n,In(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,r.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(n,Sn(n,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}}const ji=new Ui;class zi{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new Zn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Mi(this.writes_,e,t)}}getChildAfterChild(e,t,n){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:ni(this.viewCache_),s=$i(this.writes_,i,t,1,n,e);return 0===s.length?null:s[0]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qi(e,t){(0,r.hu)(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),(0,r.hu)(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}function Hi(e,t,n,i,s){const o=new Bi;let a,c;if(n.type===Bn.OVERWRITE){const l=n;l.source.fromUser?a=Gi(e,t,l.path,l.snap,i,s,o):((0,r.hu)(l.source.fromServer,"Unknown source."),c=l.source.tagged||t.serverCache.isFiltered()&&!yt(l.path),a=Ki(e,t,l.path,l.snap,i,s,c,o))}else if(n.type===Bn.MERGE){const l=n;l.source.fromUser?a=Yi(e,t,l.path,l.children,i,s,o):((0,r.hu)(l.source.fromServer,"Unknown source."),c=l.source.tagged||t.serverCache.isFiltered(),a=Ji(e,t,l.path,l.children,i,s,c,o))}else if(n.type===Bn.ACK_USER_WRITE){const r=n;a=r.revert?ns(e,t,r.path,i,s,o):es(e,t,r.path,r.affectedTree,i,s,o)}else{if(n.type!==Bn.LISTEN_COMPLETE)throw(0,r.g5)("Unknown operation type: "+n.type);a=ts(e,t,n.path,i,o)}const l=o.getChanges();return Wi(t,a,l),{viewCache:a,changes:l}}function Wi(e,t,n){const i=t.eventCache;if(i.isFullyInitialized()){const s=i.getNode().isLeafNode()||i.getNode().isEmpty(),r=ti(e);(n.length>0||!e.eventCache.isFullyInitialized()||s&&!i.getNode().equals(r)||!i.getNode().getPriority().equals(r.getPriority()))&&n.push(bn(ti(t)))}}function Zi(e,t,n,i,s,o){const a=t.eventCache;if(null!=Li(i,n))return t;{let c,l;if(yt(n))if((0,r.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=ni(t),s=n instanceof pn?n:pn.EMPTY_NODE,r=Pi(i,s);c=e.filter.updateFullNode(t.eventCache.getNode(),r,o)}else{const n=Di(i,ni(t));c=e.filter.updateFullNode(t.eventCache.getNode(),n,o)}else{const u=ut(n);if(".priority"===u){(0,r.hu)(1===ht(n),"Can't have a priority with additional path components");const s=a.getNode();l=t.serverCache.getNode();const o=Ri(i,n,s,l);c=null!=o?e.filter.updatePriority(s,o):a.getNode()}else{const r=dt(n);let h;if(a.isCompleteForChild(u)){l=t.serverCache.getNode();const e=Ri(i,n,a.getNode(),l);h=null!=e?a.getNode().getImmediateChild(u).updateChild(r,e):a.getNode().getImmediateChild(u)}else h=Mi(i,u,t.serverCache);c=null!=h?e.filter.updateChild(a.getNode(),u,h,r,s,o):a.getNode()}}return Jn(t,c,a.isFullyInitialized()||yt(n),e.filter.filtersNodes())}}function Ki(e,t,n,i,s,r,o,a){const c=t.serverCache;let l;const u=o?e.filter:e.filter.getIndexedFilter();if(yt(n))l=u.updateFullNode(c.getNode(),i,null);else if(u.filtersNodes()&&!c.isFiltered()){const e=c.getNode().updateChild(n,i);l=u.updateFullNode(c.getNode(),e,null)}else{const e=ut(n);if(!c.isCompleteForPath(n)&&ht(n)>1)return t;const s=dt(n),r=c.getNode().getImmediateChild(e),o=r.updateChild(s,i);l=".priority"===e?u.updatePriority(c.getNode(),o):u.updateChild(c.getNode(),e,o,s,ji,null)}const h=ei(t,l,c.isFullyInitialized()||yt(n),u.filtersNodes()),d=new zi(s,h,r);return Zi(e,h,n,s,d,a)}function Gi(e,t,n,i,s,r,o){const a=t.eventCache;let c,l;const u=new zi(s,t,r);if(yt(n))l=e.filter.updateFullNode(t.eventCache.getNode(),i,o),c=Jn(t,l,!0,e.filter.filtersNodes());else{const s=ut(n);if(".priority"===s)l=e.filter.updatePriority(t.eventCache.getNode(),i),c=Jn(t,l,a.isFullyInitialized(),a.isFiltered());else{const r=dt(n),l=a.getNode().getImmediateChild(s);let h;if(yt(r))h=i;else{const e=u.getCompleteChild(s);h=null!=e?".priority"===pt(r)&&e.getChild(gt(r)).isEmpty()?e:e.updateChild(r,i):pn.EMPTY_NODE}if(l.equals(h))c=t;else{const n=e.filter.updateChild(a.getNode(),s,h,r,u,o);c=Jn(t,n,a.isFullyInitialized(),e.filter.filtersNodes())}}}return c}function Qi(e,t){return e.eventCache.isCompleteForChild(t)}function Yi(e,t,n,i,s,r,o){let a=t;return i.foreach(((i,c)=>{const l=vt(n,i);Qi(t,ut(l))&&(a=Gi(e,a,l,c,s,r,o))})),i.foreach(((i,c)=>{const l=vt(n,i);Qi(t,ut(l))||(a=Gi(e,a,l,c,s,r,o))})),a}function Xi(e,t,n){return n.foreach(((e,n)=>{t=t.updateChild(e,n)})),t}function Ji(e,t,n,i,s,r,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c,l=t;c=yt(n)?i:new ri(null).setTree(n,i);const u=t.serverCache.getNode();return c.children.inorderTraversal(((n,i)=>{if(u.hasChild(n)){const c=t.serverCache.getNode().getImmediateChild(n),u=Xi(e,c,i);l=Ki(e,l,new ct(n),u,s,r,o,a)}})),c.children.inorderTraversal(((n,i)=>{const c=!t.serverCache.isCompleteForChild(n)&&null===i.value;if(!u.hasChild(n)&&!c){const c=t.serverCache.getNode().getImmediateChild(n),u=Xi(e,c,i);l=Ki(e,l,new ct(n),u,s,r,o,a)}})),l}function es(e,t,n,i,s,r,o){if(null!=Li(s,n))return t;const a=t.serverCache.isFiltered(),c=t.serverCache;if(null!=i.value){if(yt(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return Ki(e,t,n,c.getNode().getChild(n),s,r,a,o);if(yt(n)){let i=new ri(null);return c.getNode().forEachChild(Bt,((e,t)=>{i=i.set(new ct(e),t)})),Ji(e,t,n,i,s,r,a,o)}return t}{let l=new ri(null);return i.foreach(((e,t)=>{const i=vt(n,e);c.isCompleteForPath(i)&&(l=l.set(e,c.getNode().getChild(i)))})),Ji(e,t,n,l,s,r,a,o)}}function ts(e,t,n,i,s){const r=t.serverCache,o=ei(t,r.getNode(),r.isFullyInitialized()||yt(n),r.isFiltered());return Zi(e,o,n,i,ji,s)}function ns(e,t,n,i,s,o){let a;if(null!=Li(i,n))return t;{const c=new zi(i,t,s),l=t.eventCache.getNode();let u;if(yt(n)||".priority"===ut(n)){let n;if(t.serverCache.isFullyInitialized())n=Di(i,ni(t));else{const e=t.serverCache.getNode();(0,r.hu)(e instanceof pn,"serverChildren would be complete if leaf node"),n=Pi(i,e)}u=e.filter.updateFullNode(l,n,o)}else{const s=ut(n);let r=Mi(i,s,t.serverCache);null==r&&t.serverCache.isCompleteForChild(s)&&(r=l.getImmediateChild(s)),u=null!=r?e.filter.updateChild(l,s,r,dt(n),c,o):t.eventCache.getNode().hasChild(s)?e.filter.updateChild(l,s,pn.EMPTY_NODE,dt(n),c,o):l,u.isEmpty()&&t.serverCache.isFullyInitialized()&&(a=Di(i,ni(t)),a.isLeafNode()&&(u=e.filter.updateFullNode(u,a,o)))}return a=t.serverCache.isFullyInitialized()||null!=Li(i,lt()),Jn(t,u,a,e.filter.filtersNodes())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function is(e,t){const n=ni(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!yt(t)&&!n.getImmediateChild(ut(t)).isEmpty())?n.getChild(t):null}function ss(e,t,n,i){t.type===Bn.MERGE&&null!==t.source.queryId&&((0,r.hu)(ni(e.viewCache_),"We should always have a full cache before handling merges"),(0,r.hu)(ti(e.viewCache_),"Missing event cache, even though we have a server cache"));const s=e.viewCache_,o=Hi(e.processor_,s,t,n,i);return qi(e.processor_,o.viewCache),(0,r.hu)(o.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,rs(e,o.changes,o.viewCache.eventCache.getNode(),null)}function rs(e,t,n,i){const s=i?[i]:e.eventRegistrations_;return Kn(e.eventGenerator_,t,n,s)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let os,as;function cs(e){(0,r.hu)(!os,"__referenceConstructor has already been defined"),os=e}function ls(e,t,n,i){const s=t.source.queryId;if(null!==s){const o=e.views.get(s);return(0,r.hu)(null!=o,"SyncTree gave us an op for an invalid query."),ss(o,t,n,i)}{let s=[];for(const r of e.views.values())s=s.concat(ss(r,t,n,i));return s}}function us(e,t){let n=null;for(const i of e.views.values())n=n||is(i,t);return n}function hs(e){(0,r.hu)(!as,"__referenceConstructor has already been defined"),as=e}class ds{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ri(null),this.pendingWriteTree_=Oi(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function ps(e,t,n,i,s){return yi(e.pendingWriteTree_,t,n,i,s),s?ws(e,new Hn(Un(),t,n)):[]}function fs(e,t,n=!1){const i=_i(e.pendingWriteTree_,t),s=wi(e.pendingWriteTree_,t);if(s){let t=new ri(null);return null!=i.snap?t=t.set(lt(),!0):F(i.children,(e=>{t=t.set(new ct(e),!0)})),ws(e,new qn(i.path,t,n))}return[]}function ms(e,t,n){return ws(e,new Hn(jn(),t,n))}function gs(e,t,n){const i=ri.fromObject(n);return ws(e,new Wn(jn(),t,i))}function vs(e,t,n,i){const s=Cs(e,i);if(null!=s){const i=Ss(s),r=i.path,o=i.queryId,a=_t(r,t),c=new Hn(zn(o),a,n);return Ts(e,r,c)}return[]}function ys(e,t,n,i){const s=Cs(e,i);if(s){const i=Ss(s),r=i.path,o=i.queryId,a=_t(r,t),c=ri.fromObject(n),l=new Wn(zn(o),a,c);return Ts(e,r,l)}return[]}function _s(e,t,n){const i=!0,s=e.pendingWriteTree_,r=e.syncPointTree_.findOnPath(t,((e,n)=>{const i=_t(e,t),s=us(n,i);if(s)return s}));return Ti(s,t,r,n,i)}function ws(e,t){return bs(t,e.syncPointTree_,null,vi(e.pendingWriteTree_,lt()))}function bs(e,t,n,i){if(yt(e.path))return Is(e,t,n,i);{const s=t.get(lt());null==n&&null!=s&&(n=us(s,lt()));let r=[];const o=ut(e.path),a=e.operationForChild(o),c=t.children.get(o);if(c&&a){const e=n?n.getImmediateChild(o):null,t=Fi(i,o);r=r.concat(bs(a,c,e,t))}return s&&(r=r.concat(ls(s,e,i,n))),r}}function Is(e,t,n,i){const s=t.get(lt());null==n&&null!=s&&(n=us(s,lt()));let r=[];return t.children.inorderTraversal(((t,s)=>{const o=n?n.getImmediateChild(t):null,a=Fi(i,t),c=e.operationForChild(t);c&&(r=r.concat(Is(c,s,o,a)))})),s&&(r=r.concat(ls(s,e,i,n))),r}function Cs(e,t){return e.tagToQueryMap.get(t)}function Ss(e){const t=e.indexOf("$");return(0,r.hu)(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new ct(e.substr(0,t))}}function Ts(e,t,n){const i=e.syncPointTree_.get(t);(0,r.hu)(i,"Missing sync point for query tag that we're tracking");const s=vi(e.pendingWriteTree_,t);return ls(i,n,s,null)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Es{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Es(t)}node(){return this.node_}}class ks{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=vt(this.path_,e);return new ks(this.syncTree_,t)}node(){return _s(this.syncTree_,this.path_)}}const xs=function(e){return e=e||{},e["timestamp"]=e["timestamp"]||(new Date).getTime(),e},As=function(e,t,n){return e&&"object"===typeof e?((0,r.hu)(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?Ns(e[".sv"],t,n):"object"===typeof e[".sv"]?Os(e[".sv"],t):void(0,r.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Ns=function(e,t,n){switch(e){case"timestamp":return n["timestamp"];default:(0,r.hu)(!1,"Unexpected server value: "+e)}},Os=function(e,t,n){e.hasOwnProperty("increment")||(0,r.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const i=e["increment"];"number"!==typeof i&&(0,r.hu)(!1,"Unexpected increment value: "+i);const s=t.node();if((0,r.hu)(null!==s&&"undefined"!==typeof s,"Expected ChildrenNode.EMPTY_NODE for nulls"),!s.isLeafNode())return i;const o=s,a=o.getValue();return"number"!==typeof a?i:a+i},Ds=function(e,t,n,i){return Rs(t,new ks(n,e),i)},Ps=function(e,t,n){return Rs(e,new Es(t),n)};function Rs(e,t,n){const i=e.getPriority().val(),s=As(i,t.getImmediateChild(".priority"),n);let r;if(e.isLeafNode()){const i=e,r=As(i.getValue(),t,n);return r!==i.getValue()||s!==i.getPriority().val()?new en(r,vn(s)):e}{const i=e;return r=i,s!==i.getPriority().val()&&(r=r.updatePriority(new en(s))),i.forEachChild(rn,((e,i)=>{const s=Rs(i,t.getImmediateChild(e),n);s!==i&&(r=r.updateImmediateChild(e,s))})),r}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}}function $s(e,t){let n=t instanceof ct?t:new ct(t),i=e,s=ut(n);while(null!==s){const e=(0,r.DV)(i.node.children,s)||{children:{},childCount:0};i=new Ls(s,i,e),n=dt(n),s=ut(n)}return i}function Ms(e){return e.node.value}function Fs(e,t){e.node.value=t,Hs(e)}function Vs(e){return e.node.childCount>0}function Bs(e){return void 0===Ms(e)&&!Vs(e)}function Us(e,t){F(e.node.children,((n,i)=>{t(new Ls(n,e,i))}))}function js(e,t,n,i){n&&!i&&t(e),Us(e,(e=>{js(e,t,!0,i)})),n&&i&&t(e)}function zs(e,t,n){let i=n?e:e.parent;while(null!==i){if(t(i))return!0;i=i.parent}return!1}function qs(e){return new ct(null===e.parent?e.name:qs(e.parent)+"/"+e.name)}function Hs(e){null!==e.parent&&Ws(e.parent,e.name,e)}function Ws(e,t,n){const i=Bs(n),s=(0,r.r3)(e.node.children,t);i&&s?(delete e.node.children[t],e.node.childCount--,Hs(e)):i||s||(e.node.children[t]=n.node,e.node.childCount++,Hs(e))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs=/[\[\].#$\/\u0000-\u001F\u007F]/,Ks=/[\[\].#$\u0000-\u001F\u007F]/,Gs=10485760,Qs=function(e){return"string"===typeof e&&0!==e.length&&!Zs.test(e)},Ys=function(e){return"string"===typeof e&&0!==e.length&&!Ks.test(e)},Xs=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Ys(e)},Js=function(e,t,n){const i=n instanceof ct?new It(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+Et(i));if("function"===typeof t)throw new Error(e+"contains a function "+Et(i)+" with contents = "+t.toString());if(A(t))throw new Error(e+"contains "+t.toString()+" "+Et(i));if("string"===typeof t&&t.length>Gs/3&&(0,r.ug)(t)>Gs)throw new Error(e+"contains a string greater than "+Gs+" utf8 bytes "+Et(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,s=!1;if(F(t,((t,r)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(s=!0,!Qs(t)))throw new Error(e+" contains an invalid key ("+t+") "+Et(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');Ct(i,t),Js(e,r,i),St(i)})),n&&s)throw new Error(e+' contains ".value" child '+Et(i)+" in addition to actual children.")}},er=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Qs(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!Xs(n))throw new Error((0,r.gK)(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class tr{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function nr(e,t){let n=null;for(let i=0;i<t.length;i++){const s=t[i],r=s.getPath();null===n||wt(r,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:r}),n.events.push(s)}n&&e.eventLists_.push(n)}function ir(e,t,n){nr(e,n),sr(e,(e=>bt(e,t)||bt(t,e)))}function sr(e,t){e.recursionDepth_++;let n=!0;for(let i=0;i<e.eventLists_.length;i++){const s=e.eventLists_[i];if(s){const r=s.path;t(r)?(rr(e.eventLists_[i]),e.eventLists_[i]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function rr(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const i=n.getEventRunner();w&&C("event: "+n.toString()),W(i)}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or="repo_interrupt",ar=25;class cr{constructor(e,t,n,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new tr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=On(),this.transactionQueueTree_=new Ls,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function lr(e,t,n){if(e.stats_=me(e.repoInfo_),e.forceRestClient_||Z())e.server_=new An(e.repoInfo_,((t,n,i,s)=>{dr(e,t,n,i,s)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((()=>pr(e,!0)),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,r.Wl)(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}e.persistentConnection_=new Lt(e.repoInfo_,t,((t,n,i,s)=>{dr(e,t,n,i,s)}),(t=>{pr(e,t)}),(t=>{fr(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((t=>{e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((t=>{e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=ge(e.repoInfo_,(()=>new Vn(e.stats_,e.server_))),e.infoData_=new Nn,e.infoSyncTree_=new ds({startListening:(t,n,i,s)=>{let r=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(r=ms(e.infoSyncTree_,t._path,o),setTimeout((()=>{s("ok")}),0)),r},stopListening:()=>{}}),mr(e,"connected",!1),e.serverSyncTree_=new ds({startListening:(t,n,i,s)=>(e.server_.listen(t,i,n,((n,i)=>{const r=s(n,i);ir(e.eventQueue_,t._path,r)})),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function ur(e){const t=e.infoData_.getNode(new ct(".info/serverTimeOffset")),n=t.val()||0;return(new Date).getTime()+n}function hr(e){return xs({timestamp:ur(e)})}function dr(e,t,n,i,s){e.dataUpdateCount++;const o=new ct(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let a=[];if(s)if(i){const t=(0,r.UI)(n,(e=>vn(e)));a=ys(e.serverSyncTree_,o,t,s)}else{const t=vn(n);a=vs(e.serverSyncTree_,o,t,s)}else if(i){const t=(0,r.UI)(n,(e=>vn(e)));a=gs(e.serverSyncTree_,o,t)}else{const t=vn(n);a=ms(e.serverSyncTree_,o,t)}let c=o;a.length>0&&(c=Cr(e,o)),ir(e.eventQueue_,c,a)}function pr(e,t){mr(e,"connected",t),!1===t&&vr(e)}function fr(e,t){F(t,((t,n)=>{mr(e,t,n)}))}function mr(e,t,n){const i=new ct("/.info/"+t),s=vn(n);e.infoData_.updateSnapshot(i,s);const r=ms(e.infoSyncTree_,i,s);ir(e.eventQueue_,i,r)}function gr(e){return e.nextWriteId_++}function vr(e){_r(e,"onDisconnectEvents");const t=hr(e),n=On();Pn(e.onDisconnect_,lt(),((i,s)=>{const r=Ds(i,s,e.serverSyncTree_,t);Dn(n,i,r)}));let i=[];Pn(n,lt(),((t,n)=>{i=i.concat(ms(e.serverSyncTree_,t,n));const s=Ar(e,t);Cr(e,s)})),e.onDisconnect_=On(),ir(e.eventQueue_,lt(),i)}function yr(e){e.persistentConnection_&&e.persistentConnection_.interrupt(or)}function _r(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),C(n,...t)}function wr(e,t,n){return _s(e.serverSyncTree_,t,n)||pn.EMPTY_NODE}function br(e,t=e.transactionQueueTree_){if(t||xr(e,t),Ms(t)){const n=Er(e,t);(0,r.hu)(n.length>0,"Sending zero length transaction queue");const i=n.every((e=>0===e.status));i&&Ir(e,qs(t),n)}else Vs(t)&&Us(t,(t=>{br(e,t)}))}function Ir(e,t,n){const i=n.map((e=>e.currentWriteId)),s=wr(e,t,i);let o=s;const a=s.hash();for(let u=0;u<n.length;u++){const e=n[u];(0,r.hu)(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const i=_t(t,e.path);o=o.updateChild(i,e.currentOutputSnapshotRaw)}const c=o.val(!0),l=t;e.server_.put(l.toString(),c,(i=>{_r(e,"transaction put response",{path:l.toString(),status:i});let s=[];if("ok"===i){const i=[];for(let t=0;t<n.length;t++)n[t].status=2,s=s.concat(fs(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&i.push((()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved))),n[t].unwatcher();xr(e,$s(e.transactionQueueTree_,t)),br(e,e.transactionQueueTree_),ir(e.eventQueue_,t,s);for(let e=0;e<i.length;e++)W(i[e])}else{if("datastale"===i)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{k("transaction at "+l.toString()+" failed: "+i);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=i}Cr(e,t)}}),a)}function Cr(e,t){const n=Tr(e,t),i=qs(n),s=Er(e,n);return Sr(e,s,i),i}function Sr(e,t,n){if(0===t.length)return;const i=[];let s=[];const o=t.filter((e=>0===e.status)),a=o.map((e=>e.currentWriteId));for(let c=0;c<t.length;c++){const o=t[c],l=_t(n,o.path);let u,h=!1;if((0,r.hu)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===o.status)h=!0,u=o.abortReason,s=s.concat(fs(e.serverSyncTree_,o.currentWriteId,!0));else if(0===o.status)if(o.retryCount>=ar)h=!0,u="maxretry",s=s.concat(fs(e.serverSyncTree_,o.currentWriteId,!0));else{const n=wr(e,o.path,a);o.currentInputSnapshot=n;const i=t[c].update(n.val());if(void 0!==i){Js("transaction failed: Data returned ",i,o.path);let t=vn(i);const c="object"===typeof i&&null!=i&&(0,r.r3)(i,".priority");c||(t=t.updatePriority(n.getPriority()));const l=o.currentWriteId,u=hr(e),h=Ps(t,n,u);o.currentOutputSnapshotRaw=t,o.currentOutputSnapshotResolved=h,o.currentWriteId=gr(e),a.splice(a.indexOf(l),1),s=s.concat(ps(e.serverSyncTree_,o.path,h,o.currentWriteId,o.applyLocally)),s=s.concat(fs(e.serverSyncTree_,l,!0))}else h=!0,u="nodata",s=s.concat(fs(e.serverSyncTree_,o.currentWriteId,!0))}ir(e.eventQueue_,n,s),s=[],h&&(t[c].status=2,function(e){setTimeout(e,Math.floor(0))}(t[c].unwatcher),t[c].onComplete&&("nodata"===u?i.push((()=>t[c].onComplete(null,!1,t[c].currentInputSnapshot))):i.push((()=>t[c].onComplete(new Error(u),!1,null)))))}xr(e,e.transactionQueueTree_);for(let r=0;r<i.length;r++)W(i[r]);br(e,e.transactionQueueTree_)}function Tr(e,t){let n,i=e.transactionQueueTree_;n=ut(t);while(null!==n&&void 0===Ms(i))i=$s(i,n),t=dt(t),n=ut(t);return i}function Er(e,t){const n=[];return kr(e,t,n),n.sort(((e,t)=>e.order-t.order)),n}function kr(e,t,n){const i=Ms(t);if(i)for(let s=0;s<i.length;s++)n.push(i[s]);Us(t,(t=>{kr(e,t,n)}))}function xr(e,t){const n=Ms(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,Fs(t,n.length>0?n:void 0)}Us(t,(t=>{xr(e,t)}))}function Ar(e,t){const n=qs(Tr(e,t)),i=$s(e.transactionQueueTree_,t);return zs(i,(t=>{Nr(e,t)})),Nr(e,i),js(i,(t=>{Nr(e,t)})),n}function Nr(e,t){const n=Ms(t);if(n){const i=[];let s=[],o=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?((0,r.hu)(o===t-1,"All SENT items should be at beginning of queue."),o=t,n[t].status=3,n[t].abortReason="set"):((0,r.hu)(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),s=s.concat(fs(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&i.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===o?Fs(t,void 0):n.length=o+1,ir(e.eventQueue_,qs(t),s);for(let e=0;e<i.length;e++)W(i[e])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Or(e){let t="";const n=e.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let e=n[s];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(i){}t+="/"+e}return t}function Dr(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const i=n.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):k(`Invalid query segment '${n}' in query '${e}'`)}return t}const Pr=function(e,t){const n=Rr(e),i=n.namespace;"firebase.com"===n.domain&&E(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),i&&"undefined"!==i||"localhost"===n.domain||E("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||x();const s="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new le(n.host,n.secure,i,s,t,"",i!==n.subdomain),path:new ct(n.pathString)}},Rr=function(e){let t="",n="",i="",s="",r="",o=!0,a="https",c=443;if("string"===typeof e){let l=e.indexOf("//");l>=0&&(a=e.substring(0,l-1),e=e.substring(l+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(s=Or(e.substring(u,h)));const d=Dr(e.substring(Math.min(e.length,h)));l=t.indexOf(":"),l>=0?(o="https"===a||"wss"===a,c=parseInt(t.substring(l+1),10)):l=t.length;const p=t.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{const e=t.indexOf(".");i=t.substring(0,e).toLowerCase(),n=t.substring(e+1),r=i}"ns"in d&&(r=d["ns"])}return{host:t,port:c,domain:n,subdomain:i,secure:o,scheme:a,pathString:s,namespace:r}},Lr="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";(function(){let e=0;const t=[]})();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class $r{constructor(e,t,n,i){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=i}get key(){return yt(this._path)?null:pt(this._path)}get ref(){return new Mr(this._repo,this._path)}get _queryIdentifier(){const e=xn(this._queryParams),t=$(e);return"{}"===t?"default":t}get _queryObject(){return xn(this._queryParams)}isEqual(e){if(e=(0,r.m9)(e),!(e instanceof $r))return!1;const t=this._repo===e._repo,n=wt(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&n&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+ft(this._path)}}class Mr extends $r{constructor(e,t){super(e,t,new En,!1)}get parent(){const e=gt(this._path);return null===e?null:new Mr(this._repo,e)}get root(){let e=this;while(null!==e.parent)e=e.parent;return e}}cs(Mr),hs(Mr);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Fr="FIREBASE_DATABASE_EMULATOR_HOST",Vr={};let Br=!1;function Ur(e,t,n,i){e.repoInfo_=new le(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0),i&&(e.authTokenProvider_=i)}function jr(e,t,n,i,s){let r=i||e.options.databaseURL;void 0===r&&(e.options.projectId||E("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),C("Using default host for project ",e.options.projectId),r=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o,a,c=Pr(r,s),l=c.repoInfo;"undefined"!==typeof process&&(a={NODE_ENV:"production",BASE_URL:"/"}[Fr]),a?(o=!0,r=`http://${a}?ns=${l.namespace}`,c=Pr(r,s),l=c.repoInfo):o=!c.repoInfo.secure;const u=s&&o?new Y(Y.OWNER):new Q(e.name,e.options,t);er("Invalid Firebase Database URL",c),yt(c.path)||E("Database URL must point to the root of a Firebase Database (not including a child path).");const h=qr(l,e,u,new G(e.name,n));return new Hr(h,e)}function zr(e,t){const n=Vr[t];n&&n[e.key]===e||E(`Database ${t}(${e.repoInfo_}) has already been deleted.`),yr(e),delete n[e.key]}function qr(e,t,n,i){let s=Vr[t.name];s||(s={},Vr[t.name]=s);let r=s[e.toURLString()];return r&&E("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),r=new cr(e,Br,n,i),s[e.toURLString()]=r,r}class Hr{constructor(e,t){this._repoInternal=e,this.app=t,this["type"]="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(lr(this._repoInternal,this.app.options.appId,this.app.options["databaseAuthVariableOverride"]),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Mr(this._repo,lt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(zr(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&E("Cannot call "+e+" on a deleted database.")}}function Wr(e=(0,i.getApp)(),t){const n=(0,i._getProvider)(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=(0,r.P0)("database");e&&Zr(n,...e)}return n}function Zr(e,t,n,i={}){e=(0,r.m9)(e),e._checkNotDeleted("useEmulator"),e._instanceStarted&&E("Cannot call useEmulator() after instance has already been initialized.");const s=e._repoInternal;let o;if(s.repoInfo_.nodeAdmin)i.mockUserToken&&E('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new Y(Y.OWNER);else if(i.mockUserToken){const t="string"===typeof i.mockUserToken?i.mockUserToken:(0,r.Sg)(i.mockUserToken,e.app.options.projectId);o=new Y(t)}Ur(s,t,n,o)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Kr(e){u(i.SDK_VERSION),(0,i._registerComponent)(new s.wA("database",((e,{instanceIdentifier:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return jr(n,i,s,t)}),"PUBLIC").setMultipleInstances(!0)),(0,i.registerVersion)(a,c,e),(0,i.registerVersion)(a,c,"esm2017")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lt.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Lt.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};Kr()}}]);
//# sourceMappingURL=chunk-vendors.9bb7a5ef.js.map